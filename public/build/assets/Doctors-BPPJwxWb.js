import{b as I,r as a,u as E,j as e,a as te,c as M}from"./app-CHmAHYu-.js";import{s as c}from"./toast-M5hNX0oq.js";import{u as ae}from"./confirmation-BfA4JEGl.js";import{B as h}from"./button-ChwiRyPe.js";import{I as re}from"./input-BPj6AWWm.js";import{A as ie,b as oe}from"./avatar-BtCwL2KE.js";import{B as n}from"./badge-Cnce-efU.js";import{d as le}from"./dialog-HjaLH6lU.js";import"./label-B65m6QKw.js";import{S as T,a as $,b as O,c as L,d as r}from"./select-C-klL9fb.js";import{T as ce,a as ne,b as P,f as d,d as de,e as m}from"./table2-BO0-gt3r.js";import{C as me}from"./CustomModal-qlCcqdzX.js";import he from"./EditDoctorModal-CHGdp-ZX.js";import"./AdminLayout-9W-WL7Wy.js";import{I as ue}from"./InputLabel-DoyXrcJT.js";import{C as x,a as pe,b as xe,e as je,c as y}from"./card-DBbiPc8t.js";import{D as fe,a as ve,b as ge,c as ye,d as F,e as j}from"./dropdown-menu-8M9OQ-IT.js";import"./alert-dialog-Bb0N_itY.js";import be from"./Sidebar-CMOnvyi5.js";import Ne from"./StaffLayout-Bbu3DvBS.js";import{m as u}from"./proxy-u0CWR7BN.js";import{S as we}from"./search-B3LjYI5L.js";import{F as Se}from"./filter-DNDuFDy3.js";import{S as b}from"./square-pen-CxDkRLRQ.js";import{E as De}from"./ellipsis-BjJdxKBX.js";import{A as Ce,a as Ae}from"./archive-DRWQyqdT.js";import{C as Ie}from"./chevron-left-CT36jf1G.js";import{C as Ee}from"./chevron-right-r-tKURHZ.js";import"./Subservices-hmtw6ece.js";import"./Toaster-Bgx1_qta.js";import"./toast-CAtB-aU6.js";import"./index-2qu7vwLc.js";import"./utils-DnUyQCA6.js";import"./index-CYMpX3E5.js";import"./index-CmqNn0LS.js";import"./index-BjJdp2-0.js";import"./refresh-cw-Bw-1gIt8.js";import"./createLucideIcon-DiRkYF3I.js";import"./save-BxXThWak.js";import"./download-CJfgDCNK.js";import"./trash-2-D9UIUsgO.js";import"./info-DBS1sptf.js";import"./triangle-alert-BqmPOXrb.js";import"./circle-x-C6dCsmyT.js";import"./circle-check-B9GIx2HK.js";import"./Combination-DUkbLZrH.js";import"./index-Db9BPqZ8.js";import"./index-DuaP1el2.js";import"./index-BTsu8x5p.js";import"./index-Da62_rko.js";import"./textarea-upTaDSg0.js";import"./stethoscope-CvenzO2s.js";import"./x-hh3rg39X.js";import"./separator-D9NJ7C8W.js";import"./moment-C5S46NFB.js";import"./popover-BtpiBUVW.js";import"./format-Dp3w_Y3x.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./TextInput-CGuPODEu.js";import"./settings-DOVGbSap.js";import"./house-1B4ceBAE.js";import"./calendar-DP61lksy.js";import"./users-CIf0kQAe.js";import"./pusher-Iryyy0JQ.js";import"./printer-leDlUT32.js";import"./file-text-lhyJHkLH.js";import"./package-2mJDRxNG.js";import"./circle-check-big-B1iSVeIy.js";import"./pill-D9dQZu5T.js";import"./bell-CMnzRPyV.js";import"./index-uk-MvJxd.js";import"./autoprefixer-C5OKt-YQ.js";import"./layers-HzxRhVBG.js";import"./chart-column-BlAs_qHe.js";import"./index-CplhEpNv.js";import"./alert-DKKjFVkQ.js";import"./shield-BOpraV2u.js";import"./PrimaryButton-BJmacXQe.js";import"./circle-plus-DQ1mUPti.js";function It({doctorsitems:U,doctors:f,questions:Me}){const{flash:l}=I().props,[Te,$e]=a.useState(!1),[Oe,p]=a.useState(!1),[Le,Pe]=a.useState(!1),[B,N]=a.useState(!1),[w,v]=a.useState(null),{confirmArchive:R,confirmUnarchive:k,ConfirmationDialog:z}=ae();a.useEffect(()=>{l&&l.message&&c(l.title,l.message,l.icon)},[l]);const{data:Fe,setData:Ue,post:Be,processing:Re,errors:ke,clearErrors:ze,reset:Ve}=E({first_name:"",middlename:"",last_name:"",suffix:"",contactNumber:"",email:"",password:"",confirmPassword:"",gender:"",birth:"",isAdmin:"true"}),V=s=>{v(s),N(!0)},_=()=>{N(!1),v(null)},H=s=>{window.location.reload()},[_e,He]=a.useState(!1),[qe,Qe]=a.useState(!1),[We,Ge]=a.useState(""),[Je,Ke]=a.useState(""),[Xe,q]=a.useState(1),S=s=>{D("status",s.status.toString()),v(s),q(s.status),A(!0)},{data:Q,setData:D,post:W,processing:G,errors:Ye,clearErrors:Ze,reset:es}=E({status:""}),g=s=>{A(!1)},J=s=>{s.preventDefault(),W(route("doctor.update.status",{doctor:w.id}),{onSuccess:t=>{g(),c("Success!","Doctor status updated successfully","success","update")}})},[ss,K]=a.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:""}),C=(s,t,o,i)=>{K({isOpen:!0,title:s,message:t,onConfirm:o,type:i})},X=s=>{const t=`${s.user?.firstname} ${s.user?.lastname}`;R(t,()=>{const o=toast.loading(`Archiving ${t}'s account...`,{position:"top-right"});p(!0),M.post(route("admin.staff.archive"),{staff_id:s.id}).then(i=>{toast.dismiss(o),c("Account Archived",`${t}'s account has been archived successfully.`,"success","archive"),window.location.reload()}).catch(i=>{toast.dismiss(o),c("Archive Failed",`There was a problem archiving ${t}'s account: ${i.response?.data?.message||"Please try again."}`,"error"),console.error("Error archiving staff:",i)}).finally(()=>{p(!1)})})},Y=s=>{const t=`${s.user?.firstname} ${s.user?.lastname}`;k(t,()=>{const o=toast.loading(`Unarchiving ${t}'s account...`,{position:"top-right"});p(!0),M.post(route("admin.staff.unarchive"),{staff_id:s.id}).then(i=>{toast.dismiss(o),c("Account Unarchived",`${t}'s account has been unarchived successfully.`,"success","unarchive"),window.location.reload()}).catch(i=>{toast.dismiss(o),c("Unarchive Failed",`There was a problem unarchiving ${t}'s account: ${i.response?.data?.message||"Please try again."}`,"error"),console.error("Error unarchiving staff:",i)}).finally(()=>{p(!1)})})},Z=s=>{if(!s||!s.status)return null;switch(s.status){case 1:return e.jsx(n,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Available"});case 2:return e.jsx(n,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:"Inactive"});case 3:return e.jsx(n,{className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:"On Leave"});case 4:return e.jsx(n,{className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:"In Consultation"});case 5:return e.jsx(n,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"Archived"});default:return e.jsx(n,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:"Unknown"})}},[ee,A]=a.useState(!1),{links:se}=I().props.doctors;return e.jsxs(Ne,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Doctors"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage medical professionals and their availability"})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-8",children:[e.jsx(be,{activeTab:"doctors"}),e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(x,{className:"shadow-lg border-0",children:e.jsx(pe,{children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{children:[e.jsx(xe,{className:"text-2xl font-bold text-gray-900",children:"All Doctors"}),e.jsx(je,{className:"text-gray-600 mt-1",children:"Manage and configure doctor profiles"})]})})})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(x,{className:"shadow-lg border-0",children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(re,{placeholder:"Search doctors...",className:"pl-10 border-2 focus:border-green-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"h-4 w-4 text-gray-500"}),e.jsxs(T,{children:[e.jsx($,{className:"w-[180px] border-2",children:e.jsx(O,{placeholder:"Filter by status"})}),e.jsxs(L,{children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"1",children:"Available"}),e.jsx(r,{value:"2",children:"Inactive"}),e.jsx(r,{value:"3",children:"On Leave"}),e.jsx(r,{value:"4",children:"In Consultation"}),e.jsx(r,{value:"5",children:"Archived"})]})]})]})]})})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(x,{className:"shadow-lg border-0 overflow-hidden",children:e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ce,{children:[e.jsx(ne,{className:"bg-gray-50",children:e.jsxs(P,{children:[e.jsx(d,{children:"ID"}),e.jsx(d,{children:"Doctor"}),e.jsx(d,{children:"Specialization"}),e.jsx(d,{children:"Contact Information"}),e.jsx(d,{children:"Status"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(de,{children:U.map(s=>e.jsxs(P,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(m,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:["DOC-",s.id]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"h-10 w-10",children:e.jsxs(oe,{className:"bg-green-100 text-green-700 font-semibold",children:[s.user?.firstname?.charAt(0),s.user?.lastname?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.user?.firstname," ",s.user?.lastname]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Doctor"})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"text-sm text-gray-700",children:s.specialty?.specialty||"Not Set"})}),e.jsx(m,{children:e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("div",{children:s.user?.contactno||"Not provided"}),e.jsx("div",{className:"text-gray-500",children:s.user?.email})]})}),e.jsx(m,{children:Z(s)}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-green-100 hover:text-green-600",onClick:()=>S(s),title:"Edit status",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsxs(fe,{children:[e.jsx(ve,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(ge,{align:"end",children:[e.jsx(ye,{children:"Actions"}),e.jsx(F,{}),e.jsxs(j,{onClick:()=>V(s),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Edit Doctor"]}),e.jsxs(j,{onClick:()=>S(s),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Edit Status"]}),e.jsx(F,{}),s.status===5?e.jsxs(j,{onClick:()=>C("Unarchive Doctor",`Are you sure you want to unarchive ${s.user.firstname} ${s.user.lastname}'s account?`,()=>Y(s),"unarchive"),className:"text-green-600",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(j,{onClick:()=>C("Archive Doctor",`Are you sure you want to archive ${s.user.firstname} ${s.user.lastname}'s account?`,()=>X(s),"archive"),className:"text-red-600",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})})]},s.id))})]})})})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(x,{className:"shadow-lg border-0",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",f.from," to ",f.to," of ",f.total," Results"]}),e.jsx("div",{className:"flex items-center gap-2",children:se.map((s,t)=>e.jsx(h,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url||s.active,onClick:()=>{s.url&&te.get(s.url)},children:s.label.includes("Previous")?e.jsx(Ie,{className:"h-4 w-4"}):s.label.includes("Next")?e.jsx(Ee,{className:"h-4 w-4"}):s.label},t))})]})})})})]})]})]}),e.jsx(me,{isOpen:ee,maxWidth:"sm",onClose:g,children:e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(ue,{htmlFor:"status",className:"text-right",children:"Status"}),e.jsxs(T,{value:Q.status,onValueChange:s=>{D("status",s)},children:[e.jsx($,{className:"col-span-3",children:e.jsx(O,{placeholder:"Select status"})}),e.jsxs(L,{children:[e.jsx(r,{value:"1",children:"Available"}),e.jsx(r,{value:"2",children:"Inactive"}),e.jsx(r,{value:"4",children:"In Consultation"}),e.jsx(r,{value:"3",children:"On Leave"}),e.jsx(r,{value:"5",children:"Archived"})]})]})]})}),e.jsxs(le,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:g,children:"Cancel"}),e.jsx(h,{type:"button",disabled:G,onClick:J,children:"Save"})]})]})}),e.jsx(z,{}),e.jsx(he,{doctor:w,isOpen:B,onClose:_,onSuccess:H})]})}export{It as default};
