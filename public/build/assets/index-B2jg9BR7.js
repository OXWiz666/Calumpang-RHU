import{r as o,j as g,f as X}from"./app-G8iqleJv.js";import{c as R}from"./index-3LKL4iwc.js";import{u as U,P as D,d as Y}from"./index-DHagqIMV.js";import{a as F,u as J}from"./index-DdMWTZ3t.js";function Q(e,t=globalThis==null?void 0:globalThis.document){const n=F(e);o.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var Z="DismissableLayer",I="dismissableLayer.update",$="dismissableLayer.pointerDownOutside",ee="dismissableLayer.focusOutside",M,G=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),te=o.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:u,onInteractOutside:f,onDismiss:r,...L}=e,c=o.useContext(G),[l,O]=o.useState(null),y=(l==null?void 0:l.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=o.useState({}),S=U(t,d=>O(d)),i=Array.from(c.layers),[P]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=i.indexOf(P),b=l?i.indexOf(l):-1,m=c.layersWithOutsidePointerEventsDisabled.size>0,v=b>=E,C=re(d=>{const T=d.target,k=[...c.branches].some(N=>N.contains(T));!v||k||(a==null||a(d),f==null||f(d),d.defaultPrevented||r==null||r())},y),_=oe(d=>{const T=d.target;[...c.branches].some(N=>N.contains(T))||(u==null||u(d),f==null||f(d),d.defaultPrevented||r==null||r())},y);return Q(d=>{b===c.layers.size-1&&(s==null||s(d),!d.defaultPrevented&&r&&(d.preventDefault(),r()))},y),o.useEffect(()=>{if(l)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(M=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(l)),c.layers.add(l),B(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=M)}},[l,y,n,c]),o.useEffect(()=>()=>{l&&(c.layers.delete(l),c.layersWithOutsidePointerEventsDisabled.delete(l),B())},[l,c]),o.useEffect(()=>{const d=()=>p({});return document.addEventListener(I,d),()=>document.removeEventListener(I,d)},[]),g.jsx(D.div,{...L,ref:S,style:{pointerEvents:m?v?"auto":"none":void 0,...e.style},onFocusCapture:R(e.onFocusCapture,_.onFocusCapture),onBlurCapture:R(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:R(e.onPointerDownCapture,C.onPointerDownCapture)})});te.displayName=Z;var ne="DismissableLayerBranch",se=o.forwardRef((e,t)=>{const n=o.useContext(G),s=o.useRef(null),a=U(t,s);return o.useEffect(()=>{const u=s.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),g.jsx(D.div,{...e,ref:a})});se.displayName=ne;function re(e,t=globalThis==null?void 0:globalThis.document){const n=F(e),s=o.useRef(!1),a=o.useRef(()=>{});return o.useEffect(()=>{const u=r=>{if(r.target&&!s.current){let L=function(){q($,n,c,{discrete:!0})};const c={originalEvent:r};r.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=L,t.addEventListener("click",a.current,{once:!0})):L()}else t.removeEventListener("click",a.current);s.current=!1},f=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(f),t.removeEventListener("pointerdown",u),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function oe(e,t=globalThis==null?void 0:globalThis.document){const n=F(e),s=o.useRef(!1);return o.useEffect(()=>{const a=u=>{u.target&&!s.current&&q(ee,n,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function B(){const e=new CustomEvent(I);document.dispatchEvent(e)}function q(e,t,n,{discrete:s}){const a=n.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?Y(a,u):a.dispatchEvent(u)}var w=0;function Pe(){o.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??K()),document.body.insertAdjacentElement("beforeend",e[1]??K()),w++,()=>{w===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),w--}},[])}function K(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var x="focusScope.autoFocusOnMount",A="focusScope.autoFocusOnUnmount",W={bubbles:!1,cancelable:!0},ae="FocusScope",ie=o.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:u,...f}=e,[r,L]=o.useState(null),c=F(a),l=F(u),O=o.useRef(null),y=U(t,i=>L(i)),p=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(s){let i=function(m){if(p.paused||!r)return;const v=m.target;r.contains(v)?O.current=v:h(O.current,{select:!0})},P=function(m){if(p.paused||!r)return;const v=m.relatedTarget;v!==null&&(r.contains(v)||h(O.current,{select:!0}))},E=function(m){if(document.activeElement===document.body)for(const C of m)C.removedNodes.length>0&&h(r)};document.addEventListener("focusin",i),document.addEventListener("focusout",P);const b=new MutationObserver(E);return r&&b.observe(r,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",P),b.disconnect()}}},[s,r,p.paused]),o.useEffect(()=>{if(r){H.add(p);const i=document.activeElement;if(!r.contains(i)){const E=new CustomEvent(x,W);r.addEventListener(x,c),r.dispatchEvent(E),E.defaultPrevented||(ue(Ee(V(r)),{select:!0}),document.activeElement===i&&h(r))}return()=>{r.removeEventListener(x,c),setTimeout(()=>{const E=new CustomEvent(A,W);r.addEventListener(A,l),r.dispatchEvent(E),E.defaultPrevented||h(i??document.body,{select:!0}),r.removeEventListener(A,l),H.remove(p)},0)}}},[r,c,l,p]);const S=o.useCallback(i=>{if(!n&&!s||p.paused)return;const P=i.key==="Tab"&&!i.altKey&&!i.ctrlKey&&!i.metaKey,E=document.activeElement;if(P&&E){const b=i.currentTarget,[m,v]=ce(b);m&&v?!i.shiftKey&&E===v?(i.preventDefault(),n&&h(m,{select:!0})):i.shiftKey&&E===m&&(i.preventDefault(),n&&h(v,{select:!0})):E===b&&i.preventDefault()}},[n,s,p.paused]);return g.jsx(D.div,{tabIndex:-1,...f,ref:y,onKeyDown:S})});ie.displayName=ae;function ue(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(h(s,{select:t}),document.activeElement!==n)return}function ce(e){const t=V(e),n=j(t,e),s=j(t.reverse(),e);return[n,s]}function V(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function j(e,t){for(const n of e)if(!de(n,{upTo:t}))return n}function de(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function le(e){return e instanceof HTMLInputElement&&"select"in e}function h(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&le(e)&&t&&e.select()}}var H=fe();function fe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=z(e,t),e.unshift(t)},remove(t){var n;e=z(e,t),(n=e[0])==null||n.resume()}}}function z(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Ee(e){return e.filter(t=>t.tagName!=="A")}var ve="Portal",me=o.forwardRef((e,t)=>{var r;const{container:n,...s}=e,[a,u]=o.useState(!1);J(()=>u(!0),[]);const f=n||a&&((r=globalThis==null?void 0:globalThis.document)==null?void 0:r.body);return f?X.createPortal(g.jsx(D.div,{...s,ref:t}),f):null});me.displayName=ve;export{te as D,ie as F,me as P,Pe as u};
