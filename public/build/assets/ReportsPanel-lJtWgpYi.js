import{r as x,j as e}from"./app-9IFjvyjq.js";import{C as A,a as M,b as P,c as R}from"./card-BZqhk5Ws.js";import{B as h}from"./button-BWLYpXz0.js";import{S as u,a as b,b as w,c as v,d as n}from"./select-p8YEwkY-.js";import{P as F,a as V,b as U,C as B}from"./popover-D55FYzXF.js";import{c as k}from"./utils-Dqxj4mrw.js";import{C as G}from"./calendar-DQr9f7aC.js";import{a as O}from"./isBefore-CNJkrGzj.js";import{f as o}from"./format-BtYX0kVO.js";import{T as Q,a as $,b as S,c as C}from"./tabs-B5MwLVSX.js";import{m as q}from"./proxy-D62Q3uN7.js";import{F as H}from"./file-text-2oyp6bUV.js";import{P as i}from"./package-CHcp06gv.js";import{T}from"./triangle-alert-BkHbl9Bl.js";import{C as D}from"./clock-Bzel8gwe.js";import{T as m}from"./trending-up-_LM6MF-k.js";import{T as z}from"./trending-down-Df83Rv-z.js";import{U as J}from"./user-D9cpmg_I.js";import{C as K}from"./chart-column-Bqapy0n2.js";import{D as W}from"./download-QcLop-d6.js";import"./index-C6jRhQFj.js";import"./react-icons.esm-CBUbwQJY.js";import"./index-5FqUdhJW.js";import"./Combination-BD7y2hDp.js";import"./index-DMLVHKle.js";import"./index-ZSsit5F4.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./isSameMonth-CLqEvLGB.js";import"./index-iJsz53jB.js";import"./createLucideIcon-DsPw26Nq.js";import"./index-B9uMoLSe.js";function X({className:d}){const[a,t]=x.useState({from:O(new Date,-20),to:new Date});return e.jsx("div",{className:k("grid gap-2",d),children:e.jsxs(F,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(h,{id:"date",variant:"outline",className:k("w-[300px] justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),a!=null&&a.from?a.to?e.jsxs(e.Fragment,{children:[o(a.from,"LLL dd, y")," -"," ",o(a.to,"LLL dd, y")]}):o(a.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(U,{className:"w-auto p-0",align:"start",children:e.jsx(B,{autoFocus:!0,mode:"range",defaultMonth:a==null?void 0:a.from,selected:a,onSelect:t,numberOfMonths:2})})]})})}const Le=({items:d,movements:a})=>{x.useEffect(()=>{a&&console.log("movements: ",a)},[a]);const[t,_]=x.useState({category:"All",stockStatus:"All"}),[g,L]=x.useState(),E=["All",...Array.from(new Set(d.map(s=>s.category.name)))],p=d.filter(s=>{var r;if(t.category&&t.category!=="All"&&s.category.id!==t.category)return!1;if(t.stockStatus){const l=((r=s.stock[0])==null?void 0:r.stocks)<=5,c=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3;if(t.stockStatus==="Low"&&!l||t.stockStatus==="Expiring"&&!c||t.stockStatus==="Normal"&&(l||c))return!1}return!0}),I=()=>{console.log("Generating report with filters:",t,g),alert("Report generated! In a real application, this would download a PDF or CSV file.")};return e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(A,{className:"w-full border-gray-100 shadow-sm",children:[e.jsx(M,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-100",children:e.jsxs(P,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(H,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-semibold text-gray-900",children:"Inventory Reports"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Generate and view inventory reports"})]})]})}),e.jsx(R,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(i,{className:"h-4 w-4 text-gray-500"}),"Category"]}),e.jsxs(u,{children:[e.jsx(b,{className:"h-11 border-gray-300",children:e.jsx(w,{placeholder:"Select category"})}),e.jsx(v,{children:E.map(s=>e.jsx(n,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-gray-500"}),"Stock Status"]}),e.jsxs(u,{value:t.stockStatus,onValueChange:s=>_({...t,stockStatus:s}),children:[e.jsx(b,{className:"h-11 border-gray-300",children:e.jsx(w,{placeholder:"Select status"})}),e.jsxs(v,{children:[e.jsx(n,{value:"All",children:"All Items"}),e.jsx(n,{value:"Low",children:"Low Stock"}),e.jsx(n,{value:"Expiring",children:"Expiring Soon"}),e.jsx(n,{value:"Normal",children:"Normal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-gray-500"}),"Date Range"]}),e.jsx(X,{selected:g,onSelect:L})]})]}),e.jsxs(Q,{defaultValue:"inventory",children:[e.jsxs($,{className:"grid w-full md:grid-cols-2 grid-cols-1 bg-gray-100",children:[e.jsxs(S,{value:"inventory",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Inventory Status"]}),e.jsxs(S,{value:"movements",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Stock Movements"]})]}),e.jsx(C,{value:"inventory",className:"pt-6",children:e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Item Name"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Category"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Quantity"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Expiration"})]})}),e.jsx("tbody",{children:p.length>0?p.map(s=>{var c,j,f,y,N;const r=((c=s.stock[0])==null?void 0:c.stocks)<=5,l=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3;return e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(i,{className:"h-4 w-4 text-blue-600"})}),e.jsx("span",{className:"font-medium text-gray-900",children:s.stocks_movement[0].inventory_name})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:s.category.name})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.stock[0].stocks??0," ",(j=s==null?void 0:s.stock[0])==null?void 0:j.stockname,"s"]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r&&e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),"Low Stock"]}),l&&e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),"Expiring Soon"]}),!r&&!l&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Normal"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-gray-700",children:s.stocks_movement[0].expiry_date?o(new Date((N=(y=s==null?void 0:s.stocks_movement)==null?void 0:y[((f=s==null?void 0:s.stocks_movement)==null?void 0:f.length)-1])==null?void 0:N.expiry_date),"MMM dd, yyyy"):"N/A"})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(i,{className:"h-12 w-12 text-gray-300"}),e.jsx("div",{className:"text-gray-500 font-medium",children:"No items match the selected filters"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Try adjusting your filter criteria"})]})})})})]})})}),e.jsx(C,{value:"movements",className:"pt-6",children:e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Date"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Batch Number"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Item"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Type"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Quantity"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Reason"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Staff"})]})}),e.jsx("tbody",{children:a.length>0?a.map(s=>{var r;return e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-gray-700",children:o(new Date(s.created_at),"MMM dd, yyyy")})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-mono",children:(s==null?void 0:s.batch_number)||"N/A"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:(s==null?void 0:s.inventory_name)||"Unknown Item"})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 w-fit ${s.type==="Incoming"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[s.type==="Incoming"?e.jsx(m,{className:"h-3 w-3"}):e.jsx(z,{className:"h-3 w-3"}),s.type==="Incoming"?"Incoming":"Outgoing"]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.quantity," ",(r=s==null?void 0:s.stocks)==null?void 0:r.stockname]})}),e.jsx("td",{className:"p-4",children:s.reason?e.jsx("span",{className:"text-gray-700",children:s.reason}):e.jsx("span",{className:"text-gray-400 italic",children:"No reason provided"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-blue-50 rounded",children:e.jsx(J,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("span",{className:"text-gray-700",children:[s.staff.firstname," ",s.staff.lastname]})]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(m,{className:"h-12 w-12 text-gray-300"}),e.jsx("div",{className:"text-gray-500 font-medium",children:"No movements match the selected filters"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Try adjusting your filter criteria"})]})})})})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-100",children:[e.jsxs(h,{variant:"outline",className:"flex items-center gap-2 h-11 border-gray-300 hover:bg-gray-50",children:[e.jsx(K,{className:"h-4 w-4"}),"View Analytics"]}),e.jsxs(h,{onClick:I,className:"flex items-center gap-2 h-11 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",children:[e.jsx(W,{className:"h-4 w-4"}),"Generate Report"]})]})]})})]})})};export{Le as default};
