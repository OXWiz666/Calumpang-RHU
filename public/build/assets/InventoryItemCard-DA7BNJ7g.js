import{u as I,j as e,r as x}from"./app-BQNQ1hxz.js";import{r as m}from"./vendor-DkBadjUr.js";import{C as S,a as E,b as T,c as U,d as M}from"./card-DxRDYgYT.js";import{B as d}from"./badge-BsLbRo5f.js";import{B as r}from"./button-C7_v29ma.js";import{C as p}from"./CustomModal-D2uGrj1K.js";import{I as $}from"./InputLabel-gxd4bUa6.js";import"./label-BVBpM07b.js";import{I as B}from"./input-DDD8PP7k.js";import{d as h}from"./dialog-IT4MXJ9f.js";import{m as F}from"./proxy-or7Emd4Q.js";import{P as L}from"./package-L7rgkkVO.js";import{T as z}from"./triangle-alert-BslwqqvL.js";import{C as P}from"./clock-D6yUBuGv.js";import{C as q}from"./chevron-up-BdDu7vFg.js";import{C as A}from"./chevron-down-CEiCHn75.js";import{T as u}from"./trending-up-BFbz08q-.js";import{S as O}from"./square-pen-Bb1JtfBr.js";import{T as V}from"./trash-2-DJ5zXW8D.js";import{f as g}from"./format-Dp3w_Y3x.js";import"./pusher-DVtoYAOu.js";import"./index-DQ-l7Ake.js";import"./select-DwMKtLqO.js";import"./react-icons.esm-BefAJGKT.js";import"./index-PLEIzJXc.js";import"./index-BUQg9ox6.js";import"./index-CWXeSRhr.js";import"./tslib.es6-M_FJ09fS.js";import"./index-CV51u0vQ.js";import"./index-BhPb3ZPm.js";import"./index-DqxisvwK.js";import"./index-BiPSP1fc.js";import"./index-CHuFBonQ.js";import"./createLucideIcon-BKWaAi2G.js";const De=({item:s,onUpdateClick:b})=>{const[o,f]=m.useState(!1),n=s?.stock[0]?.stocks<=5,i=s?.stocks_movement?.[s?.stocks_movement?.length-1]?.expiry_date&&new Date(s?.stocks_movement?.[s?.stocks_movement?.length-1]?.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,j=t=>{switch(t){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},{data:v,setData:y,post:W,recentlySuccessful:H,processing:c,errors:R,put:N,delete:C}=I({itemname:s?.name,categoryid:s?.category_id}),[k,l]=m.useState(!1),[w,a]=m.useState(!1),_=t=>{t.preventDefault(),N(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{x.reload({only:["flash","inventory"]})},onSuccess:()=>{a(!1)}})},D=t=>{t.preventDefault(),C(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{x.reload({only:["flash","inventory"]})},onSuccess:()=>{a(!1)}})};return e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(S,{className:`mb-4 hover:shadow-md transition-all duration-200 ${n?"border-red-200 bg-red-50/30":i?"border-amber-200 bg-amber-50/30":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(E,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(L,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(T,{className:"text-lg font-semibold text-gray-900 mb-1",children:s.name}),s?.stocks_movement?.[0]?.batch_number&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Batch Number:"}),e.jsx("p",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded text-gray-700",children:s?.stocks_movement?.[0]?.batch_number})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{className:`${j(s.category.name)} border-0`,children:s.category.name}),n&&e.jsxs(d,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),"Low Stock"]}),i&&s.expirationDate&&e.jsxs(d,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),"Expiring Soon"]})]})]})]})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>f(!o),className:"h-8 w-8 p-0 hover:bg-gray-100",children:o?e.jsx(q,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})})]})}),e.jsxs(U,{className:"pb-3",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Current Stock"}),e.jsxs("p",{className:`text-2xl font-bold ${n?"text-red-600":"text-gray-900"}`,children:[s.stock[0]?.stocks," ",s.stock[0]?.stockname]})]}),e.jsx("div",{className:"p-3 bg-white rounded-lg",children:e.jsx(u,{className:`h-6 w-6 ${n?"text-red-500":"text-green-500"}`})})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors font-medium",onClick:()=>{a(!0)},children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1 hover:bg-red-50 hover:border-red-300 hover:text-red-600 transition-colors font-medium",onClick:t=>{l(!0)},children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Delete Item"]})]}),e.jsxs(p,{isOpen:w,onClose:t=>{a(!1)},title:"Updating an Item",description:`Update ${s?.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx($,{value:"Item Name*"}),e.jsx(B,{value:v?.itemname,onChange:t=>y("itemname",t.target.value)})]}),e.jsxs(h,{className:"pt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:t=>{a(!1)},children:"Cancel"}),e.jsx(r,{className:"bg-primary hover:bg-primary/90",disabled:c,onClick:_,children:"Update Item"})]})]}),e.jsx(p,{isOpen:k,onClose:t=>{l(!1)},title:"Deleting an Item.",description:`Are you sure you want to delete this item ${s?.name}?`,maxWidth:"md",children:e.jsxs(h,{className:"pt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:t=>{l(!1)},children:"Cancel"}),e.jsx(r,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:c,onClick:D,children:"Delete Item"})]})}),o&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s?.stocks_movement?.[0]?.expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${i?"text-amber-600":""}`,children:g(new Date(s?.stocks_movement?.[s?.stocks_movement?.length-1]?.expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:g(new Date(s.stocks_movement[0]?.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),o&&e.jsx(M,{className:"pt-0",children:e.jsxs(r,{variant:"outline",size:"sm",className:"w-full hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors font-medium",onClick:()=>b(s),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Update Stock"]})})]})})};export{De as default};
