import{r as n,P as H,j as e,b as L}from"./app-9IFjvyjq.js";import{B as d}from"./badge-Da4cSqJP.js";import{B as t}from"./button-BWLYpXz0.js";import{C as U}from"./CustomModal-B_1zsoCZ.js";import{I as J}from"./InputLabel-DLivDGoa.js";import"./label-C2QZitaL.js";import{I as K}from"./input-fLU5VnAr.js";import{d as T}from"./dialog-BlSttdnZ.js";import{m as A}from"./proxy-D62Q3uN7.js";import{P as Q}from"./package-CHcp06gv.js";import{T as X}from"./triangle-alert-BkHbl9Bl.js";import{C as Y}from"./clock-Bzel8gwe.js";import{T as Z}from"./trending-up-_LM6MF-k.js";import{S as ee}from"./square-pen-Dnx_Ff5r.js";import{T as se}from"./trash-2-vvbptI_1.js";import{C as ae}from"./chevron-up-92Sj5s40.js";import{C as te}from"./chevron-down-C4FOIhdo.js";import{A as re}from"./index-BkKJZgfk.js";import{f as B}from"./format-BtYX0kVO.js";import"./index-C6jRhQFj.js";import"./utils-Dqxj4mrw.js";import"./select-p8YEwkY-.js";import"./react-icons.esm-CBUbwQJY.js";import"./index-5FqUdhJW.js";import"./Combination-BD7y2hDp.js";import"./index-DMLVHKle.js";import"./index-ZSsit5F4.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./index-iJsz53jB.js";import"./createLucideIcon-DsPw26Nq.js";const $e=({item:s,onUpdateClick:P})=>{var p,h,g,u,b,y,j,v,f,N,k,C,w,_,E,S,D,I,M;const[l,$]=n.useState(!1),[oe,ne]=n.useState(!1),i=((p=s==null?void 0:s.stock[0])==null?void 0:p.stocks)<=5,m=((u=(g=s==null?void 0:s.stocks_movement)==null?void 0:g[((h=s==null?void 0:s.stocks_movement)==null?void 0:h.length)-1])==null?void 0:u.expiry_date)&&new Date((j=(y=s==null?void 0:s.stocks_movement)==null?void 0:y[((b=s==null?void 0:s.stocks_movement)==null?void 0:b.length)-1])==null?void 0:j.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,z=a=>{switch(a){case"Medicine":return"bg-blue-100 text-blue-800 border-blue-200";case"Vaccine":return"bg-green-100 text-green-800 border-green-200";case"Supply":return"bg-purple-100 text-purple-800 border-purple-200";case"Equipment":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},{data:c,setData:F,processing:x,put:q,delete:O}=H({itemname:s==null?void 0:s.name,categoryid:s==null?void 0:s.category_id}),[V,r]=n.useState(!1),[W,o]=n.useState(!1),R=a=>{a.preventDefault(),q(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{L.reload({only:["flash","inventory"]})},onSuccess:()=>{o(!1)}})},G=a=>{a.preventDefault(),O(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{L.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(A.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"group transition-colors duration-200 hover:bg-gray-50",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:e.jsx(Q,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold truncate text-gray-900",children:s.name}),e.jsx(d,{className:`${z(s.category.name)} border`,children:s.category.name})]}),((f=(v=s==null?void 0:s.stocks_movement)==null?void 0:v[0])==null?void 0:f.batch_number)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Batch: "}),e.jsx("span",{className:"text-sm font-mono px-2 py-1 rounded bg-gray-100 text-gray-700",children:(k=(N=s==null?void 0:s.stocks_movement)==null?void 0:N[0])==null?void 0:k.batch_number})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Stock:"}),e.jsxs("span",{className:`font-semibold ${i?"text-red-600":"text-gray-900"}`,children:[(C=s.stock[0])==null?void 0:C.stocks," ",(w=s.stock[0])==null?void 0:w.stockname]})]}),((E=(_=s==null?void 0:s.stocks_movement)==null?void 0:_[0])==null?void 0:E.expiry_date)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Expires:"}),e.jsx("span",{className:`font-medium ${m?"text-amber-600":"text-gray-700"}`,children:B(new Date((I=(D=s==null?void 0:s.stocks_movement)==null?void 0:D[((S=s==null?void 0:s.stocks_movement)==null?void 0:S.length)-1])==null?void 0:I.expiry_date),"MMM dd, yyyy")})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(d,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(X,{className:"h-3 w-3"}),"Low Stock"]}),m&&e.jsxs(d,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),"Expiring Soon"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(t,{variant:"outline",size:"sm",className:"h-8 px-3 text-white border-0",style:{backgroundColor:"#2C3E50"},onMouseEnter:a=>a.target.style.backgroundColor="#34495E",onMouseLeave:a=>a.target.style.backgroundColor="#2C3E50",onClick:()=>P(s),children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"Update Stock"]}),e.jsxs(t,{variant:"outline",size:"sm",className:"h-8 px-3 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600",onClick:()=>o(!0),children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(t,{variant:"outline",size:"sm",className:"h-8 px-3 hover:bg-red-50 hover:border-red-300 hover:text-red-600",onClick:()=>r(!0),children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"Delete"]}),e.jsx(t,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>$(!l),children:l?e.jsx(ae,{className:"h-4 w-4"}):e.jsx(te,{className:"h-4 w-4"})})]})]})]}),e.jsx(re,{children:l&&e.jsx(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-900",children:B(new Date((M=s.stocks_movement[0])==null?void 0:M.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Lot Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Storage Location"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.location})]})]})]})})})]}),e.jsxs(U,{isOpen:W,onClose:()=>o(!1),title:"Update Item",description:`Update ${s==null?void 0:s.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(J,{value:"Item Name*"}),e.jsx(K,{value:c==null?void 0:c.itemname,onChange:a=>F("itemname",a.target.value)})]}),e.jsxs(T,{className:"pt-4",children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(t,{className:"text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:a=>a.target.style.backgroundColor="#34495E",onMouseLeave:a=>a.target.style.backgroundColor="#2C3E50",disabled:x,onClick:R,children:"Update Item"})]})]}),e.jsx(U,{isOpen:V,onClose:()=>r(!1),title:"Delete Item",description:`Are you sure you want to delete this item ${s==null?void 0:s.name}?`,maxWidth:"md",children:e.jsxs(T,{className:"pt-4",children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(t,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:x,onClick:G,children:"Delete Item"})]})})]})};export{$e as default};
