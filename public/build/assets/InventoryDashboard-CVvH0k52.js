import{r as a,q as ne,b as D,P as ce,j as e}from"./app-CsOXxW6-.js";import{T as B,a as q,b as n,c as oe}from"./tabs-DYzKf_Je.js";import{C as o,a as m,b as d,c as x}from"./card-gn6g9PZK.js";import{B as p}from"./badge-BRiVH0kr.js";import{B as g}from"./button-DoZ1qhxE.js";import me from"./SearchBar-DKBXBV0n.js";import V from"./InventoryItemCard-Bdqb1rqS.js";import de from"./StockMovementForm-Djj17mqe.js";import xe from"./ReportsPanel-CwQvqoKP.js";import pe from"./AddItemForm-BRqxzNmV.js";import{A as he}from"./AdminLayout-CSmsrc83.js";import{C as ue}from"./CustomModal-CfJIY6Lm.js";import{I as je}from"./input-CuOkEgBF.js";import{I as fe}from"./InputLabel-jiIz99_Z.js";import{P as ge}from"./PrimaryButton-D0DHK2Bm.js";import{P as Ne}from"./PrintErrors-n9j-hN2F.js";import{F as ve}from"./filter-Ba3aa3kA.js";import{c as A}from"./createLucideIcon-CvRid5WY.js";import{T as ye}from"./triangle-alert-Bwmo4LE2.js";import{C as be}from"./clock-CSuUSDJ1.js";import{P as Ce}from"./pill-C3Wd26Lo.js";import{S as Ie}from"./syringe-BoBBrZbN.js";import{S as Se}from"./stethoscope-9yniCzH8.js";import"./index-CI_H9uO6.js";import"./index-T89Yqz_I.js";import"./index-Rrq-2qYZ.js";import"./index-CZwWCcdE.js";import"./index-C8QOID5r.js";import"./search-BnWyxfKX.js";import"./chevron-up-tfh_fbHH.js";import"./chevron-down-CTn2xeS9.js";import"./format-BtYX0kVO.js";import"./dialog-BRYuzfV3.js";import"./Combination-Bw4JKNjr.js";import"./react-icons.esm-B8tQRYRo.js";import"./label-Cbo-tBSE.js";import"./index-kDRQhgwU.js";import"./textarea-C18T6OBt.js";import"./select-DusWf9-u.js";import"./index-DzijklQA.js";import"./popover-B0eNlr4V.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./calendar-xn-W_UHE.js";import"./file-text-DVJ7q2Ln.js";import"./chart-column-I0lqyUGs.js";import"./download-DduR2VGy.js";import"./avatar-CyI_oQwC.js";import"./separator-DT6gRUfM.js";import"./moment-C5S46NFB.js";import"./TextInput-ClODJkTj.js";import"./x-BDk2uK9O.js";import"./settings-DRnSumGa.js";import"./users-C_c9BeCg.js";import"./bell-BzoB8tQZ.js";import"./pusher-BlNBgnvo.js";import"./layers-C-m7y2jt.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ke=A("Box",we);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],O=A("Package",Ae);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],R=A("Plus",Te),Fs=({categories:I=[],inventory:u})=>{const[r,T]=a.useState([]),[N,Me]=a.useState(u),[S,U]=a.useState([]),[c,l]=a.useState(u);a.useEffect(()=>{u&&console.log("inventory:",u)},[u]);const{flash:$}=ne().props;a.useEffect(()=>{D.reload({only:["inventory"]})},[$]);const[z,H]=a.useState(null),[W,M]=a.useState(!1),[Z,P]=a.useState(!1),[j,v]=a.useState(null),[h,_]=a.useState("all"),[w,E]=a.useState("All"),y=r.filter(s=>s.stock.stocks<=80),b=r.filter(s=>s.stocks_movement.expiry_date&&new Date(s.stocks_movement.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3),G=s=>{l(s),v(null),_("all")},J=s=>{v(s),l(N.filter(i=>i.category.id==s))};a.useEffect(()=>{c&&console.log(c)},[c]);const K=s=>{_(s),v(null),s==="all"?l(r):s==="low"?l(y):s==="expiring"?l(b):s==="master"&&(l(r),E("All"))},Q=s=>{E(s),l(s==="All"?r:r.filter(i=>i.category===s))},F=s=>{H(s),M(!0)},X=s=>{U([...S,s]),T(updatedItems),l(i=>h==="all"&&!j?updatedItems:h==="low"?updatedItems.filter(t=>t.quantity<=t.reorderThreshold):h==="expiring"?updatedItems.filter(t=>t.expirationDate&&new Date(t.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3):h==="master"?w==="All"?updatedItems:updatedItems.filter(t=>t.category===w):j?updatedItems.filter(t=>t.category===j):i.map(t=>updatedItems.find(ie=>ie.id===t.id)||t))},f=s=>0,[L,k]=a.useState(!1),{data:Y,setData:ee,post:se,processing:te,errors:ae,clearErrors:le}=ce({categoryname:""});a.useEffect(()=>{le()},[L]);const re=s=>{s.preventDefault(),se(route("admin.inventory.category"),{onSuccess:()=>{k(!1)},onFinish:()=>{D.reload({only:["flash","categories"]})}})};return e.jsxs(he,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Inventory"}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[e.jsxs(g,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Advanced Filters"]}),e.jsxs(g,{className:"flex items-center gap-2",onClick:()=>P(!0),children:[e.jsx(R,{className:"h-4 w-4"}),"Add New Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(o,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Total Items"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:r.length})]})})]}),e.jsxs(o,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Categories"})}),e.jsx(x,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-2xl font-bold",children:I.length})})})]}),e.jsxs(o,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Low Stock Items"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ye,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:y.length})]})})]}),e.jsxs(o,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Expiring Soon"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:b.length})]})})]})]}),e.jsx(me,{items:N,onSearch:G}),e.jsxs(B,{value:h,onValueChange:K,className:"mb-6",children:[e.jsxs(q,{children:[e.jsx(n,{value:"all",children:"All Items"}),e.jsx(n,{value:"master",children:"Master List"}),e.jsxs(n,{value:"low",children:["Low Stock",y.length>0&&e.jsx(p,{variant:"destructive",className:"ml-2",children:y.length})]}),e.jsxs(n,{value:"expiring",children:["Expiring Soon",b.length>0&&e.jsx(p,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800",children:b.length})]})]}),e.jsx(oe,{value:"master",className:"mt-6",children:e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(d,{className:"text-xl",children:"Master List"})}),e.jsx(x,{children:e.jsxs(B,{value:w,onValueChange:Q,className:"mb-6",children:[e.jsxs(q,{className:"grid md:grid-cols-2 lg:grid-cols-5 lg w-full",children:[e.jsxs(n,{value:"All",className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"All",e.jsx(p,{variant:"secondary",className:"ml-1",children:f()})]}),e.jsxs(n,{value:"Medicine",className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Medicines",e.jsx(p,{variant:"secondary",className:"ml-1",children:f()})]}),e.jsxs(n,{value:"Vaccine",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Vaccines",e.jsx(p,{variant:"secondary",className:"ml-1",children:f()})]}),e.jsxs(n,{value:"Equipment",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Equipment",e.jsx(p,{variant:"secondary",className:"ml-1",children:f()})]}),e.jsxs(n,{value:"Supply",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Supplies",e.jsx(p,{variant:"secondary",className:"ml-1",children:f()})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.map(s=>e.jsx(V,{item:s,onUpdateClick:F},s.id)),c.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(d,{className:"text-lg",children:[e.jsxs("div",{className:"flex justify-between space-x-2 mt-4 md:mt-0",children:[e.jsx("div",{children:"Categories"}),e.jsxs(g,{className:"flex items-center gap-2",onClick:()=>k(!0),children:[e.jsx(R,{className:"h-4 w-4"}),"Add"]})]}),e.jsx(ue,{isOpen:L,onClose:()=>{k(!1)},title:"Add Category",description:"Add Category for Inventory.",maxWidth:"sm",children:e.jsxs("form",{onSubmit:re,children:[e.jsx(Ne,{errors:ae}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(fe,{value:"Category Name:"}),e.jsx(je,{value:Y.categoryname,onChange:s=>ee("categoryname",s.target.value)})]}),e.jsx(ge,{disabled:te,className:" self-end mt-2",type:"submit",children:"Save"})]})]})})]})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{variant:j===null?"default":"outline",className:"w-full justify-start",onClick:()=>{v(null),l(N)},children:"All Categories"}),I.map((s,i)=>e.jsx(g,{variant:j===s.id?"default":"outline",className:"w-full justify-start",onClick:()=>J(s.id),children:e.jsx("div",{className:"flex items-center",children:s.name})},i))]})})]}),e.jsxs(o,{className:"mt-6",children:[e.jsx(m,{children:e.jsx(d,{className:"text-lg",children:"Recent Activity"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:S.slice(0,5).map((s,i)=>{const t=r.find(C=>(C==null?void 0:C.id)===(s==null?void 0:s.itemId));return e.jsxs("div",{className:"border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("p",{className:"font-medium",children:[s.type==="incoming"?"Added":"Removed"," ",s.quantity," ",t==null?void 0:t.unit,"s of"," ",t==null?void 0:t.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.performedBy," on"," ",new Date(s.date).toLocaleDateString()]})]},i)})})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:h!=="master"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.map(s=>e.jsx(V,{item:s,onUpdateClick:F},s.id)),c.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(xe,{items:N,movements:S})}),e.jsx(de,{open:W,onClose:()=>M(!1),item:z,onSave:X}),e.jsx(pe,{open:Z,onClose:()=>P(!1),onSave:s=>{T([...r,s]),l([...r,s])},categories_:I})]})};export{Fs as default};
