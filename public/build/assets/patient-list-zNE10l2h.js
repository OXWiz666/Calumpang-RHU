import{r as x,j as e,b as F}from"./app-9IFjvyjq.js";import{B as L}from"./button-BWLYpXz0.js";import{I as M}from"./input-fLU5VnAr.js";import{C as t,a as P,b as A,c as f}from"./card-BZqhk5Ws.js";import{B as j}from"./badge-Da4cSqJP.js";import{S as g,a as v,b as N,c as w,d}from"./select-p8YEwkY-.js";import{h as S}from"./moment-C5S46NFB.js";import{S as k}from"./search-CCpMc_T5.js";import{P as V}from"./phone-U7LnKRGT.js";import{M as Y}from"./map-pin-Bdehjgen.js";import{C as E}from"./calendar-DQr9f7aC.js";import{E as I}from"./eye-B-87yDjC.js";import"./utils-Dqxj4mrw.js";import"./index-C6jRhQFj.js";import"./react-icons.esm-CBUbwQJY.js";import"./index-5FqUdhJW.js";import"./Combination-BD7y2hDp.js";import"./index-DMLVHKle.js";import"./index-ZSsit5F4.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./createLucideIcon-DsPw26Nq.js";function os({patients:y,onSelectPatient:B}){const[o,C]=x.useState(""),[i,b]=x.useState("all"),[a,_]=x.useState("all");x.useEffect(()=>{console.log("gender:",a)},[a]);const h=y.filter(s=>{var m,n,u;const r=(s==null?void 0:s.firstname.toLowerCase().includes(o.toLowerCase()))||(s==null?void 0:s.lastname.toLowerCase().includes(o.toLowerCase()))||((m=s==null?void 0:s.contactno)==null?void 0:m.toString().toLowerCase().includes(o))||((n=s==null?void 0:s.id)==null?void 0:n.toString().includes(o)),l=i==="all"||(s==null?void 0:s.status)==i,c=a==="all"||((u=s==null?void 0:s.gender)==null?void 0:u.toLowerCase())==a;return r&&l&&c}),D=s=>{const r=new Date,l=new Date(s);let c=r.getFullYear()-l.getFullYear();const m=r.getMonth()-l.getMonth();return(m<0||m===0&&r.getDate()<l.getDate())&&c--,c};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{children:[e.jsx(P,{children:e.jsx(A,{children:"Search & Filter Patients"})}),e.jsx(f,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(k,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search by id, name, or phone number:",value:o,onChange:s=>C(s.target.value),className:"pl-10"})]}),e.jsxs(g,{value:i,onValueChange:b,children:[e.jsx(v,{className:"w-full sm:w-[180px]",children:e.jsx(N,{placeholder:"Filter by status"})}),e.jsxs(w,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"active",children:"Active"}),e.jsx(d,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(g,{value:a,onValueChange:_,children:[e.jsx(v,{className:"w-full sm:w-[180px]",children:e.jsx(N,{placeholder:"Filter by gender"})}),e.jsxs(w,{children:[e.jsx(d,{value:"all",children:"All Genders"}),e.jsx(d,{value:"m",children:"Male"}),e.jsx(d,{value:"f",children:"Female"})]})]})]})})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-[minmax(0,1fr)_160px_220px_140px_100px_90px] items-center px-4 py-2 text-xs font-medium uppercase tracking-wide border rounded-md bg-accent/20 text-muted-foreground",children:[e.jsx("div",{children:"Patient"}),e.jsx("div",{children:"Phone"}),e.jsx("div",{children:"Address"}),e.jsx("div",{children:"Last Visit"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-right pr-2",children:"Action"})]}),e.jsx("div",{className:"space-y-2",children:h.map(s=>{var r,l;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_160px_220px_140px_100px_90px] items-center gap-3 rounded-lg border px-4 py-3 hover:shadow-sm transition bg-white hover:bg-accent/30",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-full flex items-center justify-center font-semibold shrink-0 bg-primary/10 text-primary",children:`${((r=s==null?void 0:s.firstname)==null?void 0:r[0])??""}${((l=s==null?void 0:s.lastname)==null?void 0:l[0])??""}`}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate text-gray-900",children:[s==null?void 0:s.firstname," ",s==null?void 0:s.lastname]}),(s==null?void 0:s.gender)&&e.jsx(j,{variant:"outline",className:"text-[10px] px-1.5 py-0.5",children:s.gender.toLowerCase()==="m"?"Male":s.gender.toLowerCase()==="f"?"Female":s.gender})]}),e.jsxs("div",{className:"text-xs truncate text-muted-foreground",children:["ID: ",s.id," • Age: ",D(s.birth)," • Joined ",S(s==null?void 0:s.created_at).format("MM-DD-yyyy")]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[160px]",children:(s==null?void 0:s.contactno)||"Not Set"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[220px]",children:(s==null?void 0:s.address)??"Not Set"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[140px]",children:(()=>{const c=(s==null?void 0:s.lastVisit)??(s==null?void 0:s.last_visit)??(s==null?void 0:s.lastvisit);return c?S(c).format("MM-DD-YYYY"):"Not Set"})()})]}),e.jsx("div",{className:"hidden md:flex shrink-0 justify-center",children:e.jsx(j,{variant:(s==null?void 0:s.status)==="active"?"default":"secondary",className:"text-[10px] px-2 py-0.5 rounded-full",children:s==null?void 0:s.status})}),e.jsx("div",{className:"flex md:justify-end shrink-0",children:e.jsxs(L,{onClick:()=>F.visit(route("patients.details.view",{id:s==null?void 0:s.id})),variant:"outline",className:"h-8 px-3 text-xs",children:[e.jsx(I,{className:"h-3.5 w-3.5 mr-2"})," View"]})})]},s==null?void 0:s.id)})}),h.length===0&&e.jsx(t,{children:e.jsx(f,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{os as default};
