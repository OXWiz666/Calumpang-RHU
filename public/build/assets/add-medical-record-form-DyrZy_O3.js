import{r as n,j as e}from"./app-CIRxRm5v.js";import{B as c}from"./button-DE5_Vqow.js";import{I as h}from"./input-BDzvdTAf.js";import{L as r}from"./label-Dtxa3RK9.js";import{T as g}from"./textarea-CXv4n4fp.js";import{c as E,d as T,a as B,b as I,e as P}from"./card-DfcCiqcU.js";import{h as v}from"./moment-C5S46NFB.js";import{S as R,a as U,b as k,c as q,d as L}from"./select-DZrupOj3.js";import{P as y}from"./PrintErrors-5MWPhbCw.js";import{A as H,S as V}from"./save-CtMMiSwJ.js";import{F as G}from"./file-text-D4ztIr91.js";import"./utils-DrEkb0Gl.js";import"./index-DBZG5BFW.js";import"./react-icons.esm-ZS_U9Ll4.js";import"./index-COzQjhXL.js";import"./index-Dk-c0nR7.js";import"./index-CfFi66PO.js";import"./floating-ui.react-dom-C6eb6QYM.js";import"./Combination-DW-a28_Q.js";import"./createLucideIcon-BT1hsExO.js";function de({patientName:N,onSubmit:F,onCancel:p,doctors:o,errors:C}){var j,f;const[a,S]=n.useState({date:v(new Date).format("yyyy-MM-DD"),diagnosis:"",treatment:"",doctor:"",notes:"",followUp:""}),w=s=>{s.preventDefault(),F(a)},l=(s,t)=>{S(i=>({...i,[s]:t}))},[d,D]=n.useState([]),[x,b]=n.useState([]),[A,u]=n.useState(""),M=s=>{const t=Array.from(s.target.files);u("");const i=t.filter(m=>m.size>3*1024*1024);i.length>0&&u("Files that exceeds 3MB will not be included.");const z=t.filter(m=>m.size<=3*1024*1024);b(i),D(z)};return n.useEffect(()=>{console.log("attachments:",d)},[d]),n.useEffect(()=>{console.log("bigsizedFiles:",x)},[x]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:p,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add Medical Record"}),e.jsxs("p",{className:"text-muted-foreground",children:["Patient: ",N]})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(T,{children:[e.jsx(B,{children:"Medical Record Details"}),e.jsx(I,{children:"Enter the medical consultation details"})]}),e.jsxs(P,{className:"space-y-6",children:[e.jsx(y,{errors:C}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"date",children:"Date *"}),e.jsx(h,{id:"date",type:"date",value:a.date,onChange:s=>l("date",v(s.target.value).format("yyyy-MM-DD")),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"doctor",children:"Doctor/Healthcare Provider *"}),e.jsxs(R,{id:"doctor",value:a.doctor,onValueChange:s=>l("doctor",s),children:[e.jsx(U,{className:"w-full",children:e.jsx(k,{placeholder:"Select Doctor",children:o?(f=(j=o==null?void 0:o.find(s=>(s==null?void 0:s.id.toString())==a.doctor.toString()))==null?void 0:j.user)==null?void 0:f.firstname:"Select Doctor"})}),e.jsx(q,{children:o.map(s=>{var t,i;return e.jsxs(L,{value:s==null?void 0:s.id,children:[(t=s==null?void 0:s.user)==null?void 0:t.firstname," ",(i=s==null?void 0:s.user)==null?void 0:i.lastname]},s)})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"diagnosis",children:"Diagnosis *"}),e.jsx(h,{id:"diagnosis",value:a.diagnosis,onChange:s=>l("diagnosis",s.target.value),placeholder:"Primary diagnosis or condition",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"treatment",children:"Treatment *"}),e.jsx(h,{id:"treatment",value:a.treatment,onChange:s=>l("treatment",s.target.value),placeholder:"Treatment provided or prescribed",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"notes",children:"Clinical Notes"}),e.jsx(g,{id:"notes",value:a.notes,onChange:s=>l("notes",s.target.value),placeholder:"Additional observations, symptoms, or clinical notes",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"followUp",children:"Follow-up Instructions"}),e.jsx(g,{id:"followUp",value:a.followUp,onChange:s=>l("followUp",s.target.value),placeholder:"Follow-up care instructions or next appointment details",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{errors:A}),e.jsx(r,{htmlFor:"attachments",children:e.jsxs(e.Fragment,{children:["Attachments",e.jsx(c,{variant:"ghost",size:"sm",className:"ml-2",asChild:!0,children:e.jsxs("label",{className:"cursor-pointer",children:["+ Add",e.jsx("input",{type:"file",id:"attachments",className:"hidden",multiple:!0,onChange:M})]})})]})}),e.jsx("div",{className:"grid grid-flow-col auto-cols-max gap-4",children:d.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:""}),s.name]}))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsxs(c,{type:"submit",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Medical Record"]})]})]})]})}export{de as default};
