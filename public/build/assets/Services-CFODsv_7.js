import{r as i,P as L,j as e,a as Y,R as He}from"./app-BNj6LzJd.js";import{C as Z}from"./react-icons.esm-CUzEIc4E.js";import{B as l}from"./index-Btn_yvgh.js";import{L as v,I as z}from"./index-C867nRZl.js";import"./avatar-DD2sLtWw.js";import{B as h}from"./pusher-DYWRKZmQ.js";import{S as Ie,T as ee,a as se,b as p,c as o,d as re,e as d}from"./table2-D55vlxtr.js";import{S as _e,a as Le,b as ze,c as Pe,d as P}from"./select-BCB2Vp62.js";import{D as w,b as C,c as D,d as k,e as A,f as T,a as F}from"./dialog-DT2RX0G6.js";import"./textarea-C3MDNOnu.js";import Fe from"./Sidebar-CIidXgw6.js";import Be from"./ServicesLayout-BLgmrnxw.js";import{h as ae}from"./moment-C5S46NFB.js";import{F as Ve}from"./filter-C0j7NQ6R.js";import{C as Re}from"./chevron-up-L-eDe4ZO.js";import{C as Ue}from"./chevron-down-D7ExU8uN.js";import{c as ce}from"./createLucideIcon-ChTHAkpc.js";import"./index-DH-5X088.js";import"./arrow-up-CG5d8Kwd.js";import"./index-Dlv7Ox24.js";import"./Combination-94TggW0x.js";import"./card-DrsuoceM.js";import"./alert-iBQzMPBh.js";import"./separator-BAYP2AvG.js";import"./square-kanban-CmAtewmf.js";import"./layers-DMFf2pko.js";import"./CustomModal-BWWvM39f.js";import"./AdminLayout-BZ0mxlg4.js";import"./users-DuCctkvs.js";import"./calendar-nkTfWolW.js";import"./settings-DUfg_wS7.js";import"./x-fPLTJQGy.js";import"./popover-BarACL0v.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./TextInput-jtegLj9q.js";import"./bell-JHyhzeTT.js";import"./search-DOqFn9j4.js";import"./InputLabel-BIoY7zpK.js";import"./circle-plus-CRzqs1vf.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ie=ce("SquarePen",Ke);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],te=ce("Trash2",We),Vs=({services_:g})=>{const[B,M]=i.useState(g),[ne,$e]=i.useState(""),[E,le]=i.useState("all"),[O,S]=i.useState(!1),[x,qe]=i.useState({key:"servicename",direction:"ascending"}),[Ge,de]=i.useState(!1),oe=(r=!1)=>{de(r)};i.useEffect(()=>{M(g),console.log("services: ",g)},[g]);const[V,b]=i.useState(!1),[Je,Qe]=i.useState(null),[H,R]=i.useState(!1),[f,U]=i.useState({servicename:"",status:"Active"}),[me,Xe]=i.useState({name:"",description:"",duration:30,price:0,recurrenceDates:[]});[...B.filter(r=>{const s=r.servicename.toLowerCase().includes(ne.toLowerCase()),t=E==="all"||r.status===E;return s&&t})].sort((r,s)=>r[x.key]<s[x.key]?x.direction==="ascending"?-1:1:r[x.key]>s[x.key]?x.direction==="ascending"?1:-1:0);const[he,K]=i.useState(null),xe=r=>{H===r?(R(null),K(null)):(R(r),K(r))},ue=r=>{_(s=>({...s,days:s.days.includes(r)?s.days.filter(t=>t!==r):[...s.days,r]}))},je=()=>{ge(route("admin.services.subservice.create"),{preserveScroll:!0,preserveState:!0,only:["services_"],onSuccess:()=>{b(!1),alert_toast("Success","Sub-Service added successfully!")}})},W=async(r,s)=>{var t,j;S(!0);try{const a=s?"/admin/services/unarchive":"/admin/services/archive",c=await Y.post(a,{service_id:r});c.data.services&&(M(c.data.services),alert_toast("Success",c.data.message))}catch(a){console.error("Error archiving/unarchiving service:",a),alert_toast("Error",((j=(t=a.response)==null?void 0:t.data)==null?void 0:j.message)||"An error occurred while updating the service")}finally{S(!1)}},ve=r=>{switch(r){case 1:return e.jsx(h,{className:"bg-green-500",children:"Active"});case 0:return e.jsx(h,{className:"bg-gray-500",children:"Inactive"});default:return e.jsx(h,{children:r})}},{data:$,setData:I,processing:pe,post:ge}=L({serviceid:"",subservicename:""}),[Se,q]=i.useState(!1),{data:be,setData:_,post:fe,processing:ye,errors:G}=L({days:me.recurrenceDates,serviceid:he}),Ne=()=>{fe(route("admin.services.days.update"),{preserveScroll:!0,preserveState:!0,replace:!0,only:["services_"],onSuccess:()=>{q(!1),alert_toast("Success!","Successfully Updated!","success")}})},we=["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM"],[Ce,Ze]=i.useState([]),[J,De]=i.useState({}),[ke,Q]=i.useState(!1),{data:y,setData:u,processing:Ae,post:Te,errors:X}=L({times:Ce,subservice_id:J,subservicename:""}),Me=r=>{u(s=>({...s,times:s.times.includes(r)?s.times.filter(t=>t!==r):[...s.times,r]}))},Ee=r=>{Te(route("admin.services.time.update"),{preserveScroll:!0,onSuccess:()=>{Q(!1),alert_toast("Success!","Successfully Updated!","success")}})},Oe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return i.useEffect(()=>{console.log("datatime; ",y)},[y]),e.jsxs(Be,{children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Services"}),e.jsx("p",{className:"text-gray-600",children:"These are the services to be used in the Appointment Schedules."}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx(Fe,{activeTab:"services"}),e.jsxs("div",{className:"bg-accent/20 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"All Services"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{open:V,onOpenChange:r=>{b(r),r||U({servicename:"",status:"Active"})},children:e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsx(k,{children:"Add New Service"}),e.jsx(A,{children:"Create a new service for appointments."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"servicename",className:"text-right",children:"Service Name"}),e.jsx(z,{id:"servicename",name:"servicename",className:"col-span-3",value:f.servicename,onChange:r=>U({...f,servicename:r.target.value})})]})}),e.jsx(T,{children:e.jsx(l,{type:"submit",onClick:async()=>{var r,s;try{S(!0);const t=await Y.post("/admin/services/create",f);t.data.services&&(M(t.data.services),b(!1),alert_toast("Success","Service added successfully!"))}catch(t){console.error("Error creating service:",t),alert_toast("Error",((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||"An error occurred while creating the service")}finally{S(!1)}},disabled:!f.servicename||O,children:"Save Service"})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter by:"})]}),e.jsxs(_e,{value:E,onValueChange:le,children:[e.jsx(Le,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs(Pe,{children:[e.jsx(P,{value:"all",children:"All Statuses"}),e.jsx(P,{value:"Active",children:"Active"}),e.jsx(P,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx(Ie,{data:B,defaultSort:{key:"servicename",direction:"asc"},children:({sortedData:r})=>e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(p,{children:[e.jsx(o,{}),e.jsx(o,{sortKey:"servicename",sortable:!0,children:"Service Name"}),e.jsx(o,{sortKey:"status",sortable:!0,children:"Status"}),e.jsx(o,{children:"Available Days"}),e.jsx(o,{sortKey:"servicename",sortable:!0,children:"Sub Services"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(re,{children:r.map((s,t)=>{var j;return e.jsxs(He.Fragment,{children:[e.jsxs(p,{children:[e.jsx(d,{children:e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>xe(s.id),children:H===s.id?e.jsx(Re,{className:"h-4 w-4"}):e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsx(d,{children:s.servicename}),e.jsx(d,{children:ve(s.status)}),e.jsx(d,{className:" grid gap-1",children:(j=s==null?void 0:s.servicedays)==null?void 0:j.map((a,c)=>e.jsx(h,{className:"bg-primary",children:a.day},c))}),e.jsx(d,{children:(s==null?void 0:s.subservices.length)<=0?e.jsx("div",{children:"No Sub Services"}):e.jsxs("div",{children:[s==null?void 0:s.subservices.length," ","Service",(s==null?void 0:s.subservices.length)>1?"s":""]})}),e.jsx(d,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[s.status===0?e.jsxs(l,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50 flex items-center gap-1",onClick:()=>W(s.id,!0),disabled:O,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8v13H3V8"}),e.jsx("path",{d:"M1 3h22v5H1z"}),e.jsx("path",{d:"M12 12v7"}),e.jsx("path",{d:"M8 12l4-4 4 4"})]}),"Unarchive"]}):e.jsxs(l,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 flex items-center gap-1",onClick:()=>W(s.id,!1),disabled:O,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8v13H3V8"}),e.jsx("path",{d:"M1 3h22v5H1z"}),e.jsx("path",{d:"M12 19V12"}),e.jsx("path",{d:"M8 15l4 4 4-4"})]}),"Archive"]}),e.jsxs(w,{open:V,onOpenChange:a=>{b(a),a&&I("serviceid",s.id)},children:[e.jsx(F,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",children:"Add Sub-service"})}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsxs(k,{children:["Add Sub-service to"," ",s.servicename]}),e.jsx(A,{children:"Create a new sub-service for this service category."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"subName",className:"text-right",children:"Sub Service"}),e.jsx(z,{id:"subName",name:"name",value:$.subservicename,onChange:a=>{I("subservicename",a.target.value)},className:"col-span-3"})]})}),e.jsx(T,{children:e.jsx(l,{type:"submit",onClick:je,disabled:!$.subservicename||pe,children:"Save Sub-service"})})]})]}),e.jsxs(w,{open:Se,onOpenChange:a=>{var c;q(a),a&&(_("days",((c=s==null?void 0:s.servicedays)==null?void 0:c.map(N=>N.day))||[]),_("serviceid",s.id))},children:[e.jsx(F,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsxs(k,{children:["Edit Days to"," ",s.servicename]}),e.jsx(A,{children:"Edit days for this service category."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{className:"text-right",children:"Available Days"}),Oe.map(a=>e.jsx(h,{className:`cursor-pointer ${be.days.includes(a)?"bg-primary":"bg-muted text-red-500"}`,onClick:()=>ue(a),children:a},a))]}),Object.keys(G).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Z,{className:"h-5 w-5 text-red-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(G).map(([a,c])=>e.jsx("li",{children:c},a))})})]})})]}),e.jsx(T,{children:e.jsx(l,{onClick:a=>{Ne()},disabled:ye,children:"Save Days"})})]})]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{oe(!0),I("subservicename",s.servicename)},children:e.jsx(te,{className:"h-4 w-4 text-red-500"})})]})})]}),H===s.id&&e.jsx(p,{children:e.jsx(d,{colSpan:6,className:"p-0",children:e.jsxs("div",{className:"bg-muted/20 p-4",children:[e.jsxs("h3",{className:"font-medium mb-2",children:["Sub-services for"," ",s.servicename]}),s.subservices.length>0?e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(p,{children:[e.jsx(o,{children:"Sub Service"}),e.jsx(o,{children:"Available Time"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(re,{children:s==null?void 0:s.subservices.map((a,c)=>{var N;return e.jsxs(p,{children:[e.jsx(d,{children:a.subservicename}),e.jsx(d,{children:(N=a==null?void 0:a.times)==null?void 0:N.map((n,m)=>e.jsx(h,{className:"cursor-pointer bg-primary",children:ae(n.time,"HH:mm:ss").format("hh:mm A")},m))}),e.jsx(d,{children:e.jsxs("div",{children:[e.jsxs(w,{open:ke,onOpenChange:n=>{Q(n),n&&(console.log("selected: ",a.subservicename),u("subservice_id",a.id),De(a),u("subservicename",a.subservicename),u("times",a==null?void 0:a.times.map(m=>ae(m.time,"HH:mm:ss").format("hh:mm A"))))},children:[e.jsx(F,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsxs(k,{children:["Edit Time to"," ",J.subservicename]}),e.jsx(A,{children:"Edit days for this sub service category."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(v,{children:"Sub-Service:"}),e.jsx(z,{className:" w-full",value:y.subservicename,onChange:n=>{u("subservicename",n.target.value)}}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{className:" text-right",children:"Available Time:"}),we.map((n,m)=>e.jsx(h,{className:`cursor-pointer ${y.times.includes(n)?"bg-primary":"bg-muted text-red-500"}`,onClick:()=>Me(n),children:n},m))]})]}),e.jsxs(T,{children:[Object.keys(X).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Z,{className:"h-5 w-5 text-red-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(X).map(([n,m])=>e.jsx("li",{children:m},n))})})]})}),e.jsx(l,{onClick:Ee,disabled:Ae,children:"Save Time"})]})]})]}),e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(te,{className:"h-4 w-4 text-red-500"})})]})})]},c)})})]}):e.jsx("p",{className:"text-muted-foreground",children:"No sub-services found for this service."})]})})})]},t)})})]})})})]})]})]})};export{Vs as default};
