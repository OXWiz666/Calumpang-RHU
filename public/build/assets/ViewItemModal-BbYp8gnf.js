import{j as e}from"./app-CBCVmnFq.js";import"./vendor-DkBadjUr.js";import{D as b,a as v,b as D,c as w}from"./dialog-CXStznBU.js";import{B as c}from"./badge-B29933Kg.js";import{C as g,a as h,b as u,c as p}from"./card-ByA8IRpR.js";import{P as k}from"./package-L7rgkkVO.js";import{H as C}from"./hash-AgYeaIxt.js";import{B as S}from"./building-2-DmPcAwng.js";import{T as N}from"./tag-DwpkVkgc.js";import{C as _}from"./calendar-D9APQM2e.js";import{F as A}from"./file-text-YZXa1D2L.js";import{C as E}from"./circle-x-Cf2XhiVO.js";import{C as I}from"./circle-alert-D8zT41fC.js";import"./pusher-DVtoYAOu.js";import"./react-icons.esm-Dpkz3fnS.js";import"./index-CCexkvXU.js";import"./index-uz7BvUHi.js";import"./tslib.es6-M_FJ09fS.js";import"./index-BT9_qCGV.js";import"./createLucideIcon-BKWaAi2G.js";const Y=({open:j,onClose:y,item:s})=>{if(!s)return null;const l=a=>{if(!a||a==="N/A")return!1;try{return new Date(a)<new Date}catch{return!1}},f=a=>{if(!a||a==="N/A")return!1;try{const r=new Date(a),i=Math.ceil((r-new Date)/(1e3*60*60*24));return i<=30&&i>0}catch{return!1}},o=a=>{switch(a){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";case"expiring_soon":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=a=>{switch(a){case"in_stock":return"In Stock";case"low_stock":return"Low Stock";case"out_of_stock":return"Out of Stock Items";case"expiring_soon":return"Expiring Soon Items";default:return"Unknown"}};return e.jsx(b,{open:j,onOpenChange:y,children:e.jsxs(v,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(D,{children:e.jsx(w,{className:"text-xl font-semibold text-gray-900",children:"Item Details"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.category?.name||"Uncategorized"})]})]}),e.jsx(c,{className:o(s.status),children:m(s.status)})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-base font-medium text-gray-900",children:"Basic Information"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Batches"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[s.batchCount||0," batch",(s.batchCount||0)!==1?"es":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Manufacturer"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.manufacturer||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Minimum Stock Level"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.minimum_stock!==null&&s.minimum_stock!==void 0?s.minimum_stock:"Not Set"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Stock Level"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.maximum_stock!==null&&s.maximum_stock!==void 0?s.maximum_stock:"Not Set"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Earliest Expiry"}),e.jsx("p",{className:"font-medium text-gray-900",children:(()=>{if(!s.batches||s.batches.length===0)return"N/A";const a=s.batches.reduce((r,t)=>{if(!r||t.expiryDate==="N/A"||r.expiryDate==="N/A")return t;try{const i=new Date(t.expiryDate),n=new Date(r.expiryDate);return isNaN(i.getTime())||isNaN(n.getTime())?r:i<n?t:r}catch{return r}},null);if(!a||a.expiryDate==="N/A")return"N/A";try{const r=new Date(a.expiryDate);return isNaN(r.getTime())?"Invalid Date":r.toLocaleDateString()}catch{return"Invalid Date"}})()})]})]})]}),s.description&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.description})]})]})]}),s.batches&&s.batches.length>0&&(()=>{const a=s.batches.filter(t=>!l(t.expiryDate)),r=s.batches.filter(t=>l(t.expiryDate));return e.jsxs(g,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(u,{className:"text-base font-medium text-gray-900",children:["Batch Details",r.length>0&&e.jsxs("span",{className:"ml-2 text-sm text-red-600 font-normal",children:["(",r.length," expired batch",r.length!==1?"es":""," hidden)"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:[a.reduce((t,i)=>t+(i.quantity||0),0)," ",s.unit||"units"]})]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:a.map((t,i)=>{const n=l(t.expiryDate),x=f(t.expiryDate);return e.jsxs("div",{className:`border rounded-lg p-4 ${n?"bg-red-50 border-red-200":x?"bg-amber-50 border-amber-200":"bg-gray-50"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 font-mono",children:t.batchNumber||"N/A"}),n&&e.jsxs(c,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),"EXPIRED"]}),x&&!n&&e.jsxs(c,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),"EXPIRING SOON"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Expiry Date"}),e.jsx("p",{className:`font-medium ${n?"text-red-600":x?"text-amber-600":"text-gray-900"}`,children:(()=>{if(!t.expiryDate||t.expiryDate==="N/A")return"N/A";try{const d=new Date(t.expiryDate);return isNaN(d.getTime())?"Invalid Date":d.toLocaleDateString()}catch{return"Invalid Date"}})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Storage Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.storageLocation||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantity"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[t.quantity||0," ",s.unit||"units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(c,{className:o(t.status),children:m(t.status)})})]})]})]},t.id||i)})})})]})})()]})]})})};export{Y as default};
