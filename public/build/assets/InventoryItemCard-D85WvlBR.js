import{r as p,j as e}from"./app-CVKZc3Lh.js";import{C as u,a as g,b as h,c as j,d as f}from"./card-D0Eo7xJS.js";import{B as n}from"./badge-CveJvP0t.js";import{B as c}from"./button-D0ZPwi4Z.js";import{T as N}from"./triangle-alert-CoMNwCcd.js";import{C as b}from"./clock-DKRge-Mx.js";import{C as v}from"./chevron-up-CCFbWN3N.js";import{C as y}from"./chevron-down-BXtHDMGX.js";import{f as d}from"./format-BtYX0kVO.js";import"./createLucideIcon-BkbKWtyU.js";const T=({item:s,onUpdateClick:i})=>{var o;const[a,l]=p.useState(!1),t=s.stock.stocks<=5,r=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,m=x=>{switch(x){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(u,{className:`mb-4 ${t?"border-red-300":r?"border-amber-300":"border-gray-200"}`,children:[e.jsx(g,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-lg font-medium",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(n,{className:m(s.category.name),children:s.category.name}),t&&e.jsxs(n,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-3 w-3"}),"Low Stock"]}),r&&s.expirationDate&&e.jsxs(n,{variant:"outline",className:"bg-amber-100 text-amber-800 flex items-center gap-1",children:[e.jsx(b,{className:"h-3 w-3"}),"Expiring Soon"]})]})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>l(!a),className:"h-8 w-8 p-0",children:a?e.jsx(v,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsxs(j,{className:"pb-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:`font-medium ${t?"text-red-600":""}`,children:[s.stock.stocks," ",s.stock.stockname,"s"]})]})}),a&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.stocks_movement[0].expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${r?"text-amber-600":""}`,children:d(new Date(s.stocks_movement[0].expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:d(new Date((o=s.stocks_movement[0])==null?void 0:o.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),a&&e.jsx(f,{className:"pt-0",children:e.jsx(c,{variant:"outline",size:"sm",className:"w-full hover:bg-secondary/80 transition-colors font-medium",onClick:()=>i(s),children:"Update Stock"})})]})};export{T as default};
