import{u as ms,j as e,b as $,r as V}from"./app-CpcWMaCr.js";import{r as c,R as St}from"./vendor-DkBadjUr.js";import{s as h}from"./toast-BopjrADX.js";import{u as wt}from"./confirmation-CKFguzwV.js";import{C as De}from"./react-icons.esm-9ndgmCxB.js";import{B as m}from"./button-83KshekS.js";import{I as E}from"./input-FXb9p87Q.js";import"./avatar-c-kVTmJN.js";import{B as Y}from"./badge-Cc1b6IgZ.js";import{C as B,c as R,a as Ct,b as Dt}from"./card-i_W9PX4F.js";import{D as kt,a as _t,b as At,c as Tt,d as Es,e as Je}from"./dropdown-menu-C_DGhsrC.js";import{S as Mt,T as Fs,a as xs,b as te,c as U,e as T,d as Os}from"./table2-BYi4VAql.js";import{S as Ve,a as We,b as qe,c as Ke,d as ae}from"./select-B2DawXAC.js";import{D as re,a as le,b as ie,c as ne,e as ce,d as oe}from"./dialog-CDdyR0jn.js";import{L as j}from"./label-Ci5QeB7S.js";import"./textarea-DWWi065D.js";import Et from"./ServicesLayout-D8f9IOzB.js";import{h as ke}from"./moment-C5S46NFB.js";import{m as de}from"./proxy-NKVFv3z7.js";import{T as hs}from"./trending-up-BFbz08q-.js";import{U as us}from"./users-D4PhO1-D.js";import{c as Ft}from"./createLucideIcon-BKWaAi2G.js";import{A as Ot}from"./activity-C-sjEU5t.js";import{T as $t}from"./trending-down-DADUT3dQ.js";import{T as It}from"./triangle-alert-BslwqqvL.js";import{S as Pt}from"./search-Cye_TdpF.js";import{F as zt}from"./filter-BAwJ6QQu.js";import{C as Lt}from"./chevron-up-BdDu7vFg.js";import{C as gs}from"./chevron-down-CEiCHn75.js";import{E as Yt}from"./ellipsis-gjrDGaHy.js";import{P as W}from"./plus-MavOGQlj.js";import{C as k}from"./calendar-D9APQM2e.js";import{A as $s,a as Is}from"./archive-BwGVl8jP.js";import{S as Ut}from"./settings-D_MeB5oN.js";import{C as H}from"./clock-D6yUBuGv.js";import{C as Bt}from"./chevron-left-B36-TXNE.js";import{C as Rt}from"./chevron-right-B3qqnx4D.js";import{S as Ps}from"./square-pen-Bb1JtfBr.js";import{F as Ht}from"./file-text-YZXa1D2L.js";import{I as Jt}from"./info-BVLwYIm5.js";import{T as ps}from"./trash-2-DJ5zXW8D.js";import"./pusher-DVtoYAOu.js";import"./use-toast-Dm0PN6fH.js";import"./refresh-cw-D3hZ7e_O.js";import"./save-CAdd64LS.js";import"./download-BH8XyxCx.js";import"./circle-x-Cf2XhiVO.js";import"./circle-check-F3PuHnLX.js";import"./alert-dialog-DatY6KEe.js";import"./index-D-5lYtqK.js";import"./index-cyM4JHm5.js";import"./index-DcuBkBaW.js";import"./index-BWKolfP-.js";import"./tslib.es6-M_FJ09fS.js";import"./index-Su2r44Ky.js";import"./index-BuhaAKb_.js";import"./index-XkFAycwM.js";import"./index-DqxisvwK.js";import"./index-Bkpbp3ld.js";import"./CustomModal-C42p1Fva.js";import"./AdminLayout-CzUCsc_E.js";import"./separator-R4CBDmT6.js";import"./calendar-BOm8zBBd.js";import"./format-Dp3w_Y3x.js";import"./isSameMonth-BOwz-_mK.js";import"./isBefore-Bnl9x5VB.js";import"./TextInput-lKS1f1tZ.js";import"./x-b8JahagL.js";import"./house-CSq-WFst.js";import"./pill-DIGxtF-3.js";import"./pusher-BmsVLRTL.js";import"./printer-CfgcPaUh.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./index-BH6rhEqw.js";import"./autoprefixer-CLGpDyKH.js";import"./unit-CopbpOEH.js";import"./Toaster-bRVMISGF.js";import"./toast-DJgp-ZGD.js";import"./layers-OK8ayVTK.js";import"./heart-pulse-BaF2IKdt.js";import"./chart-column-yMaSKbSU.js";import"./InputLabel-DroDk91L.js";import"./alert-Dg251AWL.js";import"./index-WHihrx3k.js";import"./circle-plus-hYoTMpMo.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wt=Ft("BookOpen",Vt),Qr=({services_:_e})=>{const[D,q]=c.useState(_e),[Qe,zs]=c.useState(""),[Ae,Ls]=c.useState("all"),[K,M]=c.useState(!1),{confirmArchive:Ys,confirmUnarchive:Us,ConfirmationDialog:Bs}=wt(),[me,qt]=c.useState({key:"servicename",direction:"ascending"}),[I,Te]=c.useState(1),[Ge]=c.useState(10),[F,xe]=c.useState([]),[Kt,Qt]=c.useState(!1),[_,Xe]=c.useState(null),[Gt,Xt]=c.useState(!1),[fs,he]=c.useState(!1),[p,ue]=c.useState(null),[Ze,ys]=c.useState(!1),[es,ss]=c.useState(!1);c.useEffect(()=>{q(_e),console.log("services: ",_e)},[_e]),c.useEffect(()=>{if(p&&D.length>0){const s=D.find(t=>t.id===p.id);if(s){const t=JSON.stringify(p.month_configurations||[]),r=JSON.stringify(s.month_configurations||[]);t!==r&&ue(s)}}},[D]),c.useEffect(()=>{if(p&&es){console.log("Setting form data for service:",p);const s=p?.servicedays?.map(r=>r.day)||[],t={};p?.servicedays?.forEach(r=>{t[r.day]=r.slot_capacity||20}),p?.month_configurations&&p.month_configurations.length>0&&p.month_configurations.forEach(r=>{r.day_configurations&&Object.keys(r.day_configurations).forEach(a=>{s.includes(a)||s.push(a),t[a]=r.day_configurations[a].slot_capacity||20})}),O("days",s),O("serviceid",p?.id),O("daySlots",t)}},[p,es]);const[Me,vs]=c.useState({servicename:"",status:"Active"}),[Zt,ea]=c.useState({name:"",description:"",duration:30,price:0,recurrenceDates:[]}),Ee=[...D.filter(s=>{const t=s.servicename.toLowerCase().includes(Qe.toLowerCase()),r=Ae==="all"||s.status===Ae;return t&&r})].sort((s,t)=>s[me.key]<t[me.key]?me.direction==="ascending"?-1:1:s[me.key]>t[me.key]?me.direction==="ascending"?1:-1:0),Q=Math.ceil(Ee.length/Ge),ts=(I-1)*Ge,js=ts+Ge,ye=Ee.slice(ts,js);c.useEffect(()=>{Te(1)},[Qe,Ae]);const Rs=()=>{F.length===ye.length?xe([]):xe(ye.map(s=>s.id))},Hs=s=>{xe(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},bs=async s=>{try{M(!0);const t=F.map(r=>$.put(`/admin/services/${r}/status`,{status:s}));await Promise.all(t),q(r=>r.map(a=>F.includes(a.id)?{...a,status:s}:a)),xe([]),h("Success","Bulk status update completed!","success","update")}catch(t){console.error("Error updating services:",t),h("Error","Failed to update services")}finally{M(!1)}},Js=async()=>{if(window.confirm(`Are you sure you want to delete ${F.length} services?`))try{M(!0);const s=F.map(t=>$.delete(`/admin/services/${t}`));await Promise.all(s),q(t=>t.filter(r=>!F.includes(r.id))),xe([]),h("Success","Services deleted successfully!","success","delete")}catch(s){console.error("Error deleting services:",s),h("Error","Failed to delete services")}finally{M(!1)}},Vs=async s=>{const t=D.flatMap(a=>a.subservices).find(a=>a.id===s),r=t?t.subservicename:"Sub-service";Ys(r,async()=>{try{M(!0),await $.post("/admin/services/sub-services/archive",{subservice_id:s}),q(a=>a.map(i=>({...i,subservices:i.subservices.map(l=>l.id===s?{...l,status:0}:l)}))),h("Success","Sub-service archived successfully!","success","archive")}catch(a){console.error("Error archiving sub-service:",a),h("Error","Failed to archive sub-service")}finally{M(!1)}})},Ws=async s=>{const t=D.flatMap(a=>a.subservices).find(a=>a.id===s),r=t?t.subservicename:"Sub-service";Us(r,async()=>{try{M(!0),await $.post("/admin/services/sub-services/unarchive",{subservice_id:s}),q(a=>a.map(i=>({...i,subservices:i.subservices.map(l=>l.id===s?{...l,status:1}:l)}))),h("Success","Sub-service unarchived successfully!","success","unarchive")}catch(a){console.error("Error unarchiving sub-service:",a),h("Error","Failed to unarchive sub-service")}finally{M(!1)}})},[ta,Ns]=c.useState(null),qs=s=>{Ze===s?(ys(null),Ns(null)):(ys(s),Ns(s))},Ks=()=>{if(D.find(r=>r.id===Fe.serviceid)?.subservices?.find(r=>r.subservicename?.toLowerCase()===Fe.subservicename?.toLowerCase())){h("Error","A sub-service with this name already exists for this service","error");return}Gs(route("admin.services.subservice.create"),{preserveScroll:!0,preserveState:!1,onSuccess:()=>{he(!1),h("Success","Sub-Service added successfully!"),V.reload({only:["services_"]})},onError:r=>{console.error("Validation errors:",r),r?.subservicename?h("Error",r.subservicename,"error"):h("Error","Failed to add sub-service. Please try again.","error")}})},Ss=async(s,t)=>{M(!0);try{const r=t?"/admin/services/unarchive":"/admin/services/archive",a=await $.post(r,{service_id:s});a.data.services&&(q(a.data.services),h("Success",a.data.message))}catch(r){console.error("Error archiving/unarchiving service:",r),h("Error",r.response?.data?.message||"An error occurred while updating the service")}finally{M(!1)}},Qs=s=>{switch(s){case 1:return e.jsx(Y,{className:"bg-green-500",children:"Active"});case 0:return e.jsx(Y,{className:"bg-gray-500",children:"Inactive"});default:return e.jsx(Y,{children:s})}},{data:Fe,setData:Oe,processing:ws,post:Gs,recentlySuccessful:aa,clearErrors:ra,errors:as}=ms({serviceid:"",subservicename:""}),{data:b,setData:O,post:Xs,processing:Cs,errors:Ds}=ms({days:[],serviceid:"",daySlots:{}}),Zs=()=>{if(console.log("Saving days with data:",b),!b.serviceid){h("Error","Service ID is required","error");return}if(!b.days||b.days.length===0){h("Error","Please add at least one day before saving","error");return}Xs(route("admin.services.days.update"),{preserveScroll:!0,preserveState:!1,replace:!0,onSuccess:s=>{console.log("Save successful, page data:",s),ss(!1),h("Success!","Days and slots have been saved!","success"),V.reload({only:["services_"],preserveScroll:!1})},onError:s=>{console.error("Save days errors:",s),h("Error","Failed to save days. Please try again.","error")}})},[et,la]=c.useState([]),[rs,G]=c.useState(!1),[ge,ls]=c.useState(!1),[ia,na]=c.useState(!1),[ca,oa]=c.useState(""),[da,ma]=c.useState(5),[xa,ha]=c.useState(null),[st,is]=c.useState(!1),[ua,tt]=c.useState([]),[P,ve]=c.useState({date:"",time:"",capacity:5}),[at,X]=c.useState(!1),[y,z]=c.useState([]),[S,L]=c.useState({day:"",timeSlots:[]}),[Z,$e]=c.useState(null),[rt,je]=c.useState(!1),[n,pe]=c.useState({day:"",year:new Date().getFullYear(),month:new Date().getMonth()+1,slotCapacity:20}),[ee,Ie]=c.useState(!1),[f,Pe]=c.useState({key:"date",direction:"asc"}),[ns,lt]=c.useState(""),[be,it]=c.useState("all"),[ks,ga]=c.useState(""),[cs,nt]=c.useState("all"),[os,ct]=c.useState("all"),[A,Ne]=c.useState({page:1,perPage:20}),[Se,ot]=c.useState("all"),[ze,dt]=c.useState("all"),[Le,mt]=c.useState("all"),[N,ds]=c.useState({key:"time",direction:"asc"}),[fe,se]=c.useState(1),[we]=c.useState(8),{data:Ye,setData:w,processing:Ue,post:xt,recentlySuccessful:pa,clearErrors:fa,errors:_s}=ms({times:et,subservice_id:_,subservicename:"",slot_capacities:[]}),ht=s=>{xt(route("admin.services.time.update"),{preserveScroll:!0,preserveState:!1,onSuccess:async()=>{if(y.length>0)try{await bt();return}catch{return}G(!1),h("Success!","Successfully Updated!","success"),V.reload({only:["services_"]})}})},ut=()=>{if(P.date&&P.time&&P.capacity){const s={...P,id:Date.now()};tt(t=>[...t,s]),ve({date:"",time:"",capacity:5}),is(!1)}},gt=()=>{if(S.day&&S.timeSlots.length>0){if(Z!==null){z(r=>r.map((a,i)=>i===Z?S:a)),$e(null),L({day:"",timeSlots:[]}),X(!1),h("Success",`${S.day} schedule updated successfully!`,"success");return}if(y.some(r=>r.day===S.day)){h("Validation Error",`${S.day} already exists in the schedule. Please choose a different day or edit the existing one.`,"error");return}const t={...S,id:Date.now()};z(r=>[...r,t]),L({day:"",timeSlots:[]}),X(!1),h("Success",`${S.day} schedule added successfully!`,"success")}},pt=s=>{z(t=>t.filter((r,a)=>a!==s))},ft=()=>{S.timeSlots.length<10&&L(s=>({...s,timeSlots:[...s.timeSlots,{time:"",capacity:5}]}))},yt=s=>{L(t=>({...t,timeSlots:t.timeSlots.filter((r,a)=>a!==s)}))},As=(s,t,r)=>{L(a=>({...a,timeSlots:a.timeSlots.map((i,l)=>l===s?{...i,[t]:r}:i)}))},Ts=(s,t,r,a)=>{z(i=>i.map((l,x)=>x===s?{...l,timeSlots:l.timeSlots.map((u,o)=>o===t?{...u,[r]:a}:u)}:l)),Ie(!0)},vt=s=>{z(r=>r.map((a,i)=>i===s?{...a,timeSlots:[...a.timeSlots,{time:"09:00",capacity:5}]}:a)),Ie(!0);const t=y[s]?.day||"Unknown";h("Time Slot Added",`New time slot added to ${t} schedule. Don't forget to save your changes!`,"success")},jt=(s,t)=>{z(a=>a.map((i,l)=>l===s?{...i,timeSlots:i.timeSlots.filter((x,u)=>u!==t)}:i)),Ie(!0);const r=y[s]?.day||"Unknown";h("Time Slot Removed",`Time slot removed from ${r} schedule. Don't forget to save your changes!`,"success")},bt=async()=>{try{const s=await $.post("/admin/services/day-slots/update",{subservice_id:_?.id,schedules:y});if(s.data.success)return y.length===0?h("Success!","All day-based schedules cleared successfully!","success"):h("Success!","Day-based schedules updated successfully!","success"),Ie(!1),G(!1),V.reload({only:["services_"]}),s}catch(s){throw console.error("Error saving day slot schedules:",s),h("Error!","Failed to update day-based schedules","error"),s}},Be=s=>{if(!s?.time_slots)return[];let t=s.time_slots;return Se!=="all"&&(t=t.filter(r=>r.day===Se)),ze!=="all"&&(t=t.filter(r=>r.specific_date?new Date(r.specific_date).getMonth()+1===parseInt(ze):!1)),Le!=="all"&&(t=t.filter(r=>r.specific_date?new Date(r.specific_date).getFullYear().toString()===Le:!1)),t.sort((r,a)=>{let i=0;if(N.key==="time")i=(r.time||"").localeCompare(a.time||"");else if(N.key==="date"){const l=r.specific_date||r.sample_date||"",x=a.specific_date||a.sample_date||"";i=new Date(l).getTime()-new Date(x).getTime()}else N.key==="availability"?i=(r.available_slots||0)-(a.available_slots||0):N.key==="capacity"?i=(r.max_slots||0)-(a.max_slots||0):N.key==="day"&&(i=(r.day||"").localeCompare(a.day||""));return N.direction==="asc"?i:-i}),t},Ms=s=>{const t=Be(s),r=(fe-1)*we,a=r+we;return t.slice(r,a)},Re=s=>{const t=Be(s);return Math.ceil(t.length/we)};c.useEffect(()=>{se(1)},[Se,ze,Le]),c.useEffect(()=>{if(rs&&_)if(console.log("selectedSubService:",_),console.log("selectedSubService.time_slots:",_.time_slots),console.log("selectedSubService.has_day_schedules:",_.has_day_schedules),_.has_day_schedules&&_.time_slots&&_.time_slots.length>0){const s=[],t={};_.time_slots.forEach(r=>{if(r.is_day_schedule&&r.day){const a=r.day;t[a]||(t[a]=[]),t[a].some(l=>l.time===r.time)||t[a].push({time:r.time,capacity:r.capacity||r.max_slots||5})}}),Object.entries(t).forEach(([r,a])=>{s.push({day:r,timeSlots:a})}),console.log("Loaded schedules:",s),s.length>0?z(s):z([])}else z([])},[rs,_]);const Nt=s=>s?.time_slots?[...new Set(s.time_slots.map(r=>r.day))].sort():[],Ce=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return c.useEffect(()=>{console.log("datatime; ",Ye)},[Ye]),e.jsxs(Et,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Services Management"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Monitor and manage all healthcare services and their performance metrics"})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsxs(B,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(R,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:D.length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Main service categories"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(hs,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[D.length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-blue-100 shadow-lg",children:e.jsx("div",{className:"text-blue-600",children:e.jsx(us,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(Y,{variant:"default",className:"text-xs",children:"+12%"})]})})]})]}),e.jsxs(B,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(R,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Sub-Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:D.reduce((s,t)=>s+(t.subservices?.length||0),0)}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Specific service types"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(hs,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[D.reduce((s,t)=>s+(t.subservices?.length||0),0)," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-green-100 shadow-lg",children:e.jsx("div",{className:"text-green-600",children:e.jsx(Wt,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(Y,{variant:"default",className:"text-xs",children:"+8%"})]})})]})]}),e.jsxs(B,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(R,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:D.filter(s=>s.status===1).length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Currently available"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(hs,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[D.filter(s=>s.status===1).length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-emerald-100 shadow-lg",children:e.jsx("div",{className:"text-emerald-600",children:e.jsx(Ot,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(Y,{variant:"default",className:"text-xs",children:"+15%"})]})})]})]}),e.jsxs(B,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(R,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Inactive Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:D.filter(s=>s.status===0).length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Requires attention"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($t,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600",children:[D.filter(s=>s.status===0).length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-red-100 shadow-lg",children:e.jsx("div",{className:"text-red-600",children:e.jsx(It,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(Y,{variant:"destructive",className:"text-xs",children:"+5%"})]})})]})]})]})}),e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(B,{className:"shadow-lg border-0",children:e.jsx(R,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(E,{placeholder:"Search services...",value:Qe,onChange:s=>zs(s.target.value),className:"pl-10 border-2 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zt,{className:"h-4 w-4 text-gray-500"}),e.jsxs(Ve,{value:Ae,onValueChange:Ls,children:[e.jsx(We,{className:"w-[180px] border-2",children:e.jsx(qe,{placeholder:"Filter by status"})}),e.jsxs(Ke,{children:[e.jsx(ae,{value:"all",children:"All Statuses"}),e.jsx(ae,{value:"Active",children:"Active"}),e.jsx(ae,{value:"Inactive",children:"Inactive"})]})]})]})]})})})}),F.length>0&&e.jsx(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(B,{className:"shadow-lg border-0 bg-blue-50 border-blue-200",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[F.length," service",F.length>1?"s":""," selected"]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>xe([]),className:"text-blue-600 hover:text-blue-700",children:"Clear selection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>bs(1),disabled:K,className:"border-green-200 text-green-700 hover:bg-green-50",children:"Activate"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>bs(0),disabled:K,className:"border-yellow-200 text-yellow-700 hover:bg-yellow-50",children:"Deactivate"}),e.jsx(m,{variant:"outline",size:"sm",onClick:Js,disabled:K,className:"border-red-200 text-red-700 hover:bg-red-50",children:"Delete"})]})]})})})}),e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(B,{className:"shadow-lg border-0 overflow-hidden",children:[e.jsx(Ct,{className:"bg-gray-50 border-b",children:e.jsx(Dt,{className:"text-lg font-semibold text-gray-900",children:"Services List"})}),e.jsx(R,{className:"p-0",children:e.jsx(Mt,{data:ye,defaultSort:{key:"servicename",direction:"asc"},children:({sortedData:s})=>e.jsxs(Fs,{children:[e.jsxs(xs,{children:[e.jsxs(te,{className:"bg-gray-50 hover:bg-gray-50",children:[e.jsx(U,{className:"w-12 text-center",children:e.jsx("input",{type:"checkbox",checked:F.length===ye.length&&ye.length>0,onChange:Rs,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(U,{sortKey:"servicename",sortable:!0,className:"font-semibold text-gray-900 w-12 text-center",children:e.jsx("span",{className:"sr-only",children:"Expand"})}),e.jsx(U,{sortKey:"servicename",sortable:!0,className:"font-semibold text-gray-900",children:"Service Name"}),e.jsx(U,{sortKey:"status",sortable:!0,className:"font-semibold text-gray-900",children:"Status"}),e.jsx(U,{className:"font-semibold text-gray-900",children:"Available Days"}),e.jsx(U,{className:"font-semibold text-gray-900",children:"Sub Services"}),e.jsx(U,{className:"font-semibold text-gray-900",children:"Actions"})]}),e.jsxs(te,{className:"bg-slate-50 border-b border-slate-200",children:[e.jsx(T,{colSpan:2}),e.jsx(T,{colSpan:3,className:"py-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(j,{className:"text-xs font-semibold text-slate-700 whitespace-nowrap",children:"Filter:"}),e.jsx(E,{placeholder:"Search days...",value:ns,onChange:t=>lt(t.target.value),className:"h-8 text-xs w-24"}),e.jsxs("select",{value:cs,onChange:t=>{nt(t.target.value),Ne({...A,page:1})},className:"h-8 text-xs border rounded px-2 w-20",children:[e.jsx("option",{value:"all",children:"All Months"}),e.jsx("option",{value:"1",children:"Jan"}),e.jsx("option",{value:"2",children:"Feb"}),e.jsx("option",{value:"3",children:"Mar"}),e.jsx("option",{value:"4",children:"Apr"}),e.jsx("option",{value:"5",children:"May"}),e.jsx("option",{value:"6",children:"Jun"}),e.jsx("option",{value:"7",children:"Jul"}),e.jsx("option",{value:"8",children:"Aug"}),e.jsx("option",{value:"9",children:"Sep"}),e.jsx("option",{value:"10",children:"Oct"}),e.jsx("option",{value:"11",children:"Nov"}),e.jsx("option",{value:"12",children:"Dec"})]}),e.jsxs("select",{value:os,onChange:t=>{ct(t.target.value),Ne({...A,page:1})},className:"h-8 text-xs border rounded px-2 w-16",children:[e.jsx("option",{value:"all",children:"All Years"}),e.jsx("option",{value:"2024",children:"2024"}),e.jsx("option",{value:"2025",children:"2025"}),e.jsx("option",{value:"2026",children:"2026"}),e.jsx("option",{value:"2027",children:"2027"}),e.jsx("option",{value:"2028",children:"2028"})]}),e.jsxs("select",{value:be,onChange:t=>it(t.target.value),className:"h-8 text-xs border rounded px-2 w-24",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"available",children:"Available"}),e.jsx("option",{value:"limited",children:"Limited"}),e.jsx("option",{value:"full",children:"Full"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 justify-center flex-wrap",children:[e.jsx(j,{className:"text-xs font-semibold text-slate-700 whitespace-nowrap",children:"Sort by:"}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Pe({key:"date",direction:f.key==="date"&&f.direction==="asc"?"desc":"asc"}),className:"h-8 text-xs px-2 flex items-center gap-1",children:["Date ",f.key==="date"&&(f.direction==="asc"?"↑":"↓")]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Pe({key:"day",direction:f.key==="day"&&f.direction==="asc"?"desc":"asc"}),className:"h-8 text-xs px-2 flex items-center gap-1",children:["Day ",f.key==="day"&&(f.direction==="asc"?"↑":"↓")]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Pe({key:"available",direction:f.key==="available"&&f.direction==="asc"?"desc":"asc"}),className:"h-8 text-xs px-2 flex items-center gap-1",children:["Slots ",f.key==="available"&&(f.direction==="asc"?"↑":"↓")]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Pe({key:"capacity",direction:f.key==="capacity"&&f.direction==="asc"?"desc":"asc"}),className:"h-8 text-xs px-2 flex items-center gap-1",children:["Capacity ",f.key==="capacity"&&(f.direction==="asc"?"↑":"↓")]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(j,{className:"text-xs font-semibold text-slate-700 whitespace-nowrap",children:"Show:"}),e.jsxs("select",{value:A.perPage,onChange:t=>Ne({...A,perPage:parseInt(t.target.value),page:1}),className:"h-8 text-xs border rounded px-2 py-1 w-16",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Ne({...A,page:Math.max(1,A.page-1)}),disabled:A.page===1,className:"h-8 w-8 text-xs p-0",children:"‹"}),e.jsx("span",{className:"text-xs text-slate-600 px-2",children:A.page}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Ne({...A,page:A.page+1}),className:"h-8 w-8 text-xs p-0",children:"›"})]})]})]})})]})]}),e.jsx(Os,{children:s.map((t,r)=>e.jsxs(St.Fragment,{children:[e.jsxs(te,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(T,{className:"text-center",children:e.jsx("input",{type:"checkbox",checked:F.includes(t.id),onChange:()=>Hs(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(T,{className:"text-center",children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>qs(t.id),className:"hover:bg-blue-100 hover:text-blue-600",children:Ze===t.id?e.jsx(Lt,{className:"h-4 w-4"}):e.jsx(gs,{className:"h-4 w-4"})})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(us,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.servicename}),e.jsx("p",{className:"text-sm text-gray-500",children:"Service Category"})]})]})}),e.jsx(T,{children:Qs(t.status)}),e.jsx(T,{children:(()=>{if(t.status===0)return e.jsx("span",{className:"text-xs text-gray-400 italic",children:"N/A (Service Inactive)"});let a=[];t?.servicedays?.forEach((o,d)=>{o.date_specific_availability&&o.date_specific_availability.length>0&&o.date_specific_availability.forEach((v,g)=>{const C=new Date(v.date),J=`${d}-${g}-${v.date}`;a.push({day:o.day,date:v.date,dateIndex:g,key:J,totalMaxSlots:v.total_slots||0,totalAvailableSlots:v.available_slots||0,dateData:v,isDateSpecific:!0,dateFormatted:C.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),bookedSlots:v.booked_slots||0})})});let i=a.filter(o=>{if(ns&&!o.day.toLowerCase().includes(ns.toLowerCase())||ks&&o.date&&!o.date.includes(ks))return!1;if(cs!=="all"&&o.date){const d=new Date(o.date).getMonth()+1;if(parseInt(cs)!==d)return!1}if(os!=="all"&&o.date){const d=new Date(o.date).getFullYear().toString();if(os!==d)return!1}if(be!=="all"){const d=o.totalAvailableSlots;if(be==="available"&&(d===0||d<=2)||be==="limited"&&d!==0&&d>2||be==="full"&&d>0)return!1}return!0});f.key&&i.sort((o,d)=>{if(f.key==="day")return f.direction==="asc"?o.day.localeCompare(d.day):d.day.localeCompare(o.day);if(f.key==="date"){const v=o.date?new Date(o.date).getTime():0,g=d.date?new Date(d.date).getTime():0;return f.direction==="asc"?v-g:g-v}return f.key==="available"?f.direction==="asc"?o.totalAvailableSlots-d.totalAvailableSlots:d.totalAvailableSlots-o.totalAvailableSlots:f.key==="capacity"?f.direction==="asc"?o.totalMaxSlots-d.totalMaxSlots:d.totalMaxSlots-o.totalMaxSlots:0});const l=(A.page-1)*A.perPage,x=l+A.perPage,u=i.slice(l,x);return Math.ceil(i.length/A.perPage),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1 max-h-32 overflow-y-auto",children:u.map(o=>{let d="bg-blue-100 text-blue-700 border-blue-200";return o.totalAvailableSlots===0?d="bg-red-100 text-red-700 border-red-200":o.totalAvailableSlots<=2?d="bg-orange-100 text-orange-700 border-orange-200":o.totalAvailableSlots<=5?d="bg-yellow-100 text-yellow-700 border-yellow-200":d="bg-green-100 text-green-700 border-green-200",e.jsx(Y,{variant:"secondary",className:d,title:o.isDateSpecific?o.dateFormatted:`${o.day} - ${o.totalAvailableSlots}/${o.totalMaxSlots} slots`,children:e.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[e.jsx("span",{className:"text-xs font-semibold",children:o.day}),o.dateFormatted&&e.jsx("span",{className:"text-[10px] text-gray-600 font-medium",children:o.dateFormatted}),e.jsxs("span",{className:"text-xs font-bold",children:[o.totalAvailableSlots,"/",o.totalMaxSlots]})]})},o.key)})}),i.length>A.perPage&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",l+1,"-",Math.min(x,i.length)," of ",i.length]})]})})()}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Y,{variant:"outline",className:"border-gray-300",children:[t?.subservices.length||0," Sub-service",t?.subservices.length!==1?"s":""]})})}),e.jsx(T,{children:e.jsx("div",{className:"flex gap-2",children:e.jsxs(kt,{children:[e.jsx(_t,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Yt,{className:"h-4 w-4"})})}),e.jsxs(At,{align:"end",children:[e.jsx(Tt,{children:"Actions"}),e.jsx(Es,{}),e.jsxs(Je,{onClick:()=>{Oe("serviceid",t.id),Oe("subservicename",""),he(!0)},className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Add Sub-service"]}),e.jsxs(Je,{onClick:()=>{ue(t),ss(!0)},className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Edit Days"]}),e.jsx(Es,{}),t.status===0?e.jsxs(Je,{onClick:()=>Ss(t.id,!0),className:"flex items-center gap-2 text-green-600",children:[e.jsx($s,{className:"h-4 w-4"}),"Unarchive"]}):e.jsxs(Je,{onClick:()=>Ss(t.id,!1),className:"flex items-center gap-2 text-red-600",children:[e.jsx(Is,{className:"h-4 w-4"}),"Archive"]})]})]})})})]}),Ze===t.id&&e.jsx(te,{children:e.jsx(T,{colSpan:6,className:"p-0",children:e.jsxs("div",{className:"bg-gray-50 p-6 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ut,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:["Sub-services for ",t.servicename]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage sub-services and their schedules"})]})]}),t.subservices.length>0?e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsxs(Fs,{children:[t?.subservices?.[0]?.time_slots&&t.subservices[0].time_slots.length>0&&e.jsx(xs,{children:e.jsxs(te,{className:"bg-blue-50 border-b-2 border-blue-200",children:[e.jsx(T,{colSpan:1,className:"py-2"}),e.jsx(T,{colSpan:2,className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"text-xs font-semibold text-gray-700",children:"Day:"}),e.jsxs(Ve,{value:Se,onValueChange:a=>{ot(a),se(1)},children:[e.jsx(We,{className:"w-32 h-8 text-xs",children:e.jsx(qe,{placeholder:"All"})}),e.jsxs(Ke,{children:[e.jsx(ae,{value:"all",children:"All Days"}),Nt(t?.subservices?.[0]).map(a=>e.jsx(ae,{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"text-xs font-semibold text-gray-700",children:"Month:"}),e.jsxs("select",{value:ze,onChange:a=>{dt(a.target.value),se(1)},className:"h-8 text-xs border rounded px-2 w-20",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"1",children:"Jan"}),e.jsx("option",{value:"2",children:"Feb"}),e.jsx("option",{value:"3",children:"Mar"}),e.jsx("option",{value:"4",children:"Apr"}),e.jsx("option",{value:"5",children:"May"}),e.jsx("option",{value:"6",children:"Jun"}),e.jsx("option",{value:"7",children:"Jul"}),e.jsx("option",{value:"8",children:"Aug"}),e.jsx("option",{value:"9",children:"Sep"}),e.jsx("option",{value:"10",children:"Oct"}),e.jsx("option",{value:"11",children:"Nov"}),e.jsx("option",{value:"12",children:"Dec"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"text-xs font-semibold text-gray-700",children:"Year:"}),e.jsxs("select",{value:Le,onChange:a=>{mt(a.target.value),se(1)},className:"h-8 text-xs border rounded px-2 w-16",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"2024",children:"2024"}),e.jsx("option",{value:"2025",children:"2025"}),e.jsx("option",{value:"2026",children:"2026"}),e.jsx("option",{value:"2027",children:"2027"}),e.jsx("option",{value:"2028",children:"2028"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(j,{className:"text-xs font-semibold text-gray-700",children:"Sort:"}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>ds({key:"time",direction:N.key==="time"&&N.direction==="asc"?"desc":"asc"}),className:"h-7 text-xs px-2",children:["Time ",N.key==="time"&&(N.direction==="asc"?"↑":"↓")]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>ds({key:"date",direction:N.key==="date"&&N.direction==="asc"?"desc":"asc"}),className:"h-7 text-xs px-2",children:["Date ",N.key==="date"&&(N.direction==="asc"?"↑":"↓")]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>ds({key:"availability",direction:N.key==="availability"&&N.direction==="asc"?"desc":"asc"}),className:"h-7 text-xs px-2",children:["Slots ",N.key==="availability"&&(N.direction==="asc"?"↑":"↓")]})]})]})})]})}),e.jsx(xs,{children:e.jsxs(te,{className:"bg-gray-50",children:[e.jsx(U,{className:"font-medium w-1/3",children:"Sub Service"}),e.jsx(U,{className:"font-medium w-1/3",children:"Available Time & Slots"}),e.jsx(U,{className:"font-medium w-1/3 text-right",children:"Actions"})]})}),e.jsx(Os,{children:t?.subservices.map((a,i)=>e.jsxs(te,{className:"hover:bg-gray-50",children:[e.jsx(T,{className:"py-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-3 h-full",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-md flex-shrink-0",children:e.jsx(H,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:a.subservicename}),e.jsx(Y,{variant:a.status===1?"default":"secondary",className:`text-xs ${a.status===1?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"}`,children:a.status===1?"Active":"Archived"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sub-service"})]})]})}),e.jsx(T,{className:"py-4 align-middle",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3 items-center h-full",children:Ms(a).length>0?Ms(a).map((l,x)=>{const u=l.available_slots||0,o=l.max_slots||5;l.booked_slots;const d=u===0,v=u<=o*.3,g=u>=3&&u<=5;return e.jsxs("div",{className:`relative flex flex-col items-center rounded-xl p-3 border-2 transition-all duration-200 hover:shadow-md ${d?"bg-red-50 border-red-200":v?"bg-orange-50 border-orange-200":g?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${d?"bg-red-100":v?"bg-orange-100":g?"bg-yellow-100":"bg-green-100"}`,children:e.jsx(H,{className:`h-3 w-3 ${d?"text-red-600":v?"text-orange-600":g?"text-yellow-600":"text-green-600"}`})}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:ke(l.time,"HH:mm:ss").format("hh:mm A")}),l.date_formatted&&e.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-200 font-medium",children:l.date_formatted}),!l.date_formatted&&l.specific_date&&e.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-200 font-medium",children:ke(l.specific_date).format("MMM D, YYYY")}),!l.date_formatted&&!l.specific_date&&l.day&&e.jsx("span",{className:"text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:l.day})]})]}),"in",e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${d?"bg-red-100 text-red-700":v?"bg-orange-100 text-orange-700":g?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[u,"/",o]}),e.jsx("span",{className:"text-xs text-gray-500",children:"slots"})]}),e.jsx("div",{className:"w-full mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${d?"bg-red-500":v?"bg-orange-500":g?"bg-yellow-500":"bg-green-500"}`,style:{width:`${(o-u)/o*100}%`}})})}),d&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})})]},x)}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx(H,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:a?.time_slots&&a.time_slots.length>0?`No time slots for ${Se}`:"No times assigned"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Click edit to add time slots"})]})}),Re(a)>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(fe-1)*we+1," to ",Math.min(fe*we,Be(a).length)," of ",Be(a).length," time slots"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>se(l=>Math.max(1,l-1)),disabled:fe===1,className:"h-8 w-8 p-0",children:e.jsx(Bt,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Re(a)},(l,x)=>x+1).map(l=>e.jsx(m,{variant:l===fe?"default":"outline",size:"sm",onClick:()=>se(l),className:"h-8 w-8 p-0",children:l},l))}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>se(l=>Math.min(Re(a),l+1)),disabled:fe===Re(a),className:"h-8 w-8 p-0",children:e.jsx(Rt,{className:"h-4 w-4"})})]})]})]})}),e.jsx(T,{className:"py-4 align-middle text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 h-full",children:[a?.times&&a.times.length>0?e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{w("subservice_id",a.id),Xe(a),w("subservicename",a.subservicename),w("times",a?.times?.map(l=>ke(l.time,"HH:mm:ss").format("hh:mm A"))||[]),w("slot_capacities",a?.times?.map(l=>l.max_slots||5)||[]),ls(!0),G(!0)},className:"hover:bg-green-100 hover:text-green-600 h-8 w-8 p-0",title:"Edit existing time slots",children:e.jsx(H,{className:"h-4 w-4"})}):null,e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{w("subservice_id",a.id),Xe(a),w("subservicename",a.subservicename),w("times",[]),w("slot_capacities",[]),ls(!1),G(!0)},className:"hover:bg-blue-100 hover:text-blue-600 h-8 w-8 p-0",title:"Add time slots",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{w("subservice_id",a.id),Xe(a),w("subservicename",a.subservicename),w("times",a?.times?.map(l=>ke(l.time,"HH:mm:ss").format("hh:mm A"))||[]),w("slot_capacities",a?.times?.map(l=>l.max_slots||5)||[]),ls(!0),G(!0)},className:"hover:bg-blue-100 hover:text-blue-600 h-8 w-8 p-0",title:"Edit sub-service details",children:e.jsx(Ps,{className:"h-4 w-4"})}),a.status===1?e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>Vs(a.id),className:"hover:bg-yellow-100 hover:text-yellow-600 h-8 w-8 p-0",title:"Archive sub-service",disabled:K,children:e.jsx(Is,{className:"h-4 w-4"})}):e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>Ws(a.id),className:"hover:bg-green-100 hover:text-green-600 h-8 w-8 p-0",title:"Unarchive sub-service",disabled:K,children:e.jsx($s,{className:"h-4 w-4"})})]})})]},i))})]})}):e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg border border-dashed border-gray-300",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-full w-fit mx-auto mb-3",children:e.jsx(W,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No sub-services found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add sub-services to organize this service better"}),e.jsxs(m,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>{Oe("serviceid",t.id),he(!0)},children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add First Sub-service"]})]})]})})})]},r))})]})})})]})}),e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(B,{className:"shadow-lg border-0",children:e.jsxs(R,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(k,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Available Days Legend"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Color-coded slot availability for each day"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-green-700 text-xs font-bold"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Available (6+ slots)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 border-2 border-yellow-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-700 text-xs font-bold"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Moderate (3-5 slots)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-orange-700 text-xs font-bold"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Limited (1-2 slots)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-red-700 text-xs font-bold"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Full (0 slots)"})]})]})]})})}),Q>1&&e.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(B,{className:"shadow-lg border-0",children:e.jsx(R,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",ts+1," to ",Math.min(js,Ee.length)," of ",Ee.length," services"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Te(Math.max(1,I-1)),disabled:I===1,className:"flex items-center gap-1",children:[e.jsx(gs,{className:"h-4 w-4 rotate-90"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(10,Q)},(s,t)=>{let r;return Q<=10||I<=5?r=t+1:I>=Q-4?r=Q-9+t:r=I-4+t,e.jsx(m,{variant:I===r?"default":"outline",size:"sm",onClick:()=>Te(r),className:`w-8 h-8 p-0 ${I===r?"bg-blue-600 hover:bg-blue-700 text-white":"hover:bg-gray-50"}`,children:r},r)})}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Te(Math.min(Q,I+1)),disabled:I===Q,className:"flex items-center gap-1",children:["Next",e.jsx(gs,{className:"h-4 w-4 -rotate-90"})]})]})]})})})})]}),e.jsx(re,{open:fs,onOpenChange:s=>{he(s),s||vs({servicename:"",status:"Active"})},children:e.jsxs(le,{className:"max-w-md",children:[e.jsxs(ie,{children:[e.jsx(ne,{className:"text-xl font-semibold",children:"Add New Service"}),e.jsx(ce,{children:"Create a new service category for appointments"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"servicename",children:"Service Name"}),e.jsx(E,{id:"servicename",name:"servicename",value:Me.servicename,onChange:s=>vs({...Me,servicename:s.target.value}),placeholder:"Enter service name",className:"border-2 focus:border-blue-500"})]})}),e.jsx(oe,{children:e.jsx(m,{type:"submit",onClick:async()=>{try{M(!0);const s=await $.post("/admin/services/create",Me);s.data.services&&(q(s.data.services),he(!1),h("Success","Service added successfully!"))}catch(s){console.error("Error creating service:",s),h("Error",s.response?.data?.message||"An error occurred while creating the service")}finally{M(!1)}},disabled:!Me.servicename||K,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:K?"Adding...":"Add Service"})})]})}),e.jsx(re,{open:fs,onOpenChange:s=>{he(s)},children:e.jsxs(le,{className:"max-w-md",children:[e.jsxs(ie,{children:[e.jsx(ne,{className:"text-xl font-semibold",children:"Add Sub-service"}),e.jsx(ce,{children:"Create a new sub-service for this service category"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"subName",children:"Sub Service Name"}),e.jsx(E,{id:"subName",name:"name",value:Fe.subservicename,onChange:s=>{Oe("subservicename",s.target.value)},placeholder:"Enter sub-service name",className:`border-2 focus:border-blue-500 ${as?.subservicename?"border-red-500":""}`}),as?.subservicename&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:as.subservicename})]})}),e.jsx(oe,{children:e.jsx(m,{type:"submit",onClick:Ks,disabled:!Fe.subservicename||ws,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:ws?"Adding...":"Add Sub-service"})})]})}),e.jsx(re,{open:es,onOpenChange:s=>{if(ss(s),s&&p){const t=p?.servicedays?.map(a=>a.day)||[],r={};p?.servicedays?.forEach(a=>{r[a.day]=a.slot_capacity||20}),p?.month_configurations&&p.month_configurations.length>0&&p.month_configurations.forEach(a=>{a.day_configurations&&Object.keys(a.day_configurations).forEach(i=>{t.includes(i)||t.push(i),r[i]=a.day_configurations[i].slot_capacity||20})}),O("days",t),O("serviceid",p?.id),O("daySlots",r)}else s||(O("days",[]),O("serviceid",""),O("daySlots",{}))},children:e.jsxs(le,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{className:"pb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(ne,{className:"text-2xl font-bold text-gray-900",children:"Edit Available Days & Slots"}),e.jsx(ce,{className:"text-gray-600 mt-1",children:"Select days and set slot capacity for this service"})]})]})}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-6 border-2 border-purple-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-purple-900",children:"Manage Specific Month Days"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Configure all occurrences of a specific day (e.g., all Mondays) within a month"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:Ce.map(s=>e.jsx(m,{variant:"outline",onClick:()=>{pe({...n,day:s}),je(!0)},className:"h-auto py-3 border-purple-200 text-purple-700 hover:bg-purple-50 hover:border-purple-300",children:e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx("span",{className:"font-semibold",children:s}),e.jsx("span",{className:"text-xs text-purple-500",children:"Click to configure"})]})},s))}),e.jsxs(m,{variant:"outline",size:"lg",onClick:()=>je(!0),className:"w-full border-purple-300 text-purple-700 hover:bg-purple-100",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"Configure Days Manually"]})]}),p?.month_configurations&&p.month_configurations.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Currently Configured Days (Month-Specific)"]}),e.jsx("p",{className:"text-xs text-green-600 mb-3",children:"These configurations apply to specific months only"}),e.jsx("div",{className:"space-y-3",children:p.month_configurations.map((s,t)=>{const r=new Date(s.year,s.month-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-green-800",children:r}),e.jsx("button",{onClick:async()=>{try{const a=await $.delete(`/admin/services/month-days/${s.id}`);console.log("Delete response:",a.data),a.data.success?(ue(i=>{if(!i)return i;const l=i.month_configurations?.filter(x=>x.id!==s.id)||[];return{...i,month_configurations:l}}),h("Success",`Removed configuration for ${r}`,"success"),V.reload({only:["services_"]})):h("Error",a.data.message||"Failed to remove configuration","error")}catch(a){console.error("Error removing month configuration:",a);const i=a.response?.data?.message||a.message||"Failed to remove configuration";h("Error",i,"error")}},className:"text-red-600 hover:text-red-800",title:"Remove this month configuration",children:e.jsx(De,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.day_configurations||{}).map(([a,i])=>e.jsxs("div",{className:"bg-green-50 rounded px-2 py-1 border border-green-200 flex items-center gap-1 group",children:[e.jsx("span",{className:"text-xs font-medium text-green-700",children:a}),e.jsxs("span",{className:"text-xs text-green-600",children:["(",i.slot_capacity||20," slots)"]}),e.jsx("button",{onClick:async()=>{try{const l={...s.day_configurations};if(delete l[a],Object.keys(l).length===0)(await $.delete(`/admin/services/month-days/${s.id}`)).data.success&&(ue(u=>{if(!u)return u;const o=u.month_configurations?.filter(d=>d.id!==s.id)||[];return{...u,month_configurations:o}}),h("Success",`Removed ${a} from ${r}`,"success"),V.reload({only:["services_"]}));else{const x=await $.put(`/admin/services/month-days/${s.id}`,{day_configurations:l},{headers:{"Content-Type":"application/json"}});x.data.success?(ue(u=>{if(!u)return u;const o=u.month_configurations?.map(d=>d.id===s.id?{...d,day_configurations:l}:d);return{...u,month_configurations:o}}),h("Success",`Removed ${a} from ${r}`,"success"),V.reload({only:["services_"]})):h("Error",x.data.message||"Failed to remove day","error")}}catch(l){console.error("Error removing day:",l);const x=l.response?.data?.message||l.message||"Failed to remove day";h("Error",x,"error")}},className:"text-red-600 hover:text-red-800 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove this day",children:e.jsx(De,{className:"h-3 w-3"})})]},a))})]},t)})})]}),Object.keys(Ds).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(De,{className:"h-5 w-5 text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(Ds).map(([s,t])=>e.jsx("li",{children:t},s))})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Summary"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Selected Days: ",b.days.length]}),e.jsxs("div",{children:["Average Slots per Day: ",b.days.length>0?Math.round(Object.values(b.daySlots).reduce((s,t)=>s+(t||0),0)/b.days.length):0]})]})]}),e.jsxs(oe,{className:"flex flex-col gap-3 border-t border-gray-200 pt-6",children:[b.days&&b.days.length>0&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded w-full",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Note:"}),' Click "Save Days & Slots" to persist these changes to the database. The patient calendar will update only after you save.']})}),e.jsx(m,{onClick:Zs,disabled:Cs||!b.days||b.days.length===0,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:Cs?"Saving...":"Save Days & Slots"})]})]})}),e.jsx(re,{open:rt,onOpenChange:je,children:e.jsxs(le,{className:"max-w-2xl",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs(ne,{className:"text-2xl font-bold text-gray-900",children:["Manage Recurring Days for ",p?.servicename||"Service"]}),e.jsx(ce,{className:"text-gray-600 mt-1",children:"Configure all occurrences of a specific day within a month (e.g., all Mondays in November 2025). This configuration will ONLY apply to the selected month."})]})]})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"recurringDay",className:"text-sm font-semibold",children:"Select Day of Week"}),e.jsxs("select",{id:"recurringDay",value:n.day,onChange:s=>pe({...n,day:s.target.value}),className:"w-full border-2 border-gray-300 rounded-lg p-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200",children:[e.jsx("option",{value:"",children:"-- Select Day --"}),Ce.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"recurringMonth",className:"text-sm font-semibold",children:"Month"}),e.jsx("select",{id:"recurringMonth",value:n.month,onChange:s=>pe({...n,month:parseInt(s.target.value)}),className:"w-full border-2 border-gray-300 rounded-lg p-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((s,t)=>e.jsx("option",{value:t+1,children:s},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"recurringYear",className:"text-sm font-semibold",children:"Year"}),e.jsx("select",{id:"recurringYear",value:n.year,onChange:s=>pe({...n,year:parseInt(s.target.value)}),className:"w-full border-2 border-gray-300 rounded-lg p-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200",children:Array.from({length:5},(s,t)=>new Date().getFullYear()+t).map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"recurringSlots",className:"text-sm font-semibold",children:"Slot Capacity"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(us,{className:"h-5 w-5 text-purple-600"}),e.jsx(E,{id:"recurringSlots",type:"number",min:"1",max:"100",value:n.slotCapacity,onChange:s=>pe({...n,slotCapacity:parseInt(s.target.value)}),className:"flex-1 border-2 border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200"}),e.jsx("span",{className:"text-sm text-gray-600",children:"slots per occurrence"})]})]}),n.day&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("h5",{className:"text-sm font-semibold text-purple-800 mb-2",children:"Preview"}),e.jsxs("p",{className:"text-xs text-purple-600",children:["This will configure all occurrences of ",e.jsx("strong",{children:n.day})," in"," ",new Date(n.year,n.month-1).toLocaleDateString("en-US",{month:"long",year:"numeric"}),"."]}),e.jsxs("p",{className:"text-xs text-purple-700 mt-2",children:[e.jsx("strong",{children:"Note:"})," This configures ALL dates of that day in the month. For example, all Mondays in November = 5 dates total."]})]}),(()=>{if(!n.day)return null;const s=new Date,t=s.getFullYear(),r=s.getMonth()+1;s.getDate();const a=n.year<t||n.year===t&&n.month<r;let i=!1;if(n.year===t&&n.month===r){const l=Ce.indexOf(n.day),x=new Date(n.year,n.month-1,1);for(;x.getDay()!==l;)x.setDate(x.getDate()+1);const u=new Date(x);for(;u.getMonth()===n.month-1;)u.setDate(u.getDate()+7);u.setDate(u.getDate()-7),i=u<s}return(a||i)&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(De,{className:"h-5 w-5 text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-800 font-semibold",children:"Invalid Date Selection"}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:a?"Cannot configure days for months that have already passed.":"All occurrences of this day in this month have already passed."})]})]})})})()]}),e.jsxs(oe,{children:[e.jsx(m,{variant:"outline",onClick:()=>{je(!1),pe({day:"",year:new Date().getFullYear(),month:new Date().getMonth()+1,slotCapacity:20})},children:"Cancel"}),e.jsxs(m,{onClick:async()=>{if(!n.day||!b.serviceid){h("Error","Please select a day","error");return}const s=new Date,t=s.getFullYear(),r=s.getMonth()+1;if(n.year<t||n.year===t&&n.month<r){h("Error","Cannot configure days for months that have already passed","error");return}try{const i=[],l=new Date(n.year,n.month-1,1),x=Ce.indexOf(n.day);for(;l.getDay()!==x;)l.setDate(l.getDate()+1);for(;l.getMonth()===n.month-1;)i.push(l.toISOString().split("T")[0]),l.setDate(l.getDate()+7);await $.post("/admin/services/month-days/update",{service_id:b.serviceid,year:n.year,month:n.month,day:n.day,dates:i,slot_capacity:n.slotCapacity});const u=b.days.includes(n.day)?b.days:[...b.days,n.day],o={...b.daySlots,[n.day]:n.slotCapacity};O("days",u),O("daySlots",o),ue(d=>{if(!d)return d;const v={slot_capacity:n.slotCapacity,dates:i,updated_at:new Date().toISOString()},g=d.month_configurations?.find(C=>C.year===n.year&&C.month===n.month);if(g){const C=d.month_configurations.map(J=>{if(J.id===g.id){const He={...J.day_configurations,[n.day]:v};return{...J,day_configurations:He}}return J});return{...d,month_configurations:C}}else{const C={id:`temp_${Date.now()}`,service_id:d.id,year:n.year,month:n.month,day_configurations:{[n.day]:v},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return{...d,month_configurations:[...d.month_configurations||[],C]}}}),h("Success",`Configured ${i.length} date${i.length>1?"s":""} of ${n.day} in ${new Date(n.year,n.month-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})} with ${n.slotCapacity} slots each`,"success"),je(!1),V.reload({only:["services_"]})}catch(i){console.error("Error saving month-specific days:",i),h("Error","Failed to save month-specific configuration","error")}},disabled:(()=>{if(!n.day)return!0;const s=new Date,t=s.getFullYear(),r=s.getMonth()+1;if(n.year<t||n.year===t&&n.month<r)return!0;if(n.year===t&&n.month===r){const i=Ce.indexOf(n.day),l=new Date(n.year,n.month-1,1);for(;l.getDay()!==i;)l.setDate(l.getDate()+1);const x=new Date(l);for(;x.getMonth()===n.month-1;)x.setDate(x.getDate()+7);return x.setDate(x.getDate()-7),x<s}return!1})(),className:"bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Apply to All Occurrences"]})]})]})}),e.jsx(re,{open:rs,onOpenChange:s=>{G(s),s?(w("subservice_id",_?.id),w("subservicename",_?.subservicename),w("times",_?.times?.map(t=>ke(t.time,"HH:mm:ss").format("hh:mm A"))||[]),w("slot_capacities",_?.times?.map(t=>t.max_slots||5)||[])):(z([]),$e(null))},children:e.jsxs(le,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{className:"pb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(H,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(ne,{className:"text-2xl font-bold text-gray-900",children:ge?"Edit Sub-Service Times & Slots":"Add Sub-Service Times & Slots"}),e.jsx(ce,{className:"text-gray-600 mt-1",children:ge?"Update existing time slots and capacities for this sub-service":"Add new time slots and capacities for this sub-service"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start space-x-3",children:e.jsx("div",{})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:e.jsx(Ht,{className:"h-4 w-4 text-purple-600"})}),e.jsx(j,{className:"text-base font-semibold",children:"Sub-Service Name"})]}),e.jsx(E,{value:Ye.subservicename,onChange:s=>{w("subservicename",s.target.value)},className:"border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg h-12 text-lg font-medium",placeholder:"Enter sub-service name..."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xl font-bold text-gray-900",children:"Day-Based Slot Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure unique time slots and capacities for each day"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Schedule Configuration"}),e.jsx("p",{className:"text-sm text-green-700",children:ge?"Current day schedules - Click on time slots or capacity to edit inline":'Click "Add Day Schedule" below to create new schedules'})]})]}),!ge&&e.jsxs(m,{onClick:()=>X(!0),size:"lg",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Add Day Schedule"]})]}),y.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-blue-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Day-of-Week Schedules (Recurring)"}),e.jsxs("p",{children:["These schedules apply to ",e.jsx("strong",{children:"all occurrences"})," of each day (e.g., every Monday, every Tuesday). They don't have specific dates."]}),e.jsxs("p",{className:"mt-1",children:["To configure specific dates with different times/slots, use the ",e.jsx("strong",{children:'"Manage Specific Month Days"'})," feature."]})]})]})}),y.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"p-1 bg-blue-100 rounded",children:e.jsx(k,{className:"h-4 w-4 text-blue-600"})}),e.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"Configured Days"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-2 bg-white px-3 py-1 rounded-full border border-blue-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:s.day}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.timeSlots.length," slots)"]})]},t))}),e.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[y.length," of 7 days configured. Each day can only be configured once."]})]}),y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((s,t)=>e.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 shadow-sm hover:shadow-md transition-all duration-200 ${ee?"border-orange-300 bg-orange-50":"border-green-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:e.jsx(k,{className:"h-4 w-4 text-green-600"})}),e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:s.day})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>{L(s),$e(t),X(!0)},className:"p-2 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit day schedule",children:e.jsx(Ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>pt(t),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Remove day schedule",children:e.jsx(ps,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[s.timeSlots.map((r,a)=>{const l=(x=>{const u=[],o=new Date,d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(x),v=p||D.find(g=>g.id===p?.id);if(v&&v.month_configurations&&v.month_configurations.forEach(g=>{const C=g.day_configurations?.[x];C&&C.dates&&C.dates.forEach(J=>{const He=new Date(J);He>=o&&u.push(He)})}),u.length===0){const g=new Date;for(;g.getDay()!==d;)g.setDate(g.getDate()+1);for(let C=0;C<8;C++)u.push(new Date(g)),g.setDate(g.getDate()+7)}return u.sort((g,C)=>g-C)})(s.day);return e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-green-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx(H,{className:"h-3 w-3 text-gray-500"}),e.jsx(E,{type:"time",value:r.time,onChange:x=>Ts(t,a,"time",x.target.value),className:"h-8 text-sm border-0 bg-transparent p-0 font-medium text-gray-800 focus:ring-0 focus:border-green-500 w-24"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{type:"number",min:"1",max:"50",value:r.capacity,onChange:x=>Ts(t,a,"capacity",parseInt(x.target.value)||1),className:"w-16 h-6 text-xs text-center border-0 bg-blue-100 text-blue-800 rounded-full focus:ring-0 focus:border-blue-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"slots"}),e.jsx("button",{onClick:()=>jt(t,a),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Remove time slot",children:e.jsx(ps,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Applies to:"}),l.slice(0,4).map((x,u)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full border border-blue-200 font-medium",children:x.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},u)),l.length>4&&e.jsxs("span",{className:"text-xs text-blue-600 font-medium italic",children:["+",l.length-4," more dates"]})]})]},a)}),e.jsxs("button",{onClick:()=>vt(t),className:`w-full p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg border border-dashed border-green-300 transition-colors text-sm font-medium ${ee?"animate-pulse bg-green-100 border-green-400":""}`,children:[e.jsx(W,{className:"h-3 w-3 mr-1 inline"}),"Add Time Slot",ee&&e.jsx("span",{className:"ml-1 text-xs text-orange-600",children:"(Unsaved)"})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[s.timeSlots.length," time slots"]}),e.jsxs("span",{children:[s.timeSlots.reduce((r,a)=>r+a.capacity,0)," total capacity"]})]})})]},t))}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-4 bg-white rounded-xl border-2 border-dashed border-green-300 mb-4",children:[e.jsx(k,{className:"h-12 w-12 text-green-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Day Schedules Configured"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:ge?"No additional schedules to manage. This sub-service does not have day-based schedules configured.":"Start by adding day schedules to configure different time slots and capacities for each day of the week."}),!ge&&e.jsxs(m,{onClick:()=>X(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Your First Day Schedule"]})]})}),y.length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-xl border border-green-200 p-4",children:[ee&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-orange-700 font-medium",children:"You have unsaved changes"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Days Configured"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.reduce((s,t)=>s+t.timeSlots.length,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Time Slots"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:y.reduce((s,t)=>s+t.timeSlots.reduce((r,a)=>r+a.capacity,0),0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Capacity"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Math.round(y.reduce((s,t)=>s+t.timeSlots.reduce((r,a)=>r+a.capacity,0),0)/y.length)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Capacity/Day"})]})]})]})]})]})]}),Object.keys(_s).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{className:"h-5 w-5 text-red-400 mr-3"}),e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(_s).map(([s,t])=>e.jsx("li",{children:t},s))})]})})]}),e.jsx(oe,{className:"pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Changes will be saved immediately"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{variant:"outline",onClick:()=>G(!1),disabled:Ue,className:"px-6 py-2",children:"Cancel"}),e.jsx(m,{onClick:()=>{if(y.length===0){h("Error!","Please add at least one day schedule before saving","error");return}ht()},disabled:Ue||y.length===0,className:`px-8 py-2 font-semibold shadow-lg hover:shadow-xl transition-all duration-200 ${Ue||y.length===0?"bg-gray-400 cursor-not-allowed opacity-60":ee?"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 animate-pulse":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:Ue?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:y.length===0?"Add Day Schedules to Enable Save":ee?"Save Changes":"Save Times & Slots"}),ee&&y.length>0&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})]})})]})]})})]})]})}),e.jsx(re,{open:st,onOpenChange:is,children:e.jsxs(le,{className:"max-w-md",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx(ne,{className:"text-xl font-bold text-gray-900",children:"Set Slot Capacity"}),e.jsx(ce,{className:"text-gray-600",children:"Set the number of available slots for a specific date and time"})]})]})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Date"}),e.jsx(E,{type:"date",value:P.date,onChange:s=>ve(t=>({...t,date:s.target.value})),min:new Date().toISOString().split("T")[0],className:"border-2 border-gray-200 focus:border-purple-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Time Slot"}),e.jsxs(Ve,{value:P.time,onValueChange:s=>ve(t=>({...t,time:s})),children:[e.jsx(We,{className:"border-2 border-gray-200 focus:border-purple-500",children:e.jsx(qe,{placeholder:"Select time slot"})}),e.jsx(Ke,{children:Ye.times.map(s=>e.jsx(ae,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Slot Capacity"}),e.jsx(E,{type:"number",min:"0",max:"50",value:P.capacity,onChange:s=>ve(t=>({...t,capacity:parseInt(s.target.value)||0})),className:"border-2 border-gray-200 focus:border-purple-500",placeholder:"Enter capacity (0 to disable)"})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-xs text-purple-700 font-medium",children:"Set capacity for this specific date and time. Use 0 to disable this time slot."})]})})]}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Capacity applies only to the selected date and time"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{variant:"outline",onClick:()=>{is(!1),ve({date:"",time:"",capacity:5})},className:"px-6 py-2",children:"Cancel"}),e.jsx(m,{onClick:ut,disabled:!P.date||!P.time||P.capacity<0,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Set Capacity"})]})})]})]})})]})}),e.jsx(re,{open:at,onOpenChange:s=>{X(s),s||($e(null),L({day:"",timeSlots:[]}))},children:e.jsxs(le,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(k,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(ne,{className:"text-2xl font-bold text-gray-900",children:Z!==null?"Edit Day Schedule":"Add Day Schedule"}),e.jsx(ce,{className:"text-gray-600 text-base",children:Z!==null?"Update time slots and capacities for this day":"Set time slots and capacities for a specific day of the week"})]})]})}),e.jsxs("div",{className:"grid gap-6 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:"text-base font-medium",children:"Day of Week"}),e.jsxs(Ve,{value:S.day,onValueChange:s=>L(t=>({...t,day:s})),disabled:Z!==null,children:[e.jsx(We,{className:`border-2 border-gray-200 focus:border-green-500 h-12 text-base ${Z!==null?"bg-gray-100":""}`,children:e.jsx(qe,{placeholder:"Select day"})}),e.jsx(Ke,{children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(s=>{const t=y.some(r=>r.day===s);return e.jsx(ae,{value:s,className:`text-base ${t?"text-gray-400 cursor-not-allowed":""}`,disabled:t,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:s}),t&&e.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(Already exists)"})]})},s)})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:"text-base font-medium",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(m,{onClick:ft,disabled:S.timeSlots.length>=10,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Add Time Slot"]}),e.jsxs(m,{onClick:()=>{const t=["09:00","09:30","10:00","10:30","11:00","11:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30"].map(r=>({time:r,capacity:5}));L(r=>({...r,timeSlots:[...r.timeSlots,...t]}))},variant:"outline",size:"sm",className:"border-green-300 text-green-700 hover:bg-green-50",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"Add Common Times"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{className:"text-lg font-semibold",children:"Time Slots Configuration"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[S.timeSlots.length," time slots configured"]})]}),S.timeSlots.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.timeSlots.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{className:"text-sm text-gray-600",children:"Time"}),e.jsx(E,{type:"time",value:s.time,onChange:r=>As(t,"time",r.target.value),className:"h-10 text-base border-2 border-gray-200 focus:border-green-500"})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(j,{className:"text-sm text-gray-600",children:"Capacity"}),e.jsx(E,{type:"number",min:"1",max:"50",value:s.capacity,onChange:r=>As(t,"capacity",parseInt(r.target.value)||1),className:"h-10 text-base text-center border-2 border-gray-200 focus:border-green-500"})]}),e.jsx("button",{onClick:()=>yt(t),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Remove time slot",children:e.jsx(ps,{className:"h-4 w-4"})})]},t))}):e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"p-4 bg-white rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx(H,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-base",children:"No time slots added yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:'Click "Add Time Slot" to get started'})]})})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Each day can have its own unique time slots and capacities. This will apply to all weeks."})]})})]}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{children:["Schedule applies to all ",S.day,"s"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{variant:"outline",onClick:()=>{X(!1),L({day:"",timeSlots:[]})},className:"px-8 py-3 text-base",children:"Cancel"}),e.jsx(m,{onClick:gt,disabled:!S.day||S.timeSlots.length===0,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 text-base shadow-lg hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-5 w-5"}),e.jsx("span",{children:Z!==null?"Update Schedule":"Add Schedule"})]})})]})]})})]})}),e.jsx(Bs,{})]})};export{Qr as default};
