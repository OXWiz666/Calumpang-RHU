import{r as d,P as M,j as e,b as f}from"./app-DEFozhoW.js";import{C as U,a as L,b as B,c as F,d as T}from"./card-ng-QWH3P.js";import{B as m}from"./badge-Cw6uba2Q.js";import{B as a}from"./button-lEoanUQi.js";import{C as p}from"./CustomModal-BHtw8hxp.js";import{I as $}from"./InputLabel-B8-UrJkA.js";import"./label-CZW3-gAh.js";import{I as z}from"./input-BnOurZGA.js";import{f as v}from"./dialog-DzLx-FAO.js";import{T as A}from"./triangle-alert-SCbXLNEF.js";import{C as O}from"./clock-Bqh2D5k0.js";import{C as P}from"./chevron-up-DTykihc7.js";import{C as V}from"./chevron-down-DfpXdVcF.js";import{f as y}from"./format-BtYX0kVO.js";import"./select-BWfoYW-2.js";import"./react-icons.esm-09s7saTS.js";import"./index-CQyL_SyS.js";import"./index-DnAWvMNo.js";import"./index-CA1evwC4.js";import"./Combination-DmZVjk14.js";import"./index-DsJuG4FB.js";import"./index-B10mC49x.js";import"./index-CTePo5no.js";import"./createLucideIcon-vhwH4hYf.js";const xe=({item:s,onUpdateClick:N})=>{var u,h,g,j;const[n,b]=d.useState(!1),o=((u=s.stock[0])==null?void 0:u.stocks)<=5,i=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,C=t=>{switch(t){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},{data:l,setData:k,processing:x,put:w,delete:D}=M({itemname:s==null?void 0:s.name,categoryid:s==null?void 0:s.category_id}),[I,c]=d.useState(!1),[_,r]=d.useState(!1),S=t=>{t.preventDefault(),w(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{f.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})},E=t=>{t.preventDefault(),D(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{f.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(U,{className:`mb-4 ${o?"border-red-300":i?"border-amber-300":"border-gray-200"}`,children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg font-medium",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(m,{className:C(s.category.name),children:s.category.name}),o&&e.jsxs(m,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),"Low Stock"]}),i&&s.expirationDate&&e.jsxs(m,{variant:"outline",className:"bg-amber-100 text-amber-800 flex items-center gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),"Expiring Soon"]})]})]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>b(!n),className:"h-8 w-8 p-0",children:n?e.jsx(P,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})})]})}),e.jsxs(F,{className:"pb-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:`font-medium ${o?"text-red-600":""}`,children:[(h=s.stock[0])==null?void 0:h.stocks," ",(g=s.stock[0])==null?void 0:g.stockname,"s"]})]})}),e.jsxs("div",{children:[e.jsx(a,{variant:"outline",size:"sm",className:"w-1/2 mt-2 hover:bg-secondary/80 transition-colors font-medium",onClick:()=>{r(!0)},children:"Edit Item"}),e.jsxs(p,{isOpen:_,onClose:t=>{r(!1)},title:"Updating an Item",description:`Update ${s==null?void 0:s.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx($,{value:"Item Name*"}),e.jsx(z,{value:l==null?void 0:l.itemname,onChange:t=>k("itemname",t.target.value)})]}),e.jsxs(v,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:t=>{r(!1)},children:"Cancel"}),e.jsx(a,{className:"bg-primary hover:bg-primary/90",disabled:x,onClick:S,children:"Update Item"})]})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-1/2",onClick:t=>{c(!0)},children:"Delete Item"}),e.jsx(p,{isOpen:I,onClose:t=>{c(!1)},title:"Deleting an Item.",description:`Are you sure you want to delete this item ${s==null?void 0:s.name}?`,maxWidth:"md",children:e.jsxs(v,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:t=>{c(!1)},children:"Cancel"}),e.jsx(a,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:x,onClick:E,children:"Delete Item"})]})})]}),e.jsx(p,{title:"Delete an Item",description:"Are you sure you want to delete "}),n&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.stocks_movement[0].expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${i?"text-amber-600":""}`,children:y(new Date(s.stocks_movement[0].expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:y(new Date((j=s.stocks_movement[0])==null?void 0:j.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),n&&e.jsx(T,{className:"pt-0",children:e.jsx(a,{variant:"outline",size:"sm",className:"w-full hover:bg-secondary/80 transition-colors font-medium",onClick:()=>N(s),children:"Update Stock"})})]})};export{xe as default};
