import{r as I,j as h,R as M}from"./app-9IFjvyjq.js";import{a as N}from"./utils-Dqxj4mrw.js";function T(e,n=[]){let r=[];function p(t,s){const c=I.createContext(s),u=r.length;r=[...r,s];const x=m=>{var f;const{scope:a,children:v,...S}=m,l=((f=a==null?void 0:a[e])==null?void 0:f[u])||c,i=I.useMemo(()=>S,Object.values(S));return h.jsx(l.Provider,{value:i,children:v})};x.displayName=t+"Provider";function _(m,a){var l;const v=((l=a==null?void 0:a[e])==null?void 0:l[u])||c,S=I.useContext(v);if(S)return S;if(s!==void 0)return s;throw new Error(`\`${m}\` must be used within \`${t}\``)}return[x,_]}const o=()=>{const t=r.map(s=>I.createContext(s));return function(c){const u=(c==null?void 0:c[e])||t;return I.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return o.scopeName=e,[p,j(o,...n)]}function j(...e){const n=e[0];if(e.length===1)return n;const r=()=>{const p=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(t){const s=p.reduce((c,{useScope:u,scopeName:x})=>{const m=u(t)[`__scope${x}`];return{...c,...m}},{});return I.useMemo(()=>({[`__scope${n.scopeName}`]:s}),[s])}};return r.scopeName=n.scopeName,r}function P(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function w(...e){return n=>{let r=!1;const p=e.map(o=>{const t=P(o,n);return!r&&typeof t=="function"&&(r=!0),t});if(r)return()=>{for(let o=0;o<p.length;o++){const t=p[o];typeof t=="function"?t():P(e[o],null)}}}}function A(...e){return I.useCallback(w(...e),e)}function g(e){const n=e+"CollectionProvider",[r,p]=T(n),[o,t]=r(n,{collectionRef:{current:null},itemMap:new Map}),s=l=>{const{scope:i,children:f}=l,d=M.useRef(null),C=M.useRef(new Map).current;return h.jsx(o,{scope:i,itemMap:C,collectionRef:d,children:f})};s.displayName=n;const c=e+"CollectionSlot",u=N(c),x=M.forwardRef((l,i)=>{const{scope:f,children:d}=l,C=t(c,f),R=A(i,C.collectionRef);return h.jsx(u,{ref:R,children:d})});x.displayName=c;const _=e+"CollectionItemSlot",m="data-radix-collection-item",a=N(_),v=M.forwardRef((l,i)=>{const{scope:f,children:d,...C}=l,R=M.useRef(null),y=A(i,R),E=t(_,f);return M.useEffect(()=>(E.itemMap.set(R,{ref:R,...C}),()=>void E.itemMap.delete(R))),h.jsx(a,{[m]:"",ref:y,children:d})});v.displayName=_;function S(l){const i=t(e+"CollectionConsumer",l);return M.useCallback(()=>{const d=i.collectionRef.current;if(!d)return[];const C=Array.from(d.querySelectorAll(`[${m}]`));return Array.from(i.itemMap.values()).sort((E,O)=>C.indexOf(E.ref.current)-C.indexOf(O.ref.current))},[i.collectionRef,i.itemMap])}return[{Provider:s,Slot:x,ItemSlot:v},S,p]}export{g as c};
