import{a as ue,u as je,j as e,r as E,b as q}from"./app-C8tI36y-.js";import{r as t}from"./vendor-DkBadjUr.js";import{s as o}from"./toast-DY7s9Y77.js";import{u as ge}from"./confirmation-B_g2AKMl.js";import{B as c}from"./button-B7RYL61J.js";import{I as m}from"./input-DyBsoQup.js";import{A as W,b as G}from"./avatar-laILch-B.js";import{B as D}from"./badge-BHJMXv2-.js";import{C as M,a as fe,b as ve,e as Ne,c as B}from"./card-CSQXROxt.js";import{T as ye,a as be,b as F,f as p,d as we,e as d}from"./table2-CaXhYIab.js";import{S as Ce,a as Ae,b as Se,c as Ee,d as _}from"./select-CNNIaZZy.js";import{D as De,a as Me,b as Fe,c as _e,e as Ie,d as Pe}from"./dialog-ROlFfije.js";import{D as Te,a as Le,b as ke,c as Oe,d as J,e as I}from"./dropdown-menu-X87gu2L0.js";import{C as Ve}from"./CustomModal-DqRhoqJR.js";import Be from"./EditAdminModal-Cy3zNQ9h.js";import ze from"./StaffLayout-DfNKQb5e.js";import Re from"./Sidebar-COT7gKe5.js";import{I as u}from"./InputLabel-qMT0149D.js";import{I as j}from"./InputError-toYvNqLj.js";import{m as N}from"./proxy-Do-zny-D.js";import{S as He}from"./search-Cye_TdpF.js";import{F as $e}from"./filter-BAwJ6QQu.js";import{S as Ue}from"./shield-B7gr9OVN.js";import{E as K}from"./eye-mxYijkrE.js";import{E as qe}from"./ellipsis-gjrDGaHy.js";import{S as We}from"./square-pen-Bb1JtfBr.js";import{A as Ge,a as Je}from"./archive-BwGVl8jP.js";import{C as Ke}from"./chevron-left-B36-TXNE.js";import{C as Qe}from"./chevron-right-B3qqnx4D.js";import"./pusher-DVtoYAOu.js";import"./use-toast-Dm0PN6fH.js";import"./refresh-cw-D3hZ7e_O.js";import"./createLucideIcon-BKWaAi2G.js";import"./save-CAdd64LS.js";import"./download-BH8XyxCx.js";import"./trash-2-DJ5zXW8D.js";import"./info-BVLwYIm5.js";import"./triangle-alert-BslwqqvL.js";import"./circle-x-Cf2XhiVO.js";import"./circle-check-F3PuHnLX.js";import"./alert-dialog-Cxj6s6sP.js";import"./react-icons.esm-BKesc81l.js";import"./index-BgM2LvZ7.js";import"./index-BskhLtaz.js";import"./index-BC7w0fYD.js";import"./index-CR41gQkc.js";import"./tslib.es6-M_FJ09fS.js";import"./index-C6iXnOnG.js";import"./index-CR0zqees.js";import"./index-DqxisvwK.js";import"./index-CVTVw0XS.js";import"./index-DorOO4sg.js";import"./index-B4HsNsho.js";import"./label-BZn2K1na.js";import"./user-3RJR1iCA.js";import"./AdminLayout-CsFjWD2x.js";import"./separator-TiOTbSuX.js";import"./moment-C5S46NFB.js";import"./calendar-DLkMNf0w.js";import"./format-Dp3w_Y3x.js";import"./isSameMonth-BOwz-_mK.js";import"./isBefore-Bnl9x5VB.js";import"./TextInput-Cuq-FpvF.js";import"./x-b8JahagL.js";import"./settings-D_MeB5oN.js";import"./house-CSq-WFst.js";import"./calendar-D9APQM2e.js";import"./users-D4PhO1-D.js";import"./file-text-YZXa1D2L.js";import"./pill-DIGxtF-3.js";import"./pusher-CMDxQENi.js";import"./printer-CfgcPaUh.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./index-DmpYiNuv.js";import"./autoprefixer-bcFbYU2K.js";import"./unit-CopbpOEH.js";import"./Toaster-CJ38cDvk.js";import"./toast-DxU-TUqo.js";import"./layers-OK8ayVTK.js";import"./chart-column-yMaSKbSU.js";import"./PrimaryButton-BG8RYzV4.js";import"./alert-CN4Ahs3P.js";import"./index-WHihrx3k.js";import"./circle-plus-hYoTMpMo.js";import"./stethoscope-QcN9KdKi.js";function _a({admins:P=[]}){const{flash:n}=ue().props,[Q,y]=t.useState(!1),[X,Y]=t.useState(!1),[Z,b]=t.useState(!1),[ee,z]=t.useState(!1),[i,w]=t.useState(null),{confirmArchive:se,confirmUnarchive:ae,ConfirmationDialog:re}=ge(),[g,te]=t.useState(""),[C,ie]=t.useState("all"),[A,T]=t.useState(1),[L]=t.useState(10),[Xe,Ye]=t.useState([]);t.useEffect(()=>{n&&(n.success?o("Success!",n.success,"success"):n.error?o("Error",n.error,"error"):n.message&&o(n.title||"Notification",n.message,n.icon||"info"))},[n]);const{data:x,setData:h,post:le,processing:R,errors:r,clearErrors:oe,reset:ne}=je({first_name:"",middlename:"",last_name:"",suffix:"",contactNumber:"",email:"",password:"",confirmPassword:"",gender:"",birth:"",isAdmin:"true",role:7}),f=P.filter(s=>{const l=s.firstname?.toLowerCase().includes(g.toLowerCase())||s.lastname?.toLowerCase().includes(g.toLowerCase())||s.email?.toLowerCase().includes(g.toLowerCase()),v=C==="all"||s.status?.toString()===C;return l&&v}),S=Math.ceil(f.length/L),k=(A-1)*L,H=k+L,$=f.slice(k,H);t.useEffect(()=>{T(1)},[g,C]);const O=s=>{Y(!1),oe(),ne()},ce=s=>{w(s),z(!0)},de=()=>{z(!1),w(null)},me=s=>{console.log("Edit success callback triggered:",s),o("Success!","Admin information updated successfully!","success","update"),E.reload({only:["admins"]})},xe=s=>{s.preventDefault(),le(route("admin.register"),{onSuccess:l=>{O(),o("Success!","Admin has been registered successfully!","success","create"),E.reload({only:["auth"],preserveScroll:!0})}})},U=s=>{switch(s?.status){case 1:return e.jsx(D,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Active"});case 2:return e.jsx(D,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:"Inactive"});case 5:return e.jsx(D,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"Archived"});default:return e.jsx(D,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:"Active"})}},he=async s=>{const l=P.find(a=>a.id===s),v=l?`${l.firstname} ${l.lastname}`:"Admin";se(v,async()=>{try{y(!0);const a=await q.post("/admin/staff/archive",{staff_id:s});a.data.success?(o("Success!","Admin archived successfully","success","archive"),E.reload()):o("Error",a.data.message||"Failed to archive admin","error")}catch(a){console.error("Error archiving admin:",a);const V=a.response?.data?.message||"Failed to archive admin";o("Error",V,"error")}finally{y(!1)}})},pe=async s=>{const l=P.find(a=>a.id===s),v=l?`${l.firstname} ${l.lastname}`:"Admin";ae(v,async()=>{try{y(!0);const a=await q.post("/admin/staff/unarchive",{staff_id:s});a.data.success?(o("Success!","Admin unarchived successfully","success","unarchive"),E.reload()):o("Error",a.data.message||"Failed to unarchive admin","error")}catch(a){console.error("Error unarchiving admin:",a);const V=a.response?.data?.message||"Failed to unarchive admin";o("Error",V,"error")}finally{y(!1)}})};return e.jsxs(ze,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Administrators"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage system administrators and their permissions"})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-8",children:[e.jsx(Re,{activeTab:"admins"}),e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(M,{className:"shadow-lg border-0",children:e.jsx(fe,{children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{children:[e.jsx(ve,{className:"text-2xl font-bold text-gray-900",children:"All Administrators"}),e.jsx(Ne,{className:"text-gray-600 mt-1",children:"Manage and configure administrator accounts"})]})})})})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(M,{className:"shadow-lg border-0",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{placeholder:"Search administrators...",value:g,onChange:s=>te(s.target.value),className:"pl-10 border-2 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"h-4 w-4 text-gray-500"}),e.jsxs(Ce,{value:C,onValueChange:ie,children:[e.jsx(Ae,{className:"w-[180px] border-2",children:e.jsx(Se,{placeholder:"Filter by status"})}),e.jsxs(Ee,{children:[e.jsx(_,{value:"all",children:"All Statuses"}),e.jsx(_,{value:"1",children:"Active"}),e.jsx(_,{value:"2",children:"Inactive"}),e.jsx(_,{value:"5",children:"Archived"})]})]})]})]})})})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(M,{className:"shadow-lg border-0 overflow-hidden",children:e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ye,{children:[e.jsx(be,{className:"bg-gray-50",children:e.jsxs(F,{children:[e.jsx(p,{children:"ID"}),e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Email"}),e.jsx(p,{children:"Contact"}),e.jsx(p,{children:"Status"}),e.jsx(p,{className:"text-right",children:"Actions"})]})}),e.jsx(we,{children:Q?e.jsx(F,{children:e.jsx(d,{colSpan:6,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-gray-500",children:"Loading administrators..."})]})})}):$.length===0?e.jsx(F,{children:e.jsx(d,{colSpan:6,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Ue,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No administrators found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})})}):$.map(s=>e.jsxs(F,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(d,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:["ADM-",s.id]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-10 w-10",children:e.jsxs(G,{className:"bg-blue-100 text-blue-700 font-semibold",children:[s.firstname?.charAt(0),s.lastname?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstname," ",s.lastname]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Administrator"})]})]})}),e.jsx(d,{children:e.jsx("div",{className:"text-sm text-gray-700",children:s.email})}),e.jsx(d,{children:e.jsx("div",{className:"text-sm text-gray-700",children:s.contactno||"Not provided"})}),e.jsx(d,{children:U(s)}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>{w(s),b(!0)},title:"View admin",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsxs(Te,{children:[e.jsx(Le,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(qe,{className:"h-4 w-4"})})}),e.jsxs(ke,{align:"end",children:[e.jsx(Oe,{children:"Actions"}),e.jsx(J,{}),e.jsxs(I,{onClick:()=>{w(s),b(!0)},children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(I,{onClick:()=>ce(s),children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Edit Admin"]}),e.jsx(J,{}),s.status===5?e.jsxs(I,{onClick:()=>pe(s.id),className:"text-green-600",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(I,{onClick:()=>he(s.id),className:"text-red-600",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})})]},s.id))})]})})})})}),f.length>0&&e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(M,{className:"shadow-lg border-0",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",k+1," to ",Math.min(H,f.length)," of ",f.length," Results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>T(s=>Math.max(s-1,1)),disabled:A===1||S<=1,className:"w-8 h-8 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ke,{className:"h-4 w-4 text-gray-500"})}),e.jsx(c,{variant:"default",size:"sm",className:"w-8 h-8 p-0 bg-gray-800 text-white hover:bg-gray-700",children:A}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>T(s=>Math.min(s+1,S)),disabled:A===S||S<=1,className:"w-8 h-8 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Qe,{className:"h-4 w-4 text-gray-500"})})]})]})})})})]})]})]}),e.jsx(Ve,{isOpen:X,maxWidth:"lg",onClose:O,children:e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Administrator"}),e.jsxs("form",{onSubmit:xe,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"first_name",children:"First Name"}),e.jsx(m,{id:"first_name",value:x.first_name,onChange:s=>h("first_name",s.target.value),className:"mt-1"}),r.first_name&&e.jsx(j,{message:r.first_name})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"last_name",children:"Last Name"}),e.jsx(m,{id:"last_name",value:x.last_name,onChange:s=>h("last_name",s.target.value),className:"mt-1"}),r.last_name&&e.jsx(j,{message:r.last_name})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",value:x.email,onChange:s=>h("email",s.target.value),className:"mt-1"}),r.email&&e.jsx(j,{message:r.email})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(m,{id:"contactNumber",value:x.contactNumber,onChange:s=>h("contactNumber",s.target.value),className:"mt-1"}),r.contactNumber&&e.jsx(j,{message:r.contactNumber})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx(m,{id:"password",type:"password",value:x.password,onChange:s=>h("password",s.target.value),className:"mt-1"}),r.password&&e.jsx(j,{message:r.password})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(m,{id:"confirmPassword",type:"password",value:x.confirmPassword,onChange:s=>h("confirmPassword",s.target.value),className:"mt-1"}),r.confirmPassword&&e.jsx(j,{message:r.confirmPassword})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:O,children:"Cancel"}),e.jsx(c,{type:"submit",disabled:R,children:R?"Creating...":"Create Admin"})]})]})]})}),e.jsx(De,{open:Z,onOpenChange:b,children:e.jsxs(Me,{className:"sm:max-w-[600px]",children:[e.jsxs(Fe,{children:[e.jsx(_e,{className:"text-xl font-semibold",children:"Administrator Details"}),e.jsx(Ie,{children:"View administrator information and account details"})]}),i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(W,{className:"h-16 w-16",children:e.jsxs(G,{className:"bg-blue-100 text-blue-700 text-xl font-bold",children:[i.firstname?.charAt(0),i.lastname?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[i.firstname," ",i.lastname]}),e.jsx("p",{className:"text-gray-600",children:"Administrator"}),U(i)]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:i.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Contact Number"}),e.jsx("p",{className:"text-gray-900",children:i.contactno||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Admin ID"}),e.jsxs("p",{className:"text-gray-900",children:["ADM-",i.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),e.jsx("p",{className:"text-gray-900",children:new Date(i.created_at).toLocaleDateString()})]})]})]}),e.jsx(Pe,{children:e.jsx(c,{variant:"outline",onClick:()=>b(!1),children:"Close"})})]})}),e.jsx(re,{}),e.jsx(Be,{admin:i,isOpen:ee,onClose:de,onSuccess:me})]})}export{_a as default};
