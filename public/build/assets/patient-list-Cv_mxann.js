import{r as x,j as e,b as P}from"./app-DTOPyzmI.js";import{B as M}from"./button-BqLhTAke.js";import{I as T}from"./input-BCgr6PED.js";import{c as u,d as f,a as g,e as i}from"./card-RH9po_Qw.js";import{B as v}from"./badge-DBPuAyzP.js";import{S as N,a as w,b as S,c as y,d as r}from"./select-BdvlijDG.js";import{h as V}from"./moment-C5S46NFB.js";import{S as A}from"./search-ajOmQSL6.js";import{P as B}from"./phone-CaQz1D9r.js";import{M as E}from"./map-pin-CqemwHdK.js";import{C as I}from"./calendar-DU3UyD-g.js";import{E as G}from"./eye-CcIxTAlq.js";import"./utils-CNyX0PrB.js";import"./react-icons.esm-BqNRnAL3.js";import"./index-COYBpvQB.js";import"./index-BGLIzSNA.js";import"./index-CiiYDEYU.js";import"./index-D6B22X2E.js";import"./index-DOPmQrrw.js";import"./floating-ui.react-dom-B1r5Kysf.js";import"./index-BQ8_2lOh.js";import"./Combination-CEuVJAod.js";import"./createLucideIcon-BRQDHHAH.js";function ds({patients:C,onSelectPatient:k}){const[l,b]=x.useState(""),[h,D]=x.useState("all"),[c,F]=x.useState("all");x.useEffect(()=>{console.log("gender:",c)},[c]);const t=C.filter(s=>{var d,j,n;const o=(s==null?void 0:s.firstname.toLowerCase().includes(l.toLowerCase()))||(s==null?void 0:s.lastname.toLowerCase().includes(l.toLowerCase()))||((d=s==null?void 0:s.contactno)==null?void 0:d.toString().toLowerCase().includes(l))||((j=s==null?void 0:s.id)==null?void 0:j.toString().includes(l)),a=h==="all"||(s==null?void 0:s.status)==h,m=c==="all"||((n=s==null?void 0:s.gender)==null?void 0:n.toLowerCase())==c;return o&&a&&m}),L=s=>{const o=new Date,a=new Date(s);let m=o.getFullYear()-a.getFullYear();const d=o.getMonth()-a.getMonth();return(d<0||d===0&&o.getDate()<a.getDate())&&m--,m};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(f,{children:e.jsx(g,{children:"Search & Filter Patients"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Search by id, name, or phone number:",value:l,onChange:s=>b(s.target.value),className:"pl-10"})]}),e.jsxs(N,{value:h,onValueChange:D,children:[e.jsx(w,{className:"w-full sm:w-[180px]",children:e.jsx(S,{placeholder:"Filter by status"})}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"All Status"}),e.jsx(r,{value:"active",children:"Active"}),e.jsx(r,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(N,{value:c,onValueChange:F,children:[e.jsx(w,{className:"w-full sm:w-[180px]",children:e.jsx(S,{placeholder:"Filter by gender"})}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"All Genders"}),e.jsx(r,{value:"m",children:"Male"}),e.jsx(r,{value:"f",children:"Female"})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>e.jsxs(u,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(f,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsxs(g,{className:"text-lg",children:[e.jsxs("p",{className:"",children:[s==null?void 0:s.firstname," ",s==null?void 0:s.lastname," "]}),e.jsx("p",{className:" text-muted-foreground",children:e.jsxs("small",{children:["Patient ID: ",s.id," â€¢ Age:"," ",L(s.birth)]})})]})}),e.jsx(v,{variant:(s==null?void 0:s.status)==="active"?"default":"secondary",children:s==null?void 0:s.status})]}),e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Join Date:"," ",V(s==null?void 0:s.created_at).format("MM-DD-yyyy")]})})]}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s==null?void 0:s.contactno})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:(s==null?void 0:s.address)??"Not Set"})]}),(s==null?void 0:s.lastVisit)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Last visit:"," ",new Date(s==null?void 0:s.lastVisit).toLocaleDateString()]})]}),(s==null?void 0:s.bloodType)&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(v,{variant:"outline",className:"text-xs",children:["Blood Type: ",s==null?void 0:s.bloodType]})}),e.jsxs(M,{onClick:()=>{P.visit(route("patients.details.view",{id:s==null?void 0:s.id}))},className:"w-full mt-4",variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]},s==null?void 0:s.id))}),t.length===0&&e.jsx(u,{children:e.jsx(i,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{ds as default};
