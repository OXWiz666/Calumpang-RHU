import{r as n,j as E,d as Y}from"./app-B9imbgwF.js";import{c as V}from"./index-CPs_XpmV.js";import{u as z}from"./Combination-BvFtu0HL.js";import{P as M}from"./index-CPfQda0F.js";function x(e,t,{checkForDefaultPrevented:o=!0}={}){return function(c){if(e?.(c),o===!1||!c.defaultPrevented)return t?.(c)}}function G(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function q(...e){return t=>{let o=!1;const r=e.map(c=>{const s=G(c,t);return!o&&typeof s=="function"&&(o=!0),s});if(o)return()=>{for(let c=0;c<r.length;c++){const s=r[c];typeof s=="function"?s():G(e[c],null)}}}}function J(...e){return n.useCallback(q(...e),e)}function Q(e,t=[]){let o=[];function r(s,a){const i=n.createContext(a),d=o.length;o=[...o,a];const p=f=>{const{scope:I,children:R,...b}=f,S=I?.[e]?.[d]||i,l=n.useMemo(()=>b,Object.values(b));return E.jsx(S.Provider,{value:l,children:R})};p.displayName=s+"Provider";function u(f,I){const R=I?.[e]?.[d]||i,b=n.useContext(R);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[p,u]}const c=()=>{const s=o.map(a=>n.createContext(a));return function(i){const d=i?.[e]||s;return n.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return c.scopeName=e,[r,W(c,...t)]}function W(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const r=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(s){const a=r.reduce((i,{useScope:d,scopeName:p})=>{const f=d(s)[`__scope${p}`];return{...i,...f}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return o.scopeName=t.scopeName,o}function X(e){const t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...o)=>t.current?.(...o),[])}var Z=globalThis?.document?n.useLayoutEffect:()=>{},ee=Y[" useInsertionEffect ".trim().toString()]||Z;function te({prop:e,defaultProp:t,onChange:o=()=>{},caller:r}){const[c,s,a]=oe({defaultProp:t,onChange:o}),i=e!==void 0,d=i?e:c;{const u=n.useRef(e!==void 0);n.useEffect(()=>{const f=u.current;f!==i&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=i},[i,r])}const p=n.useCallback(u=>{if(i){const f=ne(u)?u(e):u;f!==e&&a.current?.(f)}else s(u)},[i,e,s,a]);return[d,p]}function oe({defaultProp:e,onChange:t}){const[o,r]=n.useState(e),c=n.useRef(o),s=n.useRef(t);return ee(()=>{s.current=t},[t]),n.useEffect(()=>{c.current!==o&&(s.current?.(o),c.current=o)},[o,c]),[o,r,s]}function ne(e){return typeof e=="function"}var re=n.createContext(void 0);function ce(e){const t=n.useContext(re);return e||t||"ltr"}var _="rovingFocusGroup.onEntryFocus",se={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[P,N,ue]=V(h),[ie,Ee]=Q(h,[ue]),[ae,le]=ie(h),O=n.forwardRef((e,t)=>E.jsx(P.Provider,{scope:e.__scopeRovingFocusGroup,children:E.jsx(P.Slot,{scope:e.__scopeRovingFocusGroup,children:E.jsx(fe,{...e,ref:t})})}));O.displayName=h;var fe=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:r,loop:c=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...f}=e,I=n.useRef(null),R=J(t,I),b=ce(s),[S,l]=te({prop:a,defaultProp:i??null,onChange:d,caller:h}),[g,w]=n.useState(!1),v=X(p),C=N(o),T=n.useRef(!1),[L,A]=n.useState(0);return n.useEffect(()=>{const m=I.current;if(m)return m.addEventListener(_,v),()=>m.removeEventListener(_,v)},[v]),E.jsx(ae,{scope:o,orientation:r,dir:b,loop:c,currentTabStopId:S,onItemFocus:n.useCallback(m=>l(m),[l]),onItemShiftTab:n.useCallback(()=>w(!0),[]),onFocusableItemAdd:n.useCallback(()=>A(m=>m+1),[]),onFocusableItemRemove:n.useCallback(()=>A(m=>m-1),[]),children:E.jsx(M.div,{tabIndex:g||L===0?-1:0,"data-orientation":r,...f,ref:R,style:{outline:"none",...e.style},onMouseDown:x(e.onMouseDown,()=>{T.current=!0}),onFocus:x(e.onFocus,m=>{const U=!T.current;if(m.target===m.currentTarget&&U&&!g){const D=new CustomEvent(_,se);if(m.currentTarget.dispatchEvent(D),!D.defaultPrevented){const y=C().filter(F=>F.focusable),$=y.find(F=>F.active),B=y.find(F=>F.id===S),H=[$,B,...y].filter(Boolean).map(F=>F.ref.current);K(H,u)}}T.current=!1}),onBlur:x(e.onBlur,()=>w(!1))})})}),j="RovingFocusGroupItem",k=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:r=!0,active:c=!1,tabStopId:s,children:a,...i}=e,d=z(),p=s||d,u=le(j,o),f=u.currentTabStopId===p,I=N(o),{onFocusableItemAdd:R,onFocusableItemRemove:b,currentTabStopId:S}=u;return n.useEffect(()=>{if(r)return R(),()=>b()},[r,R,b]),E.jsx(P.ItemSlot,{scope:o,id:p,focusable:r,active:c,children:E.jsx(M.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:x(e.onMouseDown,l=>{r?u.onItemFocus(p):l.preventDefault()}),onFocus:x(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:x(e.onKeyDown,l=>{if(l.key==="Tab"&&l.shiftKey){u.onItemShiftTab();return}if(l.target!==l.currentTarget)return;const g=me(l,u.orientation,u.dir);if(g!==void 0){if(l.metaKey||l.ctrlKey||l.altKey||l.shiftKey)return;l.preventDefault();let v=I().filter(C=>C.focusable).map(C=>C.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const C=v.indexOf(l.currentTarget);v=u.loop?ve(v,C+1):v.slice(C+1)}setTimeout(()=>K(v))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:S!=null}):a})})});k.displayName=j;var de={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function me(e,t,o){const r=pe(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return de[r]}function K(e,t=!1){const o=document.activeElement;for(const r of e)if(r===o||(r.focus({preventScroll:t}),document.activeElement!==o))return}function ve(e,t){return e.map((o,r)=>e[(t+r)%e.length])}var Fe=O,Se=k;export{Se as I,Fe as R,Ee as c};
