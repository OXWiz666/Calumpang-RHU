import{r as i,P as _,j as e,a as Y,R as Oe}from"./app-B3tTMWCX.js";import{C as Z}from"./react-icons.esm-DFR2UKHC.js";import{B as l}from"./button-CQBKld8I.js";import{I as z}from"./input-CVB31QZM.js";import"./avatar-y5x9lxd6.js";import{B as h}from"./badge-WcuwGCsS.js";import{S as Ie,T as ee,a as se,b as j,c as o,d as re,e as d}from"./table2-CORw8_YH.js";import{S as He,a as Le,b as _e,c as ze,d as P}from"./select-DRovf_t4.js";import{D as w,b as C,c as D,d as A,e as T,f as k,a as F}from"./dialog-drzNU2WD.js";import{L as v}from"./label-KvVP2Raq.js";import"./textarea-Crwv0eY5.js";import Pe from"./Sidebar-DvYX0ZY9.js";import Fe from"./ServicesLayout-CYF-cESH.js";import{h as ae}from"./moment-C5S46NFB.js";import{F as Be}from"./filter-CHDpjBbT.js";import{C as Re}from"./chevron-up-sXvZKf2n.js";import{C as Ve}from"./chevron-down-Ddt1FkVp.js";import{c as Ue}from"./createLucideIcon-DeTprT7L.js";import{T as ie}from"./trash-2-CDy4GbJi.js";import"./index-BOPpvsSN.js";import"./index-xWeTbU3S.js";import"./arrow-up-Cjwqmebr.js";import"./index-BwULlys1.js";import"./index-D5UIAN_7.js";import"./Combination-BX2uw9vj.js";import"./index-Ci5TdmtH.js";import"./index-DkcGS4j_.js";import"./card-DZRUQR3X.js";import"./alert-CRxaUyk2.js";import"./separator-vdVm8daC.js";import"./square-kanban-CGJgsZz9.js";import"./layers-JpG-pTm7.js";import"./CustomModal-ZrhqSG-q.js";import"./AdminLayout-gQjW8vLa.js";import"./popover-DauZY9bq.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./TextInput-CTlnP4R9.js";import"./x-BoeL34TY.js";import"./settings-D3A-a_14.js";import"./calendar-CX7TdPNT.js";import"./users-DwgkaFck.js";import"./bell-Fe_HXJ18.js";import"./pusher-_OgRta2L.js";import"./search-Thl3AwHr.js";import"./chart-column-DxU5mw62.js";import"./InputLabel-My5KuRGA.js";import"./circle-plus-DxADCghG.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],te=Ue("SquarePen",Ke),Gs=({services_:g})=>{const[B,M]=i.useState(g),[ce,We]=i.useState(""),[E,ne]=i.useState("all"),[O,S]=i.useState(!1),[x,qe]=i.useState({key:"servicename",direction:"ascending"}),[$e,le]=i.useState(!1),de=(r=!1)=>{le(r)};i.useEffect(()=>{M(g),console.log("services: ",g)},[g]);const[R,b]=i.useState(!1),[Ge,Je]=i.useState(null),[I,V]=i.useState(!1),[f,U]=i.useState({servicename:"",status:"Active"}),[oe,Qe]=i.useState({name:"",description:"",duration:30,price:0,recurrenceDates:[]});[...B.filter(r=>{const s=r.servicename.toLowerCase().includes(ce.toLowerCase()),t=E==="all"||r.status===E;return s&&t})].sort((r,s)=>r[x.key]<s[x.key]?x.direction==="ascending"?-1:1:r[x.key]>s[x.key]?x.direction==="ascending"?1:-1:0);const[me,K]=i.useState(null),he=r=>{I===r?(V(null),K(null)):(V(r),K(r))},xe=r=>{L(s=>({...s,days:s.days.includes(r)?s.days.filter(t=>t!==r):[...s.days,r]}))},ue=()=>{ve(route("admin.services.subservice.create"),{preserveScroll:!0,preserveState:!0,only:["services_"],onSuccess:()=>{b(!1),alert_toast("Success","Sub-Service added successfully!")}})},W=async(r,s)=>{var t,p;S(!0);try{const a=s?"/admin/services/unarchive":"/admin/services/archive",c=await Y.post(a,{service_id:r});c.data.services&&(M(c.data.services),alert_toast("Success",c.data.message))}catch(a){console.error("Error archiving/unarchiving service:",a),alert_toast("Error",((p=(t=a.response)==null?void 0:t.data)==null?void 0:p.message)||"An error occurred while updating the service")}finally{S(!1)}},pe=r=>{switch(r){case 1:return e.jsx(h,{className:"bg-green-500",children:"Active"});case 0:return e.jsx(h,{className:"bg-gray-500",children:"Inactive"});default:return e.jsx(h,{children:r})}},{data:q,setData:H,processing:je,post:ve}=_({serviceid:"",subservicename:""}),[ge,$]=i.useState(!1),{data:Se,setData:L,post:be,processing:fe,errors:G}=_({days:oe.recurrenceDates,serviceid:me}),ye=()=>{be(route("admin.services.days.update"),{preserveScroll:!0,preserveState:!0,replace:!0,only:["services_"],onSuccess:()=>{$(!1),alert_toast("Success!","Successfully Updated!","success")}})},Ne=["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM"],[we,Ye]=i.useState([]),[J,Ce]=i.useState({}),[De,Q]=i.useState(!1),{data:y,setData:u,processing:Ae,post:Te,errors:X}=_({times:we,subservice_id:J,subservicename:""}),ke=r=>{u(s=>({...s,times:s.times.includes(r)?s.times.filter(t=>t!==r):[...s.times,r]}))},Me=r=>{Te(route("admin.services.time.update"),{preserveScroll:!0,onSuccess:()=>{Q(!1),alert_toast("Success!","Successfully Updated!","success")}})},Ee=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return i.useEffect(()=>{console.log("datatime; ",y)},[y]),e.jsxs(Fe,{children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Services"}),e.jsx("p",{className:"text-gray-600",children:"These are the services to be used in the Appointment Schedules."}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx(Pe,{activeTab:"services"}),e.jsxs("div",{className:"bg-accent/20 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"All Services"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{open:R,onOpenChange:r=>{b(r),r||U({servicename:"",status:"Active"})},children:e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsx(A,{children:"Add New Service"}),e.jsx(T,{children:"Create a new service for appointments."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"servicename",className:"text-right",children:"Service Name"}),e.jsx(z,{id:"servicename",name:"servicename",className:"col-span-3",value:f.servicename,onChange:r=>U({...f,servicename:r.target.value})})]})}),e.jsx(k,{children:e.jsx(l,{type:"submit",onClick:async()=>{var r,s;try{S(!0);const t=await Y.post("/admin/services/create",f);t.data.services&&(M(t.data.services),b(!1),alert_toast("Success","Service added successfully!"))}catch(t){console.error("Error creating service:",t),alert_toast("Error",((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||"An error occurred while creating the service")}finally{S(!1)}},disabled:!f.servicename||O,children:"Save Service"})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter by:"})]}),e.jsxs(He,{value:E,onValueChange:ne,children:[e.jsx(Le,{className:"w-[180px]",children:e.jsx(_e,{placeholder:"Status"})}),e.jsxs(ze,{children:[e.jsx(P,{value:"all",children:"All Statuses"}),e.jsx(P,{value:"Active",children:"Active"}),e.jsx(P,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx(Ie,{data:B,defaultSort:{key:"servicename",direction:"asc"},children:({sortedData:r})=>e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(j,{children:[e.jsx(o,{}),e.jsx(o,{sortKey:"servicename",sortable:!0,children:"Service Name"}),e.jsx(o,{sortKey:"status",sortable:!0,children:"Status"}),e.jsx(o,{children:"Available Days"}),e.jsx(o,{sortKey:"servicename",sortable:!0,children:"Sub Services"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(re,{children:r.map((s,t)=>{var p;return e.jsxs(Oe.Fragment,{children:[e.jsxs(j,{children:[e.jsx(d,{children:e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>he(s.id),children:I===s.id?e.jsx(Re,{className:"h-4 w-4"}):e.jsx(Ve,{className:"h-4 w-4"})})}),e.jsx(d,{children:s.servicename}),e.jsx(d,{children:pe(s.status)}),e.jsx(d,{className:" grid gap-1",children:(p=s==null?void 0:s.servicedays)==null?void 0:p.map((a,c)=>e.jsx(h,{className:"bg-primary",children:a.day},c))}),e.jsx(d,{children:(s==null?void 0:s.subservices.length)<=0?e.jsx("div",{children:"No Sub Services"}):e.jsxs("div",{children:[s==null?void 0:s.subservices.length," ","Service",(s==null?void 0:s.subservices.length)>1?"s":""]})}),e.jsx(d,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[s.status===0?e.jsxs(l,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50 flex items-center gap-1",onClick:()=>W(s.id,!0),disabled:O,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8v13H3V8"}),e.jsx("path",{d:"M1 3h22v5H1z"}),e.jsx("path",{d:"M12 12v7"}),e.jsx("path",{d:"M8 12l4-4 4 4"})]}),"Unarchive"]}):e.jsxs(l,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 flex items-center gap-1",onClick:()=>W(s.id,!1),disabled:O,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8v13H3V8"}),e.jsx("path",{d:"M1 3h22v5H1z"}),e.jsx("path",{d:"M12 19V12"}),e.jsx("path",{d:"M8 15l4 4 4-4"})]}),"Archive"]}),e.jsxs(w,{open:R,onOpenChange:a=>{b(a),a&&H("serviceid",s.id)},children:[e.jsx(F,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",children:"Add Sub-service"})}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsxs(A,{children:["Add Sub-service to"," ",s.servicename]}),e.jsx(T,{children:"Create a new sub-service for this service category."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"subName",className:"text-right",children:"Sub Service"}),e.jsx(z,{id:"subName",name:"name",value:q.subservicename,onChange:a=>{H("subservicename",a.target.value)},className:"col-span-3"})]})}),e.jsx(k,{children:e.jsx(l,{type:"submit",onClick:ue,disabled:!q.subservicename||je,children:"Save Sub-service"})})]})]}),e.jsxs(w,{open:ge,onOpenChange:a=>{var c;$(a),a&&(L("days",((c=s==null?void 0:s.servicedays)==null?void 0:c.map(N=>N.day))||[]),L("serviceid",s.id))},children:[e.jsx(F,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsxs(A,{children:["Edit Days to"," ",s.servicename]}),e.jsx(T,{children:"Edit days for this service category."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{className:"text-right",children:"Available Days"}),Ee.map(a=>e.jsx(h,{className:`cursor-pointer ${Se.days.includes(a)?"bg-primary":"bg-muted text-red-500"}`,onClick:()=>xe(a),children:a},a))]}),Object.keys(G).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Z,{className:"h-5 w-5 text-red-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(G).map(([a,c])=>e.jsx("li",{children:c},a))})})]})})]}),e.jsx(k,{children:e.jsx(l,{onClick:a=>{ye()},disabled:fe,children:"Save Days"})})]})]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{de(!0),H("subservicename",s.servicename)},children:e.jsx(ie,{className:"h-4 w-4 text-red-500"})})]})})]}),I===s.id&&e.jsx(j,{children:e.jsx(d,{colSpan:6,className:"p-0",children:e.jsxs("div",{className:"bg-muted/20 p-4",children:[e.jsxs("h3",{className:"font-medium mb-2",children:["Sub-services for"," ",s.servicename]}),s.subservices.length>0?e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(j,{children:[e.jsx(o,{children:"Sub Service"}),e.jsx(o,{children:"Available Time"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(re,{children:s==null?void 0:s.subservices.map((a,c)=>{var N;return e.jsxs(j,{children:[e.jsx(d,{children:a.subservicename}),e.jsx(d,{children:(N=a==null?void 0:a.times)==null?void 0:N.map((n,m)=>e.jsx(h,{className:"cursor-pointer bg-primary",children:ae(n.time,"HH:mm:ss").format("hh:mm A")},m))}),e.jsx(d,{children:e.jsxs("div",{children:[e.jsxs(w,{open:De,onOpenChange:n=>{Q(n),n&&(console.log("selected: ",a.subservicename),u("subservice_id",a.id),Ce(a),u("subservicename",a.subservicename),u("times",a==null?void 0:a.times.map(m=>ae(m.time,"HH:mm:ss").format("hh:mm A"))))},children:[e.jsx(F,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsxs(A,{children:["Edit Time to"," ",J.subservicename]}),e.jsx(T,{children:"Edit days for this sub service category."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(v,{children:"Sub-Service:"}),e.jsx(z,{className:" w-full",value:y.subservicename,onChange:n=>{u("subservicename",n.target.value)}}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{className:" text-right",children:"Available Time:"}),Ne.map((n,m)=>e.jsx(h,{className:`cursor-pointer ${y.times.includes(n)?"bg-primary":"bg-muted text-red-500"}`,onClick:()=>ke(n),children:n},m))]})]}),e.jsxs(k,{children:[Object.keys(X).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Z,{className:"h-5 w-5 text-red-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(X).map(([n,m])=>e.jsx("li",{children:m},n))})})]})}),e.jsx(l,{onClick:Me,disabled:Ae,children:"Save Time"})]})]})]}),e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(ie,{className:"h-4 w-4 text-red-500"})})]})})]},c)})})]}):e.jsx("p",{className:"text-muted-foreground",children:"No sub-services found for this service."})]})})})]},t)})})]})})})]})]})]})};export{Gs as default};
