import{r as u}from"./app-9IFjvyjq.js";function A(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function T(...n){return e=>{let t=!1;const o=n.map(r=>{const a=A(r,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<o.length;r++){const a=o[r];typeof a=="function"?a():A(n[r],null)}}}}function R(...n){return u.useCallback(T(...n),n)}var g=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{};function y(n,e){return u.useReducer((t,o)=>e[t][o]??t,n)}var h=n=>{const{present:e,children:t}=n,o=v(e),r=typeof t=="function"?t({present:o.isPresent}):u.Children.only(t),a=R(o.ref,P(r));return typeof t=="function"||o.isPresent?u.cloneElement(r,{ref:a}):null};h.displayName="Presence";function v(n){const[e,t]=u.useState(),o=u.useRef(null),r=u.useRef(n),a=u.useRef("none"),N=n?"mounted":"unmounted",[p,s]=y(N,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const i=d(o.current);a.current=p==="mounted"?i:"none"},[p]),g(()=>{const i=o.current,f=r.current;if(f!==n){const l=a.current,c=d(i);n?s("MOUNT"):c==="none"||(i==null?void 0:i.display)==="none"?s("UNMOUNT"):s(f&&l!==c?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,s]),g(()=>{if(e){let i;const f=e.ownerDocument.defaultView??window,m=c=>{const O=d(o.current).includes(CSS.escape(c.animationName));if(c.target===e&&O&&(s("ANIMATION_END"),!r.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",i=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},l=c=>{c.target===e&&(a.current=d(o.current))};return e.addEventListener("animationstart",l),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(i),e.removeEventListener("animationstart",l),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else s("ANIMATION_END")},[e,s]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:u.useCallback(i=>{o.current=i?getComputedStyle(i):null,t(i)},[])}}function d(n){return(n==null?void 0:n.animationName)||"none"}function P(n){var o,r;let e=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{h as P};
