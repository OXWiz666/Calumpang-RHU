import{r as i,j as a}from"./app-B9imbgwF.js";import{I as C}from"./input-DrzP4N1f.js";import{B as N}from"./button-Cp6C2OJZ.js";import{S as v}from"./search-DEoFfCfD.js";import{A as j}from"./index-BnacA0tQ.js";import{m as y}from"./proxy-YO7Y0R0s.js";import{H as L}from"./hash-wGhHJ59p.js";import{T as S}from"./tag-WKFOjsMx.js";import{P as k}from"./package-mXWpMwaL.js";import"./utils-D5ZoOHm5.js";import"./createLucideIcon-CiaC_9KA.js";const q=({items:r,onSearch:d})=>{const[n,u]=i.useState(""),[h,x]=i.useState([]),[p,l]=i.useState(!1);i.useEffect(()=>{if(n.length>1){const e=r.map(o=>o.name),s=[...new Set(r.map(o=>o.category.name))],t=r.map(o=>o.stocks_movement?.[0]?.batch_number).filter(Boolean),m=e.filter(o=>o.toLowerCase().includes(n.toLowerCase())),c=s.filter(o=>o.toLowerCase().includes(n.toLowerCase())),g=t.filter(o=>o.toLowerCase().includes(n.toLowerCase()));x([...m,...c,...g]),l(!0)}else x([]),l(!1)},[n,r]);const b=()=>{const e=r.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())||s.category.name.toLowerCase().includes(n.toLowerCase())||s.stocks_movement?.[0]?.batch_number?.toLowerCase().includes(n.toLowerCase()));d(e),l(!1)},f=e=>{e.key==="Enter"&&b()},w=e=>{u(e),l(!1);const s=r.filter(t=>t.name===e||t.category.name===e||t.stocks_movement?.[0]?.batch_number===e);d(s.length>0?s:r.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.category.name.toLowerCase().includes(e.toLowerCase())||t.stocks_movement?.[0]?.batch_number.toLowerCase().includes(e.toLowerCase())))};return a.jsxs("div",{className:"relative w-full max-w-3xl mx-auto mb-8",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(v,{className:"h-5 w-5 text-gray-400"})}),a.jsx(C,{type:"text",placeholder:"Search by medicine name, batch number or category...",value:n,onChange:e=>u(e.target.value),onKeyDown:f,className:"pl-10 pr-4 h-12 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),a.jsx(N,{onClick:b,className:"absolute right-1 top-1 h-10 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:e=>e.target.style.backgroundColor="#34495E",onMouseLeave:e=>e.target.style.backgroundColor="#2C3E50",children:"Search"})]}),a.jsx(j,{children:p&&h.length>0&&a.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute z-10 w-full rounded-lg shadow-xl mt-2 max-h-60 overflow-y-auto bg-white border-gray-200",children:h.map((e,s)=>{const t=r.some(c=>c.stocks_movement?.[0]?.batch_number===e),m=r.some(c=>c.category.name===e);return a.jsx(y.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.05},className:"px-4 py-3 cursor-pointer border-b last:border-b-0 transition-colors hover:bg-blue-50 border-gray-100",onClick:()=>w(e),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1 rounded bg-gray-100",children:t?a.jsx(L,{className:"h-4 w-4 text-gray-600"}):m?a.jsx(S,{className:"h-4 w-4 text-gray-600"}):a.jsx(k,{className:"h-4 w-4 text-gray-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium text-gray-900",children:e}),a.jsx("div",{className:"text-xs text-gray-500",children:t?"Batch Number":m?"Category":"Item Name"})]})]})},s)})})})]})};export{q as default};
