import{r as i,P as G,j as e,b as U}from"./app-9IFjvyjq.js";import{C as J,a as K,b as Q,c as X,d as Y}from"./card-BZqhk5Ws.js";import{B as m}from"./badge-Da4cSqJP.js";import{B as a}from"./button-BWLYpXz0.js";import{C as M}from"./CustomModal-B_1zsoCZ.js";import{I as Z}from"./InputLabel-DLivDGoa.js";import"./label-C2QZitaL.js";import{I as ee}from"./input-fLU5VnAr.js";import{d as $}from"./dialog-BlSttdnZ.js";import{m as se}from"./proxy-D62Q3uN7.js";import{P as re}from"./package-CHcp06gv.js";import{T as ae}from"./triangle-alert-BkHbl9Bl.js";import{C as te}from"./clock-Bzel8gwe.js";import{C as oe}from"./chevron-up-92Sj5s40.js";import{C as ne}from"./chevron-down-C4FOIhdo.js";import{T as B}from"./trending-up-_LM6MF-k.js";import{S as le}from"./square-pen-Dnx_Ff5r.js";import{T as de}from"./trash-2-vvbptI_1.js";import{f as L}from"./format-BtYX0kVO.js";import"./utils-Dqxj4mrw.js";import"./index-C6jRhQFj.js";import"./select-p8YEwkY-.js";import"./react-icons.esm-CBUbwQJY.js";import"./index-5FqUdhJW.js";import"./Combination-BD7y2hDp.js";import"./index-DMLVHKle.js";import"./index-ZSsit5F4.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./index-iJsz53jB.js";import"./createLucideIcon-DsPw26Nq.js";const qe=({item:s,onUpdateClick:F})=>{var p,h,u,g,b,j,f,v,y,N,C,k,w,_,D,I,S,E,T;const[o,P]=i.useState(!1),n=((p=s==null?void 0:s.stock[0])==null?void 0:p.stocks)<=5,l=((g=(u=s==null?void 0:s.stocks_movement)==null?void 0:u[((h=s==null?void 0:s.stocks_movement)==null?void 0:h.length)-1])==null?void 0:g.expiry_date)&&new Date((f=(j=s==null?void 0:s.stocks_movement)==null?void 0:j[((b=s==null?void 0:s.stocks_movement)==null?void 0:b.length)-1])==null?void 0:f.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,z=r=>{switch(r){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},{data:d,setData:q,processing:x,put:A,delete:O}=G({itemname:s==null?void 0:s.name,categoryid:s==null?void 0:s.category_id}),[V,c]=i.useState(!1),[W,t]=i.useState(!1),H=r=>{r.preventDefault(),A(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{U.reload({only:["flash","inventory"]})},onSuccess:()=>{t(!1)}})},R=r=>{r.preventDefault(),O(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{U.reload({only:["flash","inventory"]})},onSuccess:()=>{t(!1)}})};return e.jsx(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(J,{className:`mb-4 hover:shadow-md transition-all duration-200 ${n?"border-red-200 bg-red-50/30":l?"border-amber-200 bg-amber-50/30":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(re,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{className:"text-lg font-semibold text-gray-900 mb-1",children:s.name}),((y=(v=s==null?void 0:s.stocks_movement)==null?void 0:v[0])==null?void 0:y.batch_number)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Batch Number:"}),e.jsx("p",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded text-gray-700",children:(C=(N=s==null?void 0:s.stocks_movement)==null?void 0:N[0])==null?void 0:C.batch_number})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(m,{className:`${z(s.category.name)} border-0`,children:s.category.name}),n&&e.jsxs(m,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),"Low Stock"]}),l&&s.expirationDate&&e.jsxs(m,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"Expiring Soon"]})]})]})]})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>P(!o),className:"h-8 w-8 p-0 hover:bg-gray-100",children:o?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(ne,{className:"h-4 w-4"})})]})}),e.jsxs(X,{className:"pb-3",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Current Stock"}),e.jsxs("p",{className:`text-2xl font-bold ${n?"text-red-600":"text-gray-900"}`,children:[(k=s.stock[0])==null?void 0:k.stocks," ",(w=s.stock[0])==null?void 0:w.stockname]})]}),e.jsx("div",{className:"p-3 bg-white rounded-lg",children:e.jsx(B,{className:`h-6 w-6 ${n?"text-red-500":"text-green-500"}`})})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",className:"flex-1 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors font-medium",onClick:()=>{t(!0)},children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(a,{variant:"outline",size:"sm",className:"flex-1 hover:bg-red-50 hover:border-red-300 hover:text-red-600 transition-colors font-medium",onClick:r=>{c(!0)},children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Delete Item"]})]}),e.jsxs(M,{isOpen:W,onClose:r=>{t(!1)},title:"Updating an Item",description:`Update ${s==null?void 0:s.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(Z,{value:"Item Name*"}),e.jsx(ee,{value:d==null?void 0:d.itemname,onChange:r=>q("itemname",r.target.value)})]}),e.jsxs($,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:r=>{t(!1)},children:"Cancel"}),e.jsx(a,{className:"bg-primary hover:bg-primary/90",disabled:x,onClick:H,children:"Update Item"})]})]}),e.jsx(M,{isOpen:V,onClose:r=>{c(!1)},title:"Deleting an Item.",description:`Are you sure you want to delete this item ${s==null?void 0:s.name}?`,maxWidth:"md",children:e.jsxs($,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:r=>{c(!1)},children:"Cancel"}),e.jsx(a,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:x,onClick:R,children:"Delete Item"})]})}),o&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[((D=(_=s==null?void 0:s.stocks_movement)==null?void 0:_[0])==null?void 0:D.expiry_date)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${l?"text-amber-600":""}`,children:L(new Date((E=(S=s==null?void 0:s.stocks_movement)==null?void 0:S[((I=s==null?void 0:s.stocks_movement)==null?void 0:I.length)-1])==null?void 0:E.expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:L(new Date((T=s.stocks_movement[0])==null?void 0:T.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),o&&e.jsx(Y,{className:"pt-0",children:e.jsxs(a,{variant:"outline",size:"sm",className:"w-full hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors font-medium",onClick:()=>F(s),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Update Stock"]})})]})})};export{qe as default};
