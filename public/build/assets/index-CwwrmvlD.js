import{r as i,j as C,f as Y}from"./app-BwNhzenK.js";import{a as w}from"./index-CnZ-kBHx.js";import{u as U,P as T,d as J}from"./index-JAEOqb1t.js";import{a as L,u as G}from"./index-BE2z3MmW.js";function Q(e,t=globalThis==null?void 0:globalThis.document){const n=L(e);i.useEffect(()=>{const s=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var Z="DismissableLayer",I="dismissableLayer.update",$="dismissableLayer.pointerDownOutside",ee="dismissableLayer.focusOutside",M,q=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),te=i.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:u,onInteractOutside:d,onDismiss:r,...p}=e,a=i.useContext(q),[f,g]=i.useState(null),y=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=i.useState({}),D=U(t,l=>g(l)),c=Array.from(a.layers),[O]=[...a.layersWithOutsidePointerEventsDisabled].slice(-1),E=c.indexOf(O),h=f?c.indexOf(f):-1,m=a.layersWithOutsidePointerEventsDisabled.size>0,v=h>=E,F=re(l=>{const S=l.target,k=[...a.branches].some(R=>R.contains(S));!v||k||(o==null||o(l),d==null||d(l),l.defaultPrevented||r==null||r())},y),_=oe(l=>{const S=l.target;[...a.branches].some(R=>R.contains(S))||(u==null||u(l),d==null||d(l),l.defaultPrevented||r==null||r())},y);return Q(l=>{h===a.layers.size-1&&(s==null||s(l),!l.defaultPrevented&&r&&(l.preventDefault(),r()))},y),i.useEffect(()=>{if(f)return n&&(a.layersWithOutsidePointerEventsDisabled.size===0&&(M=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),a.layersWithOutsidePointerEventsDisabled.add(f)),a.layers.add(f),z(),()=>{n&&a.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=M)}},[f,y,n,a]),i.useEffect(()=>()=>{f&&(a.layers.delete(f),a.layersWithOutsidePointerEventsDisabled.delete(f),z())},[f,a]),i.useEffect(()=>{const l=()=>b({});return document.addEventListener(I,l),()=>document.removeEventListener(I,l)},[]),C.jsx(T.div,{...p,ref:D,style:{pointerEvents:m?v?"auto":"none":void 0,...e.style},onFocusCapture:w(e.onFocusCapture,_.onFocusCapture),onBlurCapture:w(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:w(e.onPointerDownCapture,F.onPointerDownCapture)})});te.displayName=Z;var ne="DismissableLayerBranch",se=i.forwardRef((e,t)=>{const n=i.useContext(q),s=i.useRef(null),o=U(t,s);return i.useEffect(()=>{const u=s.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),C.jsx(T.div,{...e,ref:o})});se.displayName=ne;function re(e,t=globalThis==null?void 0:globalThis.document){const n=L(e),s=i.useRef(!1),o=i.useRef(()=>{});return i.useEffect(()=>{const u=r=>{if(r.target&&!s.current){let p=function(){V($,n,a,{discrete:!0})};const a={originalEvent:r};r.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=p,t.addEventListener("click",o.current,{once:!0})):p()}else t.removeEventListener("click",o.current);s.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",u),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function oe(e,t=globalThis==null?void 0:globalThis.document){const n=L(e),s=i.useRef(!1);return i.useEffect(()=>{const o=u=>{u.target&&!s.current&&V(ee,n,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function z(){const e=new CustomEvent(I);document.dispatchEvent(e)}function V(e,t,n,{discrete:s}){const o=n.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),s?J(o,u):o.dispatchEvent(u)}var x=0;function Pe(){i.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??B()),document.body.insertAdjacentElement("beforeend",e[1]??B()),x++,()=>{x===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),x--}},[])}function B(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var A="focusScope.autoFocusOnMount",N="focusScope.autoFocusOnUnmount",W={bubbles:!1,cancelable:!0},ie="FocusScope",ue=i.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:u,...d}=e,[r,p]=i.useState(null),a=L(o),f=L(u),g=i.useRef(null),y=U(t,c=>p(c)),b=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(s){let c=function(m){if(b.paused||!r)return;const v=m.target;r.contains(v)?g.current=v:P(g.current,{select:!0})},O=function(m){if(b.paused||!r)return;const v=m.relatedTarget;v!==null&&(r.contains(v)||P(g.current,{select:!0}))},E=function(m){if(document.activeElement===document.body)for(const F of m)F.removedNodes.length>0&&P(r)};document.addEventListener("focusin",c),document.addEventListener("focusout",O);const h=new MutationObserver(E);return r&&h.observe(r,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",c),document.removeEventListener("focusout",O),h.disconnect()}}},[s,r,b.paused]),i.useEffect(()=>{if(r){H.add(b);const c=document.activeElement;if(!r.contains(c)){const E=new CustomEvent(A,W);r.addEventListener(A,a),r.dispatchEvent(E),E.defaultPrevented||(ae(Ee(X(r)),{select:!0}),document.activeElement===c&&P(r))}return()=>{r.removeEventListener(A,a),setTimeout(()=>{const E=new CustomEvent(N,W);r.addEventListener(N,f),r.dispatchEvent(E),E.defaultPrevented||P(c??document.body,{select:!0}),r.removeEventListener(N,f),H.remove(b)},0)}}},[r,a,f,b]);const D=i.useCallback(c=>{if(!n&&!s||b.paused)return;const O=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,E=document.activeElement;if(O&&E){const h=c.currentTarget,[m,v]=ce(h);m&&v?!c.shiftKey&&E===v?(c.preventDefault(),n&&P(m,{select:!0})):c.shiftKey&&E===m&&(c.preventDefault(),n&&P(v,{select:!0})):E===h&&c.preventDefault()}},[n,s,b.paused]);return C.jsx(T.div,{tabIndex:-1,...d,ref:y,onKeyDown:D})});ue.displayName=ie;function ae(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(P(s,{select:t}),document.activeElement!==n)return}function ce(e){const t=X(e),n=K(t,e),s=K(t.reverse(),e);return[n,s]}function X(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function K(e,t){for(const n of e)if(!de(n,{upTo:t}))return n}function de(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function le(e){return e instanceof HTMLInputElement&&"select"in e}function P(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&le(e)&&t&&e.select()}}var H=fe();function fe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=j(e,t),e.unshift(t)},remove(t){var n;e=j(e,t),(n=e[0])==null||n.resume()}}}function j(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Ee(e){return e.filter(t=>t.tagName!=="A")}function Oe(e){const[t,n]=i.useState(void 0);return G(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const u=o[0];let d,r;if("borderBoxSize"in u){const p=u.borderBoxSize,a=Array.isArray(p)?p[0]:p;d=a.inlineSize,r=a.blockSize}else d=e.offsetWidth,r=e.offsetHeight;n({width:d,height:r})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var ve="Portal",me=i.forwardRef((e,t)=>{var r;const{container:n,...s}=e,[o,u]=i.useState(!1);G(()=>u(!0),[]);const d=n||o&&((r=globalThis==null?void 0:globalThis.document)==null?void 0:r.body);return d?Y.createPortal(C.jsx(T.div,{...s,ref:t}),d):null});me.displayName=ve;function ge(e){const t=i.useRef({value:e,previous:e});return i.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}export{te as D,ue as F,me as P,Oe as a,Pe as b,ge as u};
