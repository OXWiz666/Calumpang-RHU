import{r as x,j as e}from"./app-Dv1l9kWC.js";import{B as P}from"./button-QoOdmPDh.js";import{I as T}from"./input-DkLzmgxz.js";import{c as u,d as f,a as g,e as i}from"./card-DegBJ_i3.js";import{B as v}from"./badge-C4vUuwf6.js";import{S as N,a as w,b as S,c as y,d as l}from"./select-BJwc-KIN.js";import{h as V}from"./moment-C5S46NFB.js";import{S as A}from"./search-DHuFl9Pc.js";import{P as B}from"./phone-C1YGUJ09.js";import{M as E}from"./map-pin-DtOgEhfc.js";import{C as I}from"./calendar-Dzh9fk7w.js";import{E as G}from"./eye-5rKo-vZf.js";import"./utils-CHBYMQHL.js";import"./react-icons.esm-DAXyCvzT.js";import"./index-B9T5haDV.js";import"./index-C9vQlTib.js";import"./index-BqgYiBZ4.js";import"./Combination-fJ1si5Ps.js";import"./index-nZeaUIKu.js";import"./index-CjMUfMTQ.js";import"./index-CvCXpfpM.js";import"./createLucideIcon-CM1OX3wL.js";function os({patients:C,onSelectPatient:b}){const[r,D]=x.useState(""),[h,F]=x.useState("all"),[c,L]=x.useState("all");x.useEffect(()=>{console.log("gender:",c)},[c]);const t=C.filter(s=>{var d,j,n;const o=(s==null?void 0:s.firstname.toLowerCase().includes(r.toLowerCase()))||(s==null?void 0:s.lastname.toLowerCase().includes(r.toLowerCase()))||((d=s==null?void 0:s.contactno)==null?void 0:d.toString().toLowerCase().includes(r))||((j=s==null?void 0:s.id)==null?void 0:j.toString().includes(r)),a=h==="all"||(s==null?void 0:s.status)==h,m=c==="all"||((n=s==null?void 0:s.gender)==null?void 0:n.toLowerCase())==c;return o&&a&&m}),M=s=>{const o=new Date,a=new Date(s);let m=o.getFullYear()-a.getFullYear();const d=o.getMonth()-a.getMonth();return(d<0||d===0&&o.getDate()<a.getDate())&&m--,m};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(f,{children:e.jsx(g,{children:"Search & Filter Patients"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Search by id, name, or phone number:",value:r,onChange:s=>D(s.target.value),className:"pl-10"})]}),e.jsxs(N,{value:h,onValueChange:F,children:[e.jsx(w,{className:"w-full sm:w-[180px]",children:e.jsx(S,{placeholder:"Filter by status"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(N,{value:c,onValueChange:L,children:[e.jsx(w,{className:"w-full sm:w-[180px]",children:e.jsx(S,{placeholder:"Filter by gender"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All Genders"}),e.jsx(l,{value:"m",children:"Male"}),e.jsx(l,{value:"f",children:"Female"})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>e.jsxs(u,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(f,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsxs(g,{className:"text-lg",children:[e.jsxs("p",{className:"",children:[s==null?void 0:s.firstname," ",s==null?void 0:s.lastname," "]}),e.jsx("p",{className:" text-muted-foreground",children:e.jsxs("small",{children:["Patient ID: ",s.id," â€¢ Age:"," ",M(s.birth)]})})]})}),e.jsx(v,{variant:(s==null?void 0:s.status)==="active"?"default":"secondary",children:s==null?void 0:s.status})]}),e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Join Date:"," ",V(s==null?void 0:s.created_at).format("MM-DD-yyyy")]})})]}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s==null?void 0:s.contactno})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:(s==null?void 0:s.address)??"Not Set"})]}),(s==null?void 0:s.lastVisit)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Last visit:"," ",new Date(s==null?void 0:s.lastVisit).toLocaleDateString()]})]}),(s==null?void 0:s.bloodType)&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(v,{variant:"outline",className:"text-xs",children:["Blood Type: ",s==null?void 0:s.bloodType]})}),e.jsxs(P,{onClick:()=>b(s),className:"w-full mt-4",variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]},s==null?void 0:s.id))}),t.length===0&&e.jsx(u,{children:e.jsx(i,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{os as default};
