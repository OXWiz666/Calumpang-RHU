import{P as S,j as e,b as x}from"./app-cg6HAvqA.js";import{r as n}from"./vendor-C8lGyBmx.js";import{B as l}from"./badge-CZeo7hYd.js";import{B as a}from"./button-BM2SOfBg.js";import{C as p}from"./CustomModal-Doxx7VEL.js";import{I as D}from"./InputLabel-CY2YW8fH.js";import"./label-BfwxwPK7.js";import{I}from"./input-CfcHX5xD.js";import{d as h}from"./dialog-Dls-FYEY.js";import{m as g}from"./proxy-DO_1VohJ.js";import{P as M}from"./package-D--cHD_H.js";import{T as L}from"./triangle-alert-CgTyxz_6.js";import{C as U}from"./clock-BTXNg5UP.js";import{T}from"./trending-up-DV_lwyS0.js";import{S as A}from"./square-pen-BKHrfT5E.js";import{T as B}from"./trash-2-Dltr4SH9.js";import{C as P}from"./chevron-up-ByIAnqUz.js";import{C as $}from"./chevron-down-oQNv80-A.js";import{A as z}from"./index-C8DfFUJX.js";import{f as u}from"./format-Dp3w_Y3x.js";import"./pusher-88Z950oj.js";import"./index-Bo12s4d6.js";import"./select-BJ6G5wpj.js";import"./react-icons.esm-B6zOjG8a.js";import"./index-BDNcGVgT.js";import"./index-It-miY68.js";import"./tslib.es6-M_FJ09fS.js";import"./index-Dl8iqCFB.js";import"./index-CpYaqqOj.js";import"./index-D43seCg5.js";import"./index-B0rSCQ1-.js";import"./createLucideIcon-CxhiR5tx.js";const fe=({item:t,onUpdateClick:b})=>{const[i,y]=n.useState(!1),[F,q]=n.useState(!1),c=t?.stock[0]?.stocks<=5,m=t?.stocks_movement?.[t?.stocks_movement?.length-1]?.expiry_date&&new Date(t?.stocks_movement?.[t?.stocks_movement?.length-1]?.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,j=s=>{switch(s){case"Medicine":return"bg-blue-100 text-blue-800 border-blue-200";case"Vaccine":return"bg-green-100 text-green-800 border-green-200";case"Supply":return"bg-purple-100 text-purple-800 border-purple-200";case"Equipment":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},{data:f,setData:v,processing:d,put:N,delete:k}=S({itemname:t?.name,categoryid:t?.category_id}),[C,r]=n.useState(!1),[w,o]=n.useState(!1),_=s=>{s.preventDefault(),N(route("admin.inventory.item.update",{inventory:t.id}),{onFinish:()=>{x.reload({only:["flash","inventory"]})},onSuccess:()=>{o(!1)}})},E=s=>{s.preventDefault(),k(route("admin.inventory.item.delete",{inventory:t.id}),{onFinish:()=>{x.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"group transition-colors duration-200 hover:bg-gray-50",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:e.jsx(M,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold truncate text-gray-900",children:t.name}),e.jsx(l,{className:`${j(t.category.name)} border`,children:t.category.name})]}),t?.stocks_movement?.[0]?.batch_number&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Batch: "}),e.jsx("span",{className:"text-sm font-mono px-2 py-1 rounded bg-gray-100 text-gray-700",children:t?.stocks_movement?.[0]?.batch_number})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Stock:"}),e.jsxs("span",{className:`font-semibold ${c?"text-red-600":"text-gray-900"}`,children:[t.stock[0]?.stocks," ",t.stock[0]?.stockname]})]}),t?.stocks_movement?.[0]?.expiry_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Expires:"}),e.jsx("span",{className:`font-medium ${m?"text-amber-600":"text-gray-700"}`,children:u(new Date(t?.stocks_movement?.[t?.stocks_movement?.length-1]?.expiry_date),"MMM dd, yyyy")})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsxs(l,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"Low Stock"]}),m&&e.jsxs(l,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),"Expiring Soon"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-3 text-white border-0",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",onClick:()=>b(t),children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Update Stock"]}),e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-3 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600",onClick:()=>o(!0),children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-3 hover:bg-red-50 hover:border-red-300 hover:text-red-600",onClick:()=>r(!0),children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"Delete"]}),e.jsx(a,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>y(!i),children:i?e.jsx(P,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]})]}),e.jsx(z,{children:i&&e.jsx(g.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-900",children:u(new Date(t.stocks_movement[0]?.updated_at),"MMM dd, yyyy")})]}),t.isVaccine&&e.jsxs(e.Fragment,{children:[t.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Lot Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.lotNumber})]}),t.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Storage Location"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.location})]})]})]})})})]}),e.jsxs(p,{isOpen:w,onClose:()=>o(!1),title:"Update Item",description:`Update ${t?.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(D,{value:"Item Name*"}),e.jsx(I,{value:f?.itemname,onChange:s=>v("itemname",s.target.value)})]}),e.jsxs(h,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(a,{className:"text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",disabled:d,onClick:_,children:"Update Item"})]})]}),e.jsx(p,{isOpen:C,onClose:()=>r(!1),title:"Delete Item",description:`Are you sure you want to delete this item ${t?.name}?`,maxWidth:"md",children:e.jsxs(h,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(a,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:d,onClick:E,children:"Delete Item"})]})})]})};export{fe as default};
