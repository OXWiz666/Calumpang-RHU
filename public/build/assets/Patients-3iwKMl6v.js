import{a as ae,j as e}from"./app-Jdp7iNzl.js";import{r as m}from"./vendor-DkBadjUr.js";import{B as A}from"./button-bex_LU9I.js";import{A as re}from"./AdminLayout-MkvFMA2D.js";import{I as ie}from"./input-NCJ_n0W_.js";import{A as le,a as ne,b as oe}from"./avatar-BAXdgfxi.js";import{S as ce,T as de,a as me,b as K,c as g,d as he,e as u}from"./table2-CBSruDQ7.js";import{S as P,a as B,b as H,c as V,d as n}from"./select-CspDrWdj.js";import{m as xe}from"./proxy-FTaFPFFz.js";import{S as _e}from"./search-Cye_TdpF.js";import{F as ge}from"./filter-BAwJ6QQu.js";import"./pusher-DVtoYAOu.js";import"./index-C03ciVM9.js";import"./card-DAZqRTBe.js";import"./separator-G__CmUoK.js";import"./react-icons.esm-DopY43hH.js";import"./index-lVX1eI0n.js";import"./index-CQJFG6sX.js";import"./moment-C5S46NFB.js";import"./dialog-Dbk7O2i8.js";import"./index-CnT-AOMH.js";import"./tslib.es6-M_FJ09fS.js";import"./label-CGwfsoC9.js";import"./calendar--5wQtcvb.js";import"./index-BhA1pP3R.js";import"./index-at3TdkEY.js";import"./format-Dp3w_Y3x.js";import"./isSameMonth-BOwz-_mK.js";import"./isBefore-Bnl9x5VB.js";import"./TextInput-TBYxTYyX.js";import"./createLucideIcon-BKWaAi2G.js";import"./x-b8JahagL.js";import"./settings-D_MeB5oN.js";import"./house-CSq-WFst.js";import"./calendar-D9APQM2e.js";import"./users-D4PhO1-D.js";import"./file-text-YZXa1D2L.js";import"./pill-DIGxtF-3.js";import"./badge-CxjsEXIx.js";import"./pusher-CXPEt_wS.js";import"./printer-CfgcPaUh.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./index-CtTJhX_Z.js";import"./autoprefixer-CS8cX4Yl.js";import"./unit-CopbpOEH.js";import"./Toaster-Cy5NJCTz.js";import"./toast-nqXen4gF.js";import"./index-B2TPyuzg.js";import"./index-BuhCV9Ak.js";import"./use-toast-Dm0PN6fH.js";import"./layers-OK8ayVTK.js";import"./chart-column-yMaSKbSU.js";import"./index-DqxisvwK.js";function js({patients_:E}){const{auth:v}=ae().props;console.log("Auth object:",v),v?.user?.role==="doctor"||v?.user?.role==="Doctor"||v?.user?.type==="doctor"||v?.user?.type;const[i,ue]=m.useState(E),[h,z]=m.useState(""),[p,T]=m.useState("all"),[N,W]=m.useState("all"),[b,R]=m.useState("all"),[j,pe]=m.useState({key:"firstname",direction:"ascending"}),[S,U]=m.useState(!1),[k,G]=m.useState({isOpen:!1,patient:null}),[x,L]=m.useState({isOpen:!1,patient:null,notes:""}),I=()=>{if(i.length>0){const t=[...new Set(i.map(a=>a.gender).filter(Boolean))],r=[...new Set(i.map(a=>a.status).filter(Boolean))];console.log("Available gender values in data:",t),console.log("Available status values in data:",r),console.log("Sample patient data:",i[0]),console.log("Patient status type:",typeof i[0]?.status),console.log("Patient gender type:",typeof i[0]?.gender),console.log("Current filters:",{genderFilter,statusFilter:p,ageRangeFilter:N,dateRangeFilter:b}),console.log("First 5 patients gender values:",i.slice(0,5).map(a=>({name:`${a.firstname} ${a.lastname}`,gender:a.gender,genderType:typeof a.gender})))}let s=0,l=0,$=0,M=0,O=0,D=i.filter(t=>{const r=!h||t.firstname?.toLowerCase().includes(h.toLowerCase())||t.lastname?.toLowerCase().includes(h.toLowerCase())||t.id?.toLowerCase().includes(h.toLowerCase())||t.contactno?.includes(h)||t.email?.toLowerCase().includes(h.toLowerCase());r&&s++;const a=p==="all"||(()=>{if(!t.status)return!1;const o={active:["active","1",1],inactive:["inactive","0",0],pregnant:["pregnant","2",2]},d=String(t.status).toLowerCase().trim(),c=p.toLowerCase().trim(),y=o[c]||[c],Y=y.includes(d)||y.includes(t.status);return p!=="all"&&console.log(`Status filter: ${c}, Patient status: ${t.status} (${d}), Matches: ${Y}`),Y})();a&&l++;const _=N==="all"||(()=>{if(!t.date_of_birth)return!1;const o=new Date,d=new Date(t.date_of_birth);let c=o.getFullYear()-d.getFullYear();const y=o.getMonth()-d.getMonth();switch((y<0||y===0&&o.getDate()<d.getDate())&&c--,N){case"0-17":return c>=0&&c<=17;case"18-30":return c>=18&&c<=30;case"31-50":return c>=31&&c<=50;case"51-65":return c>=51&&c<=65;case"65+":return c>65;default:return!0}})();_&&M++;const w=b==="all"||(()=>{if(!t.registration_date)return!1;const o=new Date(t.registration_date),d=new Date;switch(b){case"today":return o.toDateString()===d.toDateString();case"week":return d-o<=7*24*60*60*1e3;case"month":return d-o<=30*24*60*60*1e3;case"year":return o.getFullYear()===d.getFullYear();default:return!0}})();w&&O++;const f=r&&a&&_&&w;return i.indexOf(t)<3&&console.log(`Patient ${t.firstname} ${t.lastname}:`,{matchesSearch:r,matchesStatus:a,matchesAgeRange:_,matchesDateRange:w,finalMatch:f,status:t.status}),f});console.log("Filter match counts:",{totalPatients:i.length,searchMatches:s,statusMatches:l,genderMatches:$,ageMatches:M,dateMatches:O,finalFiltered:D.length}),i.length>0&&console.log("First 3 patients full data:",i.slice(0,3).map(t=>({name:`${t.firstname} ${t.lastname}`,gender:t.gender,status:t.status,date_of_birth:t.date_of_birth,registration_date:t.registration_date}))),console.log('Simple test - patients with gender "Male":',i.filter(t=>t.gender==="Male").length),console.log('Simple test - patients with gender "male":',i.filter(t=>t.gender==="male").length),console.log('Simple test - patients with gender containing "ale":',i.filter(t=>t.gender&&t.gender.includes("ale")).length),console.log('Simple test - patients with status "active":',i.filter(t=>t.status==="active").length),console.log("Simple test - patients with status 1:",i.filter(t=>t.status===1).length),console.log('Simple test - patients with status "1":',i.filter(t=>t.status==="1").length),console.log("Current genderFilter value:",genderFilter),console.log("Test filtering with current genderFilter:",i.filter(t=>{if(!t.gender)return!1;const r=String(t.gender).toLowerCase().trim(),a=genderFilter.toLowerCase().trim();return r===a||a==="male"&&(r==="male"||r==="1"||t.gender===1)||a==="female"&&(r==="female"||r==="2"||t.gender===2)}).length),console.log('Test with hardcoded "male" filter:',i.filter(t=>{if(!t.gender)return!1;const r=String(t.gender).toLowerCase().trim();return r==="male"||r==="1"||t.gender===1}).length);const te="male";return console.log("Forced gender filter test:",i.filter(t=>{if(!t.gender)return!1;const r=String(t.gender).toLowerCase().trim(),a=te.toLowerCase().trim();return r===a||a==="male"&&(r==="male"||r==="1"||t.gender===1)||a==="female"&&(r==="female"||r==="2"||t.gender===2)}).length),D.sort((t,r)=>{let a=t[j.key],_=r[j.key];if(j.key.includes(".")){const w=j.key.split(".");a=w.reduce((f,o)=>f?.[o],t),_=w.reduce((f,o)=>f?.[o],r)}return a<_?j.direction==="ascending"?-1:1:a>_?j.direction==="ascending"?1:-1:0}),D},q=()=>{z(""),T("all"),W("all"),R("all")},J=s=>{G({isOpen:!0,patient:s})},F=()=>{G({...k,isOpen:!1})},Q=s=>{L({isOpen:!0,patient:s,notes:s.diagnosis_notes||""})},C=()=>{L({...x,isOpen:!1})},X=s=>{L({...x,notes:s})},Z=()=>{x.patient&&console.log("Saving diagnosis notes:",x.notes),C()},ee=()=>{if(!k.isOpen||!k.patient)return null;const s=k.patient;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:F}),e.jsxs("div",{className:"relative rounded-lg shadow-xl w-full max-w-4xl mx-4 overflow-auto max-h-[90vh] transform transition-all bg-white",children:[e.jsxs("div",{className:"sticky top-0 border-b px-6 py-4 flex justify-between items-center z-10 bg-gray-100 border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-semibold",children:"Medical Record:"})," ",e.jsxs("span",{className:"ml-2",children:[s.firstname," ",s.lastname]})]}),e.jsx("button",{onClick:F,className:"text-white hover:text-gray-200 rounded-full p-1 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-sm bg-white border-gray-200",children:[e.jsxs("div",{className:"border-b p-5 border-gray-200 bg-gray-50",children:[e.jsxs("h4",{className:"font-bold text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"1. Patient Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Name:"}),e.jsxs("span",{className:"text-white",children:[s.firstname," ",s.lastname]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Address:"}),e.jsx("span",{className:"text-white",children:s.address||"Purok ___, Brgy. Calumpang, GenSan"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Contact No.:"}),e.jsx("span",{className:"text-white",children:s.contactno||"___________"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Age:"}),e.jsx("span",{className:"text-white",children:s.age||"___"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Sex:"}),e.jsx("span",{className:"text-white",children:s.gender||"M / F"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"PhilHealth No.:"}),e.jsx("span",{className:"text-white",children:s.philhealth_no||"___________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Created At:"}),e.jsx("span",{className:"text-white",children:s.created_at?new Date(s.created_at).toLocaleString():"Not available"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"4Ps Member:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"4ps-yes",className:"h-4 w-4",checked:s.is_4ps}),e.jsx("label",{htmlFor:"4ps-yes",className:"text-sm text-white",children:"Yes"}),e.jsx("input",{type:"checkbox",id:"4ps-no",className:"h-4 w-4 ml-2",checked:!s.is_4ps}),e.jsx("label",{htmlFor:"4ps-no",className:"text-sm text-white",children:"No"})]})]})]})]})]}),e.jsxs("div",{className:"border-b p-5 border-gray-200 bg-white",children:[e.jsxs("h4",{className:"font-bold text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2m0 0V5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"2. Vital Signs & Initial Assessment"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Date:"}),e.jsx("span",{className:"text-white",children:s.last_visit_date||"__/__/____"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-16 text-white",children:"BP:"}),e.jsxs("span",{className:"text-white",children:[s.bp||"___/__"," mmHg"]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-16 text-white",children:"Temp:"}),e.jsxs("span",{className:"text-white",children:[s.temp||"__"," Â°C"]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-16 text-white",children:"Pulse:"}),e.jsxs("span",{className:"text-white",children:[s.pulse||"___"," bpm"]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-16 text-white",children:"RR:"}),e.jsxs("span",{className:"text-white",children:[s.rr||"___"," breaths/min"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-24 text-white",children:"Height:"}),e.jsxs("span",{className:"text-white",children:[s.height||"___"," cm"]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-24 text-white",children:"Weight:"}),e.jsxs("span",{className:"text-white",children:[s.weight||"___"," kg"]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-24 text-white",children:"BMI:"}),e.jsx("span",{className:"text-white",children:s.bmi||"___"})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Chief Complaint:"}),e.jsx("span",{className:"text-white",children:s.chief_complaint||"___________________"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-5 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("h4",{className:"font-bold text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2m0 0V5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"3. Medical History"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Past Illnesses:"}),e.jsx("span",{className:"text-white",children:s.past_illnesses||"___________________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Family History:"}),e.jsx("span",{className:"text-white",children:s.family_history||"___________________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Allergies:"}),e.jsx("span",{className:"text-white",children:s.allergies||"___________________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Current Medications:"}),e.jsx("span",{className:"text-white",children:s.current_medications||"___________________"})]})]})]}),e.jsxs("div",{className:"p-5 border-b bg-white border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"4. Consultation Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Diagnosis/Findings:"}),e.jsx("span",{className:"text-white",children:s.diagnosis||"___________________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Treatment Given:"}),e.jsx("span",{className:"text-white",children:s.treatment||"___________________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Medications Prescribed:"}),e.jsx("span",{className:"text-white",children:s.medications_prescribed||"___________________"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Referral Needed?"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"referral-yes",className:"h-4 w-4",checked:s.referral_needed}),e.jsxs("label",{htmlFor:"referral-yes",className:"text-sm text-white",children:["Yes (Specify: ",s.referral_details||"_______",")"]}),e.jsx("input",{type:"checkbox",id:"referral-no",className:"h-4 w-4 ml-2",checked:!s.referral_needed}),e.jsx("label",{htmlFor:"referral-no",className:"text-sm text-white",children:"No"})]})]})]})]}),e.jsxs("div",{className:"border-b p-5 border-gray-200 bg-white",children:[e.jsxs("h4",{className:"font-bold text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"5. Maternal & Child Health"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"prenatal",className:"h-4 w-4",checked:s.prenatal_checkup}),e.jsxs("label",{htmlFor:"prenatal",className:"ml-2 text-white",children:["Prenatal Checkup - LMP: ",s.lmp||"_________"," AOG: ",s.aog||"____"," weeks"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"postnatal",className:"h-4 w-4",checked:s.postnatal_checkup}),e.jsxs("label",{htmlFor:"postnatal",className:"ml-2 text-white",children:["Postnatal Checkup - Date of Delivery: ",s.delivery_date||"___________"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"immunization",className:"h-4 w-4",checked:s.child_immunization}),e.jsxs("label",{htmlFor:"immunization",className:"ml-2 text-white",children:["Child Immunization - Vaccine Given: ",s.vaccine_given||"___________"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"nutritional",className:"h-4 w-4",checked:s.nutritional_status}),e.jsx("label",{htmlFor:"nutritional",className:"ml-2 text-white",children:"Nutritional Status - "}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[e.jsx("input",{type:"checkbox",id:"normal",className:"h-4 w-4",checked:s.nutritional_status==="Normal"}),e.jsx("label",{htmlFor:"normal",className:"text-sm text-white",children:"Normal"}),e.jsx("input",{type:"checkbox",id:"underweight",className:"h-4 w-4 ml-2",checked:s.nutritional_status==="Underweight"}),e.jsx("label",{htmlFor:"underweight",className:"text-sm text-white",children:"Underweight"}),e.jsx("input",{type:"checkbox",id:"overweight",className:"h-4 w-4 ml-2",checked:s.nutritional_status==="Overweight"}),e.jsx("label",{htmlFor:"overweight",className:"text-sm text-white",children:"Overweight"})]})]})]})]}),e.jsxs("div",{className:"p-5 bg-white",children:[e.jsxs("h4",{className:"font-bold text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"6. Follow-Up & Health Worker's Notes"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Next Visit Date:"}),e.jsx("span",{className:"text-white",children:s.next_visit_date||"__/__/____"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Health Advice Given:"}),e.jsx("span",{className:"text-white",children:s.health_advice||"___________________"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-medium w-32 text-white",children:"Attending Health Worker:"}),e.jsxs("span",{className:"text-white",children:[s.attending_health_worker||"___________________"," (Signature)"]})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-100 dark:bg-gray-800 px-6 py-3 flex justify-between border-t border-gray-200 dark:border-gray-700 shadow-inner",children:[e.jsxs("button",{onClick:()=>Q(s),className:"bg-primary hover:bg-primary/90 text-white px-5 py-2 rounded-md text-sm font-medium shadow-md flex items-center justify-center w-32 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Diagnosis Notes"]}),e.jsxs("button",{onClick:F,className:"bg-gray-800 hover:bg-black text-white px-4 py-2 rounded-md text-sm font-medium shadow-sm flex items-center transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Close"]})]})]})]})},se=()=>{if(!x.isOpen||!x.patient)return null;const s=x.patient;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:C}),e.jsxs("div",{className:"relative rounded-lg shadow-xl w-full max-w-2xl mx-4 overflow-auto max-h-[90vh] transform transition-all bg-white",children:[e.jsxs("div",{className:"sticky top-0 bg-primary border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("h3",{className:"text-lg font-medium text-white flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"font-semibold",children:"Diagnosis Notes:"})," ",e.jsxs("span",{className:"ml-2",children:[s.firstname," ",s.lastname]})]}),e.jsx("button",{onClick:C,className:"text-white hover:text-gray-200 rounded-full p-1 hover:bg-gray-700 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"diagnosis-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Doctor's Diagnosis Notes"}),e.jsx("textarea",{id:"diagnosis-notes",rows:10,className:"w-full rounded-md border px-4 py-2 focus:border-primary focus:ring-primary border-gray-300 bg-white text-gray-900",placeholder:"Enter detailed diagnosis notes here...",value:x.notes,onChange:l=>X(l.target.value)})]})})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-100 dark:bg-gray-800 px-6 py-3 flex justify-end space-x-3 border-t border-gray-200 dark:border-gray-700 shadow-inner",children:[e.jsx("button",{onClick:C,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md text-sm font-medium shadow-sm flex items-center transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:Z,className:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md text-sm font-medium shadow-md flex items-center transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Notes"]})]})]})]})};return e.jsxs(re,{header:"Patients",children:[e.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"rounded-lg shadow-sm p-6 bg-white",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"All Patients"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(ie,{placeholder:"Search patients by name, ID, contact, or email...",value:h,onChange:s=>z(s.target.value),className:"pl-10 w-[300px]"})]}),e.jsxs(A,{variant:"outline",onClick:()=>U(!S),className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),S?"Hide Filters":"Show Filters"]}),(h||p!=="all"||N!=="all"||b!=="all")&&e.jsx(A,{variant:"outline",onClick:q,className:"text-red-600 hover:text-red-700",children:"Clear Filters"})]})]}),S&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsxs(P,{value:p,onValueChange:T,children:[e.jsx(B,{children:e.jsx(H,{placeholder:"All Statuses"})}),e.jsxs(V,{children:[e.jsx(n,{value:"all",children:"All Statuses"}),e.jsx(n,{value:"active",children:"Active"}),e.jsx(n,{value:"inactive",children:"Inactive"}),e.jsx(n,{value:"pregnant",children:"Pregnant"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Age Range"}),e.jsxs(P,{value:N,onValueChange:W,children:[e.jsx(B,{children:e.jsx(H,{placeholder:"All Ages"})}),e.jsxs(V,{children:[e.jsx(n,{value:"all",children:"All Ages"}),e.jsx(n,{value:"0-17",children:"0-17 years"}),e.jsx(n,{value:"18-30",children:"18-30 years"}),e.jsx(n,{value:"31-50",children:"31-50 years"}),e.jsx(n,{value:"51-65",children:"51-65 years"}),e.jsx(n,{value:"65+",children:"65+ years"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Registration Date"}),e.jsxs(P,{value:b,onValueChange:R,children:[e.jsx(B,{children:e.jsx(H,{placeholder:"All Dates"})}),e.jsxs(V,{children:[e.jsx(n,{value:"all",children:"All Dates"}),e.jsx(n,{value:"today",children:"Today"}),e.jsx(n,{value:"week",children:"This Week"}),e.jsx(n,{value:"month",children:"This Month"}),e.jsx(n,{value:"year",children:"This Year"})]})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",I().length," of ",i.length," patients"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx(ce,{data:I(),defaultSort:{key:"firstname",direction:"asc"},children:({sortedData:s})=>e.jsxs(de,{children:[e.jsx(me,{children:e.jsxs(K,{children:[e.jsx(g,{sortKey:"user.firstname",sortable:!0,children:"Patient"}),e.jsx(g,{sortKey:"user.birth",sortable:!0,children:"Birth"}),e.jsx(g,{sortKey:"user.gender",sortable:!0,children:"Gender"}),e.jsx(g,{sortKey:"user.contactno",sortable:!0,children:"Contact Information"}),e.jsx(g,{sortKey:"last_appointment",sortable:!0,children:"Last Visit"}),e.jsx(g,{sortKey:"created_at",sortable:!0,children:"Created At"}),e.jsx(g,{children:"Action"})]})}),e.jsx(he,{children:s.map((l,$)=>e.jsxs(K,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(le,{children:[e.jsx(ne,{src:l.profile_picture||`https://api.dicebear.com/7.x/avataaars/svg?seed=${l.firstname}`,alt:l.firstname||"Patient"}),e.jsx(oe,{children:`${l.firstname} ${l.lastname}`.split(" ").map(M=>M[0]).join("")})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[l.firstname," ",l.lastname]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["P - ",l.id]})]})]})}),e.jsx(u,{children:l.birth??"Not Set"}),e.jsx(u,{children:l.gender}),e.jsx(u,{children:"09123"}),e.jsx(u,{children:l.last_appointment?new Date(l.last_appointment).toLocaleDateString():"No appointments recorded"}),e.jsx(u,{children:l.created_at?new Date(l.created_at).toLocaleString():"Not available"}),e.jsx(u,{children:e.jsx("div",{className:"flex space-x-2",children:e.jsxs(A,{variant:"outline",size:"sm",className:"w-24 text-sm px-4 py-1.5 shadow-sm flex items-center justify-center bg-gray-100 hover:bg-gray-200 text-gray-800 border border-gray-300 hover:border-gray-400 rounded-md transition-colors",onClick:()=>J(l),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"VIEW"]})})})]}))})]})})})]})}),ee(),se()]})}export{js as default};
