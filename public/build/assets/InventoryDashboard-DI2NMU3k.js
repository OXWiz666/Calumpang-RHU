import{r as i,P as le,j as e,b as re}from"./app-CGHi43Ye.js";import{T as L,a as E,b as c,c as ie}from"./tabs-DLNbAD_k.js";import{C as o,a as d,b as m,c as x}from"./card-DIDsiHvq.js";import{B as h}from"./badge-DBs7h1tT.js";import{B as f}from"./button-DuNm46Ou.js";import ne from"./SearchBar--AUYxq4D.js";import B from"./InventoryItemCard-m0tfI8aE.js";import ce from"./StockMovementForm-DXe2qyi9.js";import oe from"./ReportsPanel-WLIJpdSY.js";import de from"./AddItemForm-BgHCE7FZ.js";import{A as me}from"./AdminLayout-D8caS0af.js";import{C as xe}from"./CustomModal-Cr6npih_.js";import{I as he}from"./input-3LpwnyzO.js";import{I as pe}from"./InputLabel-B-8v0cfo.js";import{P as ue}from"./PrimaryButton-DL9jEy_B.js";import{P as je}from"./PrintErrors-ZE2hz2qS.js";import{F as fe}from"./filter-EsT3q6d4.js";import{c as I}from"./createLucideIcon-Cof21yAm.js";import{T as ge}from"./triangle-alert-cpOoJLTn.js";import{C as Ne}from"./clock-Ba4h6Otm.js";import{P as ve}from"./pill-C2eyzs5K.js";import{S as ye}from"./syringe-Bb3riOkg.js";import{S as be}from"./stethoscope-VK3-U9pO.js";import"./index-DLjvr9xR.js";import"./index-B2WG90g3.js";import"./index-BNG8reF0.js";import"./index-Cxgfhl2e.js";import"./index-DhGX7E2K.js";import"./search-DRtYtbFX.js";import"./chevron-up-CrmGL7Kb.js";import"./chevron-down-eQM9EPZl.js";import"./format-BtYX0kVO.js";import"./dialog-DF98DBeC.js";import"./Combination-BN35-FFx.js";import"./react-icons.esm-C_bt_X5N.js";import"./label-D4vAA5gq.js";import"./index-CCG5UxZT.js";import"./textarea-CBC1jwoM.js";import"./select-mzX0YAKe.js";import"./index-BcrRIvmZ.js";import"./popover-DI7WJ-y1.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./calendar-CYPJYG-J.js";import"./file-text-CWY2GfZh.js";import"./chart-column-CKT62BVl.js";import"./download-Wj6qmQAG.js";import"./avatar-Dm9XGkoy.js";import"./separator-a4l_AF15.js";import"./moment-C5S46NFB.js";import"./TextInput-B6x9I8vL.js";import"./x-DiNmz3kP.js";import"./settings-Dxu3Jry8.js";import"./users-BHAcIQ-r.js";import"./bell-6-i8gnyk.js";import"./pusher-HXnHATcw.js";import"./layers-BGlFPruJ.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Se=I("Box",Ce);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],V=I("Package",we);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_=I("Plus",Ae),Ds=({categories:b=[],inventory:C})=>{const[t,k]=i.useState([]),[S,O]=i.useState([]),[g,n]=i.useState([]);i.useEffect(()=>{C&&console.log("inventory: ",C)},[C]);const[R,U]=i.useState(null),[$,M]=i.useState(!1),[z,T]=i.useState(!1),[u,N]=i.useState(null),[p,D]=i.useState("all"),[w,q]=i.useState("All"),v=t.filter(s=>s.quantity<=s.reorderThreshold),y=t.filter(s=>s.expirationDate&&new Date(s.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3),H=s=>{n(s),N(null),D("all")},Q=s=>{N(s)},W=s=>{D(s),N(null),s==="all"?n(t):s==="low"?n(v):s==="expiring"?n(y):s==="master"&&(n(t),q("All"))},Z=s=>{q(s),n(s==="All"?t:t.filter(l=>l.category===s))},P=s=>{U(s),M(!0)},G=s=>{O([...S,s]);const l=t.map(r=>{if(r.id===s.itemId){const a=s.type==="incoming"?r.quantity+s.quantity:r.quantity-s.quantity;return{...r,quantity:Math.max(0,a),lastUpdated:new Date}}return r});k(l),n(r=>p==="all"&&!u?l:p==="low"?l.filter(a=>a.quantity<=a.reorderThreshold):p==="expiring"?l.filter(a=>a.expirationDate&&new Date(a.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3):p==="master"?w==="All"?l:l.filter(a=>a.category===w):u?l.filter(a=>a.category===u):r.map(a=>l.find(ae=>ae.id===a.id)||a))},j=s=>s==="All"?t.length:t.filter(l=>l.category===s).length,[F,A]=i.useState(!1),{data:J,setData:K,post:X,processing:Y,errors:ee,clearErrors:se}=le({categoryname:""});i.useEffect(()=>{se()},[F]);const te=s=>{s.preventDefault(),X(route("admin.inventory.category"),{onSuccess:()=>{A(!1)},onFinish:()=>{re.reload({only:["flash","categories"]})}})};return e.jsxs(me,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Inventory"}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[e.jsxs(f,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Advanced Filters"]}),e.jsxs(f,{className:"flex items-center gap-2",onClick:()=>T(!0),children:[e.jsx(_,{className:"h-4 w-4"}),"Add New Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(o,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(m,{className:"text-sm font-medium",children:"Total Items"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.length})]})})]}),e.jsxs(o,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(m,{className:"text-sm font-medium",children:"Categories"})}),e.jsx(x,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-2xl font-bold",children:b.length})})})]}),e.jsxs(o,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(m,{className:"text-sm font-medium",children:"Low Stock Items"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:v.length})]})})]}),e.jsxs(o,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(m,{className:"text-sm font-medium",children:"Expiring Soon"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:y.length})]})})]})]}),e.jsx(ne,{items:t,onSearch:H}),e.jsxs(L,{value:p,onValueChange:W,className:"mb-6",children:[e.jsxs(E,{children:[e.jsx(c,{value:"all",children:"All Items"}),e.jsx(c,{value:"master",children:"Master List"}),e.jsxs(c,{value:"low",children:["Low Stock",v.length>0&&e.jsx(h,{variant:"destructive",className:"ml-2",children:v.length})]}),e.jsxs(c,{value:"expiring",children:["Expiring Soon",y.length>0&&e.jsx(h,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800",children:y.length})]})]}),e.jsx(ie,{value:"master",className:"mt-6",children:e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{className:"text-xl",children:"Master List"})}),e.jsx(x,{children:e.jsxs(L,{value:w,onValueChange:Z,className:"mb-6",children:[e.jsxs(E,{className:"grid md:grid-cols-2 lg:grid-cols-5 lg w-full",children:[e.jsxs(c,{value:"All",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"All",e.jsx(h,{variant:"secondary",className:"ml-1",children:j("All")})]}),e.jsxs(c,{value:"Medicine",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Medicines",e.jsx(h,{variant:"secondary",className:"ml-1",children:j("Medicine")})]}),e.jsxs(c,{value:"Vaccine",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Vaccines",e.jsx(h,{variant:"secondary",className:"ml-1",children:j("Vaccine")})]}),e.jsxs(c,{value:"Equipment",className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Equipment",e.jsx(h,{variant:"secondary",className:"ml-1",children:j("Equipment")})]}),e.jsxs(c,{value:"Supply",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Supplies",e.jsx(h,{variant:"secondary",className:"ml-1",children:j("Supply")})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.map(s=>e.jsx(B,{item:s,onUpdateClick:P},s.id)),g.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(m,{className:"text-lg",children:[e.jsxs("div",{className:"flex justify-between space-x-2 mt-4 md:mt-0",children:[e.jsx("div",{children:"Categories"}),e.jsxs(f,{className:"flex items-center gap-2",onClick:()=>A(!0),children:[e.jsx(_,{className:"h-4 w-4"}),"Add"]})]}),e.jsx(xe,{isOpen:F,onClose:()=>{A(!1)},title:"Add Category",description:"Add Category for Inventory.",maxWidth:"sm",children:e.jsxs("form",{onSubmit:te,children:[e.jsx(je,{errors:ee}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(pe,{value:"Category Name:"}),e.jsx(he,{value:J.categoryname,onChange:s=>K("categoryname",s.target.value)})]}),e.jsx(ue,{disabled:Y,className:" self-end mt-2",type:"submit",children:"Save"})]})]})})]})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{variant:u===null?"default":"outline",className:"w-full justify-start",onClick:()=>{N(null),n(t)},children:"All Categories"}),b.map(s=>e.jsx(f,{variant:u===s.id?"default":"outline",className:"w-full justify-start",onClick:()=>Q(s.id),children:e.jsx("div",{className:"flex items-center",children:s.name})},s))]})})]}),e.jsxs(o,{className:"mt-6",children:[e.jsx(d,{children:e.jsx(m,{className:"text-lg",children:"Recent Activity"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:S.slice(0,5).map((s,l)=>{const r=t.find(a=>a.id===s.itemId);return e.jsxs("div",{className:"border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("p",{className:"font-medium",children:[s.type==="incoming"?"Added":"Removed"," ",s.quantity," ",r==null?void 0:r.unit,"s of"," ",r==null?void 0:r.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.performedBy," on"," ",new Date(s.date).toLocaleDateString()]})]},l)})})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:p!=="master"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.map(s=>e.jsx(B,{item:s,onUpdateClick:P},s.id)),g.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(oe,{items:t,movements:S})}),e.jsx(ce,{open:$,onClose:()=>M(!1),item:R,onSave:G}),e.jsx(de,{open:z,onClose:()=>T(!1),onSave:s=>{k([...t,s]),n([...t,s])},categories_:b})]})};export{Ds as default};
