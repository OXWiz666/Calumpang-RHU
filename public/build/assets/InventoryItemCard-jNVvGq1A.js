import{r as d,P as A,j as e,b as D}from"./app-BhLcihj1.js";import{C as O,a as P,b as V,c as W,d as q}from"./card-Duea2dBD.js";import{B as m}from"./badge-MqN0qSxq.js";import{B as t}from"./button-Be9dxzc2.js";import{C as p}from"./CustomModal-IklY7K1_.js";import{I as H}from"./InputLabel-aOqsskMj.js";import"./label-DpZTm_7D.js";import{I as Q}from"./input-CMQ1mg5c.js";import{f as I}from"./dialog--jmQziZh.js";import{T as R}from"./triangle-alert-CvhhDaTR.js";import{C as G}from"./clock-58OuFkdY.js";import{C as J}from"./chevron-up-YtdNRQKX.js";import{C as K}from"./chevron-down-DlIcP3D0.js";import{f as _}from"./format-BtYX0kVO.js";import"./select-DieK_nzP.js";import"./react-icons.esm-BsfKKiVe.js";import"./index-D2OfW34y.js";import"./index-JUtOyzXj.js";import"./index-Dew07psT.js";import"./Combination-IXk0dSDV.js";import"./index-ToWLRMEW.js";import"./index-KJMR-obi.js";import"./index-CpfHRqbg.js";import"./createLucideIcon-fJbx73EM.js";const Ne=({item:s,onUpdateClick:S})=>{var u,h,g,j,f,v,y,N,b,C,k,w;const[n,E]=d.useState(!1),o=((u=s==null?void 0:s.stock[0])==null?void 0:u.stocks)<=5,l=((g=(h=s==null?void 0:s.stocks_movement)==null?void 0:h[0])==null?void 0:g.expiry_date)&&new Date((f=(j=s==null?void 0:s.stocks_movement)==null?void 0:j[0])==null?void 0:f.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,M=a=>{switch(a){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},{data:i,setData:U,processing:x,put:L,delete:B}=A({itemname:s==null?void 0:s.name,categoryid:s==null?void 0:s.category_id}),[F,c]=d.useState(!1),[T,r]=d.useState(!1),$=a=>{a.preventDefault(),L(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{D.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})},z=a=>{a.preventDefault(),B(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{D.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(O,{className:`mb-4 ${o?"border-red-300":l?"border-amber-300":"border-gray-200"}`,children:[e.jsx(P,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(V,{className:"text-lg font-medium",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(m,{className:M(s.category.name),children:s.category.name}),o&&e.jsxs(m,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),"Low Stock"]}),l&&s.expirationDate&&e.jsxs(m,{variant:"outline",className:"bg-amber-100 text-amber-800 flex items-center gap-1",children:[e.jsx(G,{className:"h-3 w-3"}),"Expiring Soon"]})]})]}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>E(!n),className:"h-8 w-8 p-0",children:n?e.jsx(J,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"})})]})}),e.jsxs(W,{className:"pb-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:`font-medium ${o?"text-red-600":""}`,children:[(v=s.stock[0])==null?void 0:v.stocks," ",(y=s.stock[0])==null?void 0:y.stockname,"s"]})]})}),e.jsxs("div",{children:[e.jsx(t,{variant:"outline",size:"sm",className:"w-1/2 mt-2 hover:bg-secondary/80 transition-colors font-medium",onClick:()=>{r(!0)},children:"Edit Item"}),e.jsxs(p,{isOpen:T,onClose:a=>{r(!1)},title:"Updating an Item",description:`Update ${s==null?void 0:s.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(H,{value:"Item Name*"}),e.jsx(Q,{value:i==null?void 0:i.itemname,onChange:a=>U("itemname",a.target.value)})]}),e.jsxs(I,{className:"pt-4",children:[e.jsx(t,{type:"button",variant:"outline",onClick:a=>{r(!1)},children:"Cancel"}),e.jsx(t,{className:"bg-primary hover:bg-primary/90",disabled:x,onClick:$,children:"Update Item"})]})]}),e.jsx(t,{variant:"outline",size:"sm",className:"w-1/2",onClick:a=>{c(!0)},children:"Delete Item"}),e.jsx(p,{isOpen:F,onClose:a=>{c(!1)},title:"Deleting an Item.",description:`Are you sure you want to delete this item ${s==null?void 0:s.name}?`,maxWidth:"md",children:e.jsxs(I,{className:"pt-4",children:[e.jsx(t,{type:"button",variant:"outline",onClick:a=>{c(!1)},children:"Cancel"}),e.jsx(t,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:x,onClick:z,children:"Delete Item"})]})})]}),e.jsx(p,{title:"Delete an Item",description:"Are you sure you want to delete "}),n&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[((b=(N=s==null?void 0:s.stocks_movement)==null?void 0:N[0])==null?void 0:b.expiry_date)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${l?"text-amber-600":""}`,children:_(new Date((k=(C=s==null?void 0:s.stocks_movement)==null?void 0:C[0])==null?void 0:k.expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:_(new Date((w=s.stocks_movement[0])==null?void 0:w.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),n&&e.jsx(q,{className:"pt-0",children:e.jsx(t,{variant:"outline",size:"sm",className:"w-full hover:bg-secondary/80 transition-colors font-medium",onClick:()=>S(s),children:"Update Stock"})})]})};export{Ne as default};
