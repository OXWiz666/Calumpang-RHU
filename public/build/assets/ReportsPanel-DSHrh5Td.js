import{j as s,r as d}from"./app-B3tTMWCX.js";import{C as T,a as D,b as I,c as E}from"./card-DZRUQR3X.js";import{c as g,B as x}from"./button-CQBKld8I.js";import{S as N,a as y,b as k,c as S,d as i}from"./select-DRovf_t4.js";import{P as R,a as A,b as M,C as P}from"./popover-DauZY9bq.js";import{C as F}from"./calendar-CX7TdPNT.js";import{f as o}from"./format-BtYX0kVO.js";import{T as V,a as B,b as w,c as b}from"./tabs-DtHtXrV2.js";import{F as G}from"./file-text-ByCAdRKo.js";import{C as O}from"./chart-column-DxU5mw62.js";import{D as Q}from"./download-_bZSK7cH.js";import"./react-icons.esm-DFR2UKHC.js";import"./index-BwULlys1.js";import"./index-BOPpvsSN.js";import"./index-D5UIAN_7.js";import"./Combination-BX2uw9vj.js";import"./index-xWeTbU3S.js";import"./index-Ci5TdmtH.js";import"./index-DkcGS4j_.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./createLucideIcon-DeTprT7L.js";import"./index-DvmaaCIb.js";function $({selected:t,onSelect:l,className:a}){return s.jsx("div",{className:g("grid gap-2",a),children:s.jsxs(R,{children:[s.jsx(A,{asChild:!0,children:s.jsxs(x,{id:"date",variant:"outline",className:g("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[s.jsx(F,{className:"mr-2 h-4 w-4"}),t!=null&&t.from?t.to?s.jsxs(s.Fragment,{children:[o(t.from,"LLL dd, y")," -"," ",o(t.to,"LLL dd, y")]}):o(t.from,"LLL dd, y"):s.jsx("span",{children:"Pick a date range"})]})}),s.jsx(M,{className:"w-auto p-0",align:"start",children:s.jsx(P,{initialFocus:!0,mode:"range",defaultMonth:t==null?void 0:t.from,selected:t,onSelect:l,numberOfMonths:2})})]})})}const hs=({items:t,movements:l})=>{d.useEffect(()=>{l&&console.log("movements: ",l)},[l]);const[a,C]=d.useState({category:"All",stockStatus:"All"}),[m,v]=d.useState(),_=["All",...Array.from(new Set(t.map(e=>e.category.name)))],h=t.filter(e=>{var r;if(a.category&&a.category!=="All"&&e.category.id!==a.category)return!1;if(a.stockStatus){const n=((r=e.stock[0])==null?void 0:r.stocks)<=5,c=e.stocks_movement[0].expiry_date&&new Date(e.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3;if(a.stockStatus==="Low"&&!n||a.stockStatus==="Expiring"&&!c||a.stockStatus==="Normal"&&(n||c))return!1}return!0}),L=()=>{console.log("Generating report with filters:",a,m),alert("Report generated! In a real application, this would download a PDF or CSV file.")};return s.jsxs(T,{className:"w-full",children:[s.jsx(D,{children:s.jsxs(I,{className:"flex items-center gap-2",children:[s.jsx(G,{className:"h-5 w-5"}),"Inventory Reports"]})}),s.jsx(E,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),s.jsxs(N,{children:[s.jsx(y,{children:s.jsx(k,{placeholder:"Select category"})}),s.jsx(S,{children:_.map(e=>s.jsx(i,{value:e,children:e},e))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Stock Status"}),s.jsxs(N,{value:a.stockStatus,onValueChange:e=>C({...a,stockStatus:e}),children:[s.jsx(y,{children:s.jsx(k,{placeholder:"Select status"})}),s.jsxs(S,{children:[s.jsx(i,{value:"All",children:"All Items"}),s.jsx(i,{value:"Low",children:"Low Stock"}),s.jsx(i,{value:"Expiring",children:"Expiring Soon"}),s.jsx(i,{value:"Normal",children:"Normal"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date Range"}),s.jsx($,{selected:m,onSelect:v})]})]}),s.jsxs(V,{defaultValue:"inventory",children:[s.jsxs(B,{className:"grid w-full md:grid-cols-2 grid-cols-1",children:[s.jsx(w,{value:"inventory",children:"Inventory Status"}),s.jsx(w,{value:"movements",children:"Stock Movements"})]}),s.jsx(b,{value:"inventory",className:"pt-4",children:s.jsx("div",{className:"border rounded-md overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-muted",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-2",children:"Item Name"}),s.jsx("th",{className:"text-left p-2",children:"Category"}),s.jsx("th",{className:"text-left p-2",children:"Quantity"}),s.jsx("th",{className:"text-left p-2",children:"Status"}),s.jsx("th",{className:"text-left p-2",children:"Expiration"})]})}),s.jsx("tbody",{children:h.length>0?h.map(e=>{var c,p,j,f,u;const r=((c=e.stock[0])==null?void 0:c.stocks)<=5,n=e.stocks_movement[0].expiry_date&&new Date(e.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3;return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-2",children:e.stocks_movement[0].inventory_name}),s.jsx("td",{className:"p-2",children:e.category.name}),s.jsxs("td",{className:"p-2",children:[e.stock[0].stocks??0," ",(p=e==null?void 0:e.stock[0])==null?void 0:p.stockname,"s"]}),s.jsxs("td",{className:"p-2",children:[r&&s.jsx("span",{className:"text-red-600 font-medium",children:"Low Stock"}),n&&s.jsxs("span",{className:"text-amber-600 font-medium",children:[r?", ":"","Expiring Soon"]}),!r&&!n&&s.jsx("span",{className:"text-green-600 font-medium",children:"Normal"})]}),s.jsx("td",{className:"p-2",children:e.stocks_movement[0].expiry_date?o(new Date((u=(f=e==null?void 0:e.stocks_movement)==null?void 0:f[((j=e==null?void 0:e.stocks_movement)==null?void 0:j.length)-1])==null?void 0:u.expiry_date),"MMM dd, yyyy"):"N/A"})]},e.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No items match the selected filters"})})})]})})}),s.jsx(b,{value:"movements",className:"pt-4",children:s.jsx("div",{className:"border rounded-md overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-muted",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-2",children:"Date"}),s.jsx("th",{className:"text-left p-2",children:"Item"}),s.jsx("th",{className:"text-left p-2",children:"Type"}),s.jsx("th",{className:"text-left p-2",children:"Quantity"}),s.jsx("th",{className:"text-left p-2",children:"Reason"}),s.jsx("th",{className:"text-left p-2",children:"Staff"})]})}),s.jsx("tbody",{children:l.length>0?l.map(e=>{var r;return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-2",children:o(new Date(e.created_at),"MMM dd, yyyy")}),s.jsx("td",{className:"p-2",children:(e==null?void 0:e.inventory_name)||"Unknown Item"}),s.jsx("td",{className:"p-2",children:s.jsx("span",{className:`font-medium ${e.type==="Incoming"?"text-green-600":"text-red-600"}`,children:e.type==="Incoming"?"Incoming":"Outgoing"})}),s.jsxs("td",{className:"p-2",children:[e.quantity," ",(r=e==null?void 0:e.stocks)==null?void 0:r.stockname]}),s.jsx("td",{className:"p-2",children:(e==null?void 0:e.reason)??"(No reason)"}),s.jsxs("td",{className:"p-2",children:[e.staff.firstname," ",e.staff.lastname]})]},e.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No movements match the selected filters"})})})]})})})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsxs(x,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(O,{className:"h-4 w-4"}),"View Analytics"]}),s.jsxs(x,{onClick:L,className:"flex items-center gap-2",children:[s.jsx(Q,{className:"h-4 w-4"}),"Generate Report"]})]})]})})]})};export{hs as default};
