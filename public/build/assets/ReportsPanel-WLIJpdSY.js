import{j as e,r as p}from"./app-CGHi43Ye.js";import{C,a as D,b as k,c as T}from"./card-DIDsiHvq.js";import{c as j,B as d}from"./button-DuNm46Ou.js";import{S as u,a as f,b as g,c as N,d as i}from"./select-mzX0YAKe.js";import{P as L,a as I,b as A,C as M}from"./popover-DI7WJ-y1.js";import{C as E}from"./calendar-CYPJYG-J.js";import{f as c}from"./format-BtYX0kVO.js";import{T as R,a as P,b as y,c as S}from"./tabs-DLNbAD_k.js";import{F}from"./file-text-CWY2GfZh.js";import{C as V}from"./chart-column-CKT62BVl.js";import{D as q}from"./download-Wj6qmQAG.js";import"./react-icons.esm-C_bt_X5N.js";import"./index-DLjvr9xR.js";import"./index-B2WG90g3.js";import"./index-Cxgfhl2e.js";import"./Combination-BN35-FFx.js";import"./index-DhGX7E2K.js";import"./index-BcrRIvmZ.js";import"./index-CCG5UxZT.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./createLucideIcon-Cof21yAm.js";import"./index-BNG8reF0.js";function B({selected:a,onSelect:o,className:r}){return e.jsx("div",{className:j("grid gap-2",r),children:e.jsxs(L,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(d,{id:"date",variant:"outline",className:j("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),a!=null&&a.from?a.to?e.jsxs(e.Fragment,{children:[c(a.from,"LLL dd, y")," -"," ",c(a.to,"LLL dd, y")]}):c(a.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(A,{className:"w-auto p-0",align:"start",children:e.jsx(M,{initialFocus:!0,mode:"range",defaultMonth:a==null?void 0:a.from,selected:a,onSelect:o,numberOfMonths:2})})]})})}const oe=({items:a,movements:o})=>{const[r,m]=p.useState({category:"All",stockStatus:"All"}),[n,w]=p.useState(),v=["All",...Array.from(new Set(a.map(t=>t.category)))],x=a.filter(t=>{if(r.category&&r.category!=="All"&&t.category!==r.category)return!1;if(r.stockStatus){const s=t.quantity<=t.reorderThreshold,l=t.expirationDate&&new Date(t.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3;if(r.stockStatus==="Low"&&!s||r.stockStatus==="Expiring"&&!l||r.stockStatus==="Normal"&&(s||l))return!1}return!0}),h=o.filter(t=>{if(n){const s=new Date(t.date);if(s<n.from||s>n.to)return!1}if(r.category&&r.category!=="All"){const s=a.find(l=>l.id===t.itemId);if(s&&s.category!==r.category)return!1}return!0}),b=()=>{console.log("Generating report with filters:",r,n),alert("Report generated! In a real application, this would download a PDF or CSV file.")};return e.jsxs(C,{className:"w-full",children:[e.jsx(D,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Inventory Reports"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),e.jsxs(u,{value:r.category,onValueChange:t=>m({...r,category:t}),children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Select category"})}),e.jsx(N,{children:v.map(t=>e.jsx(i,{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Stock Status"}),e.jsxs(u,{value:r.stockStatus,onValueChange:t=>m({...r,stockStatus:t}),children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Select status"})}),e.jsxs(N,{children:[e.jsx(i,{value:"All",children:"All Items"}),e.jsx(i,{value:"Low",children:"Low Stock"}),e.jsx(i,{value:"Expiring",children:"Expiring Soon"}),e.jsx(i,{value:"Normal",children:"Normal"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date Range"}),e.jsx(B,{selected:n,onSelect:w})]})]}),e.jsxs(R,{defaultValue:"inventory",children:[e.jsxs(P,{className:"grid w-full md:grid-cols-2 grid-cols-1",children:[e.jsx(y,{value:"inventory",children:"Inventory Status"}),e.jsx(y,{value:"movements",children:"Stock Movements"})]}),e.jsx(S,{value:"inventory",className:"pt-4",children:e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"Item Name"}),e.jsx("th",{className:"text-left p-2",children:"Category"}),e.jsx("th",{className:"text-left p-2",children:"Quantity"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Expiration"})]})}),e.jsx("tbody",{children:x.length>0?x.map(t=>{const s=t.quantity<=t.reorderThreshold,l=t.expirationDate&&new Date(t.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:t.name}),e.jsx("td",{className:"p-2",children:t.category}),e.jsxs("td",{className:"p-2",children:[t.quantity," ",t.unit,"s"]}),e.jsxs("td",{className:"p-2",children:[s&&e.jsx("span",{className:"text-red-600 font-medium",children:"Low Stock"}),l&&e.jsxs("span",{className:"text-amber-600 font-medium",children:[s?", ":"","Expiring Soon"]}),!s&&!l&&e.jsx("span",{className:"text-green-600 font-medium",children:"Normal"})]}),e.jsx("td",{className:"p-2",children:t.expirationDate?c(new Date(t.expirationDate),"MMM dd, yyyy"):"N/A"})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No items match the selected filters"})})})]})})}),e.jsx(S,{value:"movements",className:"pt-4",children:e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"Date"}),e.jsx("th",{className:"text-left p-2",children:"Item"}),e.jsx("th",{className:"text-left p-2",children:"Type"}),e.jsx("th",{className:"text-left p-2",children:"Quantity"}),e.jsx("th",{className:"text-left p-2",children:"Staff"})]})}),e.jsx("tbody",{children:h.length>0?h.map(t=>{const s=a.find(l=>l.id===t.itemId);return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:c(new Date(t.date),"MMM dd, yyyy")}),e.jsx("td",{className:"p-2",children:(s==null?void 0:s.name)||"Unknown Item"}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`font-medium ${t.type==="incoming"?"text-green-600":"text-red-600"}`,children:t.type==="incoming"?"Incoming":"Outgoing"})}),e.jsxs("td",{className:"p-2",children:[t.quantity," ",s==null?void 0:s.unit,"s"]}),e.jsx("td",{className:"p-2",children:t.performedBy})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No movements match the selected filters"})})})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxs(d,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"View Analytics"]}),e.jsxs(d,{onClick:b,className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Generate Report"]})]})]})})]})};export{oe as default};
