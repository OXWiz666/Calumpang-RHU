import{u as f,a as b,j as e,r as j}from"./app-Bz1k8fwb.js";import{r as v}from"./vendor-DkBadjUr.js";import{D as N,a as k,b as C,c as w,d as q}from"./dialog-Nua2NsPT.js";import{B as x}from"./button-BuxGVvE1.js";import{I as m}from"./input-Cxfo37eO.js";import{L as r}from"./label-DZLKBD76.js";import{R as D,a as p}from"./radio-group-deOyFlHb.js";import{T as E}from"./textarea-7f3gFOps.js";import{P as F}from"./PrintErrors-CHPAT9Fy.js";import{T as i}from"./trending-up-BFbz08q-.js";import{m as O}from"./proxy-Ciz88pZ8.js";import{P as I}from"./package-L7rgkkVO.js";import{T as _}from"./trending-down-DADUT3dQ.js";import{C as S}from"./calendar-D9APQM2e.js";import{H as T}from"./hash-AgYeaIxt.js";import{F as R}from"./file-text-YZXa1D2L.js";import{U as M}from"./user-3RJR1iCA.js";import"./pusher-DVtoYAOu.js";import"./react-icons.esm-CaEbm_m1.js";import"./index-Sbype2of.js";import"./index-CVzUxLnK.js";import"./tslib.es6-M_FJ09fS.js";import"./index-COj9XpJO.js";import"./index-D3Zb4dyG.js";import"./index-C9cWDRNv.js";import"./index-C2K23d2_.js";import"./index-2C8mQqet.js";import"./index-DqxisvwK.js";import"./createLucideIcon-BKWaAi2G.js";const ue=({open:g,onClose:n,item:s,onSave:P})=>{const{data:a,setData:o,post:B,processing:c,recentlySuccessful:U,errors:u,put:y}=f({type:"",batchNumber:"",quantity:"",reason:"",expiry:""});v.useEffect(()=>{s&&(o({type:s?.stocks_movement[0]?.type,quantity:0,reason:s?.stocks_movement[0]?.reason,expiry:s?.stocks_movement?.[s?.stocks_movement?.length-1]?.expiry_date,batchNumber:s?.stocks_movement[0]?.batch_number||""}),console.log("item:",s,s?.stocks_movement[0]?.type))},[s]);const l=t=>{o(t.target.name,t.target.value)},h=t=>{if(t.preventDefault(),a.type==="Outgoing"&&parseInt(a.quantity)>s?.stock[0]?.stocks){alert("Cannot remove more items than current stock");return}y(route("admin.inventory.item.stockmovement.update",{movement:s?.stocks_movement[0]?.id}),{onFinish:()=>{j.reload({only:["flash","inventory","movements_"]})},onSuccess:()=>{n()}})},{user:d}=b().props.auth;return e.jsx(N,{open:g,onOpenChange:n,children:e.jsxs(k,{className:"sm:max-w-[500px]",children:[e.jsx(C,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:e.jsx(i,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(w,{className:"text-xl font-semibold",children:"Record Stock Movement"}),e.jsx("p",{className:"text-sm mt-1 text-gray-600",children:"Update inventory stock levels"})]})]})}),e.jsx(F,{errors:u}),e.jsxs(O.form,{onSubmit:h,className:"space-y-6 pt-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(I,{className:"h-5 w-5 text-gray-600"}),e.jsx(r,{className:"text-sm font-medium text-gray-700",children:"Item Details"})]}),e.jsx("p",{className:"font-semibold text-gray-900",children:s?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current stock: ",e.jsxs("span",{className:"font-medium text-gray-900",children:[s?.stock[0]?.stocks," ",s?.stock[0]?.stockname,"s"]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(r,{className:"text-sm font-medium flex items-center gap-2 text-gray-700",children:[e.jsx(i,{className:"h-4 w-4 text-gray-500"}),"Movement Type"]}),e.jsxs(D,{value:a.type,onValueChange:t=>o("type",t),className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg transition-colors border-gray-200 hover:bg-green-50 hover:border-green-300",children:[e.jsx(p,{value:"Incoming",id:"Incoming"}),e.jsxs(r,{htmlFor:"Incoming",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(i,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Incoming"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg transition-colors border-gray-200 hover:bg-red-50 hover:border-red-300",children:[e.jsx(p,{value:"Outgoing",id:"Outgoing"}),e.jsxs(r,{htmlFor:"Outgoing",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(_,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Outgoing"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(r,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-gray-500"}),"Expiry Date"]}),e.jsx(m,{id:"expirationDate",type:"date",name:"expirydate",value:a.expiry,onChange:t=>o("expiry",t.target.value),className:"h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(r,{htmlFor:"quantity",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-gray-500"}),"Quantity"]}),e.jsx(m,{id:"quantity",type:"number",min:"1",max:a.type==="Outgoing"?s?.stock[0]?.stocks:void 0,name:"quantity",value:a.quantity,onChange:l,placeholder:"Enter quantity",className:"h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),a.type==="Outgoing"&&e.jsxs("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded-md",children:["Maximum quantity that can be removed: ",s?.stock[0]?.stocks]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(r,{htmlFor:"reason",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-gray-500"}),"Reason ",a.type==="Outgoing"&&"(Required)"]}),e.jsx(E,{id:"reason",name:"reason",value:a.reason,onChange:l,placeholder:a.type==="Incoming"?"Optional - Enter reason for adding stock":"Why is this item being removed from inventory?",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:a.type==="Outgoing"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(r,{htmlFor:"performedBy",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-500"}),"Performed By"]}),e.jsx(m,{id:"performedBy",value:`${d?.firstname} ${d?.lastname}`,className:"h-11 border-gray-300 bg-gray-50",disabled:!0})]}),e.jsx(q,{className:"pt-6 border-t border-gray-100",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx(x,{type:"button",variant:"outline",onClick:n,className:"flex-1 h-11 border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx(x,{type:"submit",className:"flex-1 h-11 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:t=>t.target.style.backgroundColor="#34495E",onMouseLeave:t=>t.target.style.backgroundColor="#2C3E50",disabled:c,children:c?"Saving...":"Save Changes"})]})})]})]})})};export{ue as default};
