import{r as d,P as _,j as e,b as h}from"./app-B7DlF_t9.js";import{C as S,a as E,b as M,c as U,d as L}from"./card-O8Ils4dE.js";import{B as m}from"./badge-CG-EHLoz.js";import{B as a}from"./button-BI0Rya78.js";import{C as p}from"./CustomModal-CwvRGysq.js";import{I as B}from"./InputLabel-Cbo8ZvIu.js";import"./label-CKmlEdGA.js";import{I as F}from"./input-DPuXRyOM.js";import{f as g}from"./dialog-B7h8Zv3J.js";import{T}from"./triangle-alert-B8-zoANg.js";import{C as $}from"./clock-CqXupbhO.js";import{C as z}from"./chevron-up-BZfKx6w2.js";import{C as A}from"./chevron-down-D-VxSC1Q.js";import{f as j}from"./format-BtYX0kVO.js";import"./select-CEWucgif.js";import"./react-icons.esm-Cz2jQsmk.js";import"./index-BkwjPHRJ.js";import"./index-C3GSWu6h.js";import"./index-nPEEQZIN.js";import"./Combination-D-HFRv3K.js";import"./index-zMN8IJOV.js";import"./index-LtLJVc7n.js";import"./index-C3cRcvD-.js";import"./createLucideIcon-DKjzDaBi.js";const de=({item:s,onUpdateClick:f})=>{var u;const[n,v]=d.useState(!1),o=s.stock[0].stocks<=5,i=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,y=t=>{switch(t){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},{data:l,setData:N,processing:x,put:b,delete:C}=_({itemname:s==null?void 0:s.name,categoryid:s==null?void 0:s.category_id}),[k,c]=d.useState(!1),[w,r]=d.useState(!1),D=t=>{t.preventDefault(),b(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{h.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})},I=t=>{t.preventDefault(),C(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{h.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(S,{className:`mb-4 ${o?"border-red-300":i?"border-amber-300":"border-gray-200"}`,children:[e.jsx(E,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-lg font-medium",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(m,{className:y(s.category.name),children:s.category.name}),o&&e.jsxs(m,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),"Low Stock"]}),i&&s.expirationDate&&e.jsxs(m,{variant:"outline",className:"bg-amber-100 text-amber-800 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"Expiring Soon"]})]})]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>v(!n),className:"h-8 w-8 p-0",children:n?e.jsx(z,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})})]})}),e.jsxs(U,{className:"pb-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:`font-medium ${o?"text-red-600":""}`,children:[s.stock[0].stocks," ",s.stock[0].stockname,"s"]})]})}),e.jsxs("div",{children:[e.jsx(a,{variant:"outline",size:"sm",className:"w-1/2 mt-2 hover:bg-secondary/80 transition-colors font-medium",onClick:()=>{r(!0)},children:"Edit Item"}),e.jsxs(p,{isOpen:w,onClose:t=>{r(!1)},title:"Updating an Item",description:`Update ${s==null?void 0:s.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(B,{value:"Item Name*"}),e.jsx(F,{value:l==null?void 0:l.itemname,onChange:t=>N("itemname",t.target.value)})]}),e.jsxs(g,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:t=>{r(!1)},children:"Cancel"}),e.jsx(a,{className:"bg-primary hover:bg-primary/90",disabled:x,onClick:D,children:"Update Item"})]})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-1/2",onClick:t=>{c(!0)},children:"Delete Item"}),e.jsx(p,{isOpen:k,onClose:t=>{c(!1)},title:"Deleting an Item.",description:`Are you sure you want to delete this item ${s==null?void 0:s.name}?`,maxWidth:"md",children:e.jsxs(g,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:t=>{c(!1)},children:"Cancel"}),e.jsx(a,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:x,onClick:I,children:"Delete Item"})]})})]}),e.jsx(p,{title:"Delete an Item",description:"Are you sure you want to delete "}),n&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.stocks_movement[0].expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${i?"text-amber-600":""}`,children:j(new Date(s.stocks_movement[0].expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:j(new Date((u=s.stocks_movement[0])==null?void 0:u.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),n&&e.jsx(L,{className:"pt-0",children:e.jsx(a,{variant:"outline",size:"sm",className:"w-full hover:bg-secondary/80 transition-colors font-medium",onClick:()=>f(s),children:"Update Stock"})})]})};export{de as default};
