import{q as O,r as a,P as B,j as e,b as X,y as m,a as T}from"./app-uh88ezKa.js";import{B as S}from"./button-BClAHRjG.js";import"./input-d7mSQJmu.js";import"./avatar-DQd7Lnjc.js";import{B as g}from"./badge-CUfw8Gsd.js";import{f as Y}from"./dialog-D4Mn33n1.js";import"./label-aUg9_1Zd.js";import{S as k,a as C,b as D,c as A,d as r}from"./select-Dm9_RnGv.js";import{S as Z,T as ee,a as se,b as P,c as x,d as te,e as p}from"./table2-8Ibicu3p.js";import{C as re}from"./CustomModal-CiPHqrVV.js";import"./AdminLayout-pCvcqyGG.js";import{P as b}from"./PrimaryButton-4_1yQ3iw.js";import{I as ae}from"./InputLabel-B0U7az13.js";import{d as oe}from"./card-BDyicQP1.js";import ie from"./Sidebar-CdqqswXw.js";import ne from"./StaffLayout-BNVwQPUq.js";import{F as le}from"./filter-C66Bxxcy.js";import{C as ce,a as de}from"./chevron-right-C3yfTXjG.js";import"./index-VZd4Z-7G.js";import"./index-DHdH9IpJ.js";import"./index-DcxYF6JO.js";import"./Combination-RgSb1z2m.js";import"./react-icons.esm-Casz2kC1.js";import"./index-DGP8ozcL.js";import"./index-DKyRIGB5.js";import"./index-DIPIhv4G.js";import"./createLucideIcon-am1NuPyu.js";import"./arrow-up-KWHGfvhV.js";import"./separator-zAb9ExmD.js";import"./moment-C5S46NFB.js";import"./popover-Cti72dC2.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./TextInput-BBWdRvmT.js";import"./x-CTcwAL1d.js";import"./settings-BiVl_REQ.js";import"./calendar-D-FexTAH.js";import"./users-DMz6bMY0.js";import"./bell-Bld86J0Y.js";import"./pusher-BVCsHHh6.js";import"./search-KzLRTTO-.js";import"./layers-DrgypOlZ.js";import"./chart-column-CdpNwzQn.js";import"./alert-Cr8rA26a.js";import"./square-kanban-PHdoD9qz.js";import"./shield-DBVp929K.js";import"./stethoscope-BSKYdoTg.js";import"./circle-plus-DdgJ3B3j.js";function ws({doctorsitems:F,doctors:j,questions:me}){const{flash:u}=O().props,[ue,he]=a.useState(!1),[xe,v]=a.useState(!1),[pe,fe]=a.useState(!1),h=(s,t,o)=>{m(e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-bold",children:s}),e.jsx("p",{children:t})]})}),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})};a.useEffect(()=>{u&&u.message&&h(u.title,u.message,u.icon)},[u]),B({first_name:"",middlename:"",last_name:"",suffix:"",contactNumber:"",email:"",password:"",confirmPassword:"",gender:"",birth:"",isAdmin:"true"});const[ge,ve]=a.useState(!1),[be,je]=a.useState(!1),[we,ye]=a.useState(""),[Ne,Se]=a.useState(""),[E,H]=a.useState(null),[ke,U]=a.useState(1),V=s=>{L("status",s.status.toString()),H(s),U(s.status),I(!0)},{data:W,setData:L,post:K,processing:_}=B({status:""}),w=s=>{I(!1)},q=s=>{s.preventDefault(),K(route("doctor.update.status",{doctor:E.id}),{onSuccess:t=>{w(),h("Success!","Doctor status updated successfully")}})},[d,$]=a.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:""}),y=(s,t,o,i)=>{$({isOpen:!0,title:s,message:t,onConfirm:o,type:i})},N=()=>{$({...d,isOpen:!1})},z=()=>{if(!d.isOpen)return null;const s=d.type==="archive";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:N}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden transform transition-all",children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"bg-red-50 dark:bg-red-900/20 border-red-100":"bg-blue-50 dark:bg-blue-900/20 border-blue-100"}`,children:e.jsxs("h3",{className:`text-lg font-medium ${s?"text-red-700 dark:text-red-400":"text-blue-700 dark:text-blue-400"} flex items-center`,children:[s?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.title]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:d.message})}),e.jsxs("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700/50 flex justify-end space-x-2",children:[e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:N,children:"Cancel"}),e.jsx("button",{className:`px-4 py-2 text-sm font-medium text-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${s?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}`,onClick:()=>{d.onConfirm&&d.onConfirm(),N()},children:s?"Archive":"Unarchive"})]})]})]})},R=s=>{var i,l;const t=`${(i=s.user)==null?void 0:i.firstname} ${(l=s.user)==null?void 0:l.lastname}`,o=m.loading(`Archiving ${t}'s account...`,{position:"top-right"});v(!0),T.post(route("admin.staff.archive"),{staff_id:s.id}).then(n=>{m.dismiss(o),h("Account Archived",`${t}'s account has been archived successfully.`),window.location.reload()}).catch(n=>{var c,f;m.dismiss(o),h("Archive Failed",`There was a problem archiving ${t}'s account: ${((f=(c=n.response)==null?void 0:c.data)==null?void 0:f.message)||"Please try again."}`),console.error("Error archiving staff:",n)}).finally(()=>{v(!1)})},M=s=>{var i,l;const t=`${(i=s.user)==null?void 0:i.firstname} ${(l=s.user)==null?void 0:l.lastname}`,o=m.loading(`Unarchiving ${t}'s account...`,{position:"top-right"});v(!0),T.post(route("admin.staff.unarchive"),{staff_id:s.id}).then(n=>{m.dismiss(o),h("Account Unarchived",`${t}'s account has been unarchived successfully.`),window.location.reload()}).catch(n=>{var c,f;m.dismiss(o),h("Unarchive Failed",`There was a problem unarchiving ${t}'s account: ${((f=(c=n.response)==null?void 0:c.data)==null?void 0:f.message)||"Please try again."}`),console.error("Error unarchiving staff:",n)}).finally(()=>{v(!1)})},Q=s=>{if(!s||!s.status)return null;switch(s.status){case 1:return e.jsx(g,{variant:"solid",className:"bg-green-500 text-white rounded-full px-4 py-2 text-sm font-semibold",children:"Available"});case 2:return e.jsx(g,{variant:"outline",className:"text-gray-600 bg-gray-100 border border-gray-300 rounded-full px-4 py-2 text-sm font-semibold",children:"Inactive"});case 3:return e.jsx(g,{variant:"outline",className:"text-amber-700 bg-amber-200 border border-amber-300 rounded-full px-4 py-2 text-sm font-semibold",children:"On Leave"});case 4:return e.jsx(g,{variant:"outline",className:"text-blue-700 bg-blue-200 border border-blue-300 rounded-full px-4 py-2 text-sm font-semibold",children:"In Consultation"});case 5:return e.jsx(g,{variant:"outline",className:"text-red-700 bg-red-100 border border-red-300 rounded-full px-4 py-2 text-sm font-semibold",children:"Archived"});default:return null}},[G,I]=a.useState(!1),{links:J}=O().props.doctors;return e.jsxs(ne,{children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Doctors"}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx(ie,{activeTab:"doctors"}),e.jsxs("div",{className:" bg-accent  rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter by:"})]}),e.jsxs(k,{children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(D,{placeholder:"Status"})}),e.jsxs(A,{children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"In Stock",children:"In Stock"}),e.jsx(r,{value:"Low Stock",children:"Low Stock"}),e.jsx(r,{value:"Out of Stock",children:"Out of Stock"})]})]}),e.jsxs(k,{children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(D,{placeholder:"Category"})}),e.jsxs(A,{children:[e.jsx(r,{value:"all",children:"All Categories"}),e.jsx(r,{value:"Medication",children:"Medication"}),e.jsx(r,{value:"Supplies",children:"Supplies"}),e.jsx(r,{value:"Equipment",children:"Equipment"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx(Z,{data:F,defaultSort:{key:"user.firstname",direction:"asc"},children:({sortedData:s})=>e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(P,{children:[e.jsx(x,{sortKey:"id",sortable:!0,children:"ID"}),e.jsx(x,{sortKey:"user.firstname",sortable:!0,children:"Fullname"}),e.jsx(x,{sortKey:"specialty.specialty",sortable:!0,children:"Specialization"}),e.jsx(x,{sortKey:"user.contactno",sortable:!0,children:"Contact Information"}),e.jsx(x,{sortKey:"status",sortable:!0,children:"Availability Status"}),e.jsx(x,{sortable:!0,children:"Action"})]})}),e.jsx(te,{children:s.map(t=>{var o,i,l,n,c;return e.jsxs(P,{children:[e.jsxs(p,{children:["DOC - ",t.id]}),e.jsxs(p,{children:[(o=t.user)==null?void 0:o.firstname," ",(i=t.user)==null?void 0:i.lastname]}),e.jsx(p,{children:((l=t.specialty)==null?void 0:l.specialty)??"Not Set"}),e.jsxs(p,{children:[(n=t.user)==null?void 0:n.contactno," |"," ",(c=t.user)==null?void 0:c.email]}),e.jsx(p,{children:Q(t)}),e.jsx(p,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(b,{className:"btn-sm w-32 text-sm px-5 py-2 shadow-md flex items-center justify-center",onClick:()=>V(t),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Status"]}),t.status===5?e.jsxs(b,{className:"btn-sm w-32 bg-green-600 hover:bg-green-700 text-sm px-5 py-2 shadow-md flex items-center justify-center",onClick:()=>y("Unarchive Doctor",`Are you sure you want to unarchive ${t.user.firstname} ${t.user.lastname}'s account?`,()=>M(t),"unarchive"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"Unarchive"]}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{className:"btn-sm w-32 bg-blue-600 hover:bg-blue-700 text-sm px-5 py-2 shadow-md flex items-center justify-center",onClick:()=>y("Unarchive Doctor",`Are you sure you want to unarchive ${t.user.firstname} ${t.user.lastname}'s account?`,()=>M(t),"unarchive"),disabled:t.status!==5,title:t.status!==5?"Only archived accounts can be unarchived":"",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"Unarchive"]}),e.jsxs(b,{className:"btn-sm w-32 bg-red-600 hover:bg-red-700 text-sm px-5 py-2 shadow-md flex items-center justify-center ml-2",onClick:()=>y("Archive Doctor",`Are you sure you want to archive ${t.user.firstname} ${t.user.lastname}'s account?`,()=>R(t),"archive"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"Archive"]})]})]})})]},t.id)})})]})})}),e.jsxs(oe,{className:" mt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",j.from," to ",j.to," of"," ",j.total," Results"]}),e.jsx("div",{className:"flex ml-2 space-x-2",children:J.map((s,t)=>e.jsx(S,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url||s.active,onClick:()=>{s.url&&X.get(s.url)},children:s.label.includes("Previous")?e.jsx(ce,{className:"h-4 w-4"}):s.label.includes("Next")?e.jsx(de,{className:"h-4 w-4"}):s.label},t))})]})]})]}),e.jsx(re,{isOpen:G,maxWidth:"sm",onClose:w,children:e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(ae,{htmlFor:"status",className:"text-right",children:"Status"}),e.jsxs(k,{value:W.status,onValueChange:s=>{L("status",s)},children:[e.jsx(C,{className:"col-span-3",children:e.jsx(D,{placeholder:"Select status"})}),e.jsxs(A,{children:[e.jsx(r,{value:"1",children:"Available"}),e.jsx(r,{value:"2",children:"Inactive"}),e.jsx(r,{value:"4",children:"In Consultation"}),e.jsx(r,{value:"3",children:"On Leave"}),e.jsx(r,{value:"5",children:"Archived"})]})]})]})}),e.jsxs(Y,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),e.jsx(S,{type:"button",disabled:_,onClick:q,children:"Save"})]})]})}),e.jsx(z,{})]})}export{ws as default};
