import{r as n,P as U,q as D,j as e,b as L}from"./app-Cqf_3VlG.js";import{A as X}from"./AdminLayout-XCMtkcbq.js";import{B as Y}from"./button-B1zw6z2T.js";import{d as P,b as Z,e as ee,C as se,a as te,c as re}from"./card-KhAgYC-w.js";import"./input-jElnq54C.js";import{A as ae,a as ie,b as le}from"./avatar-T0iu8Q9r.js";import{B as c}from"./badge-Dcd-1YL0.js";import{S as B,a as F,b as E,c as I,d}from"./select-2lDLPRyD.js";import{C as ne}from"./CustomModal-CSfdD2oI.js";import{S as ce,T as de,a as oe,b as M,c as m,d as me,e as x}from"./table2-C1rGP0EF.js";import{P as R}from"./PrimaryButton-CNSXCbjD.js";import{I as xe}from"./InputError-CcOSkRCC.js";import{m as ue}from"./pusher-JilcDyAl.js";import{F as he}from"./filter-DTYhmjIT.js";import{c as pe}from"./createLucideIcon-CWnf4jFW.js";import{C as je,a as fe}from"./chevron-right-KhEm0bxW.js";import"./separator-DzKG3Idr.js";import"./index-c0CNI3DG.js";import"./index-CpRQcsXo.js";import"./index-C4oz2QCp.js";import"./index-BPwhHIiu.js";import"./moment-C5S46NFB.js";import"./dialog-B5WkmrYT.js";import"./Combination-DT8QMTAf.js";import"./react-icons.esm-iEQwzLM9.js";import"./label-iNuoAYhX.js";import"./popover-BB7J-SXo.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./index-4TU09OFR.js";import"./TextInput-JglY76Lr.js";import"./x-BkdcH4O9.js";import"./settings-Dg_rnXeu.js";import"./calendar-C7E4USDw.js";import"./users-BuW4H6CK.js";import"./bell-DyXXpznS.js";import"./search-C9Nlfot_.js";import"./layers-GneO0v_i.js";import"./chart-column-DNrcIdpn.js";import"./index-B9KERuv0.js";import"./arrow-up-fX6WhK8Y.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ve=pe("Eye",ge);function xs({appointments_:o}){var y,S,b,C;const[j,k]=n.useState(o.data),[f,Ne]=n.useState(""),[h,K]=n.useState("all"),[l,ye]=n.useState({key:"date",direction:"ascending"});[...j.filter(s=>{var a;const t=((a=s.user)==null?void 0:a.firstname.toLowerCase().includes(f.toLowerCase()))||s.user_id.toLowerCase().includes(f.toLowerCase()),r=h==="all"||s.status===h;return t&&r})].sort((s,t)=>{const r=s[l.key],a=t[l.key];if(r==null)return l.direction==="ascending"?-1:1;if(a==null)return l.direction==="ascending"?1:-1;if(typeof r=="string"&&typeof a=="string"){const u=r.toLowerCase().localeCompare(a.toLowerCase());return l.direction==="ascending"?u:-u}return r<a?l.direction==="ascending"?-1:1:r>a?l.direction==="ascending"?1:-1:0});const O=s=>{switch(s){case 2:return e.jsx(c,{className:"bg-green-600",children:"Completed"});case 1:return e.jsx(c,{className:"bg-blue-500",children:"Scheduled"});case 3:return e.jsx(c,{className:"bg-red-500",children:"Cancelled"});case 4:return e.jsx(c,{className:"bg-red-600",children:"Declined"});case 5:return e.jsx(c,{className:"bg-green-500",children:"Confirmed"});case 6:return e.jsx(c,{className:"bg-blue-600",children:"Pending"});default:return e.jsx(c,{children:s})}},_=()=>e.jsx(e.Fragment,{}),[z,g]=n.useState(!1),[i,H]=n.useState({}),{data:V,setData:v,processing:q,errors:W,post:$}=U({status:null}),G=(s,t)=>{fetch(`/auth/appointment/get/${t}`).then(r=>r.json()).then(r=>{H(r),v("status",r.status)}),g(!0)},N=s=>{g(!1)},{inertia:be}=D();n.useEffect(()=>{k(o.data)},[o]);const J=s=>{s.preventDefault(),$(route("admin.appointment.status.update",{appointment:i.id}),{onSuccess:()=>{N(),alert_toast("Success!","Status updated successfully!","success"),L.reload({only:["appointments_"]})}})},{links:Q}=D().props.appointments_;return e.jsxs(X,{header:"Appointments",tools:_(),children:[e.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"All Appointments"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter by:"})]}),e.jsxs(B,{value:h,onValueChange:K,children:[e.jsx(F,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Status"})}),e.jsxs(I,{children:[e.jsx(d,{value:"all",children:"All Statuses"}),e.jsx(d,{value:1,children:"Scheduled"}),e.jsx(d,{value:2,children:"Completed"}),e.jsx(d,{value:3,children:"Cancelled"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx(ce,{data:j,defaultSort:{key:"user.firstname",direction:"asc"},children:({sortedData:s})=>e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(M,{children:[e.jsx(m,{sortKey:"user.firstname",sortable:!0,children:"Patient"}),e.jsx(m,{sortKey:"date",children:"Date & Time"}),e.jsx(m,{children:"Doctor"}),e.jsx(m,{sortKey:"service.servicename",children:"Purpose"}),e.jsx(m,{sortKey:"status",children:"Status"}),e.jsx(m,{children:"Actions"})]})}),e.jsxs(me,{children:[s.length<=0&&e.jsx("div",{className:" m-5",children:"No Records Available."}),s.map((t,r)=>{var a,u,w,A,T;return e.jsxs(M,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ae,{children:[e.jsx(ie,{alt:(a=t.user)==null?void 0:a.firstname}),e.jsx(le,{children:(u=t.user)==null?void 0:u.firstname.split(" ").map(p=>p[0]).join("")})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[(w=t.user)==null?void 0:w.firstname," ",(A=t.user)==null?void 0:A.lastname]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.user_id})]})]})}),e.jsxs(x,{children:[e.jsx("div",{className:"font-medium",children:new Date(t.date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.time})]}),e.jsx(x,{children:"Not Set"}),e.jsx(x,{children:(T=t.service)==null?void 0:T.servicename}),e.jsx(x,{children:O(t.status)}),e.jsx(x,{className:"",children:e.jsx(R,{onClick:p=>{G(p,t.id)},className:" m-1",children:e.jsx(ve,{})})})]},r)})]})]})})})]}),e.jsxs(P,{className:"  mt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",o.from," to ",o.to," of"," ",o.total," Results"]}),e.jsx("div",{className:"flex ml-2 space-x-2",children:Q.map((s,t)=>e.jsx(Y,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url||s.active,onClick:()=>{s.url&&L.get(s.url)},children:s.label.includes("Previous")?e.jsx(je,{className:"h-4 w-4"}):s.label.includes("Next")?e.jsx(fe,{className:"h-4 w-4"}):s.label},t))})]})]}),e.jsxs(ne,{isOpen:z,hasCancel:!0,onClose:N,maxWidth:"2xl",canceltext:"Okay",savetext:"",children:[e.jsx(Z,{children:"Appointment Details"}),e.jsx(ee,{}),e.jsxs(se,{children:[e.jsx(te,{}),e.jsx(re,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsxs("p",{className:"text-gray-900",children:[(y=i.user)==null?void 0:y.firstname," ",(S=i.user)==null?void 0:S.lastname]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Service"}),e.jsx("p",{className:"text-gray-900",children:(b=i.service)==null?void 0:b.servicename})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:i.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Time"}),e.jsx("p",{className:"text-gray-900",children:i.time})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:(C=i.user)==null?void 0:C.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:i.phone})]})]})})]}),e.jsxs(P,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:"Status:"})}),e.jsxs(B,{value:V.status,onValueChange:s=>{v("status",s)},id:"axz",children:[e.jsx(F,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Status"})}),e.jsxs(I,{children:[e.jsx(d,{value:1,children:"Scheduled"}),e.jsx(d,{value:5,children:"Confirm"}),e.jsx(d,{value:4,children:"Decline"})]})]}),e.jsx(R,{disabled:q,onClick:J,children:"Save"})]})}),e.jsx(xe,{message:W.status})]})]})]})}export{xs as default};
