import{r as t,j as e}from"./app-Dtv8WGQI.js";import{D as Q,b as W,c as X,d as Y,f as J}from"./dialog-9xrsWL5A.js";import{u as P,c as E,B as k}from"./button-CGq_pqDg.js";import{I as j}from"./input-DmzXGQOk.js";import{L as y}from"./label-BKZ5xnxY.js";import{a as Z}from"./react-icons.esm-vC_eIC_S.js";import{a as ee,c as N,P as re}from"./index-CkCeCaXU.js";import{c as D}from"./index-BPvz16i9.js";import{P as S}from"./index-D2gaMRXa.js";import{c as G,R as oe,I as ae}from"./index-BAbZ2arT.js";import{u as te}from"./index-DHWfRrOp.js";import{a as se}from"./Combination-DokybOFR.js";import{u as ne}from"./index-CS7gPZLy.js";import{T as ie}from"./textarea-DObhD6QM.js";var w="Radio",[ce,F]=D(w),[de,ue]=ce(w),q=t.forwardRef((a,s)=>{const{__scopeRadio:r,name:d,checked:o=!1,required:n,disabled:i,value:f="on",onCheck:u,form:h,...x}=a,[l,p]=t.useState(null),c=P(s,R=>p(R)),v=t.useRef(!1),g=l?h||!!l.closest("form"):!0;return e.jsxs(de,{scope:r,checked:o,disabled:i,children:[e.jsx(S.button,{type:"button",role:"radio","aria-checked":o,"data-state":M(o),"data-disabled":i?"":void 0,disabled:i,value:f,...x,ref:c,onClick:N(a.onClick,R=>{o||u==null||u(),g&&(v.current=R.isPropagationStopped(),v.current||R.stopPropagation())})}),g&&e.jsx(le,{control:l,bubbles:!v.current,name:d,value:f,checked:o,required:n,disabled:i,form:h,style:{transform:"translateX(-100%)"}})]})});q.displayName=w;var _="RadioIndicator",A=t.forwardRef((a,s)=>{const{__scopeRadio:r,forceMount:d,...o}=a,n=ue(_,r);return e.jsx(re,{present:d||n.checked,children:e.jsx(S.span,{"data-state":M(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:s})})});A.displayName=_;var le=a=>{const{control:s,checked:r,bubbles:d=!0,...o}=a,n=t.useRef(null),i=ne(r),f=se(s);return t.useEffect(()=>{const u=n.current,h=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(h,"checked").set;if(i!==r&&l){const p=new Event("click",{bubbles:d});l.call(u,r),u.dispatchEvent(p)}},[i,r,d]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:n,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function M(a){return a?"checked":"unchecked"}var pe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I="RadioGroup",[me,Ge]=D(I,[G,F]),B=G(),O=F(),[fe,he]=me(I),L=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,name:d,defaultValue:o,value:n,required:i=!1,disabled:f=!1,orientation:u,dir:h,loop:x=!0,onValueChange:l,...p}=a,c=B(r),v=te(h),[g,R]=ee({prop:n,defaultProp:o,onChange:l});return e.jsx(fe,{scope:r,name:d,required:i,disabled:f,value:g,onValueChange:R,children:e.jsx(oe,{asChild:!0,...c,orientation:u,dir:v,loop:x,children:e.jsx(S.div,{role:"radiogroup","aria-required":i,"aria-orientation":u,"data-disabled":f?"":void 0,dir:v,...p,ref:s})})})});L.displayName=I;var T="RadioGroupItem",V=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,disabled:d,...o}=a,n=he(T,r),i=n.disabled||d,f=B(r),u=O(r),h=t.useRef(null),x=P(s,h),l=n.value===o.value,p=t.useRef(!1);return t.useEffect(()=>{const c=g=>{pe.includes(g.key)&&(p.current=!0)},v=()=>p.current=!1;return document.addEventListener("keydown",c),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",v)}},[]),e.jsx(ae,{asChild:!0,...f,focusable:!i,active:l,children:e.jsx(q,{disabled:i,required:n.required,checked:l,...u,...o,name:n.name,ref:x,onCheck:()=>n.onValueChange(o.value),onKeyDown:N(c=>{c.key==="Enter"&&c.preventDefault()}),onFocus:N(o.onFocus,()=>{var c;p.current&&((c=h.current)==null||c.click())})})})});V.displayName=T;var ve="RadioGroupIndicator",K=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,...d}=a,o=O(r);return e.jsx(A,{...o,...d,ref:s})});K.displayName=ve;var H=L,U=V,xe=K;const $=t.forwardRef(({className:a,...s},r)=>e.jsx(H,{className:E("grid gap-2",a),...s,ref:r}));$.displayName=H.displayName;const C=t.forwardRef(({className:a,...s},r)=>e.jsx(U,{ref:r,className:E("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(xe,{className:"flex items-center justify-center",children:e.jsx(Z,{className:"h-3.5 w-3.5 fill-primary"})})}));C.displayName=U.displayName;const Fe=({open:a,onClose:s,item:r,onSave:d})=>{const[o,n]=t.useState("incoming"),[i,f]=t.useState("1"),[u,h]=t.useState(""),[x,l]=t.useState(""),[p,c]=t.useState(""),[v,g]=t.useState(""),R=m=>{if(m.preventDefault(),!r)return;const b={id:`mov-${Date.now()}`,itemId:r.id,type:o,quantity:parseInt(i),date:new Date,performedBy:v};r.isVaccine&&(b.batchNumber=u,b.lotNumber=x),p&&(b.reason=p),d(b),z(),s()},z=()=>{n("incoming"),f("1"),h(""),l(""),c(""),g("")};return e.jsx(Q,{open:a,onOpenChange:s,children:e.jsxs(W,{className:"sm:max-w-[425px]",children:[e.jsx(X,{children:e.jsx(Y,{children:"Record Stock Movement"})}),e.jsxs("form",{onSubmit:R,className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Item"}),e.jsx("p",{className:"font-medium",children:r==null?void 0:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current stock: ",r==null?void 0:r.quantity," ",r==null?void 0:r.unit,"s"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Movement Type"}),e.jsxs($,{value:o,onValueChange:m=>n(m),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{value:"incoming",id:"incoming"}),e.jsx(y,{htmlFor:"incoming",children:"Incoming"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{value:"outgoing",id:"outgoing"}),e.jsx(y,{htmlFor:"outgoing",children:"Outgoing"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"quantity",children:"Quantity"}),e.jsx(j,{id:"quantity",type:"number",min:"1",value:i,onChange:m=>f(m.target.value),required:!0})]}),(r==null?void 0:r.isVaccine)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"batchNumber",children:"Batch Number"}),e.jsx(j,{id:"batchNumber",value:u,onChange:m=>h(m.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"lotNumber",children:"Lot Number"}),e.jsx(j,{id:"lotNumber",value:x,onChange:m=>l(m.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"reason",children:["Reason ",o==="outgoing"&&"(Required)"]}),e.jsx(ie,{id:"reason",value:p,onChange:m=>c(m.target.value),placeholder:o==="incoming"?"Optional":"Why is this item being removed from inventory?",required:o==="outgoing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"performedBy",children:"Performed By"}),e.jsx(j,{id:"performedBy",value:v,onChange:m=>g(m.target.value),placeholder:"Name of staff member",required:!0})]}),e.jsxs(J,{className:"pt-4",children:[e.jsx(k,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(k,{type:"submit",className:"bg-primary hover:bg-primary/90",children:"Save Changes"})]})]})]})})};export{Fe as default};
