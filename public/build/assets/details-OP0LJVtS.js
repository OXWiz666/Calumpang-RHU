import{r as u,P as F,b as w,j as e}from"./app-9IFjvyjq.js";import{B as o}from"./button-BWLYpXz0.js";import"./input-fLU5VnAr.js";import{C as l,a as m,b as c,c as t,e as L}from"./card-BZqhk5Ws.js";import{B as f}from"./badge-Da4cSqJP.js";import"./select-p8YEwkY-.js";import"./moment-C5S46NFB.js";import{T as B,a as R,b as g,c as N}from"./tabs-B5MwLVSX.js";import k from"./edit-patient-form-aRepGU_R.js";import V from"./add-medical-record-form-Cwz_NSCM.js";import"./label-C2QZitaL.js";import"./textarea-COBWyWer.js";import{A as H}from"./AdminLayout-B1EVrWwj.js";import{m as I}from"./proxy-D62Q3uN7.js";import{A as z}from"./arrow-left-BjYuHKn8.js";import{P as G}from"./plus-C1hjROq8.js";import{S as y}from"./square-pen-Dnx_Ff5r.js";import{P as O}from"./phone-U7LnKRGT.js";import{M as U}from"./pusher-Dk5bIoJZ.js";import{M as Y}from"./map-pin-Bdehjgen.js";import{H as $}from"./heart-cgOh20SX.js";import{C as D}from"./calendar-DQr9f7aC.js";import{P as q}from"./pill-D1Lo51NR.js";import{T as K}from"./triangle-alert-BkHbl9Bl.js";import"./utils-Dqxj4mrw.js";import"./index-C6jRhQFj.js";import"./react-icons.esm-CBUbwQJY.js";import"./index-5FqUdhJW.js";import"./Combination-BD7y2hDp.js";import"./index-DMLVHKle.js";import"./index-ZSsit5F4.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./index-B9uMoLSe.js";import"./index-iJsz53jB.js";import"./dialog-BlSttdnZ.js";import"./save-C_DH6-Z7.js";import"./createLucideIcon-DsPw26Nq.js";import"./PrintErrors-XsOiaV-u.js";import"./file-text-2oyp6bUV.js";import"./avatar-eTivO2nx.js";import"./separator-Ck3s5O1g.js";import"./popover-D55FYzXF.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./TextInput-VzTatbZ2.js";import"./x-QWiAXd0n.js";import"./settings-RhmjAov2.js";import"./house-3fFlpYPo.js";import"./users-CRZKArp7.js";import"./bell-Oyzr8Ilp.js";import"./index-BkKJZgfk.js";import"./autoprefixer-CLq4rudv.js";import"./trending-up-_LM6MF-k.js";import"./layers-CYkgeNxD.js";import"./chart-column-Bqapy0n2.js";function Ze({patients_:J,doctors:C,patient:s}){const[P,x]=u.useState(!1),[A,h]=u.useState(!1),M=n=>{const a=new Date,d=new Date(n);let r=a.getFullYear()-d.getFullYear();const i=a.getMonth()-d.getMonth();return(i<0||i===0&&a.getDate()<d.getDate())&&r--,r},{data:j,setData:S,post:T,errors:_}=F({});u.useEffect(()=>{j&&Object.keys(j).length>0&&T(route("patients.medicalrec.store",{patientid:s==null?void 0:s.id}),{onSuccess:()=>{h(!1)},onFinish:()=>{w.reload({only:["patients_","doctors","flash"]})}})},[j]);const E=()=>{var n,a,d;return P?e.jsx(k,{patient:s,onSubmit:r=>{onUpdate(r),x(!1)},onCancel:()=>x(!1)}):A?e.jsx(V,{patientName:`${s.firstname} ${s.lastname}`,onSubmit:r=>S(r),onCancel:()=>h(!1),doctors:C,errors:_}):e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(o,{variant:"outline",onClick:r=>{w.visit(route("patients.index"))},children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Back to List"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"text-muted-foreground",children:["Patient ID: ",s.id," • Age:"," ",M(s.birth)," • Name:"," ",s==null?void 0:s.firstname," ",s==null?void 0:s.lastname]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:()=>h(!0),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Medical Record"]}),e.jsxs(o,{variant:"outline",onClick:()=>x(!0),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Edit Patient"]})]})]}),e.jsxs(B,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(g,{value:"overview",children:"Overview"}),e.jsx(g,{value:"medical-history",children:"Medical Records"}),e.jsx(g,{value:"medications",children:"Medications & Allergies"})]}),e.jsxs(N,{value:"overview",className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(c,{children:"Basic Information"})}),e.jsxs(t,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),e.jsxs("p",{className:"text-lg",children:[s.firstname," ",s.lastname]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date of Birth"}),e.jsx("p",{children:new Date(s.birth).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Gender"}),e.jsx("p",{children:s.gender=="M"?"Male":s.gender=="F"?"Female":""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mr-2",children:"Status"}),e.jsx(f,{variant:s.status==="active"?"default":"secondary",children:s.status})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{children:s.contactno})]})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{children:s.email})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground mt-1"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),e.jsx("p",{children:s.address??"Not Set"})]})]}),s.bloodtype&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Blood Type"}),e.jsx("p",{children:s.bloodtype})]})]})]})]})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(c,{children:"Emergency Contact"})}),e.jsx(t,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Person"}),(n=s==null?void 0:s.emercont)==null?void 0:n.map(r=>e.jsx("p",{children:r.name}))]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone Number"}),(a=s==null?void 0:s.emercont)==null?void 0:a.map(r=>e.jsx("p",{children:r.contactno}))]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-center font-medium text-muted-foreground",children:"Action"}),(d=s==null?void 0:s.emercont)==null?void 0:d.map(r=>e.jsxs("p",{children:[e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(y,{className:"h-4 w-4 text-primary"})}),e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(Trash2,{className:"h-4 w-4 text-red-500"})})]},r==null?void 0:r.id))]})]})})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(c,{children:"Visit Information"})}),e.jsx(t,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Registration Date"}),e.jsx("p",{children:new Date(s.created_at).toLocaleDateString()})]})]}),s.lastVisit&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Visit"}),e.jsx("p",{children:new Date(s.lastVisit).toLocaleDateString()})]})]})]})})]})]}),e.jsx(N,{value:"medical-history",className:"space-y-6",children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsx(c,{children:"Medical History"}),e.jsx(L,{children:"Complete medical record history for this patient"})]}),e.jsx(t,{children:s.medical_histories&&s.medical_histories.length>0?e.jsx("div",{className:"space-y-4",children:s.medical_histories.map(r=>{var i,p,v,b;return e.jsx(l,{children:e.jsx(t,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("p",{children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Doctor"}),e.jsxs("p",{children:[(p=(i=r==null?void 0:r.doctor)==null?void 0:i.user)==null?void 0:p.firstname," ",(b=(v=r==null?void 0:r.doctor)==null?void 0:v.user)==null?void 0:b.lastname]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Diagnosis"}),e.jsx("p",{children:r.diagnosis})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Treatment"}),e.jsx("p",{children:r.treatment})]}),r.clinic_notes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{children:r.clinic_notes})]}),r.followUp&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Follow-up"}),e.jsx("p",{children:r.followup_inst})]})]})})},r.id)})}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No medical records found for this patient."})})]})}),e.jsx(N,{value:"medications",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Current Medications"]})}),e.jsx(t,{children:s.medications&&s.medications.length>0?e.jsx("div",{className:"space-y-2",children:s.medications.map((r,i)=>e.jsx(f,{variant:"outline",className:"mr-2 mb-2",children:r},i))}):e.jsx("p",{className:"text-muted-foreground",children:"No current medications recorded."})})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Known Allergies"]})}),e.jsx(t,{children:s.allergies&&s.allergies.length>0?e.jsx("div",{className:"space-y-2",children:s.allergies.map((r,i)=>e.jsx(f,{variant:"destructive",className:"mr-2 mb-2",children:r},i))}):e.jsx("p",{className:"text-muted-foreground",children:"No known allergies recorded."})})]})]})})]})]})})};return e.jsx(H,{header:"Patients",children:e.jsx(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(E,{})})})}export{Ze as default};
