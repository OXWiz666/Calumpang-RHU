import{r as x,j as e}from"./app-dOxLF04F.js";import{B as T}from"./button-AgyiIwL-.js";import{I as A}from"./input-DT4eHb3q.js";import{c as u,d as t,a as v,e as j}from"./card-CYcp7jJ_.js";import{B as N}from"./badge-CJbEyv-q.js";import{S as w,a as S,b as C,c as y,d as l}from"./select-l0dFdoh2.js";import{S as V}from"./search-BgC7y-OF.js";import{P as B}from"./phone-Bjjxzvih.js";import{M as E}from"./map-pin-Dcqg5-Rc.js";import{C as I}from"./calendar-CXNDPPVS.js";import{E as M}from"./eye-xER5tcvS.js";import"./react-icons.esm-BorQdFth.js";import"./index-Deno71kd.js";import"./index-CNZ2Dx4u.js";import"./index-CWpNLmxq.js";import"./Combination-CoHc-Nci.js";import"./index-BCB7khfw.js";import"./index-uR-2BYu3.js";import"./index-DykSkOEa.js";import"./createLucideIcon-BVlFUOuY.js";function ls({patients:b,onSelectPatient:D}){const[r,F]=x.useState(""),[h,L]=x.useState("all"),[c,P]=x.useState("all");x.useEffect(()=>{console.log("gender:",c)},[c]);const i=b.filter(s=>{var d,n,f;const o=(s==null?void 0:s.firstname.toLowerCase().includes(r.toLowerCase()))||(s==null?void 0:s.lastname.toLowerCase().includes(r.toLowerCase()))||((d=s==null?void 0:s.contactno)==null?void 0:d.toString().toLowerCase().includes(r))||((n=s==null?void 0:s.id)==null?void 0:n.toString().includes(r)),a=h==="all"||(s==null?void 0:s.status)==h,m=c==="all"||((f=s==null?void 0:s.gender)==null?void 0:f.toLowerCase())==c;return o&&a&&m}),g=s=>{const o=new Date,a=new Date(s);let m=o.getFullYear()-a.getFullYear();const d=o.getMonth()-a.getMonth();return(d<0||d===0&&o.getDate()<a.getDate())&&m--,m};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(t,{children:e.jsx(v,{children:"Search & Filter Patients"})}),e.jsx(j,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search by id, name, or phone number:",value:r,onChange:s=>F(s.target.value),className:"pl-10"})]}),e.jsxs(w,{value:h,onValueChange:L,children:[e.jsx(S,{className:"w-full sm:w-[180px]",children:e.jsx(C,{placeholder:"Filter by status"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(w,{value:c,onValueChange:P,children:[e.jsx(S,{className:"w-full sm:w-[180px]",children:e.jsx(C,{placeholder:"Filter by gender"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All Genders"}),e.jsx(l,{value:"m",children:"Male"}),e.jsx(l,{value:"f",children:"Female"})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs(u,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(t,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(v,{className:"text-lg",children:[e.jsxs("p",{className:"",children:[s==null?void 0:s.firstname," ",s==null?void 0:s.lastname," "]}),e.jsx("p",{className:" text-muted-foreground",children:e.jsxs("small",{children:["Patient ID: ",s.id," • Age:"," ",g(s.birth)]})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Age: ",g(s==null?void 0:s.birth)," •"," ",s==null?void 0:s.gender]})]}),e.jsx(N,{variant:(s==null?void 0:s.status)==="active"?"default":"secondary",children:s==null?void 0:s.status})]})}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s==null?void 0:s.contactno})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:(s==null?void 0:s.address)??"Not Set"})]}),(s==null?void 0:s.lastVisit)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Last visit:"," ",new Date(s==null?void 0:s.lastVisit).toLocaleDateString()]})]}),(s==null?void 0:s.bloodType)&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(N,{variant:"outline",className:"text-xs",children:["Blood Type: ",s==null?void 0:s.bloodType]})}),e.jsxs(T,{onClick:()=>D(s),className:"w-full mt-4",variant:"outline",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]},s==null?void 0:s.id))}),i.length===0&&e.jsx(u,{children:e.jsx(j,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{ls as default};
