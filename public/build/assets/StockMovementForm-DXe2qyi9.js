import{r as t,j as e,q as W}from"./app-CGHi43Ye.js";import{D as X,b as Y,c as J,d as Z,f as ee}from"./dialog-DF98DBeC.js";import{u as E,c as D,B as P}from"./button-DuNm46Ou.js";import{I as N}from"./input-3LpwnyzO.js";import{L as y}from"./label-D4vAA5gq.js";import{a as re}from"./react-icons.esm-C_bt_X5N.js";import{a as oe,c as C,P as ae}from"./index-DLjvr9xR.js";import{c as G}from"./index-B2WG90g3.js";import{P as w}from"./index-DhGX7E2K.js";import{c as q,R as te,I as se}from"./index-BNG8reF0.js";import{u as ne}from"./index-Cxgfhl2e.js";import{a as ie}from"./Combination-BN35-FFx.js";import{u as ce}from"./index-CCG5UxZT.js";import{T as de}from"./textarea-CBC1jwoM.js";var I="Radio",[ue,F]=G(I),[le,pe]=ue(I),_=t.forwardRef((a,s)=>{const{__scopeRadio:r,name:d,checked:o=!1,required:n,disabled:i,value:f="on",onCheck:u,form:h,...x}=a,[l,p]=t.useState(null),c=E(s,R=>p(R)),v=t.useRef(!1),g=l?h||!!l.closest("form"):!0;return e.jsxs(le,{scope:r,checked:o,disabled:i,children:[e.jsx(w.button,{type:"button",role:"radio","aria-checked":o,"data-state":B(o),"data-disabled":i?"":void 0,disabled:i,value:f,...x,ref:c,onClick:C(a.onClick,R=>{o||u==null||u(),g&&(v.current=R.isPropagationStopped(),v.current||R.stopPropagation())})}),g&&e.jsx(me,{control:l,bubbles:!v.current,name:d,value:f,checked:o,required:n,disabled:i,form:h,style:{transform:"translateX(-100%)"}})]})});_.displayName=I;var A="RadioIndicator",M=t.forwardRef((a,s)=>{const{__scopeRadio:r,forceMount:d,...o}=a,n=pe(A,r);return e.jsx(ae,{present:d||n.checked,children:e.jsx(w.span,{"data-state":B(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:s})})});M.displayName=A;var me=a=>{const{control:s,checked:r,bubbles:d=!0,...o}=a,n=t.useRef(null),i=ce(r),f=ie(s);return t.useEffect(()=>{const u=n.current,h=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(h,"checked").set;if(i!==r&&l){const p=new Event("click",{bubbles:d});l.call(u,r),u.dispatchEvent(p)}},[i,r,d]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:n,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function B(a){return a?"checked":"unchecked"}var fe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],k="RadioGroup",[he,Fe]=G(k,[q,F]),O=q(),L=F(),[ve,xe]=he(k),T=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,name:d,defaultValue:o,value:n,required:i=!1,disabled:f=!1,orientation:u,dir:h,loop:x=!0,onValueChange:l,...p}=a,c=O(r),v=ne(h),[g,R]=oe({prop:n,defaultProp:o,onChange:l});return e.jsx(ve,{scope:r,name:d,required:i,disabled:f,value:g,onValueChange:R,children:e.jsx(te,{asChild:!0,...c,orientation:u,dir:v,loop:x,children:e.jsx(w.div,{role:"radiogroup","aria-required":i,"aria-orientation":u,"data-disabled":f?"":void 0,dir:v,...p,ref:s})})})});T.displayName=k;var V="RadioGroupItem",K=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,disabled:d,...o}=a,n=xe(V,r),i=n.disabled||d,f=O(r),u=L(r),h=t.useRef(null),x=E(s,h),l=n.value===o.value,p=t.useRef(!1);return t.useEffect(()=>{const c=g=>{fe.includes(g.key)&&(p.current=!0)},v=()=>p.current=!1;return document.addEventListener("keydown",c),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",v)}},[]),e.jsx(se,{asChild:!0,...f,focusable:!i,active:l,children:e.jsx(_,{disabled:i,required:n.required,checked:l,...u,...o,name:n.name,ref:x,onCheck:()=>n.onValueChange(o.value),onKeyDown:C(c=>{c.key==="Enter"&&c.preventDefault()}),onFocus:C(o.onFocus,()=>{var c;p.current&&((c=h.current)==null||c.click())})})})});K.displayName=V;var ge="RadioGroupIndicator",$=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,...d}=a,o=L(r);return e.jsx(M,{...o,...d,ref:s})});$.displayName=ge;var H=T,U=K,ye=$;const z=t.forwardRef(({className:a,...s},r)=>e.jsx(H,{className:D("grid gap-2",a),...s,ref:r}));z.displayName=H.displayName;const S=t.forwardRef(({className:a,...s},r)=>e.jsx(U,{ref:r,className:D("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(ye,{className:"flex items-center justify-center",children:e.jsx(re,{className:"h-3.5 w-3.5 fill-primary"})})}));S.displayName=U.displayName;const _e=({open:a,onClose:s,item:r,onSave:d})=>{const[o,n]=t.useState("incoming"),[i,f]=t.useState("1"),[u,h]=t.useState(""),[x,l]=t.useState(""),[p,c]=t.useState(""),[v,g]=t.useState(""),R=m=>{if(m.preventDefault(),!r)return;const j={id:`mov-${Date.now()}`,itemId:r.id,type:o,quantity:parseInt(i),date:new Date,performedBy:v};r.isVaccine&&(j.batchNumber=u,j.lotNumber=x),p&&(j.reason=p),d(j),Q(),s()},Q=()=>{n("incoming"),f("1"),h(""),l(""),c(""),g("")},{user:b}=W().props.auth;return e.jsx(X,{open:a,onOpenChange:s,children:e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsx(J,{children:e.jsx(Z,{children:"Record Stock Movement"})}),e.jsxs("form",{onSubmit:R,className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Item"}),e.jsx("p",{className:"font-medium",children:r==null?void 0:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current stock: ",r==null?void 0:r.quantity," ",r==null?void 0:r.unit,"s"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Movement Type"}),e.jsxs(z,{value:o,onValueChange:m=>n(m),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{value:"incoming",id:"incoming"}),e.jsx(y,{htmlFor:"incoming",children:"Incoming"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{value:"outgoing",id:"outgoing"}),e.jsx(y,{htmlFor:"outgoing",children:"Outgoing"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"quantity",children:"Quantity"}),e.jsx(N,{id:"quantity",type:"number",min:"1",value:i,onChange:m=>f(m.target.value),required:!0})]}),(r==null?void 0:r.isVaccine)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"batchNumber",children:"Batch Number"}),e.jsx(N,{id:"batchNumber",value:u,onChange:m=>h(m.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"lotNumber",children:"Lot Number"}),e.jsx(N,{id:"lotNumber",value:x,onChange:m=>l(m.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"reason",children:["Reason ",o==="outgoing"&&"(Required)"]}),e.jsx(de,{id:"reason",value:p,onChange:m=>c(m.target.value),placeholder:o==="incoming"?"Optional":"Why is this item being removed from inventory?",required:o==="outgoing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"performedBy",children:"Performed By"}),e.jsx(N,{id:"performedBy",value:`${b==null?void 0:b.firstname} ${b==null?void 0:b.lastname}`,onChange:m=>g(m.target.value),placeholder:"Name of staff member",required:!0})]}),e.jsxs(ee,{className:"pt-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(P,{type:"submit",className:"bg-primary hover:bg-primary/90",children:"Save Changes"})]})]})]})})};export{_e as default};
