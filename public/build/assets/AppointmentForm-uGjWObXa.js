import{q as H,r as h,j as e}from"./app-Cqf_3VlG.js";import{B as R}from"./button-B1zw6z2T.js";import{I as p}from"./input-jElnq54C.js";import{I as m}from"./InputError-CcOSkRCC.js";import{L as a}from"./label-iNuoAYhX.js";import"./textarea-F3RItZ_8.js";import"./popover-BB7J-SXo.js";import{S as g,a as S,b,c as f,d as N}from"./select-2lDLPRyD.js";import $ from"./CustomCalendar-Dj6J6uPV.js";import{h as C}from"./moment-C5S46NFB.js";import{C as z}from"./clock-D24DTcPk.js";import"./index-c0CNI3DG.js";import"./react-icons.esm-iEQwzLM9.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./index-CpRQcsXo.js";import"./index-C4oz2QCp.js";import"./Combination-DT8QMTAf.js";import"./index-4TU09OFR.js";import"./index-BPwhHIiu.js";import"./index-B9KERuv0.js";import"./chevron-right-KhEm0bxW.js";import"./createLucideIcon-CWnf4jFW.js";import"./subMonths-CHGVdwv-.js";const je=({onSubmit:L=()=>{},formData:l,setFormData:u,errors:t,processing:T,services:x=[]})=>{var A,w,q,E;const d=H().props.auth.user;h.useEffect(()=>{d&&!l.firstname&&u({...l,firstname:d.firstname,middlename:d.middlename??"",lastname:d.lastname,email:d.email,phone:d.contactno??"",servicename:"",service:"",gender:d.gender,birth:d.birth,priorityNumber:Math.floor(1e3+Math.random()*9e3)})},[d]);const j=x.reduce((s,i)=>(s[i.id]=i,s),{}),[G,J]=h.useState(new Date),V=s=>{u(i=>({...i,date:s}))},k=s=>{const{name:i,value:n}=s.target;if(i==="phone"){const o=n.replace(/[^0-9+]/g,"");u(v=>({...v,[i]:o}))}else u(o=>({...o,[i]:n}))},r=(s,i)=>{u(n=>({...n,[s]:i??null}))},F=s=>{s.preventDefault(),L(l)},[c,I]=h.useState([]),[M,P]=h.useState([]),y=c==null?void 0:c.reduce((s,i)=>(s[i.id]=i,s),{}),[Y,B]=h.useState([]);return h.useEffect(()=>{var i;const s=j[l.service];B((i=s==null?void 0:s.servicedays)==null?void 0:i.map(n=>n.day))},[l,j]),e.jsxs("form",{onSubmit:F,className:"space-y-6 bg-white p-6 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"First Name"}),e.jsx(p,{id:"firstname",name:"firstname",value:l.firstname,placeholder:"Your First Name",disabled:!0,required:!0}),e.jsx(m,{message:t.firstname})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"middlename",children:"Middle Name"}),e.jsx(p,{id:"middlename",name:"middlename",value:l.middlename,placeholder:"Your Middle Name",disabled:!0,required:!0}),e.jsx(m,{message:t.middlename})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"lastname",children:"Last Name"}),e.jsx(p,{id:"lastname",name:"lastname",value:l.lastname,placeholder:"Your Last Name",disabled:!0,required:!0}),e.jsx(m,{message:t.lastname})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"email",children:"Email Address"}),e.jsx(p,{id:"email",name:"email",type:"email",value:l.email,placeholder:"juan@example.com",disabled:!0,required:!0}),e.jsx(m,{message:t.email})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"phone",children:"Phone Number"}),e.jsx(p,{id:"phone",name:"phone",type:"tel",value:l.phone,onChange:k,placeholder:"+63 912 345 6789",required:!0}),e.jsx(m,{message:t.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Service Type"}),e.jsxs(g,{value:(A=l.service)==null?void 0:A.toString(),onValueChange:s=>{const i=j[s];i&&(r("service",i.id),r("servicename",i.servicename),r("date",null),r("subservice",""),r("subservicename",""),r("timeid",""),r("time","")),fetch(`/services/get-sub-services/${s}`).then(n=>n.json()).then(n=>{I(n)})},children:[e.jsx(S,{className:"w-full",children:e.jsx(b,{placeholder:"Select service",children:l.service?(w=x.find(s=>s.id.toString()===l.service.toString()))==null?void 0:w.servicename:"Select service"})}),e.jsx(f,{children:x.map(s=>e.jsx(N,{value:s.id,children:s.servicename},s.id))})]}),e.jsx(m,{message:t.service})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Service Sub Type"}),e.jsxs(g,{value:(q=l.subservice)==null?void 0:q.toString(),onValueChange:s=>{const i=y[s];P(i==null?void 0:i.times),r("subservice",i.id??null),r("subservicename",i.subservicename??null),r("timeid",""),r("time","")},children:[e.jsx(S,{className:"w-full",children:e.jsx(b,{placeholder:"Select Sub Service",children:l.subservice?(E=c.find(s=>s.id.toString()===l.subservice.toString()))==null?void 0:E.subservicename:"Select Sub-Service"})}),e.jsx(f,{children:c==null?void 0:c.map((s,i)=>e.jsx(N,{value:s.id,children:s.subservicename},i))})]}),e.jsx(m,{message:t.subservice})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Appointment Date"}),e.jsx($,{selectedDate:l.date,onDateSelect:V,hasPrograms:Y}),e.jsx(m,{message:t.date})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Appointment Time"}),e.jsxs(g,{value:l.timeid,onValueChange:s=>{var n,o;const i=y[l.subservice];r("timeid",s??null),r("time",C((o=(n=i==null?void 0:i.times)==null?void 0:n.find(v=>v.id==s))==null?void 0:o.time,"HH:mm:ss").format("hh:mm A")??null)},children:[e.jsx(S,{className:"w-full",children:e.jsx(b,{placeholder:"Select time",children:l.timeid?e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),C(l.time,"HH:mm:ss").format("h:mm A")]}):"Select time"})}),e.jsx(f,{children:M.map((s,i)=>e.jsx(N,{value:s.id,children:C(s.time,"HH:mm:ss").format("h:mm A")},s.id))})]}),e.jsx(m,{message:t.time})]})]})]}),H().props.auth.user?e.jsx(R,{disabled:T,type:"submit",className:"w-full",children:"Schedule Appointment"}):e.jsx("div",{children:"Please login first to submit."})]})};export{je as default};
