import{a as D,j as e,r as S,b as P}from"./app-CZwS2G5Y.js";import{r}from"./vendor-DkBadjUr.js";import{B as l}from"./button-BesobgtA.js";import"./input-BuSGIsg0.js";import"./label-IliVNXtj.js";import"./select-Cxat1dCU.js";import"./moment-C5S46NFB.js";import{C as _,a as E,b as A,e as T,c as F,d as M}from"./card-CRUoSCLq.js";import"./alert-Cgcg5BS1.js";import"./dialog-Tf1FOk7X.js";import{C as k}from"./CustomModal-CayjtegV.js";import{F as I,z as o}from"./index-WHihrx3k.js";import"./separator-6iJRufmK.js";import"./toast-T3VyHObl.js";import"./avatar-DEV84UVA.js";import z from"./Sidebar-BpXPl_cH.js";import B from"./AppointmentLayout-DCe7HMjL.js";import{P as L}from"./pen-CaqL-z_l.js";import{F as m}from"./file-text-YZXa1D2L.js";import{C as O}from"./chevron-left-B36-TXNE.js";import{C as R}from"./chevron-right-B3qqnx4D.js";import{E as g}from"./eye-mxYijkrE.js";import{C as d}from"./check-BD0Yvgxs.js";import{X as u}from"./x-b8JahagL.js";import{c as H}from"./createLucideIcon-BKWaAi2G.js";import"./pusher-DVtoYAOu.js";import"./index-B3OEEYC6.js";import"./react-icons.esm-Bo4nchVy.js";import"./index-BL_R5CeI.js";import"./index-DWou3t1m.js";import"./index-VaCZcEHj.js";import"./tslib.es6-M_FJ09fS.js";import"./index-hcl4Lfqn.js";import"./index-Dg-CcdeN.js";import"./index-DqxisvwK.js";import"./index-C0yHodGM.js";import"./index-Bgkzuaxa.js";import"./clipboard-CoF5eMxq.js";import"./hash-AgYeaIxt.js";import"./LandingLayout-CzNbySZH.js";import"./badge-ChpTVm3n.js";import"./pusher-qs61TsAX.js";import"./printer-CfgcPaUh.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./pill-DIGxtF-3.js";import"./index-0fk0WGfz.js";import"./proxy-C0TaRtDf.js";import"./PhilippinesAddressLookup-CTnt74g9.js";import"./map-pin-Dkn0BYKY.js";import"./phone-BScbSfjU.js";import"./mail-BoTx8fKY.js";import"./chevron-up-BdDu7vFg.js";import"./toast-Ba7XQqA2.js";import"./use-toast-Dm0PN6fH.js";import"./refresh-cw-D3hZ7e_O.js";import"./save-CAdd64LS.js";import"./square-pen-Bb1JtfBr.js";import"./download-BH8XyxCx.js";import"./trash-2-DJ5zXW8D.js";import"./archive-BwGVl8jP.js";import"./info-BVLwYIm5.js";import"./triangle-alert-BslwqqvL.js";import"./circle-x-Cf2XhiVO.js";import"./circle-check-F3PuHnLX.js";import"./Toaster-BpbevUrA.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 7.5 12",key:"1k60p0"}]],J=H("Clock9",G);function rs({appointments:i}){const{links:b}=D().props.appointments,[W,j]=r.useState(null),[X,f]=r.useState(!1),[N,c]=r.useState(!1),[s,x]=r.useState(null),[p,h]=r.useState(!1);r.useEffect(()=>{const t=localStorage.getItem("existingPatientData"),a=localStorage.getItem("selectedPatientType");if(t&&a==="existing")try{const n=JSON.parse(t);j(n),f(!0)}catch(n){console.error("Error parsing existing patient data:",n)}},[]);const v=t=>{switch(t){case 1:return e.jsxs("div",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full flex items-center",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Scheduled"]});case 2:return e.jsxs("div",{className:"text-xs bg-green-600 text-white px-2 py-1 rounded-full flex items-center",children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),"Completed"]});case 3:return e.jsxs("div",{className:"text-xs bg-red-500 text-white px-2 py-1 rounded-full flex items-center",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),"Cancelled"]});case 4:return e.jsxs("div",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded-full flex items-center",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),"Declined"]});case 5:return e.jsxs("div",{className:"text-xs bg-green-600 text-white px-2 py-1 rounded-full flex items-center",children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),"Confirmed"]})}},w=async t=>{h(!0);try{const a=await P.get(`/auth/appointments/diagnosis/${t}`);a.data.diagnosis?(x(a.data),c(!0)):o.error("No diagnosis found for this appointment")}catch(a){console.error("Error fetching diagnosis:",a),a.response?.status===404?o.error("No diagnosis available for this appointment"):o.error("Failed to load diagnosis data")}finally{h(!1)}},y=t=>{w(t)},C=()=>{c(!1),x(null)};return e.jsxs(B,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Appointments"}),e.jsx("p",{className:"text-gray-600",children:"Book your visit to Barangay Calumpang Health Center. Please fill out the form below with your information and preferred appointment details."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx(z,{activeTab:"History"}),e.jsx("div",{className:"w-full md:w-3/4",children:e.jsxs(_,{children:[e.jsxs(E,{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(A,{className:"text-lg",children:"My Appointments"})}),e.jsx(T,{children:"These are your recent appointments:"})]}),e.jsx(F,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs("div",{className:"divide-y",children:[i.data.length<=0&&e.jsx("div",{className:" m-5",children:"No Appointments."}),i.data.map((t,a)=>e.jsxs("div",{className:"p-4 hover:bg-muted/20 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[t.service?.servicename,e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["#",t.id]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"doctor"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:[t.date," ",t.time]}),t.status==1&&e.jsx(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(L,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm mb-2",children:t.notes}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[v(t.status),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>y(t.id),disabled:p,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[p?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}):e.jsx(m,{className:"h-3 w-3 mr-1"}),"Diagnosis Summary"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",t.status," | ID: ",t.id]})]})]},a))]})})}),e.jsxs(M,{children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",i.from," to ",i.to," ","of ",i.total," Results"]}),e.jsx("div",{className:"flex ml-2 space-x-2",children:b.map((t,a)=>e.jsx(l,{variant:t.active?"default":"outline",size:"sm",disabled:!t.url||t.active,onClick:()=>{t.url&&S.get(t.url)},children:t.label.includes("Previous")?e.jsx(O,{className:"h-4 w-4"}):t.label.includes("Next")?e.jsx(R,{className:"h-4 w-4"}):t.label},a))})]})]})})]}),e.jsxs(k,{isOpen:N,hasCancel:!0,onClose:C,maxWidth:"4xl",canceltext:"Close",savetext:"",className:"max-h-[95vh] overflow-y-auto w-full",children:[e.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 rounded-t-lg -m-6 mb-4 p-5 text-white",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm flex-shrink-0",children:e.jsx(m,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-white",children:"Diagnosis Summary"}),e.jsx("p",{className:"text-blue-100 mt-0.5 text-xs lg:text-sm",children:"Medical diagnosis and treatment details"})]})]})})}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(g,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-blue-800 text-base mb-2",children:[s.appointment?.firstname," ",s.appointment?.lastname]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"Appointment Date:"})," ",s.appointment?.date," at ",s.appointment?.time]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"Service:"})," ",s.appointment?.service?.servicename||"General Consultation"]}),s.appointment?.subservice?.subservicename&&e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"Subservice:"})," ",s.appointment.subservice.subservicename]})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx(m,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-green-800 text-base",children:"Primary Diagnosis"}),e.jsx("p",{className:"text-sm text-green-600",children:"Medical diagnosis and symptoms"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-green-700",children:"Diagnosis"}),e.jsx("p",{className:"text-sm text-green-800 bg-white p-3 rounded border",children:s.diagnosis})]}),s.symptoms&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-green-700",children:"Symptoms"}),e.jsx("p",{className:"text-sm text-green-800 bg-white p-3 rounded border",children:s.symptoms})]})]})]}),(s.treatment||s.treatment_plan||s.notes||s.assessment||s.pertinent_findings)&&e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(d,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-orange-800 text-base",children:"Treatment Plan & Assessment"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Recommended treatment and medical assessment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[(s.treatment||s.treatment_plan)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-orange-700",children:"Treatment Plan"}),e.jsx("p",{className:"text-sm text-orange-800 bg-white p-3 rounded border",children:s.treatment||s.treatment_plan})]}),s.assessment&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-orange-700",children:"Assessment"}),e.jsx("p",{className:"text-sm text-orange-800 bg-white p-3 rounded border",children:s.assessment})]}),s.pertinent_findings&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-orange-700",children:"Pertinent Findings"}),e.jsx("p",{className:"text-sm text-orange-800 bg-white p-3 rounded border",children:s.pertinent_findings})]}),s.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-orange-700",children:"Additional Notes"}),e.jsx("p",{className:"text-sm text-orange-800 bg-white p-3 rounded border",children:s.notes})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(g,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-purple-800 text-base mb-2",children:"Diagnosed by"}),e.jsxs("p",{className:"text-sm text-purple-700",children:["Dr. ",s.doctor?.firstname," ",s.doctor?.lastname]}),s.doctor?.license_number&&e.jsxs("p",{className:"text-xs text-purple-600",children:["License: ",s.doctor.license_number]}),e.jsxs("p",{className:"text-xs text-purple-600",children:["Date: ",new Date(s.created_at).toLocaleDateString()]})]})]})})]})]}),e.jsx(I,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#fff",color:"#363636",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}})]})}export{rs as default};
