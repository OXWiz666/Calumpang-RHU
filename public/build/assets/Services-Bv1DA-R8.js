import{r as i,u as ee,j as e,R as is,c as A}from"./app-BYek28t3.js";import{s as c}from"./toast-DAmE_1w_.js";import{u as ls}from"./confirmation-BW4VsrCu.js";import{C as fe}from"./index-Cq2dcEjx.js";import{B as l}from"./button-CFU6UcKA.js";import{I as H}from"./input-B0M3oF_m.js";import"./avatar-C_4TQ5Yo.js";import{B as n}from"./badge-zbI-jXEX.js";import{C as p,c as j,a as cs,b as ns}from"./card-DC3m0m2Q.js";import{D as ds,a as os,b as ms,c as xs,d as Ne,e as L}from"./dropdown-menu-D32P6Bk_.js";import{S as hs,T as ye,a as Se,b as T,c as g,d as we,e as h}from"./table2-BeolVXgd.js";import{S as us,a as vs,b as gs,c as bs,d as se}from"./select-C5_NUKah.js";import{D as U,a as _,b as R,c as $,e as V,d as q}from"./dialog-B8nFG98e.js";import{L as M}from"./label-CDKTbEDO.js";import"./textarea-BYzEf3mT.js";import ps from"./ServicesLayout-B0uS-tWv.js";import{h as ae}from"./moment-C5S46NFB.js";import{m as D}from"./proxy-ZNVcD8-b.js";import{T as re}from"./trending-up-B7iWfh5r.js";import{U as Ce}from"./users-DsTP5XtR.js";import{c as js}from"./createLucideIcon-Iodx7ABU.js";import{A as fs}from"./activity-Cj9Uyrde.js";import{T as Ns}from"./trending-down-CKDYnFhE.js";import{T as ys}from"./triangle-alert-D-giMksT.js";import{S as Ss}from"./search-BN9Ouy_S.js";import{F as ws}from"./filter-zTQaKE8j.js";import{C as Cs}from"./chevron-up-DEc5uAsF.js";import{C as te}from"./chevron-down-4mTkjL9Z.js";import{E as As}from"./ellipsis-Bt_ypzxW.js";import{P as ie}from"./plus-gxag1FSO.js";import{C as Ds}from"./calendar-BrZsuCFt.js";import{A as Ae,a as De}from"./archive-B0x7XRz2.js";import{S as ks}from"./settings-D3DbHyWx.js";import{C as Ts}from"./clock-1CUnQX8Y.js";import{S as Ms}from"./square-pen-sR7dtdHg.js";import"./Subservices-hmtw6ece.js";import"./Toaster-WULlhlN-.js";import"./toast-pmq-0a25.js";import"./utils-RNxviqOY.js";import"./index-OLHtNq9T.js";import"./index-C_AcOWpb.js";import"./index-DZIW3V9d.js";import"./refresh-cw-n5BNCQKk.js";import"./save-Dt_DrhAI.js";import"./download-DOJsDjpU.js";import"./trash-2-DhHB7lAu.js";import"./info-BIde0Eah.js";import"./circle-x-CMX0f99D.js";import"./circle-check-BSVi-drZ.js";import"./alert-dialog-lgtJv-5X.js";import"./index-B8mBpvNl.js";import"./Combination-2tzW629K.js";import"./index-Bgv3a4mK.js";import"./index-DsxiASPK.js";import"./index-DOR0Hs6C.js";import"./index-oebGMNB2.js";import"./CustomModal-C0Zobnx_.js";import"./AdminLayout-Dyu_a3Tf.js";import"./separator-Dea6m5MS.js";import"./popover-DhIjPLo6.js";import"./format-Dp3w_Y3x.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./TextInput-CNHhKKz2.js";import"./x-DPKTEG6E.js";import"./house-BDFhcRnP.js";import"./pusher-D6WSJpxN.js";import"./printer-B6zykAlQ.js";import"./file-text-B0tnsgmg.js";import"./package-Cp0Bf08w.js";import"./circle-check-big-Ou30A1K0.js";import"./pill-COPI9s1H.js";import"./bell-CCnrKINf.js";import"./index-DU8KxlJ_.js";import"./autoprefixer-CqoIqzrW.js";import"./layers-BoC40BlJ.js";import"./chart-column-WDIuOrtD.js";import"./InputLabel-BU-OghJu.js";import"./alert-C_1piBpB.js";import"./circle-plus-Cgl1WLEm.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Os=js("BookOpen",Es),pr=({services_:E})=>{const[o,f]=i.useState(E),[K,ke]=i.useState(""),[O,Te]=i.useState("all"),[N,d]=i.useState(!1),{confirmArchive:Me,confirmUnarchive:Ee,ConfirmationDialog:Oe}=ls(),[S,Ps]=i.useState({key:"servicename",direction:"ascending"}),[u,P]=i.useState(1),[W]=i.useState(10),[m,w]=i.useState([]),[Fs,zs]=i.useState(!1),[F,Pe]=i.useState(null),[Bs,Is]=i.useState(!1);i.useEffect(()=>{f(E),console.log("services: ",E)},[E]);const[le,C]=i.useState(!1),[ce,Fe]=i.useState(null),[G,ne]=i.useState(!1),[z,de]=i.useState({servicename:"",status:"Active"}),[ze,Hs]=i.useState({name:"",description:"",duration:30,price:0,recurrenceDates:[]}),B=[...o.filter(s=>{const a=s.servicename.toLowerCase().includes(K.toLowerCase()),t=O==="all"||s.status===O;return a&&t})].sort((s,a)=>s[S.key]<a[S.key]?S.direction==="ascending"?-1:1:s[S.key]>a[S.key]?S.direction==="ascending"?1:-1:0),y=Math.ceil(B.length/W),J=(u-1)*W,oe=J+W,k=B.slice(J,oe);i.useEffect(()=>{P(1)},[K,O]);const Be=()=>{m.length===k.length?w([]):w(k.map(s=>s.id))},Ie=s=>{w(a=>a.includes(s)?a.filter(t=>t!==s):[...a,s])},me=async s=>{try{d(!0);const a=m.map(t=>A.put(`/admin/services/${t}/status`,{status:s}));await Promise.all(a),f(t=>t.map(r=>m.includes(r.id)?{...r,status:s}:r)),w([]),c("Success","Bulk status update completed!","success","update")}catch(a){console.error("Error updating services:",a),c("Error","Failed to update services")}finally{d(!1)}},He=async()=>{if(window.confirm(`Are you sure you want to delete ${m.length} services?`))try{d(!0);const s=m.map(a=>A.delete(`/admin/services/${a}`));await Promise.all(s),f(a=>a.filter(t=>!m.includes(t.id))),w([]),c("Success","Services deleted successfully!","success","delete")}catch(s){console.error("Error deleting services:",s),c("Error","Failed to delete services")}finally{d(!1)}},Le=async s=>{const a=o.flatMap(r=>r.subservices).find(r=>r.id===s),t=a?a.subservicename:"Sub-service";Me(t,async()=>{try{d(!0),await A.post("/admin/services/sub-services/archive",{subservice_id:s}),f(r=>r.map(v=>({...v,subservices:v.subservices.map(x=>x.id===s?{...x,status:0}:x)}))),c("Success","Sub-service archived successfully!","success","archive")}catch(r){console.error("Error archiving sub-service:",r),c("Error","Failed to archive sub-service")}finally{d(!1)}})},Ue=async s=>{const a=o.flatMap(r=>r.subservices).find(r=>r.id===s),t=a?a.subservicename:"Sub-service";Ee(t,async()=>{try{d(!0),await A.post("/admin/services/sub-services/unarchive",{subservice_id:s}),f(r=>r.map(v=>({...v,subservices:v.subservices.map(x=>x.id===s?{...x,status:1}:x)}))),c("Success","Sub-service unarchived successfully!","success","unarchive")}catch(r){console.error("Error unarchiving sub-service:",r),c("Error","Failed to unarchive sub-service")}finally{d(!1)}})},[_e,xe]=i.useState(null),Re=s=>{G===s?(ne(null),xe(null)):(ne(s),xe(s))},$e=s=>{Y(a=>({...a,days:a.days.includes(s)?a.days.filter(t=>t!==s):[...a.days,s]}))},Ve=()=>{Ke(route("admin.services.subservice.create"),{preserveScroll:!0,preserveState:!0,only:["services_"],onSuccess:()=>{C(!1),c("Success","Sub-Service added successfully!")}})},he=async(s,a)=>{d(!0);try{const t=a?"/admin/services/unarchive":"/admin/services/archive",r=await A.post(t,{service_id:s});r.data.services&&(f(r.data.services),c("Success",r.data.message))}catch(t){console.error("Error archiving/unarchiving service:",t),c("Error",t.response?.data?.message||"An error occurred while updating the service")}finally{d(!1)}},qe=s=>{switch(s){case 1:return e.jsx(n,{className:"bg-green-500",children:"Active"});case 0:return e.jsx(n,{className:"bg-gray-500",children:"Inactive"});default:return e.jsx(n,{children:s})}},{data:ue,setData:Q,processing:ve,post:Ke,recentlySuccessful:Us,clearErrors:_s,errors:Rs}=ee({serviceid:"",subservicename:""}),[We,X]=i.useState(!1),{data:Ge,setData:Y,post:Je,processing:ge,errors:be}=ee({days:ze.recurrenceDates,serviceid:_e}),Qe=()=>{Je(route("admin.services.days.update"),{preserveScroll:!0,preserveState:!0,replace:!0,only:["services_"],onSuccess:()=>{X(!1),c("Success!","Successfully Updated!","success")}})},Xe=["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM"],[Ye,$s]=i.useState([]),[Ze,Z]=i.useState(!1),{data:I,setData:b,processing:pe,post:es,recentlySuccessful:Vs,clearErrors:qs,errors:je}=ee({times:Ye,subservice_id:F,subservicename:""}),ss=s=>{b(a=>({...a,times:a.times.includes(s)?a.times.filter(t=>t!==s):[...a.times,s]}))},as=s=>{es(route("admin.services.time.update"),{preserveScroll:!0,onSuccess:()=>{Z(!1),c("Success!","Successfully Updated!","success")}})},rs=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return i.useEffect(()=>{console.log("datatime; ",I)},[I]),e.jsxs(ps,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Services Management"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Monitor and manage all healthcare services and their performance metrics"})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsxs(p,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(j,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Main service categories"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-blue-100 shadow-lg",children:e.jsx("div",{className:"text-blue-600",children:e.jsx(Ce,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"default",className:"text-xs",children:"+12%"})]})})]})]}),e.jsxs(p,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(j,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Sub-Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.reduce((s,a)=>s+(a.subservices?.length||0),0)}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Specific service types"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.reduce((s,a)=>s+(a.subservices?.length||0),0)," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-green-100 shadow-lg",children:e.jsx("div",{className:"text-green-600",children:e.jsx(Os,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"default",className:"text-xs",children:"+8%"})]})})]})]}),e.jsxs(p,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(j,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.filter(s=>s.status===1).length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Currently available"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.filter(s=>s.status===1).length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-emerald-100 shadow-lg",children:e.jsx("div",{className:"text-emerald-600",children:e.jsx(fs,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"default",className:"text-xs",children:"+15%"})]})})]})]}),e.jsxs(p,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(j,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Inactive Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.filter(s=>s.status===0).length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Requires attention"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ns,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600",children:[o.filter(s=>s.status===0).length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-red-100 shadow-lg",children:e.jsx("div",{className:"text-red-600",children:e.jsx(ys,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"destructive",className:"text-xs",children:"+5%"})]})})]})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(p,{className:"shadow-lg border-0",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search services...",value:K,onChange:s=>ke(s.target.value),className:"pl-10 border-2 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ws,{className:"h-4 w-4 text-gray-500"}),e.jsxs(us,{value:O,onValueChange:Te,children:[e.jsx(vs,{className:"w-[180px] border-2",children:e.jsx(gs,{placeholder:"Filter by status"})}),e.jsxs(bs,{children:[e.jsx(se,{value:"all",children:"All Statuses"}),e.jsx(se,{value:"Active",children:"Active"}),e.jsx(se,{value:"Inactive",children:"Inactive"})]})]})]})]})})})}),m.length>0&&e.jsx(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(p,{className:"shadow-lg border-0 bg-blue-50 border-blue-200",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[m.length," service",m.length>1?"s":""," selected"]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>w([]),className:"text-blue-600 hover:text-blue-700",children:"Clear selection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>me(1),disabled:N,className:"border-green-200 text-green-700 hover:bg-green-50",children:"Activate"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>me(0),disabled:N,className:"border-yellow-200 text-yellow-700 hover:bg-yellow-50",children:"Deactivate"}),e.jsx(l,{variant:"outline",size:"sm",onClick:He,disabled:N,className:"border-red-200 text-red-700 hover:bg-red-50",children:"Delete"})]})]})})})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(p,{className:"shadow-lg border-0 overflow-hidden",children:[e.jsx(cs,{className:"bg-gray-50 border-b",children:e.jsx(ns,{className:"text-lg font-semibold text-gray-900",children:"Services List"})}),e.jsx(j,{className:"p-0",children:e.jsx(hs,{data:k,defaultSort:{key:"servicename",direction:"asc"},children:({sortedData:s})=>e.jsxs(ye,{children:[e.jsx(Se,{children:e.jsxs(T,{className:"bg-gray-50 hover:bg-gray-50",children:[e.jsx(g,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:m.length===k.length&&k.length>0,onChange:Be,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(g,{sortKey:"servicename",sortable:!0,className:"font-semibold text-gray-900",children:"Service Name"}),e.jsx(g,{sortKey:"status",sortable:!0,className:"font-semibold text-gray-900",children:"Status"}),e.jsx(g,{className:"font-semibold text-gray-900",children:"Available Days"}),e.jsx(g,{className:"font-semibold text-gray-900",children:"Sub Services"}),e.jsx(g,{className:"font-semibold text-gray-900 text-right",children:"Actions"})]})}),e.jsx(we,{children:s.map((a,t)=>e.jsxs(is.Fragment,{children:[e.jsxs(T,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(h,{children:e.jsx("input",{type:"checkbox",checked:m.includes(a.id),onChange:()=>Ie(a.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(h,{children:e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Re(a.id),className:"hover:bg-blue-100 hover:text-blue-600",children:G===a.id?e.jsx(Cs,{className:"h-4 w-4"}):e.jsx(te,{className:"h-4 w-4"})})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ce,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:a.servicename}),e.jsx("p",{className:"text-sm text-gray-500",children:"Service Category"})]})]})}),e.jsx(h,{children:qe(a.status)}),e.jsx(h,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a?.servicedays?.map((r,v)=>e.jsx(n,{variant:"secondary",className:"bg-blue-100 text-blue-700 border-blue-200",children:r.day},v))})}),e.jsx(h,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(n,{variant:"outline",className:"border-gray-300",children:[a?.subservices.length||0," Sub-service",a?.subservices.length!==1?"s":""]})})}),e.jsx(h,{className:"text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:e.jsxs(ds,{children:[e.jsx(os,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(As,{className:"h-4 w-4"})})}),e.jsxs(ms,{align:"end",children:[e.jsx(xs,{children:"Actions"}),e.jsx(Ne,{}),e.jsxs(L,{onClick:()=>{Q("serviceid",a.id),C(!0)},className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Add Sub-service"]}),e.jsxs(L,{onClick:()=>{Fe(a),X(!0)},className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),"Edit Days"]}),e.jsx(Ne,{}),a.status===0?e.jsxs(L,{onClick:()=>he(a.id,!0),className:"flex items-center gap-2 text-green-600",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Unarchive"]}):e.jsxs(L,{onClick:()=>he(a.id,!1),className:"flex items-center gap-2 text-red-600",children:[e.jsx(De,{className:"h-4 w-4"}),"Archive"]})]})]})})})]}),G===a.id&&e.jsx(T,{children:e.jsx(h,{colSpan:6,className:"p-0",children:e.jsxs("div",{className:"bg-gray-50 p-6 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ks,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:["Sub-services for ",a.servicename]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage sub-services and their schedules"})]})]}),a.subservices.length>0?e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsxs(ye,{children:[e.jsx(Se,{children:e.jsxs(T,{className:"bg-gray-50",children:[e.jsx(g,{className:"font-medium w-1/3",children:"Sub Service"}),e.jsx(g,{className:"font-medium w-1/3",children:"Available Time"}),e.jsx(g,{className:"font-medium w-1/3 text-right",children:"Actions"})]})}),e.jsx(we,{children:a?.subservices.map((r,v)=>e.jsxs(T,{className:"hover:bg-gray-50",children:[e.jsx(h,{className:"py-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-3 h-full",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-md flex-shrink-0",children:e.jsx(Ts,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:r.subservicename}),e.jsx(n,{variant:r.status===1?"default":"secondary",className:`text-xs ${r.status===1?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"}`,children:r.status===1?"Active":"Archived"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sub-service"})]})]})}),e.jsx(h,{className:"py-4 align-middle",children:e.jsx("div",{className:"flex flex-wrap gap-1 items-center h-full",children:r?.times&&r.times.length>0?r.times.map((x,ts)=>e.jsx(n,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200 text-xs",children:ae(x.time,"HH:mm:ss").format("hh:mm A")},ts)):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"Not assigned"})})}),e.jsx(h,{className:"py-4 align-middle text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-0.5 h-full",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{b("subservice_id",r.id),Pe(r),b("subservicename",r.subservicename),b("times",r?.times?.map(x=>ae(x.time,"HH:mm:ss").format("hh:mm A"))||[]),Z(!0)},className:"hover:bg-blue-100 hover:text-blue-600 h-8 w-8 p-0",title:"Edit sub-service",children:e.jsx(Ms,{className:"h-4 w-4"})}),r.status===1?e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>Le(r.id),className:"hover:bg-yellow-100 hover:text-yellow-600 h-8 w-8 p-0",title:"Archive sub-service",disabled:N,children:e.jsx(De,{className:"h-4 w-4"})}):e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>Ue(r.id),className:"hover:bg-green-100 hover:text-green-600 h-8 w-8 p-0",title:"Unarchive sub-service",disabled:N,children:e.jsx(Ae,{className:"h-4 w-4"})})]})})]},v))})]})}):e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg border border-dashed border-gray-300",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-full w-fit mx-auto mb-3",children:e.jsx(ie,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No sub-services found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add sub-services to organize this service better"}),e.jsxs(l,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>{Q("serviceid",a.id),C(!0)},children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Add First Sub-service"]})]})]})})})]},t))})]})})})]})}),y>1&&e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(p,{className:"shadow-lg border-0",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",J+1," to ",Math.min(oe,B.length)," of ",B.length," services"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>P(Math.max(1,u-1)),disabled:u===1,className:"flex items-center gap-1",children:[e.jsx(te,{className:"h-4 w-4 rotate-90"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(10,y)},(s,a)=>{let t;return y<=10||u<=5?t=a+1:u>=y-4?t=y-9+a:t=u-4+a,e.jsx(l,{variant:u===t?"default":"outline",size:"sm",onClick:()=>P(t),className:`w-8 h-8 p-0 ${u===t?"bg-blue-600 hover:bg-blue-700 text-white":"hover:bg-gray-50"}`,children:t},t)})}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>P(Math.min(y,u+1)),disabled:u===y,className:"flex items-center gap-1",children:["Next",e.jsx(te,{className:"h-4 w-4 -rotate-90"})]})]})]})})})})]}),e.jsx(U,{open:le,onOpenChange:s=>{C(s),s||de({servicename:"",status:"Active"})},children:e.jsxs(_,{className:"max-w-md",children:[e.jsxs(R,{children:[e.jsx($,{className:"text-xl font-semibold",children:"Add New Service"}),e.jsx(V,{children:"Create a new service category for appointments"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"servicename",children:"Service Name"}),e.jsx(H,{id:"servicename",name:"servicename",value:z.servicename,onChange:s=>de({...z,servicename:s.target.value}),placeholder:"Enter service name",className:"border-2 focus:border-blue-500"})]})}),e.jsx(q,{children:e.jsx(l,{type:"submit",onClick:async()=>{try{d(!0);const s=await A.post("/admin/services/create",z);s.data.services&&(f(s.data.services),C(!1),c("Success","Service added successfully!"))}catch(s){console.error("Error creating service:",s),c("Error",s.response?.data?.message||"An error occurred while creating the service")}finally{d(!1)}},disabled:!z.servicename||N,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:N?"Adding...":"Add Service"})})]})}),e.jsx(U,{open:le,onOpenChange:s=>{C(s)},children:e.jsxs(_,{className:"max-w-md",children:[e.jsxs(R,{children:[e.jsx($,{className:"text-xl font-semibold",children:"Add Sub-service"}),e.jsx(V,{children:"Create a new sub-service for this service category"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"subName",children:"Sub Service Name"}),e.jsx(H,{id:"subName",name:"name",value:ue.subservicename,onChange:s=>{Q("subservicename",s.target.value)},placeholder:"Enter sub-service name",className:"border-2 focus:border-blue-500"})]})}),e.jsx(q,{children:e.jsx(l,{type:"submit",onClick:Ve,disabled:!ue.subservicename||ve,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:ve?"Adding...":"Add Sub-service"})})]})}),e.jsx(U,{open:We,onOpenChange:s=>{X(s),s&&(Y("days",ce?.servicedays?.map(a=>a.day)||[]),Y("serviceid",ce?.id))},children:e.jsxs(_,{className:"max-w-md",children:[e.jsxs(R,{children:[e.jsx($,{className:"text-xl font-semibold",children:"Edit Available Days"}),e.jsx(V,{children:"Select the days when this service is available"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(M,{children:"Available Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:rs.map(s=>e.jsx(n,{className:`cursor-pointer transition-colors ${Ge.days.includes(s)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>$e(s),children:s},s))})]}),Object.keys(be).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"h-5 w-5 text-red-400 mr-3"}),e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(be).map(([s,a])=>e.jsx("li",{children:a},s))})]})})]}),e.jsx(q,{children:e.jsx(l,{onClick:Qe,disabled:ge,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:ge?"Saving...":"Save Days"})})]})}),e.jsx(U,{open:Ze,onOpenChange:s=>{Z(s),s&&(b("subservice_id",F?.id),b("subservicename",F?.subservicename),b("times",F?.times?.map(a=>ae(a.time,"HH:mm:ss").format("hh:mm A"))||[]))},children:e.jsxs(_,{className:"max-w-lg",children:[e.jsxs(R,{children:[e.jsx($,{className:"text-xl font-semibold",children:"Edit Sub-service Times"}),e.jsx(V,{children:"Select the available times for this sub-service"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{children:"Sub-Service Name"}),e.jsx(H,{value:I.subservicename,onChange:s=>{b("subservicename",s.target.value)},className:"border-2 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(M,{children:"Available Times"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:Xe.map((s,a)=>e.jsx(n,{className:`cursor-pointer transition-colors ${I.times.includes(s)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>ss(s),children:s},a))})]}),Object.keys(je).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"h-5 w-5 text-red-400 mr-3"}),e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(je).map(([s,a])=>e.jsx("li",{children:a},s))})]})})]}),e.jsx(q,{children:e.jsx(l,{onClick:as,disabled:pe,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:pe?"Saving...":"Save Times"})})]})}),e.jsx(Oe,{})]})};export{pr as default};
