import{j as s,r as F}from"./app-COToGJgN.js";import{r as u}from"./vendor-DkBadjUr.js";import{B as g}from"./button-618T9wCO.js";import{I as l}from"./input-CvzBKn0G.js";import{L as n}from"./label-BwgxGJhu.js";import{C as v,a as w,b as N,e as b,c as y}from"./card-df5ukKsP.js";import{S as E,a as L,b as I,c as P,d as j}from"./select-mT28awoa.js";import{D as k,a as A,b as U,c as M}from"./dialog-C9wBPoyl.js";import{U as B}from"./user-3RJR1iCA.js";import{m as O}from"./proxy-uLaVEvmK.js";import{S as R}from"./save-CAdd64LS.js";import"./pusher-DVtoYAOu.js";import"./index-_pe5jKXx.js";import"./react-icons.esm-Cp1qeI-T.js";import"./index-Bb8tsued.js";import"./index-CU4B9t9u.js";import"./index-CJsCTIuS.js";import"./tslib.es6-M_FJ09fS.js";import"./index-C10kMJZL.js";import"./index-D-XfwEVN.js";import"./index-DqxisvwK.js";import"./index-CmD3hvjm.js";import"./index-MG4si27S.js";import"./createLucideIcon-BKWaAi2G.js";function cs({admin:i,isOpen:S,onClose:p,onSuccess:f}){const C=e=>({1:"active",2:"inactive",3:"suspended"})[e]||"active",[a,_]=u.useState({firstname:i?.firstname||"",lastname:i?.lastname||"",email:i?.email||"",contactno:i?.contactno||"",status:C(i?.status),role_id:i?.role_id||1,password:"",password_confirmation:""}),[x,c]=u.useState(!1),[t,m]=u.useState({}),o=(e,r)=>{_(h=>({...h,[e]:r}))},D=e=>{e.preventDefault(),c(!0),m({});const r={};if(a.password&&!a.password_confirmation&&(r.password_confirmation="Please confirm your new password."),a.password&&a.password_confirmation&&a.password!==a.password_confirmation&&(r.password_confirmation="Passwords do not match."),a.password&&a.password.length<8&&(r.password="Password must be at least 8 characters."),Object.keys(r).length>0){m(r),c(!1);return}const h={...a,contactno:String(a.contactno)};F.put(`/admin/staff/admins/${i.id}`,h,{onSuccess:d=>{console.log("Update successful:",d),m({}),d.props.flash?.success,f&&f(a),p(),c(!1)},onError:d=>{console.error("Update failed:",d),m(d),c(!1)}})};return s.jsx(k,{open:S,onOpenChange:p,children:s.jsxs(A,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(U,{children:s.jsxs(M,{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(B,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"Edit Admin Account"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Update admin information and settings"})]})]})}),s.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[Object.keys(t).length>0&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Please correct the following errors:"}),s.jsx("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:Object.entries(t).map(([e,r])=>s.jsx("li",{children:r},e))})]})]})}),s.jsxs("form",{onSubmit:D,className:"space-y-4",children:[s.jsxs(v,{children:[s.jsxs(w,{className:"pb-3",children:[s.jsx(N,{className:"text-lg",children:"Personal Information"}),s.jsx(b,{children:"Basic admin account details"})]}),s.jsxs(y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"firstname",children:"First Name "}),s.jsx(l,{id:"firstname",value:a.firstname,onChange:e=>o("firstname",e.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"lastname",children:"Last Name "}),s.jsx(l,{id:"lastname",value:a.lastname,onChange:e=>o("lastname",e.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"email",children:"Email Address "}),s.jsx(l,{id:"email",type:"email",value:a.email,onChange:e=>o("email",e.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"contactno",children:"Contact Number "}),s.jsx(l,{id:"contactno",value:a.contactno,onChange:e=>o("contactno",e.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"status",children:"Account Status"}),s.jsxs(E,{value:a.status,onValueChange:e=>o("status",e),children:[s.jsx(L,{children:s.jsx(I,{placeholder:"Select status"})}),s.jsxs(P,{children:[s.jsx(j,{value:"active",children:"Active"}),s.jsx(j,{value:"inactive",children:"Inactive"}),s.jsx(j,{value:"suspended",children:"Suspended"})]})]})]})]})]}),s.jsxs(v,{children:[s.jsxs(w,{className:"pb-3",children:[s.jsx(N,{className:"text-lg",children:"Security Settings"}),s.jsx(b,{children:"Update account password"})]}),s.jsx(y,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"password",children:"New Password"}),s.jsx(l,{id:"password",type:"password",value:a.password,onChange:e=>o("password",e.target.value),placeholder:"Leave blank to keep current password",className:t.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),t.password&&s.jsx("p",{className:"text-sm text-red-600",children:t.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{htmlFor:"password_confirmation",children:"Confirm New Password"}),s.jsx(l,{id:"password_confirmation",type:"password",value:a.password_confirmation,onChange:e=>o("password_confirmation",e.target.value),placeholder:"Confirm new password",className:t.password_confirmation?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),t.password_confirmation&&s.jsx("p",{className:"text-sm text-red-600",children:t.password_confirmation})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(g,{type:"button",variant:"outline",onClick:p,disabled:x,children:"Cancel"}),s.jsx(g,{type:"submit",disabled:x,className:"min-w-[120px]",children:x?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(R,{className:"h-4 w-4"}),"Save Changes"]})})]})]})]})]})})}export{cs as default};
