import{r as l,u as Le,j as e,c as q}from"./app-CHmAHYu-.js";import{A as is}from"./AdminLayout-9W-WL7Wy.js";import{I as c}from"./InputError-ByW8nbfr.js";import{B as d}from"./button-ChwiRyPe.js";import{I as m}from"./input-BPj6AWWm.js";import"./avatar-BtCwL2KE.js";import{B as f}from"./badge-Cnce-efU.js";import{C as u,a as ns,b as cs,e as os,c as y}from"./card-DBbiPc8t.js";import{T as ds,a as ms,b as re,c as j,d as xs,e as h}from"./table-DcO9omEd.js";import{S as G,a as J,b as K,c as Q,d as o}from"./select-C-klL9fb.js";import{D as hs,a as gs,b as ps,c as js,d as Me,e as le}from"./dropdown-menu-8M9OQ-IT.js";import{D as ie,f as us,a as ne,b as ce,c as oe,e as de,d as je}from"./dialog-HjaLH6lU.js";import{A as vs,a as Ns,b as bs,c as fs,d as ys,e as ws,f as Cs,g as Ss}from"./alert-dialog-Bb0N_itY.js";import{m as L}from"./proxy-u0CWR7BN.js";import{C as me}from"./calendar-DP61lksy.js";import{A as Ie}from"./activity-BVgK8zXY.js";import{a as Ue,A as Ps}from"./archive-DRWQyqdT.js";import{U as xe}from"./users-CIf0kQAe.js";import{D as As}from"./download-CJfgDCNK.js";import{P as Ds}from"./plus-BzUTfFDC.js";import{S as Ts}from"./search-B3LjYI5L.js";import{F as ks}from"./filter-DNDuFDy3.js";import{c as Es}from"./createLucideIcon-DiRkYF3I.js";import{M as Oe}from"./map-pin-CzH8NXXX.js";import{H as _e}from"./hash-BE1jCmYO.js";import{U as ue}from"./user-C7KNyBhf.js";import{E as Fe}from"./eye-BfUsOhV-.js";import{E as Ls}from"./ellipsis-BjJdxKBX.js";import{S as Ms}from"./square-pen-CxDkRLRQ.js";import{P as Is}from"./phone-Ceu-SkIw.js";import{M as Us}from"./mail-CjPLDa8z.js";import{C as Os}from"./chevron-left-CT36jf1G.js";import{C as _s}from"./chevron-right-r-tKURHZ.js";import{T as Fs}from"./trending-up-BO77fQj6.js";import{T as Bs}from"./trending-down-ByhE_326.js";import"./Subservices-hmtw6ece.js";import"./utils-DnUyQCA6.js";import"./separator-D9NJ7C8W.js";import"./index-2qu7vwLc.js";import"./index-CmqNn0LS.js";import"./index-Db9BPqZ8.js";import"./moment-C5S46NFB.js";import"./label-B65m6QKw.js";import"./popover-BtpiBUVW.js";import"./format-Dp3w_Y3x.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./Combination-DUkbLZrH.js";import"./index-DuaP1el2.js";import"./index-BTsu8x5p.js";import"./TextInput-CGuPODEu.js";import"./x-hh3rg39X.js";import"./settings-DOVGbSap.js";import"./house-1B4ceBAE.js";import"./pusher-Iryyy0JQ.js";import"./printer-leDlUT32.js";import"./file-text-lhyJHkLH.js";import"./package-2mJDRxNG.js";import"./circle-check-big-B1iSVeIy.js";import"./pill-D9dQZu5T.js";import"./bell-CMnzRPyV.js";import"./index-uk-MvJxd.js";import"./autoprefixer-C5OKt-YQ.js";import"./Toaster-Bgx1_qta.js";import"./toast-CAtB-aU6.js";import"./index-CYMpX3E5.js";import"./index-BjJdp2-0.js";import"./layers-HzxRhVBG.js";import"./chart-column-BlAs_qHe.js";import"./index-Da62_rko.js";import"./index-CplhEpNv.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]],Hs=Es("Clock3",Vs),he=({title:A,value:F,icon:x,change:E,description:B,iconBgColor:W="bg-blue-100",iconColor:X="text-blue-600",trend:M})=>e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(u,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(y,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:A}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:F}),B&&e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:B}),e.jsxs("div",{className:"flex items-center",children:[M==="up"?e.jsx(Fs,{className:"h-4 w-4 text-green-500 mr-1"}):M==="down"?e.jsx(Bs,{className:"h-4 w-4 text-red-500 mr-1"}):null,e.jsxs("span",{className:`text-sm font-semibold ${M==="up"?"text-green-600":M==="down"?"text-red-600":"text-gray-600"}`,children:[E?.value||F," total"]})]})]}),e.jsx("div",{className:`p-4 rounded-2xl ${W} shadow-lg`,children:e.jsx("div",{className:X,children:x})})]}),E&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsxs(f,{variant:"default",className:"text-xs",children:[E.isPositive?"+":"",E.value,"%"]})]})})]})]})}),ct=({programs:A=[],doctors:F=[],flash:x,activePrograms:E=0,archivedPrograms:B=0,todayAppointments:W=0,totalParticipants:X=0})=>{const[M,D]=l.useState(A),[V,Be]=l.useState(""),[Y,Ve]=l.useState("all"),[v,He]=l.useState({key:"name",direction:"ascending"}),[$e,ve]=l.useState(!1),[ze,H]=l.useState(!1),[Re,Z]=l.useState(!1),[r,I]=l.useState(null),[Ne,T]=l.useState(x?.success||""),[be,U]=l.useState(x?.error||""),[O,N]=l.useState(!1),[k,ee]=l.useState({isOpen:!1,type:null,programId:null}),[se,ae]=l.useState(1),[ge]=l.useState(10),[w,$]=l.useState([]),[$s,zs]=l.useState(!1),[qe,fe]=l.useState(!1),[ye,Ge]=l.useState([]),[Je,we]=l.useState(!1),[g,Ke]=l.useState({});l.useEffect(()=>{A&&Array.isArray(A)&&(console.log("Programs updated from props:",A),D(A))},[A]),l.useEffect(()=>{if(x?.success){T(x.success);const s=setTimeout(()=>T(""),5e3);return()=>clearTimeout(s)}if(x?.error){U(x.error);const s=setTimeout(()=>U(""),5e3);return()=>clearTimeout(s)}x?.programs&&Array.isArray(x.programs)&&(console.log("Programs updated from flash:",x.programs),D(x.programs))},[x]);const z=[...M.filter(s=>{const t=s.name.toLowerCase().includes(V.toLowerCase())||s.description.toLowerCase().includes(V.toLowerCase())||s.coordinator&&s.coordinator.toLowerCase().includes(V.toLowerCase()),a=Y==="all"||s.status===Y;return t&&a})].sort((s,t)=>s[v.key]<t[v.key]?v.direction==="ascending"?-1:1:s[v.key]>t[v.key]?v.direction==="ascending"?1:-1:0),te=Math.ceil(z.length/ge),pe=(se-1)*ge,Ce=pe+ge,_=z.slice(pe,Ce);l.useEffect(()=>{ae(1)},[V,Y]);const Qe=s=>{let t="ascending";v.key===s&&v.direction==="ascending"&&(t="descending"),He({key:s,direction:t})},We=()=>{w.length===_.length?$([]):$(_.map(s=>s.id))},Xe=s=>{$(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},Se=async(s,t=1)=>{we(!0);try{const a=await q.get(`/admin/programs/${s}/patients`,{params:{page:t,per_page:10}});Ge(a.data.participants),Ke(a.data.pagination)}catch(a){console.error("Error fetching program patients:",a)}finally{we(!1)}},Pe=s=>{r&&Se(r.id,s)},Ye=async()=>{try{N(!0);const s=w.map(t=>q.post("/admin/programs/archive",{program_id:t}));await Promise.all(s),D(t=>t.map(a=>w.includes(a.id)?{...a,status:"Archived"}:a)),$([]),T(`Successfully archived ${w.length} programs`),setTimeout(()=>T(""),3e3)}catch(s){console.error("Error archiving programs:",s),U("Failed to archive programs"),setTimeout(()=>U(""),3e3)}finally{N(!1)}},Ze=()=>{const s=[["Program Name","Description","Date","Time","Location","Slots","Coordinator","Status"],...z.map(p=>[p.name,p.description,p.date,`${p.startTime} - ${p.endTime}`,p.location,`${p.availableSlots}/${p.totalSlots}`,p.coordinator,p.status])].map(p=>p.join(",")).join(`
`),t=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),R=URL.createObjectURL(t);a.setAttribute("href",R),a.setAttribute("download",`health_programs_export_${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),T("Programs exported successfully!"),setTimeout(()=>T(""),3e3)},es=async(s,t)=>{N(!0);try{const a=t?"/admin/programs/unarchive":"/admin/programs/archive",R=await q.post(a,{program_id:s});R.data.programs&&(D(R.data.programs),T(R.data.message),setTimeout(()=>T(""),3e3))}catch(a){console.error("Error archiving/unarchiving program:",a),U(a.response?.data?.message||"An error occurred while updating the program"),setTimeout(()=>U(""),3e3)}finally{N(!1)}},{data:C,setData:S,post:ss,processing:Ae,errors:i,reset:as}=Le({programname:"",description:"",date:"",starttime:"",endtime:"",location:"",slots:"",coordinatorid:"",status:"Available"}),{data:P,setData:b,put:ts,processing:De,errors:n,reset:Te}=Le({programname:"",description:"",date:"",starttime:"",endtime:"",location:"",slots:"",coordinatorid:"",status:"Available"}),rs=s=>{s.preventDefault(),N(!0),ss(route("admin.programs.create"),{preserveScroll:!0,onSuccess:t=>{as(),ve(!1),N(!1),t?.props?.flash?.programs?D(t.props.flash.programs):q.get(route("admin.programs.fetch")).then(a=>{a.data.programs&&D(a.data.programs)}).catch(a=>console.error("Error fetching programs:",a))},onError:()=>{N(!1)}})},ke=s=>{I(s),b({programname:s.name,description:s.description,date:s.date,starttime:s.startTime,endtime:s.endTime,location:s.location,slots:s.totalSlots,coordinatorid:s.coordinatorId?.toString()||"",status:s.status}),Z(!0)},ls=s=>{s.preventDefault(),N(!0),ts(route("admin.programs.update",r.id),{preserveScroll:!0,onSuccess:t=>{Te(),Z(!1),N(!1),I(null),t?.props?.flash?.programs?D(t.props.flash.programs):q.get(route("admin.programs.fetch")).then(a=>{a.data.programs&&D(a.data.programs)}).catch(a=>console.error("Error fetching programs:",a))},onError:()=>{N(!1)}})},Ee=s=>{switch(s){case"Active":return e.jsx(f,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Active"});case"Completed":return e.jsx(f,{className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:"Completed"});case"Upcoming":return e.jsx(f,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:"Upcoming"});case"Cancelled":return e.jsx(f,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"Cancelled"});case"Available":return e.jsx(f,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Available"});case"Full":return e.jsx(f,{className:"bg-orange-100 text-orange-800 hover:bg-orange-200",children:"Full"});case"Archived":return e.jsx(f,{className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:"Archived"});default:return e.jsx(f,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:s})}};return e.jsx(is,{children:e.jsxs("div",{className:"px-4 md:px-6 py-6 space-y-8",children:[e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Health Programs"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Monitor and manage all health programs and their participants"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(he,{title:"Today's Appointments",value:W,description:"Scheduled for today",icon:e.jsx(me,{className:"h-6 w-6"}),iconBgColor:"bg-blue-100",iconColor:"text-blue-600",trend:"up",change:{value:W,isPositive:!0}}),e.jsx(he,{title:"Active Health Programs",value:E,description:"Currently running",icon:e.jsx(Ie,{className:"h-6 w-6"}),iconBgColor:"bg-green-100",iconColor:"text-green-600",trend:"up",change:{value:E,isPositive:!0}}),e.jsx(he,{title:"Archived Programs",value:B,description:"Completed or archived",icon:e.jsx(Ue,{className:"h-6 w-6"}),iconBgColor:"bg-amber-100",iconColor:"text-amber-600",trend:"down",change:{value:B,isPositive:!1}}),e.jsx(he,{title:"Total Participants",value:X,description:"Across all programs",icon:e.jsx(xe,{className:"h-6 w-6"}),iconBgColor:"bg-purple-100",iconColor:"text-purple-600",trend:"up",change:{value:X,isPositive:!0}})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(u,{className:"shadow-lg border-0 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsx(ns,{children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(cs,{className:"text-2xl font-bold text-gray-900",children:"All Programs"}),e.jsx(os,{className:"text-gray-600 mt-1",children:"Manage and configure all health programs"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(d,{variant:"outline",className:"flex items-center gap-2 border-2 hover:bg-gray-50",onClick:Ze,children:[e.jsx(As,{className:"h-4 w-4"}),"Export"]}),e.jsxs(ie,{open:$e,onOpenChange:ve,children:[e.jsx(us,{asChild:!0,children:e.jsxs(d,{className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:[e.jsx(Ds,{className:"h-4 w-4"}),"Create Program"]})}),e.jsxs(ne,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(ce,{className:"",children:[e.jsx(oe,{children:"Create New Health Program"}),e.jsx(de,{children:"Fill in the details to create a new health program."})]}),e.jsxs("form",{onSubmit:rs,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Program Name"}),e.jsx(m,{placeholder:"Enter program name",value:C.programname,onChange:s=>S("programname",s.target.value)}),i.programname&&e.jsx(c,{message:i.programname})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(m,{placeholder:"Enter program description",value:C.description,onChange:s=>S("description",s.target.value)}),i.description&&e.jsx(c,{message:i.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Date"}),e.jsx(m,{type:"date",value:C.date,onChange:s=>S("date",s.target.value)}),i.date&&e.jsx(c,{message:i.date})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Time"}),e.jsx(m,{type:"time",value:C.starttime,onChange:s=>S("starttime",s.target.value)}),i.starttime&&e.jsx(c,{message:i.starttime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"End Time"}),e.jsx(m,{type:"time",value:C.endtime,onChange:s=>S("endtime",s.target.value)}),i.endtime&&e.jsx(c,{message:i.endtime})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(m,{placeholder:"Enter program location",value:C.location,onChange:s=>S("location",s.target.value)}),i.location&&e.jsx(c,{message:i.location})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Available Slots"}),e.jsx(m,{type:"number",placeholder:"Enter number of slots",value:C.slots,onChange:s=>S("slots",s.target.value)}),i.slots&&e.jsx(c,{message:i.slots})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Coordinator"}),e.jsxs(G,{value:C.coordinatorid,onValueChange:s=>S("coordinatorid",s),children:[e.jsx(J,{children:e.jsx(K,{placeholder:"Select coordinator"})}),e.jsx(Q,{children:F.map(s=>e.jsxs(o,{value:s.id.toString(),children:["Dr. ",s.lastname]},s.id))})]}),i.coordinatorid&&e.jsx(c,{message:i.coordinatorid})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(G,{value:C.status,onValueChange:s=>S("status",s),children:[e.jsx(J,{children:e.jsx(K,{placeholder:"Select status"})}),e.jsxs(Q,{children:[e.jsx(o,{value:"Available",children:"Available"}),e.jsx(o,{value:"Full",children:"Full"}),e.jsx(o,{value:"Cancelled",children:"Cancelled"})]})]}),i.status&&e.jsx(c,{message:i.status})]})]}),e.jsx(je,{className:"sticky bottom-0 bg-transparent pt-4",children:e.jsx(d,{type:"submit",disabled:Ae||O,className:"px-4 py-2 text-sm shadow-md flex items-center justify-center",children:Ae||O?"Creating...":"Create Program"})})]})]})]})]})]})})})}),Ne&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:e.jsx("span",{className:"block sm:inline",children:Ne})}),be&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:e.jsx("span",{className:"block sm:inline",children:be})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(u,{className:"shadow-lg border-0",children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{placeholder:"Search programs...",value:V,onChange:s=>Be(s.target.value),className:"pl-10 border-2 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ks,{className:"h-4 w-4 text-gray-500"}),e.jsxs(G,{value:Y,onValueChange:Ve,children:[e.jsx(J,{className:"w-[180px] border-2",children:e.jsx(K,{placeholder:"Filter by status"})}),e.jsxs(Q,{children:[e.jsx(o,{value:"all",children:"All Statuses"}),e.jsx(o,{value:"Active",children:"Active"}),e.jsx(o,{value:"Available",children:"Available"}),e.jsx(o,{value:"Completed",children:"Completed"}),e.jsx(o,{value:"Upcoming",children:"Upcoming"}),e.jsx(o,{value:"Cancelled",children:"Cancelled"})]})]})]})]})})})}),w.length>0&&e.jsx(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(u,{className:"shadow-lg border-0 bg-blue-50 border-blue-200",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[w.length," program",w.length>1?"s":""," selected"]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>$([]),className:"text-blue-600 hover:text-blue-700",children:"Clear selection"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(d,{variant:"outline",size:"sm",onClick:Ye,disabled:O,className:"border-red-200 text-red-700 hover:bg-red-50",children:"Archive"})})]})})})}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(u,{className:"shadow-lg border-0 overflow-hidden",children:e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ds,{children:[e.jsx(ms,{className:"bg-gray-50",children:e.jsxs(re,{children:[e.jsx(j,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:w.length===_.length&&_.length>0,onChange:We,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(j,{className:"cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>Qe("name"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Program Name",v.key==="name"&&e.jsx("span",{className:"text-gray-400",children:v.direction==="ascending"?"↑":"↓"})]})}),e.jsx(j,{children:"Description"}),e.jsx(j,{children:"Date"}),e.jsx(j,{children:"Time"}),e.jsx(j,{children:"Location"}),e.jsx(j,{children:"Slots"}),e.jsx(j,{children:"Coordinator"}),e.jsx(j,{children:"Status"}),e.jsx(j,{children:"Patients"}),e.jsx(j,{className:"text-right",children:"Actions"})]})}),e.jsx(xs,{children:O?e.jsx(re,{children:e.jsx(h,{colSpan:11,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-gray-500",children:"Loading programs..."})]})})}):_.length===0?e.jsx(re,{children:e.jsx(h,{colSpan:11,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Ie,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No programs found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})})}):_.map(s=>e.jsxs(re,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(h,{children:e.jsx("input",{type:"checkbox",checked:w.includes(s.id),onChange:()=>Xe(s.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl text-blue-700 font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx(h,{children:e.jsx("div",{className:"max-w-xs",children:e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:s.description})})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(s.date).toLocaleDateString()})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[s.startTime," - ",s.endTime]})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.location})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium",children:[s.availableSlots,"/",s.totalSlots]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(s.availableSlots/s.totalSlots*100),"% available"]})]})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:s.coordinator})]})}),e.jsx(h,{children:Ee(s.status)}),e.jsx(h,{children:e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>{I(s),Se(s.id,1),fe(!0)},className:"flex items-center gap-2 text-xs",children:[e.jsx(xe,{className:"h-3 w-3"}),"View Participants"]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>{I(s),H(!0)},title:"View program",children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsxs(hs,{children:[e.jsx(gs,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(Ls,{className:"h-4 w-4"})})}),e.jsxs(ps,{align:"end",children:[e.jsx(js,{children:"Actions"}),e.jsx(Me,{}),e.jsxs(le,{onClick:()=>{I(s),H(!0)},children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(le,{onClick:()=>ke(s),children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Edit Program"]}),e.jsx(Me,{}),s.status==="Archived"?e.jsxs(le,{onClick:()=>ee({isOpen:!0,type:"unarchive",programId:s.id}),className:"text-green-600",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(le,{onClick:()=>ee({isOpen:!0,type:"archive",programId:s.id}),className:"text-red-600",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})})]},s.id))})]})})})})}),te>1&&e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(u,{className:"shadow-lg border-0",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",pe+1," to ",Math.min(Ce,z.length)," of ",z.length," programs"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>ae(s=>Math.max(s-1,1)),disabled:se===1,className:"flex items-center gap-1",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,te)},(s,t)=>{const a=t+1;return e.jsx(d,{variant:se===a?"default":"outline",size:"sm",onClick:()=>ae(a),className:"w-8 h-8 p-0",children:a},a)})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>ae(s=>Math.min(s+1,te)),disabled:se===te,className:"flex items-center gap-1",children:"Next"})]})]})})})}),e.jsx(ie,{open:ze,onOpenChange:H,children:e.jsxs(ne,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{className:"pb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl text-blue-700 text-2xl font-bold",children:r?.name?.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx(oe,{className:"text-2xl font-bold text-gray-900",children:r?.name}),e.jsx(de,{className:"text-gray-600 mt-1",children:"Health Program Details"})]}),e.jsx("div",{className:"flex-shrink-0",children:r&&Ee(r.status)})]})}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(u,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs(y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Program Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.description})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{className:"border-0 shadow-sm",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(me,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Date & Time"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Program schedule"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date:"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:new Date(r.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Time:"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:[r.startTime," - ",r.endTime]})]})]})]})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(Oe,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Location"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Program venue"})]})]}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r.location})]})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(_e,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Capacity"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Available slots"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Slots:"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r.totalSlots})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Available:"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r.availableSlots})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${r.availableSlots/r.totalSlots*100}%`}})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Math.round(r.availableSlots/r.totalSlots*100),"% available"]})]})]})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(ue,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Coordinator"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Program manager"})]})]}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r.coordinator})]})})]})]}),e.jsx(je,{className:"pt-6 border-t",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Program ID: ",r?.id]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{variant:"outline",onClick:()=>H(!1),children:"Close"}),e.jsx(d,{className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",onClick:()=>{H(!1),ke(r)},children:"Edit Program"})]})]})})]})}),e.jsx(ie,{open:Re,onOpenChange:Z,children:e.jsxs(ne,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(oe,{className:"text-xl font-semibold",children:"Edit Health Program"}),e.jsx(de,{children:"Update the details of the selected health program."})]}),e.jsxs("form",{onSubmit:ls,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Program Name"}),e.jsx(m,{placeholder:"Enter program name",value:P.programname,onChange:s=>b("programname",s.target.value)}),n.programname&&e.jsx(c,{message:n.programname})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(m,{placeholder:"Enter program description",value:P.description,onChange:s=>b("description",s.target.value)}),n.description&&e.jsx(c,{message:n.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Date"}),e.jsx(m,{type:"date",value:P.date,onChange:s=>b("date",s.target.value)}),n.date&&e.jsx(c,{message:n.date})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Time"}),e.jsx(m,{type:"time",value:P.starttime,onChange:s=>b("starttime",s.target.value)}),n.starttime&&e.jsx(c,{message:n.starttime})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"End Time"}),e.jsx(m,{type:"time",value:P.endtime,onChange:s=>b("endtime",s.target.value)}),n.endtime&&e.jsx(c,{message:n.endtime})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(m,{placeholder:"Enter program location",value:P.location,onChange:s=>b("location",s.target.value)}),n.location&&e.jsx(c,{message:n.location})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Total Slots"}),e.jsx(m,{type:"number",placeholder:"Enter number of slots",value:P.slots,onChange:s=>b("slots",s.target.value)}),n.slots&&e.jsx(c,{message:n.slots})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Coordinator"}),e.jsxs(G,{value:P.coordinatorid,onValueChange:s=>b("coordinatorid",s),children:[e.jsx(J,{children:e.jsx(K,{placeholder:"Select coordinator"})}),e.jsx(Q,{children:F.map(s=>e.jsxs(o,{value:s.id.toString(),children:["Dr. ",s.lastname]},s.id))})]}),n.coordinatorid&&e.jsx(c,{message:n.coordinatorid})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(G,{value:P.status,onValueChange:s=>b("status",s),children:[e.jsx(J,{children:e.jsx(K,{placeholder:"Select status"})}),e.jsxs(Q,{children:[e.jsx(o,{value:"Available",children:"Available"}),e.jsx(o,{value:"Full",children:"Full"}),e.jsx(o,{value:"Active",children:"Active"}),e.jsx(o,{value:"Completed",children:"Completed"}),e.jsx(o,{value:"Upcoming",children:"Upcoming"}),e.jsx(o,{value:"Cancelled",children:"Cancelled"}),e.jsx(o,{value:"Archived",children:"Archived"})]})]}),n.status&&e.jsx(c,{message:n.status})]})]}),e.jsxs(je,{className:"sticky bottom-0 bg-transparent pt-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{Z(!1),Te(),I(null)},children:"Cancel"}),e.jsx(d,{type:"submit",disabled:De||O,className:"px-4 py-2 text-sm shadow-md flex items-center justify-center bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:De||O?"Updating...":"Update Program"})]})]})]})}),e.jsx(vs,{open:k.isOpen,onOpenChange:s=>ee({isOpen:s,type:null,programId:null}),children:e.jsxs(Ns,{className:"max-w-[400px]",children:[e.jsxs(bs,{children:[e.jsx(fs,{className:"text-lg font-semibold",children:k.type==="archive"?"Archive Program":"Unarchive Program"}),e.jsx(ys,{className:"text-gray-600",children:k.type==="archive"?"Are you sure you want to archive this program? This will remove it from the active list.":"Are you sure you want to unarchive this program? This will return it to the active list."})]}),e.jsxs(ws,{children:[e.jsx(Cs,{className:"border-gray-200 hover:bg-gray-50",children:"Cancel"}),e.jsx(Ss,{onClick:()=>{k.programId&&es(k.programId,k.type==="unarchive"),ee({isOpen:!1,type:null,programId:null})},className:`${k.type==="archive"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white`,children:k.type==="archive"?"Archive":"Unarchive"})]})]})}),e.jsx(ie,{open:qe,onOpenChange:fe,children:e.jsxs(ne,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-600"}),"Registered Participants - ",r?.name]}),e.jsx(de,{children:"View all participants registered for this health program"})]}),e.jsx("div",{className:"space-y-4",children:Je?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Loading participants..."})]}):ye.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",g.total," participants"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",g.from," to ",g.to," of ",g.total]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("div",{className:"col-span-3",children:"Name"}),e.jsx("div",{className:"col-span-2",children:"Registration ID"}),e.jsx("div",{className:"col-span-2",children:"Contact"}),e.jsx("div",{className:"col-span-2",children:"Email"}),e.jsx("div",{className:"col-span-1",children:"Age"}),e.jsx("div",{className:"col-span-1",children:"Gender"}),e.jsx("div",{className:"col-span-1",children:"Status"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:ye.map(s=>e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[e.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ue,{className:"h-4 w-4 text-blue-600"})}),e.jsx("div",{className:"min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.full_name})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:s.id})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.contact_number})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 truncate",children:s.email})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("span",{className:"text-sm text-gray-900",children:[s.age," years"]})}),e.jsx("div",{className:"col-span-1",children:e.jsx("span",{className:"text-sm text-gray-900",children:s.sex})}),e.jsx("div",{className:"col-span-1",children:e.jsx(f,{variant:"outline",className:`text-xs ${s.status==="Registered"?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:s.status})})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Registered: ",new Date(s.registered_at).toLocaleDateString()]})]})})]},s.id))})]}),g.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",g.current_page," of ",g.last_page]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>Pe(g.current_page-1),disabled:g.current_page===1,className:"flex items-center gap-1",children:[e.jsx(Os,{className:"h-4 w-4"}),"Previous"]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>Pe(g.current_page+1),disabled:g.current_page===g.last_page,className:"flex items-center gap-1",children:["Next",e.jsx(_s,{className:"h-4 w-4"})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No participants registered"}),e.jsx("p",{className:"text-gray-500",children:"This program doesn't have any registered participants yet."})]})})]})})]})})};export{ct as default};
