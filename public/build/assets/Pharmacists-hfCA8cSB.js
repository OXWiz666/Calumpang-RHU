import{q as ge,r as c,P as ue,j as e,b as B,a as q}from"./app-B9imbgwF.js";import{s as o}from"./toast-rPx_zEFY.js";import{u as fe}from"./confirmation-DcJM18Ki.js";import{B as d}from"./button-Cp6C2OJZ.js";import{I as h}from"./input-DrzP4N1f.js";import{A as W,b as G}from"./avatar-BniI04cJ.js";import{B as D}from"./badge-lpEXGIly.js";import{C as E,a as ve,b as Ne,e as ye,c as R}from"./card-Xb3yA3ez.js";import{T as be,a as we,b as M,f as u,d as Ce,e as m}from"./table2-IW2acdXR.js";import{S as Se,a as Pe,b as Ae,c as De,d as _}from"./select-DLnb01nw.js";import{D as Ee,a as Me,b as _e,c as Ie,e as Fe,d as Le}from"./dialog-DPtsGNkJ.js";import{D as Te,a as ke,b as Oe,c as Be,d as J,e as I}from"./dropdown-menu-B4goWFyD.js";import{C as Re}from"./CustomModal-ClY2Lzkf.js";import Ve from"./EditPharmacistModal-D5Zv3pD2.js";import $e from"./StaffLayout-BL-v2QbI.js";import He from"./Sidebar-BxLkhtg_.js";import{I as f}from"./InputLabel-DSK2aFnc.js";import{I as v}from"./InputError-SPm6-4qW.js";import{m as y}from"./proxy-YO7Y0R0s.js";import{D as ze}from"./download-D91pXggq.js";import{S as Ue}from"./search-DEoFfCfD.js";import{F as qe}from"./filter-C6dZ2B7Y.js";import{P as We}from"./pill-DiYduGso.js";import{E as K}from"./eye-DFa68yZm.js";import{E as Ge}from"./ellipsis-C1SfWl6j.js";import{S as Je}from"./square-pen-CBSUkHKQ.js";import{A as Ke,a as Qe}from"./archive-C2m8Uj5R.js";import{C as Xe}from"./chevron-left-B-qjJ3tn.js";import{C as Ye}from"./chevron-right-CsdLZoKQ.js";import"./Toaster-CUdt6Q1D.js";import"./toast-DTOijgLH.js";import"./index-CPfQda0F.js";import"./utils-D5ZoOHm5.js";import"./index-CPs_XpmV.js";import"./index-DXqKCwml.js";import"./index-DBY2uWYu.js";import"./refresh-cw-Pft_wMEo.js";import"./createLucideIcon-CiaC_9KA.js";import"./save-Ckpke5sM.js";import"./trash-2-Co04Ehrd.js";import"./info-CAzsqRxT.js";import"./triangle-alert-DVKExemm.js";import"./circle-x-BTBBf5Nx.js";import"./circle-check-g_8yGh_B.js";import"./alert-dialog-PYYHSG9u.js";import"./Combination-BvFtu0HL.js";import"./index-DBYg8BeE.js";import"./index-Dm9R2YI4.js";import"./index-BbMT55hN.js";import"./label-1pz5fh5X.js";import"./textarea-D1CoOFw3.js";import"./x-DhUE4RBg.js";import"./AdminLayout-BNuPrpli.js";import"./separator-DANG88ht.js";import"./moment-C5S46NFB.js";import"./popover-DA6Q4s6n.js";import"./format-Dp3w_Y3x.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./TextInput-C_S1V6wf.js";import"./settings-CRudl8-C.js";import"./house-BHa4YcxM.js";import"./calendar-BRhaHUHQ.js";import"./users-BUBR_VYh.js";import"./pusher-DqwEpbzq.js";import"./printer-GEznhNJa.js";import"./file-text-DMqEqKtg.js";import"./package-mXWpMwaL.js";import"./circle-check-big-Ben6InUX.js";import"./bell-BoCbdBVr.js";import"./index-BnacA0tQ.js";import"./autoprefixer-CwEjcAz6.js";import"./layers-CvxPgSQV.js";import"./chart-column-BK4mYYJa.js";import"./PrimaryButton-C9iWoECT.js";import"./alert-DqGwCfLI.js";import"./circle-plus-CArlvQLq.js";import"./shield-uYu_6I7_.js";import"./stethoscope-Cv5ftRE4.js";function Pa({pharmacists:F=[]}){const{flash:x}=ge().props,[Q,b]=c.useState(!1),[X,Y]=c.useState(!1),[Z,w]=c.useState(!1),[ee,V]=c.useState(!1),[n,C]=c.useState(null),{confirmArchive:se,confirmUnarchive:ae,ConfirmationDialog:te}=fe(),[N,re]=c.useState(""),[S,ie]=c.useState("all"),[P,L]=c.useState(1),[T]=c.useState(10),[Ze,es]=c.useState([]);c.useEffect(()=>{x&&x.message&&o(x.title,x.message,x.icon)},[x]);const{data:p,setData:j,post:le,processing:$,errors:i,clearErrors:ce,reset:ne}=ue({first_name:"",middlename:"",last_name:"",suffix:"",contactNumber:"",email:"",password:"",confirmPassword:"",gender:"",birth:"",isAdmin:"false",role:6}),g=F.filter(s=>{const r=s.firstname?.toLowerCase().includes(N.toLowerCase())||s.lastname?.toLowerCase().includes(N.toLowerCase())||s.email?.toLowerCase().includes(N.toLowerCase()),l=S==="all"||s.status?.toString()===S;return r&&l}),A=Math.ceil(g.length/T),k=(P-1)*T,H=k+T,z=g.slice(k,H);c.useEffect(()=>{L(1)},[N,S]);const O=s=>{Y(!1),ce(),ne()},oe=s=>{C(s),V(!0)},de=()=>{V(!1),C(null)},me=s=>{window.location.reload()},he=s=>{s.preventDefault(),le(route("admin.register"),{onSuccess:r=>{O(),o("Success!","Pharmacist has been registered successfully!","success","create"),B.reload({only:["auth"],preserveScroll:!0})}})},U=s=>{switch(s?.status){case 1:return e.jsx(D,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Active"});case 2:return e.jsx(D,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:"Inactive"});case 5:return e.jsx(D,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"Archived"});default:return e.jsx(D,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:"Active"})}},xe=async s=>{const r=F.find(a=>a.id===s),l=r?`${r.firstname} ${r.lastname}`:"Pharmacist";se(l,async()=>{try{b(!0);const a=await q.post("/admin/staff/archive",{staff_id:s});a.data.success?(o("Success!","Pharmacist archived successfully","success","archive"),B.reload()):o("Error",a.data.message||"Failed to archive pharmacist","error")}catch(a){console.error("Error archiving pharmacist:",a);const t=a.response?.data?.message||"Failed to archive pharmacist";o("Error",t,"error")}finally{b(!1)}})},pe=async s=>{const r=F.find(a=>a.id===s),l=r?`${r.firstname} ${r.lastname}`:"Pharmacist";ae(l,async()=>{try{b(!0);const a=await q.post("/admin/staff/unarchive",{staff_id:s});a.data.success?(o("Success!","Pharmacist unarchived successfully","success","unarchive"),B.reload()):o("Error",a.data.message||"Failed to unarchive pharmacist","error")}catch(a){console.error("Error unarchiving pharmacist:",a);const t=a.response?.data?.message||"Failed to unarchive pharmacist";o("Error",t,"error")}finally{b(!1)}})},je=()=>{const s=[["Pharmacist ID","Name","Email","Contact","Status","Created At"],...g.map(t=>[t.id,`${t.firstname} ${t.lastname}`,t.email,t.contactno,t.status===1?"Active":t.status===5?"Archived":"Inactive",new Date(t.created_at).toLocaleDateString()])].map(t=>t.join(",")).join(`
`),r=new Blob([s],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),a=URL.createObjectURL(r);l.setAttribute("href",a),l.setAttribute("download",`pharmacists_export_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),o("Success!","Pharmacists exported successfully!","success","export")};return e.jsxs($e,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Pharmacists"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage pharmacy staff and their responsibilities"})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-8",children:[e.jsx(He,{activeTab:"pharmacists"}),e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(E,{className:"shadow-lg border-0",children:e.jsx(ve,{children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(Ne,{className:"text-2xl font-bold text-gray-900",children:"All Pharmacists"}),e.jsx(ye,{className:"text-gray-600 mt-1",children:"Manage and configure pharmacist accounts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(d,{variant:"outline",className:"flex items-center gap-2 border-2 hover:bg-gray-50",onClick:je,children:[e.jsx(ze,{className:"h-4 w-4"}),"Export"]})})]})})})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(E,{className:"shadow-lg border-0",children:e.jsx(R,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(h,{placeholder:"Search pharmacists...",value:N,onChange:s=>re(s.target.value),className:"pl-10 border-2 focus:border-orange-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{className:"h-4 w-4 text-gray-500"}),e.jsxs(Se,{value:S,onValueChange:ie,children:[e.jsx(Pe,{className:"w-[180px] border-2",children:e.jsx(Ae,{placeholder:"Filter by status"})}),e.jsxs(De,{children:[e.jsx(_,{value:"all",children:"All Statuses"}),e.jsx(_,{value:"1",children:"Active"}),e.jsx(_,{value:"2",children:"Inactive"}),e.jsx(_,{value:"5",children:"Archived"})]})]})]})]})})})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(E,{className:"shadow-lg border-0 overflow-hidden",children:e.jsx(R,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(be,{children:[e.jsx(we,{className:"bg-gray-50",children:e.jsxs(M,{children:[e.jsx(u,{children:"ID"}),e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Contact"}),e.jsx(u,{children:"Status"}),e.jsx(u,{className:"text-right",children:"Actions"})]})}),e.jsx(Ce,{children:Q?e.jsx(M,{children:e.jsx(m,{colSpan:6,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"}),e.jsx("p",{className:"text-gray-500",children:"Loading pharmacists..."})]})})}):z.length===0?e.jsx(M,{children:e.jsx(m,{colSpan:6,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(We,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No pharmacists found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})})}):z.map(s=>e.jsxs(M,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(m,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:["PHM-",s.id]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-10 w-10",children:e.jsxs(G,{className:"bg-orange-100 text-orange-700 font-semibold",children:[s.firstname?.charAt(0),s.lastname?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstname," ",s.lastname]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Pharmacist"})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"text-sm text-gray-700",children:s.email})}),e.jsx(m,{children:e.jsx("div",{className:"text-sm text-gray-700",children:s.contactno||"Not provided"})}),e.jsx(m,{children:U(s)}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-orange-100 hover:text-orange-600",onClick:()=>{C(s),w(!0)},title:"View pharmacist",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsxs(Te,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(Ge,{className:"h-4 w-4"})})}),e.jsxs(Oe,{align:"end",children:[e.jsx(Be,{children:"Actions"}),e.jsx(J,{}),e.jsxs(I,{onClick:()=>{C(s),w(!0)},children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(I,{onClick:()=>oe(s),children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Edit Pharmacist"]}),e.jsx(J,{}),s.status===5?e.jsxs(I,{onClick:()=>pe(s.id),className:"text-green-600",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(I,{onClick:()=>xe(s.id),className:"text-red-600",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})})]},s.id))})]})})})})}),g.length>0&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(E,{className:"shadow-lg border-0",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",k+1," to ",Math.min(H,g.length)," of ",g.length," Results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>L(s=>Math.max(s-1,1)),disabled:P===1||A<=1,className:"w-8 h-8 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Xe,{className:"h-4 w-4 text-gray-500"})}),e.jsx(d,{variant:"default",size:"sm",className:"w-8 h-8 p-0 bg-gray-800 text-white hover:bg-gray-700",children:P}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>L(s=>Math.min(s+1,A)),disabled:P===A||A<=1,className:"w-8 h-8 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ye,{className:"h-4 w-4 text-gray-500"})})]})]})})})})]})]})]}),e.jsx(Re,{isOpen:X,maxWidth:"lg",onClose:O,children:e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Pharmacist"}),e.jsxs("form",{onSubmit:he,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"first_name",children:"First Name"}),e.jsx(h,{id:"first_name",value:p.first_name,onChange:s=>j("first_name",s.target.value),className:"mt-1"}),i.first_name&&e.jsx(v,{message:i.first_name})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"last_name",children:"Last Name"}),e.jsx(h,{id:"last_name",value:p.last_name,onChange:s=>j("last_name",s.target.value),className:"mt-1"}),i.last_name&&e.jsx(v,{message:i.last_name})]})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",value:p.email,onChange:s=>j("email",s.target.value),className:"mt-1"}),i.email&&e.jsx(v,{message:i.email})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(h,{id:"contactNumber",value:p.contactNumber,onChange:s=>j("contactNumber",s.target.value),className:"mt-1"}),i.contactNumber&&e.jsx(v,{message:i.contactNumber})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"password",children:"Password"}),e.jsx(h,{id:"password",type:"password",value:p.password,onChange:s=>j("password",s.target.value),className:"mt-1"}),i.password&&e.jsx(v,{message:i.password})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(h,{id:"confirmPassword",type:"password",value:p.confirmPassword,onChange:s=>j("confirmPassword",s.target.value),className:"mt-1"}),i.confirmPassword&&e.jsx(v,{message:i.confirmPassword})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:O,children:"Cancel"}),e.jsx(d,{type:"submit",disabled:$,children:$?"Creating...":"Create Pharmacist"})]})]})]})}),e.jsx(Ee,{open:Z,onOpenChange:w,children:e.jsxs(Me,{className:"sm:max-w-[600px]",children:[e.jsxs(_e,{children:[e.jsx(Ie,{className:"text-xl font-semibold",children:"Pharmacist Details"}),e.jsx(Fe,{children:"View pharmacist information and account details"})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(W,{className:"h-16 w-16",children:e.jsxs(G,{className:"bg-orange-100 text-orange-700 text-xl font-bold",children:[n.firstname?.charAt(0),n.lastname?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[n.firstname," ",n.lastname]}),e.jsx("p",{className:"text-gray-600",children:"Pharmacist"}),U(n)]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Contact Number"}),e.jsx("p",{className:"text-gray-900",children:n.contactno||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Pharmacist ID"}),e.jsxs("p",{className:"text-gray-900",children:["PHM-",n.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),e.jsx("p",{className:"text-gray-900",children:new Date(n.created_at).toLocaleDateString()})]})]})]}),e.jsx(Le,{children:e.jsx(d,{variant:"outline",onClick:()=>w(!1),children:"Close"})})]})}),e.jsx(te,{}),e.jsx(Ve,{pharmacist:n,isOpen:ee,onClose:de,onSuccess:me})]})}export{Pa as default};
