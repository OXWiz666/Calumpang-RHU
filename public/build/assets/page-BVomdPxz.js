import{a as S,j as t}from"./app-Jdp7iNzl.js";import{r}from"./vendor-DkBadjUr.js";import A from"./patient-list-sKjvrhr6.js";import C from"./patient-details-Ewebf1Bl.js";import D from"./add-patient-form-2OhHOSnd.js";import"./button-bex_LU9I.js";import{C as n,a as l,b as c,c as p}from"./card-DAZqRTBe.js";import{A as F}from"./AdminLayout-MkvFMA2D.js";import{n as h}from"./index-WHihrx3k.js";import{m as T}from"./proxy-FTaFPFFz.js";import{U as E}from"./users-D4PhO1-D.js";import{A as R}from"./activity-C-sjEU5t.js";import{C as U}from"./calendar-D9APQM2e.js";import{F as L}from"./file-text-YZXa1D2L.js";import"./pusher-DVtoYAOu.js";import"./input-NCJ_n0W_.js";import"./index-C03ciVM9.js";import"./badge-CxjsEXIx.js";import"./select-CspDrWdj.js";import"./react-icons.esm-DopY43hH.js";import"./index-B2TPyuzg.js";import"./index-CQJFG6sX.js";import"./index-CnT-AOMH.js";import"./tslib.es6-M_FJ09fS.js";import"./index-BhA1pP3R.js";import"./index-at3TdkEY.js";import"./index-DqxisvwK.js";import"./index-BuhCV9Ak.js";import"./moment-C5S46NFB.js";import"./search-Cye_TdpF.js";import"./createLucideIcon-BKWaAi2G.js";import"./phone-BScbSfjU.js";import"./map-pin-Dkn0BYKY.js";import"./eye-mxYijkrE.js";import"./tabs-Cjig8fAf.js";import"./index-BrjZbVLi.js";import"./index-lVX1eI0n.js";import"./edit-patient-form-DtUWnLOi.js";import"./label-CGwfsoC9.js";import"./textarea-hvcYZMC6.js";import"./dialog-Dbk7O2i8.js";import"./save-CAdd64LS.js";import"./MedicalHistory-UFqxGHwC.js";import"./add-medical-record-form-COomu2c4.js";import"./radio-group-BmxfiwT7.js";import"./checkbox-NMyKY7VH.js";import"./PrintErrors-DxfS_XIs.js";import"./square-pen-Bb1JtfBr.js";import"./plus-MavOGQlj.js";import"./heart-CDAohmX9.js";import"./stethoscope-QcN9KdKi.js";import"./user-3RJR1iCA.js";import"./arrow-left-DcYYnBRL.js";import"./mail-BoTx8fKY.js";import"./avatar-BAXdgfxi.js";import"./separator-G__CmUoK.js";import"./calendar--5wQtcvb.js";import"./format-Dp3w_Y3x.js";import"./isSameMonth-BOwz-_mK.js";import"./isBefore-Bnl9x5VB.js";import"./TextInput-TBYxTYyX.js";import"./x-b8JahagL.js";import"./settings-D_MeB5oN.js";import"./house-CSq-WFst.js";import"./pill-DIGxtF-3.js";import"./pusher-CXPEt_wS.js";import"./printer-CfgcPaUh.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./index-CtTJhX_Z.js";import"./autoprefixer-CS8cX4Yl.js";import"./unit-CopbpOEH.js";import"./Toaster-Cy5NJCTz.js";import"./toast-nqXen4gF.js";import"./use-toast-Dm0PN6fH.js";import"./layers-OK8ayVTK.js";import"./chart-column-yMaSKbSU.js";function oe({patients_:d,doctors:j}){const[s,x]=r.useState(d),[f,u]=r.useState(null),{flash:o}=S().props;r.useEffect(()=>{x(d)},[d]),r.useEffect(()=>{o?.success&&h.success(o.success),o?.error&&h.error(o.error)},[o]);const[V,N]=r.useState(!1),[m,a]=r.useState("list"),g=e=>{const i={...e,id:Date.now().toString(),registrationDate:new Date().toISOString().split("T")[0]};x([...s,i]),a("list"),N(!1)},w=e=>{u(e),a("details")},y=e=>{x(s.map(i=>i.id===e.id?e:i)),u(e)},b=s.length,P=s.filter(e=>e.status==="active").length,v=s.filter(e=>e.last_appointment&&new Date(e.last_appointment)>new Date(Date.now()-7*24*60*60*1e3)).length;return t.jsx(F,{header:"Patients",children:t.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t.jsx("div",{className:"bg-gray-50",children:t.jsxs("div",{className:"",children:[m==="list"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsxs(n,{children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Total Patients"}),t.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(p,{children:[t.jsx("div",{className:"text-2xl font-bold",children:b}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"All patients"})]})]}),t.jsxs(n,{children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Active Patients"}),t.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(p,{children:[t.jsx("div",{className:"text-2xl font-bold",children:P}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),t.jsxs(n,{children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Recent Visits"}),t.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(p,{children:[t.jsx("div",{className:"text-2xl font-bold",children:v}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]}),t.jsxs(n,{children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Medical Records"}),t.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(p,{children:[t.jsx("div",{className:"text-2xl font-bold",children:s.reduce((e,i)=>e+(i.medicalHistory?.length||0),0)}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total records"})]})]})]}),m==="list"&&t.jsx(A,{patients:s,onSelectPatient:w,isGuestPatients:!0}),m==="details"&&f&&t.jsx(C,{patient:f,onBack:()=>a("list"),onUpdate:y,doctors:j}),m==="add"&&t.jsx(D,{onSubmit:g,onCancel:()=>a("list")})]})})})})}export{oe as default};
