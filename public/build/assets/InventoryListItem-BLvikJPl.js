import{u as S,j as e,r as x}from"./app-CZwS2G5Y.js";import{r as n}from"./vendor-DkBadjUr.js";import{B as l}from"./badge-ChpTVm3n.js";import{B as a}from"./button-BesobgtA.js";import{C as p}from"./CustomModal-CayjtegV.js";import{I as D}from"./InputLabel-CwlKlJhS.js";import"./label-IliVNXtj.js";import{I}from"./input-BuSGIsg0.js";import{d as h}from"./dialog-Tf1FOk7X.js";import{m as g}from"./proxy-C0TaRtDf.js";import{P as M}from"./package-L7rgkkVO.js";import{T as L}from"./triangle-alert-BslwqqvL.js";import{C as U}from"./clock-D6yUBuGv.js";import{T}from"./trending-up-BFbz08q-.js";import{S as A}from"./square-pen-Bb1JtfBr.js";import{T as B}from"./trash-2-DJ5zXW8D.js";import{C as F}from"./chevron-up-BdDu7vFg.js";import{C as $}from"./chevron-down-CEiCHn75.js";import{A as z}from"./index-0fk0WGfz.js";import{f as u}from"./format-Dp3w_Y3x.js";import"./pusher-DVtoYAOu.js";import"./index-B3OEEYC6.js";import"./select-Cxat1dCU.js";import"./react-icons.esm-Bo4nchVy.js";import"./index-BL_R5CeI.js";import"./index-DWou3t1m.js";import"./index-VaCZcEHj.js";import"./tslib.es6-M_FJ09fS.js";import"./index-hcl4Lfqn.js";import"./index-Dg-CcdeN.js";import"./index-DqxisvwK.js";import"./index-C0yHodGM.js";import"./index-Bgkzuaxa.js";import"./createLucideIcon-BKWaAi2G.js";const we=({item:t,onUpdateClick:y})=>{const[i,b]=n.useState(!1),[P,q]=n.useState(!1),c=t?.stock[0]?.stocks<=5,m=t?.stocks_movement?.[t?.stocks_movement?.length-1]?.expiry_date&&new Date(t?.stocks_movement?.[t?.stocks_movement?.length-1]?.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,j=s=>{switch(s){case"Medicine":return"bg-blue-100 text-blue-800 border-blue-200";case"Vaccine":return"bg-green-100 text-green-800 border-green-200";case"Supply":return"bg-purple-100 text-purple-800 border-purple-200";case"Equipment":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},{data:f,setData:v,post:O,recentlySuccessful:V,processing:d,errors:W,put:N,delete:k}=S({itemname:t?.name,categoryid:t?.category_id}),[C,r]=n.useState(!1),[w,o]=n.useState(!1),_=s=>{s.preventDefault(),N(route("admin.inventory.item.update",{inventory:t.id}),{onFinish:()=>{x.reload({only:["flash","inventory"]})},onSuccess:()=>{o(!1)}})},E=s=>{s.preventDefault(),k(route("admin.inventory.item.delete",{inventory:t.id}),{onFinish:()=>{x.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"group transition-colors duration-200 hover:bg-gray-50",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:e.jsx(M,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold truncate text-gray-900",children:t.name}),e.jsx(l,{className:`${j(t.category.name)} border`,children:t.category.name})]}),t?.stocks_movement?.[0]?.batch_number&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Batch: "}),e.jsx("span",{className:"text-sm font-mono px-2 py-1 rounded bg-gray-100 text-gray-700",children:t?.stocks_movement?.[0]?.batch_number})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Stock:"}),e.jsxs("span",{className:`font-semibold ${c?"text-red-600":"text-gray-900"}`,children:[t.stock[0]?.stocks," ",t.stock[0]?.stockname]})]}),t?.stocks_movement?.[0]?.expiry_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Expires:"}),e.jsx("span",{className:`font-medium ${m?"text-amber-600":"text-gray-700"}`,children:u(new Date(t?.stocks_movement?.[t?.stocks_movement?.length-1]?.expiry_date),"MMM dd, yyyy")})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsxs(l,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"Low Stock"]}),m&&e.jsxs(l,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),"Expiring Soon"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-3 text-white border-0",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",onClick:()=>y(t),children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Update Stock"]}),e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-3 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600",onClick:()=>o(!0),children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-3 hover:bg-red-50 hover:border-red-300 hover:text-red-600",onClick:()=>r(!0),children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"Delete"]}),e.jsx(a,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>b(!i),children:i?e.jsx(F,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]})]}),e.jsx(z,{children:i&&e.jsx(g.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-900",children:u(new Date(t.stocks_movement[0]?.updated_at),"MMM dd, yyyy")})]}),t.isVaccine&&e.jsxs(e.Fragment,{children:[t.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Lot Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.lotNumber})]}),t.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1 text-gray-500",children:"Storage Location"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.location})]})]})]})})})]}),e.jsxs(p,{isOpen:w,onClose:()=>o(!1),title:"Update Item",description:`Update ${t?.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(D,{value:"Item Name*"}),e.jsx(I,{value:f?.itemname,onChange:s=>v("itemname",s.target.value)})]}),e.jsxs(h,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(a,{className:"text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",disabled:d,onClick:_,children:"Update Item"})]})]}),e.jsx(p,{isOpen:C,onClose:()=>r(!1),title:"Delete Item",description:`Are you sure you want to delete this item ${t?.name}?`,maxWidth:"md",children:e.jsxs(h,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(a,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:d,onClick:E,children:"Delete Item"})]})})]})};export{we as default};
