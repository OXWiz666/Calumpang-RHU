import{r as R,R as S}from"./vendor-C8lGyBmx.js";import{j as h}from"./app-cg6HAvqA.js";import{b as N}from"./index-Bo12s4d6.js";function T(e,n=[]){let c=[];function p(t,r){const s=R.createContext(r),i=c.length;c=[...c,r];const d=a=>{const{scope:v,children:I,...C}=a,u=v?.[e]?.[i]||s,l=R.useMemo(()=>C,Object.values(C));return h.jsx(u.Provider,{value:l,children:I})};d.displayName=t+"Provider";function M(a,v){const I=v?.[e]?.[i]||s,C=R.useContext(I);if(C)return C;if(r!==void 0)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[d,M]}const o=()=>{const t=c.map(r=>R.createContext(r));return function(s){const i=s?.[e]||t;return R.useMemo(()=>({[`__scope${e}`]:{...s,[e]:i}}),[s,i])}};return o.scopeName=e,[p,j(o,...n)]}function j(...e){const n=e[0];if(e.length===1)return n;const c=()=>{const p=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(t){const r=p.reduce((s,{useScope:i,scopeName:d})=>{const a=i(t)[`__scope${d}`];return{...s,...a}},{});return R.useMemo(()=>({[`__scope${n.scopeName}`]:r}),[r])}};return c.scopeName=n.scopeName,c}function P(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function w(...e){return n=>{let c=!1;const p=e.map(o=>{const t=P(o,n);return!c&&typeof t=="function"&&(c=!0),t});if(c)return()=>{for(let o=0;o<p.length;o++){const t=p[o];typeof t=="function"?t():P(e[o],null)}}}}function A(...e){return R.useCallback(w(...e),e)}function L(e){const n=e+"CollectionProvider",[c,p]=T(n),[o,t]=c(n,{collectionRef:{current:null},itemMap:new Map}),r=u=>{const{scope:l,children:_}=u,f=S.useRef(null),m=S.useRef(new Map).current;return h.jsx(o,{scope:l,itemMap:m,collectionRef:f,children:_})};r.displayName=n;const s=e+"CollectionSlot",i=N(s),d=S.forwardRef((u,l)=>{const{scope:_,children:f}=u,m=t(s,_),x=A(l,m.collectionRef);return h.jsx(i,{ref:x,children:f})});d.displayName=s;const M=e+"CollectionItemSlot",a="data-radix-collection-item",v=N(M),I=S.forwardRef((u,l)=>{const{scope:_,children:f,...m}=u,x=S.useRef(null),y=A(l,x),E=t(M,_);return S.useEffect(()=>(E.itemMap.set(x,{ref:x,...m}),()=>void E.itemMap.delete(x))),h.jsx(v,{[a]:"",ref:y,children:f})});I.displayName=M;function C(u){const l=t(e+"CollectionConsumer",u);return S.useCallback(()=>{const f=l.collectionRef.current;if(!f)return[];const m=Array.from(f.querySelectorAll(`[${a}]`));return Array.from(l.itemMap.values()).sort((E,O)=>m.indexOf(E.ref.current)-m.indexOf(O.ref.current))},[l.collectionRef,l.itemMap])}return[{Provider:r,Slot:d,ItemSlot:I},C,p]}export{L as c};
