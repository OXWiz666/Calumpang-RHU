import{r as i,j as e}from"./app-BYek28t3.js";import{B as b}from"./button-CFU6UcKA.js";import{I as y}from"./input-B0M3oF_m.js";import{C as m,a as L,b as _,c as x}from"./card-DC3m0m2Q.js";import{B as n}from"./badge-zbI-jXEX.js";import{S as h,a as u,b as j,c as f,d as l}from"./select-C5_NUKah.js";import{h as F}from"./moment-C5S46NFB.js";import{S as P}from"./search-BN9Ouy_S.js";import{P as k}from"./phone-DYxuQXh-.js";import{M as A}from"./map-pin-CK_FjD0y.js";import{C as M}from"./calendar-BrZsuCFt.js";import{E as V}from"./eye-DFHepC1z.js";import"./Subservices-hmtw6ece.js";import"./utils-RNxviqOY.js";import"./index-Cq2dcEjx.js";import"./index-OLHtNq9T.js";import"./index-B8mBpvNl.js";import"./Combination-2tzW629K.js";import"./index-Bgv3a4mK.js";import"./index-DsxiASPK.js";import"./index-oebGMNB2.js";import"./index-DZIW3V9d.js";import"./createLucideIcon-Iodx7ABU.js";function ae({patients:p,onSelectPatient:g,isGuestPatients:c=!1}){const[r,v]=i.useState(""),[d,N]=i.useState("all"),[a,w]=i.useState("all");i.useEffect(()=>{console.log("gender:",a)},[a]);const o=p.filter(s=>{const t=s?.firstname?.toLowerCase().includes(r.toLowerCase())||s?.lastname?.toLowerCase().includes(r.toLowerCase())||s?.middlename?.toLowerCase().includes(r.toLowerCase())||s?.email?.toLowerCase().includes(r.toLowerCase())||s?.contactno?.toString().toLowerCase().includes(r)||s?.phone?.toString().toLowerCase().includes(r)||s?.id?.toString().includes(r),C=d==="all"||s?.status==d,S=a==="all"||s?.gender?.toLowerCase()==a||s?.sex?.toLowerCase()==a;return t&&C&&S});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(L,{children:e.jsx(_,{children:"Search & Filter Patients"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search by id, name, or phone number:",value:r,onChange:s=>v(s.target.value),className:"pl-10"})]}),e.jsxs(h,{value:d,onValueChange:N,children:[e.jsx(u,{className:"w-full sm:w-[180px]",children:e.jsx(j,{placeholder:"Filter by status"})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(h,{value:a,onValueChange:w,children:[e.jsx(u,{className:"w-full sm:w-[180px]",children:e.jsx(j,{placeholder:"Filter by gender"})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:"All Genders"}),e.jsx(l,{value:"m",children:"Male"}),e.jsx(l,{value:"f",children:"Female"})]})]})]})})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-[minmax(0,1fr)_160px_220px_140px_100px_90px] items-center px-4 py-2 text-xs font-medium uppercase tracking-wide border rounded-md bg-accent/20 text-muted-foreground",children:[e.jsx("div",{children:"Patient"}),e.jsx("div",{children:"Phone"}),e.jsx("div",{children:"Address"}),e.jsx("div",{children:"Last Visit"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-right pr-2",children:"Action"})]}),e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_160px_220px_140px_100px_90px] items-center gap-3 rounded-lg border px-4 py-3 hover:shadow-sm transition bg-white hover:bg-accent/30",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-semibold shrink-0 ${c?"bg-blue-100 text-blue-600":"bg-primary/10 text-primary"}`,children:`${s?.firstname?.[0]??""}${s?.lastname?.[0]??""}`}),e.jsx("div",{className:"min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate text-gray-900",children:[s?.firstname," ",s?.middlename," ",s?.lastname]}),e.jsxs("div",{className:"flex gap-1",children:[(s?.gender||s?.sex)&&e.jsx(n,{variant:"outline",className:"text-[10px] px-1.5 py-0.5",children:(s.gender||s.sex)?.toLowerCase()==="m"?"Male":(s.gender||s.sex)?.toLowerCase()==="f"?"Female":s.gender||s.sex}),c&&e.jsx(n,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 bg-blue-100 text-blue-600 border-blue-200",children:"Patient"})]})]})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[160px]",children:s?.contactno||s?.phone||"Not Set"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[220px]",children:s?.email||"Not Set"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[140px]",children:c?`Appointments: ${s?.appointment_count||1}`:(()=>{const t=s?.lastVisit??s?.last_visit??s?.lastvisit;return t?F(t).format("MM-DD-YYYY"):"Not Set"})()})]}),e.jsx("div",{className:"hidden md:flex shrink-0 justify-center",children:e.jsx(n,{variant:s?.status==="active"?"default":"secondary",className:"text-[10px] px-2 py-0.5 rounded-full",children:s?.status})}),e.jsx("div",{className:"flex md:justify-end shrink-0",children:e.jsxs(b,{onClick:()=>g(s),variant:"outline",className:"h-8 px-3 text-xs",children:[e.jsx(V,{className:"h-3.5 w-3.5 mr-2"})," View"]})})]},s?.id))}),o.length===0&&e.jsx(m,{children:e.jsx(x,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{ae as default};
