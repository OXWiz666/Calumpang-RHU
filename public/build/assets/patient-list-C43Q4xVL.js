import{r as x,j as e}from"./app-CrmOXkV3.js";import{B as P}from"./button-BCFPYhF6.js";import{I as T}from"./input-B3DV-ViL.js";import{c as u,d as f,a as g,e as i}from"./card-BTPdnxed.js";import{B as v}from"./badge-B3zWRRbO.js";import{S as N,a as w,b as S,c as y,d as l}from"./select-DTOAAiiI.js";import{h as V}from"./moment-C5S46NFB.js";import{S as A}from"./search-CG2_KiKU.js";import{P as B}from"./phone-DrukXEkb.js";import{M as E}from"./map-pin-CtR3PVt3.js";import{C as I}from"./calendar-wRHcHYfJ.js";import{E as G}from"./eye-CZOfpVY6.js";import"./react-icons.esm-CiFVLb4j.js";import"./index-eTDgADzU.js";import"./index-DpmVXhiL.js";import"./index-BlbX6A03.js";import"./Combination-h7GQLXQZ.js";import"./index-DdZNoNZU.js";import"./index-DDduklnB.js";import"./index-B5u2EOKF.js";import"./createLucideIcon-7Q9LFolE.js";function cs({patients:C,onSelectPatient:b}){const[r,D]=x.useState(""),[h,F]=x.useState("all"),[c,L]=x.useState("all");x.useEffect(()=>{console.log("gender:",c)},[c]);const j=C.filter(s=>{var d,t,n;const a=(s==null?void 0:s.firstname.toLowerCase().includes(r.toLowerCase()))||(s==null?void 0:s.lastname.toLowerCase().includes(r.toLowerCase()))||((d=s==null?void 0:s.contactno)==null?void 0:d.toString().toLowerCase().includes(r))||((t=s==null?void 0:s.id)==null?void 0:t.toString().includes(r)),o=h==="all"||(s==null?void 0:s.status)==h,m=c==="all"||((n=s==null?void 0:s.gender)==null?void 0:n.toLowerCase())==c;return a&&o&&m}),M=s=>{const a=new Date,o=new Date(s);let m=a.getFullYear()-o.getFullYear();const d=a.getMonth()-o.getMonth();return(d<0||d===0&&a.getDate()<o.getDate())&&m--,m};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(f,{children:e.jsx(g,{children:"Search & Filter Patients"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Search by id, name, or phone number:",value:r,onChange:s=>D(s.target.value),className:"pl-10"})]}),e.jsxs(N,{value:h,onValueChange:F,children:[e.jsx(w,{className:"w-full sm:w-[180px]",children:e.jsx(S,{placeholder:"Filter by status"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(N,{value:c,onValueChange:L,children:[e.jsx(w,{className:"w-full sm:w-[180px]",children:e.jsx(S,{placeholder:"Filter by gender"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All Genders"}),e.jsx(l,{value:"m",children:"Male"}),e.jsx(l,{value:"f",children:"Female"})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>e.jsxs(u,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(f,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsxs(g,{className:"text-lg",children:[e.jsxs("p",{className:"",children:[s==null?void 0:s.firstname," ",s==null?void 0:s.lastname," "]}),e.jsx("p",{className:" text-muted-foreground",children:e.jsxs("small",{children:["Patient ID: ",s.id," â€¢ Age:"," ",M(s.birth)]})})]})}),e.jsx(v,{variant:(s==null?void 0:s.status)==="active"?"default":"secondary",children:s==null?void 0:s.status})]}),e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Join Date:"," ",V(s==null?void 0:s.created_at).format("MM-DD-yyyy")]})})]}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s==null?void 0:s.contactno})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:(s==null?void 0:s.address)??"Not Set"})]}),(s==null?void 0:s.lastVisit)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Last visit:"," ",new Date(s==null?void 0:s.lastVisit).toLocaleDateString()]})]}),(s==null?void 0:s.bloodType)&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(v,{variant:"outline",className:"text-xs",children:["Blood Type: ",s==null?void 0:s.bloodType]})}),e.jsxs(P,{onClick:()=>b(s),className:"w-full mt-4",variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]},s==null?void 0:s.id))}),j.length===0&&e.jsx(u,{children:e.jsx(i,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{cs as default};
