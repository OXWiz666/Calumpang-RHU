import{j as e}from"./app-BAN4jDYq.js";import"./vendor-C8lGyBmx.js";import{D as b,a as v,b as D,c as w}from"./dialog-VOBeUQ2Z.js";import{B as l}from"./badge-Dem4ScFp.js";import{C as o,a as m,b as g,c as h}from"./card-DLPDdU5w.js";import{P as N}from"./package-D--cHD_H.js";import{H as C}from"./hash-rt9HrXy8.js";import{B as S}from"./building-2--fTzshA5.js";import{C as k}from"./calendar-CgxTkju3.js";import{F as A}from"./file-text-8zq9B_j3.js";import{C as E}from"./circle-x-Ciat7cPK.js";import{C as I}from"./circle-alert-D5A-RZmA.js";import"./pusher-88Z950oj.js";import"./Combination-BBw2K79e.js";import"./index-C5Y1Y0im.js";import"./utils-Cj4zNyOk.js";import"./index-B0rSCQ1-.js";import"./createLucideIcon-CxhiR5tx.js";const J=({open:j,onClose:y,item:s})=>{if(!s)return null;const i=a=>{if(!a||a==="N/A")return!1;try{return new Date(a)<new Date}catch{return!1}},f=a=>{if(!a||a==="N/A")return!1;try{const r=new Date(a),n=Math.ceil((r-new Date)/(1e3*60*60*24));return n<=30&&n>0}catch{return!1}},p=a=>{switch(a){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";case"expiring_soon":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=a=>{switch(a){case"in_stock":return"In Stock";case"low_stock":return"Low Stock";case"out_of_stock":return"Out of Stock";case"expiring_soon":return"Expiring Soon";default:return"Unknown"}};return e.jsx(b,{open:j,onOpenChange:y,children:e.jsxs(v,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(D,{children:e.jsx(w,{className:"text-xl font-semibold text-gray-900",children:"Item Details"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(N,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.category})]})]}),e.jsx(l,{className:p(s.status),children:u(s.status)})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(g,{className:"text-base font-medium text-gray-900",children:"Basic Information"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Batches"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[s.batchCount||0," batch",(s.batchCount||0)!==1?"es":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Manufacturer"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.manufacturer||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Quantity"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[s.totalQuantity||0," ",s.unit]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Earliest Expiry"}),e.jsx("p",{className:"font-medium text-gray-900",children:(()=>{if(!s.batches||s.batches.length===0)return"N/A";const a=s.batches.reduce((r,t)=>{if(!r||t.expiryDate==="N/A"||r.expiryDate==="N/A")return t;try{const n=new Date(t.expiryDate),c=new Date(r.expiryDate);return isNaN(n.getTime())||isNaN(c.getTime())?r:n<c?t:r}catch{return r}},null);if(!a||a.expiryDate==="N/A")return"N/A";try{const r=new Date(a.expiryDate);return isNaN(r.getTime())?"Invalid Date":r.toLocaleDateString()}catch{return"Invalid Date"}})()})]})]})]}),s.description&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.description})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(g,{className:"text-base font-medium text-gray-900",children:"Stock Information"})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalQuantity||0}),e.jsx("p",{className:"text-xs text-gray-400",children:s.unit})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Minimum Level"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.minimumStock||10}),e.jsx("p",{className:"text-xs text-gray-400",children:s.unit})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Maximum Level"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.maximumStock||100}),e.jsx("p",{className:"text-xs text-gray-400",children:s.unit})]})]})})]}),s.batches&&s.batches.length>0&&(()=>{const a=s.batches.filter(t=>!i(t.expiryDate)),r=s.batches.filter(t=>i(t.expiryDate));return e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(g,{className:"text-base font-medium text-gray-900",children:["Batch Details",r.length>0&&e.jsxs("span",{className:"ml-2 text-sm text-red-600 font-normal",children:["(",r.length," expired batch",r.length!==1?"es":""," hidden)"]})]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:a.map((t,n)=>{const c=i(t.expiryDate),x=f(t.expiryDate);return e.jsxs("div",{className:`border rounded-lg p-4 ${c?"bg-red-50 border-red-200":x?"bg-amber-50 border-amber-200":"bg-gray-50"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 font-mono",children:t.batchNumber||"N/A"}),c&&e.jsxs(l,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),"EXPIRED"]}),x&&!c&&e.jsxs(l,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),"EXPIRING SOON"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantity"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[t.quantity||0," ",s.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Expiry Date"}),e.jsx("p",{className:`font-medium ${c?"text-red-600":x?"text-amber-600":"text-gray-900"}`,children:(()=>{if(!t.expiryDate||t.expiryDate==="N/A")return"N/A";try{const d=new Date(t.expiryDate);return isNaN(d.getTime())?"Invalid Date":d.toLocaleDateString()}catch{return"Invalid Date"}})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Storage Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.storageLocation||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(l,{className:p(t.status),children:u(t.status)})})]})]})]},t.id||n)})})})]})})()]})]})})};export{J as default};
