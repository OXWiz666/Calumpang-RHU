import{j as e}from"./app-Dq_Q3Qwg.js";import"./vendor-DkBadjUr.js";import{D as f,a as b,b as D,c as v}from"./dialog-BOQ1IyqS.js";import{B as c}from"./badge-KwLpf8X3.js";import{C as g,a as h,b as p,c as u}from"./card-kiyN5UMh.js";import{P as w}from"./package-L7rgkkVO.js";import{H as C}from"./hash-AgYeaIxt.js";import{B as A}from"./building-2-DmPcAwng.js";import{C as E}from"./calendar-D9APQM2e.js";import{F as I}from"./file-text-YZXa1D2L.js";import{C as S}from"./circle-x-Cf2XhiVO.js";import{C as k}from"./circle-alert-D8zT41fC.js";import"./pusher-DVtoYAOu.js";import"./react-icons.esm-B4fS-S41.js";import"./index-Cwj52g8w.js";import"./index-BLzoH2V5.js";import"./tslib.es6-M_FJ09fS.js";import"./index-CTYbBDNA.js";import"./createLucideIcon-BKWaAi2G.js";const K=({open:N,onClose:j,item:t})=>{if(!t)return null;const l=a=>{if(!a||a==="N/A")return!1;try{return new Date(a)<new Date}catch{return!1}},y=a=>{if(!a||a==="N/A")return!1;try{const r=new Date(a),n=Math.ceil((r-new Date)/(1e3*60*60*24));return n<=30&&n>0}catch{return!1}},o=a=>{switch(a){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";case"expiring_soon":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=a=>{switch(a){case"in_stock":return"In Stock";case"low_stock":return"Low Stock";case"out_of_stock":return"Out of Stock Items";case"expiring_soon":return"Expiring Soon Items";default:return"Unknown"}};return e.jsx(f,{open:N,onOpenChange:j,children:e.jsxs(b,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(D,{children:e.jsx(v,{className:"text-xl font-semibold text-gray-900",children:"Item Details"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(w,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.category?.name||"Uncategorized"})]})]}),e.jsx(c,{className:o(t.status),children:m(t.status)})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(p,{className:"text-base font-medium text-gray-900",children:"Basic Information"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Batches"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[t.batchCount||0," batch",(t.batchCount||0)!==1?"es":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Manufacturer"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.manufacturer||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Earliest Expiry"}),e.jsx("p",{className:"font-medium text-gray-900",children:(()=>{if(!t.batches||t.batches.length===0)return"N/A";const a=t.batches.reduce((r,s)=>{if(!r||s.expiryDate==="N/A"||r.expiryDate==="N/A")return s;try{const n=new Date(s.expiryDate),i=new Date(r.expiryDate);return isNaN(n.getTime())||isNaN(i.getTime())?r:n<i?s:r}catch{return r}},null);if(!a||a.expiryDate==="N/A")return"N/A";try{const r=new Date(a.expiryDate);return isNaN(r.getTime())?"Invalid Date":r.toLocaleDateString()}catch{return"Invalid Date"}})()})]})]})]}),t.description&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(I,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:t.description})]})]})]}),t.batches&&t.batches.length>0&&(()=>{const a=t.batches.filter(s=>!l(s.expiryDate)),r=t.batches.filter(s=>l(s.expiryDate));return e.jsxs(g,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(p,{className:"text-base font-medium text-gray-900",children:["Batch Details",r.length>0&&e.jsxs("span",{className:"ml-2 text-sm text-red-600 font-normal",children:["(",r.length," expired batch",r.length!==1?"es":""," hidden)"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:[a.reduce((s,n)=>s+(n.quantity||0),0)," ",t.unit||"units"]})]})]})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-3",children:a.map((s,n)=>{const i=l(s.expiryDate),d=y(s.expiryDate);return e.jsxs("div",{className:`border rounded-lg p-4 ${i?"bg-red-50 border-red-200":d?"bg-amber-50 border-amber-200":"bg-gray-50"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 font-mono",children:s.batchNumber||"N/A"}),i&&e.jsxs(c,{className:"bg-red-100 text-red-800 border-red-200 flex items-center gap-1",children:[e.jsx(S,{className:"h-3 w-3"}),"EXPIRED"]}),d&&!i&&e.jsxs(c,{className:"bg-amber-100 text-amber-800 border-amber-200 flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),"EXPIRING SOON"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Expiry Date"}),e.jsx("p",{className:`font-medium ${i?"text-red-600":d?"text-amber-600":"text-gray-900"}`,children:(()=>{if(!s.expiryDate||s.expiryDate==="N/A")return"N/A";try{const x=new Date(s.expiryDate);return isNaN(x.getTime())?"Invalid Date":x.toLocaleDateString()}catch{return"Invalid Date"}})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Storage Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.storageLocation||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantity"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[s.quantity||0," ",t.unit||"units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(c,{className:o(s.status),children:m(s.status)})})]})]})]},s.id||n)})})})]})})()]})]})})};export{K as default};
