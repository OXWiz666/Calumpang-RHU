import{r as l,q as we,b as v,P as Se,j as e}from"./app-DQkjcWN6.js";import{T as z,a as H,b as c,c as ke}from"./tabs-DTOc1Fv5.js";import{C as d,a as x,b as h,c as p}from"./card-2gxgjA1W.js";import{B as u}from"./badge-BejDsYc6.js";import{B as o}from"./button-CQXvZD0Q.js";import Ie from"./SearchBar-BGMFXZ7n.js";import Z from"./InventoryItemCard-D4MjMoAq.js";import Ae from"./StockMovementForm-BpwEvicv.js";import Me from"./ReportsPanel-DH9_4tQg.js";import Te from"./AddItemForm-D2moggAw.js";import{A as De}from"./AdminLayout-C9QXxV5U.js";import{C as L}from"./CustomModal-BbWYgwNe.js";import{I as G}from"./input-KwS1HKke.js";import{I as J}from"./InputLabel-BnpXxqRO.js";import{P as K}from"./PrimaryButton-BpHNk-fC.js";import{P as _e}from"./PrintErrors-TTR_PCyE.js";import{f as Q}from"./dialog-DzwMP3xh.js";import{F as Fe}from"./filter-B6AIk_zs.js";import{c as A}from"./createLucideIcon-ZxaBfR8v.js";import{T as Pe}from"./triangle-alert-IJofnai-.js";import{C as Le}from"./clock-LoqOoFCM.js";import{P as Ee}from"./pill-BMR7XALZ.js";import{S as Be}from"./syringe-D0jEN1Eq.js";import{S as qe}from"./stethoscope-Cg-Frpkl.js";import{P as Ue}from"./pen-P4yOaLRj.js";import{T as Oe}from"./trash-2-BGmL-cp1.js";import"./index-CXPk6WBb.js";import"./index-Clw4Qtu1.js";import"./index-e_Wq6S5Y.js";import"./index-3z2siAXX.js";import"./index-ag2-9qnh.js";import"./search-BpKeYAK7.js";import"./label-C5PzU1kc.js";import"./chevron-up-DKV-WyHA.js";import"./chevron-down-Eqbl9PcH.js";import"./format-BtYX0kVO.js";import"./select-BXN-5Q5j.js";import"./react-icons.esm-2rzneDM_.js";import"./Combination-Bqq7Dvf7.js";import"./index-CBq7bXeJ.js";import"./index-DLzZNpml.js";import"./textarea-XDuxQVOa.js";import"./popover-8p61XyxR.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./calendar-BBq0ntKQ.js";import"./file-text-Bp1OHEOo.js";import"./chart-column-B3XD1Etg.js";import"./download-B7OF1C9-.js";import"./avatar-CWREjgJ3.js";import"./separator-CgS8Oj8N.js";import"./moment-C5S46NFB.js";import"./TextInput-FHZtYQQP.js";import"./x-BYHxv64a.js";import"./settings-Bo0-Htfe.js";import"./users-BqWjxnfP.js";import"./bell-B-5Be07b.js";import"./pusher-DLuNRfDu.js";import"./layers-BBUDfUWp.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ve=A("Box",Re);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],X=A("Package",$e);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Y=A("Plus",We);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],He=A("RefreshCcw",ze),Xs=({categories:M=[],inventory:f,movements_:ee})=>{const[i,E]=l.useState([]),[y,se]=l.useState(f),[B,te]=l.useState([]),[m,r]=l.useState(f);l.useEffect(()=>{f&&(se(f),r(f))},[f]);const{flash:ae}=we().props;l.useEffect(()=>{v.reload({only:["inventory"]})},[ae]);const[le,re]=l.useState(null),[ie,q]=l.useState(!1),[ne,U]=l.useState(!1),[g,b]=l.useState(null),[j,O]=l.useState("all"),[T,R]=l.useState("All"),C=i.filter(s=>s.stock.stocks<=80),w=i.filter(s=>s.stocks_movement.expiry_date&&new Date(s.stocks_movement.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3),ce=s=>{r(s),b(null),O("all")},oe=s=>{b(s),r(y.filter(n=>n.category.id==s))};l.useEffect(()=>{m&&console.log(m)},[m]);const me=s=>{O(s),b(null),s==="all"?r(i):s==="low"?r(C):s==="expiring"?r(w):s==="master"&&(r(i),R("All"))},de=s=>{R(s),r(s==="All"?i:i.filter(n=>n.category===s))},V=s=>{re(s),q(!0)},xe=s=>{te([...B,s]),E(updatedItems),r(n=>j==="all"&&!g?updatedItems:j==="low"?updatedItems.filter(t=>t.quantity<=t.reorderThreshold):j==="expiring"?updatedItems.filter(t=>t.expirationDate&&new Date(t.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3):j==="master"?T==="All"?updatedItems:updatedItems.filter(t=>t.category===T):g?updatedItems.filter(t=>t.category===g):n.map(t=>updatedItems.find(Ce=>Ce.id===t.id)||t))},N=s=>0,[$,D]=l.useState(!1),{data:W,setData:_,post:he,processing:F,errors:pe,clearErrors:ue,put:fe,delete:je}=Se({categoryname:""});l.useEffect(()=>{ue()},[$]);const ge=s=>{s.preventDefault(),he(route("admin.inventory.category"),{onSuccess:()=>{D(!1)},onFinish:()=>{v.reload({only:["flash","categories"]})}})},[Ne,S]=l.useState(!1),[ve,k]=l.useState(!1),[a,P]=l.useState(null);l.useEffect(()=>{a&&_("categoryname",a.name)},[a]);const ye=s=>{s.preventDefault(),je(route("admin.inventory.category.delete",{category:a==null?void 0:a.id}),{onFinish:()=>{v.reload({only:["categories"]})},onSuccess:()=>{S(!1),P(null)}})},be=s=>{s.preventDefault(),fe(route("admin.inventory.category.update",{category:a==null?void 0:a.id}),{onFinish:()=>{v.reload({only:["flash","categories"]})},onSuccess:()=>{k(!1)}})};return e.jsxs(De,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Inventory"}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Advanced Filters"]}),e.jsxs(o,{className:"flex items-center gap-2",onClick:()=>U(!0),children:[e.jsx(Y,{className:"h-4 w-4"}),"Add New Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(d,{children:[e.jsx(x,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Total Items"})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:i.length})]})})]}),e.jsxs(d,{children:[e.jsx(x,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Categories"})}),e.jsx(p,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-2xl font-bold",children:M.length})})})]}),e.jsxs(d,{children:[e.jsx(x,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Low Stock Items"})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:C.length})]})})]}),e.jsxs(d,{children:[e.jsx(x,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Expiring Soon"})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Le,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsx("div",{className:"text-2xl font-bold",children:w.length})]})})]})]}),e.jsx(Ie,{items:y,onSearch:ce}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs(z,{value:j,onValueChange:me,className:"mb-6",children:[e.jsxs(H,{children:[e.jsx(c,{value:"all",children:"All Items"}),e.jsx(c,{value:"master",children:"Master List"}),e.jsxs(c,{value:"low",children:["Low Stock",C.length>0&&e.jsx(u,{variant:"destructive",className:"ml-2",children:C.length})]}),e.jsxs(c,{value:"expiring",children:["Expiring Soon",w.length>0&&e.jsx(u,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800",children:w.length})]})]}),e.jsx(ke,{value:"master",className:"mt-6",children:e.jsxs(d,{children:[e.jsx(x,{children:e.jsx(h,{className:"text-xl",children:"Master List"})}),e.jsx(p,{children:e.jsxs(z,{value:T,onValueChange:de,className:"mb-6",children:[e.jsxs(H,{className:"grid md:grid-cols-2 lg:grid-cols-5 lg w-full",children:[e.jsxs(c,{value:"All",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"All",e.jsx(u,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(c,{value:"Medicine",className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Medicines",e.jsx(u,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(c,{value:"Vaccine",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Vaccines",e.jsx(u,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(c,{value:"Equipment",className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Equipment",e.jsx(u,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(c,{value:"Supply",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Supplies",e.jsx(u,{variant:"secondary",className:"ml-1",children:N()})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.map(s=>e.jsx(Z,{item:s,onUpdateClick:V},s.id)),m.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]})})]})})]}),e.jsxs(K,{className:"flex items-center gap-2",onClick:()=>{v.reload({only:["inventory"]})},children:[e.jsx(He,{className:"h-4 w-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(d,{children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg",children:[e.jsxs("div",{className:"flex justify-between space-x-2 mt-4 md:mt-0",children:[e.jsx("div",{children:"Categories"}),e.jsxs(o,{className:"flex items-center gap-2",onClick:()=>D(!0),children:[e.jsx(Y,{className:"h-4 w-4"}),"Add"]})]}),e.jsx(L,{isOpen:$,onClose:()=>{D(!1)},title:"Add Category",description:"Add Category for Inventory.",maxWidth:"sm",children:e.jsxs("form",{onSubmit:ge,children:[e.jsx(_e,{errors:pe}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(J,{value:"Category Name:"}),e.jsx(G,{value:W.categoryname,onChange:s=>_("categoryname",s.target.value)})]}),e.jsx(K,{disabled:F,className:" self-end mt-2",type:"submit",children:"Save"})]})]})})]})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{variant:g===null?"default":"outline",className:"w-full justify-start",onClick:()=>{b(null),r(y)},children:"All Categories"}),M.map((s,n)=>e.jsx(o,{variant:g===s.id?"default":"outline",className:"w-full justify-start",onClick:()=>oe(s.id),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"flex-1 truncate text-left",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:t=>{t.preventDefault(),P(s),k(!0)},className:"p-1 text-gray-500 hover:text-blue-500 transition-colors",children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx("button",{onClick:t=>{t.preventDefault(),P(s),S(!0)},className:"p-1 text-gray-500 hover:text-red-500 transition-colors",children:e.jsx(Oe,{className:"h-4 w-4"})})]})]})},n)),e.jsx(L,{isOpen:Ne,onClose:s=>{S(!1)},title:`Deleting category ${a==null?void 0:a.name}`,description:`Are you sure you want to delete ${a==null?void 0:a.name} Category?`,maxWidth:"md",children:e.jsxs(Q,{className:"pt-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:s=>{S(!1)},children:"Cancel"}),e.jsx(o,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:F,onClick:ye,children:"Delete Category"})]})}),e.jsxs(L,{isOpen:ve,onClose:s=>{k(!1)},title:`Updating category ${a==null?void 0:a.name}`,description:`Update ${a==null?void 0:a.name} Category here.`,maxWidth:"md",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(J,{value:"Category Name:"}),e.jsx(G,{value:W.categoryname,onChange:s=>_("categoryname",s.target.value)})]}),e.jsxs(Q,{className:"pt-4",children:[e.jsx(o,{variant:"outline",onClick:s=>{k(!1)},children:"Cancel"}),e.jsx(o,{className:"bg-primary hover:bg-primary/90",disabled:F,onClick:be,children:"Update Category"})]})]})]})})]}),e.jsxs(d,{className:"mt-6",children:[e.jsx(x,{children:e.jsx(h,{className:"text-lg",children:"Recent Activity"})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:B.slice(0,5).map((s,n)=>{const t=i.find(I=>(I==null?void 0:I.id)===(s==null?void 0:s.itemId));return e.jsxs("div",{className:"border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("p",{className:"font-medium",children:[s.type==="incoming"?"Added":"Removed"," ",s.quantity," ",t==null?void 0:t.unit,"s of"," ",t==null?void 0:t.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.performedBy," on"," ",new Date(s.date).toLocaleDateString()]})]},n)})})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:j!=="master"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.map(s=>e.jsx(Z,{item:s,onUpdateClick:V},s.id)),m.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Me,{items:y,movements:ee})}),e.jsx(Ae,{open:ie,onClose:()=>q(!1),item:le,onSave:xe}),e.jsx(Te,{open:ne,onClose:()=>U(!1),onSave:s=>{E([...i,s]),r([...i,s])},categories_:M})]})};export{Xs as default};
