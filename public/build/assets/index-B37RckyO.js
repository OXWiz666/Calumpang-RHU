import{r as a}from"./app-CeIgF_ON.js";function A(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function E(...n){return e=>{let t=!1;const o=n.map(r=>{const i=A(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<o.length;r++){const i=o[r];typeof i=="function"?i():A(n[r],null)}}}}function T(...n){return a.useCallback(E(...n),n)}var g=globalThis?.document?a.useLayoutEffect:()=>{};function R(n,e){return a.useReducer((t,o)=>e[t][o]??t,n)}var h=n=>{const{present:e,children:t}=n,o=v(e),r=typeof t=="function"?t({present:o.isPresent}):a.Children.only(t),i=T(o.ref,P(r));return typeof t=="function"||o.isPresent?a.cloneElement(r,{ref:i}):null};h.displayName="Presence";function v(n){const[e,t]=a.useState(),o=a.useRef(null),r=a.useRef(n),i=a.useRef("none"),N=n?"mounted":"unmounted",[p,u]=R(N,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const s=d(o.current);i.current=p==="mounted"?s:"none"},[p]),g(()=>{const s=o.current,l=r.current;if(l!==n){const m=i.current,c=d(s);n?u("MOUNT"):c==="none"||s?.display==="none"?u("UNMOUNT"):u(l&&m!==c?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,u]),g(()=>{if(e){let s;const l=e.ownerDocument.defaultView??window,f=c=>{const M=d(o.current).includes(CSS.escape(c.animationName));if(c.target===e&&M&&(u("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",s=l.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},m=c=>{c.target===e&&(i.current=d(o.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{l.clearTimeout(s),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:a.useCallback(s=>{o.current=s?getComputedStyle(s):null,t(s)},[])}}function d(n){return n?.animationName||"none"}function P(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{h as P};
