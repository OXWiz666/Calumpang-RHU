import{r,q as Ee,b,P as Me,j as e}from"./app-9IFjvyjq.js";import{T as J,a as K,b as d,c as Ae}from"./tabs-B5MwLVSX.js";import{C as x,a as h,b as p,c as u}from"./card-BZqhk5Ws.js";import{B as g}from"./badge-Da4cSqJP.js";import{B as o}from"./button-BWLYpXz0.js";import Te from"./SearchBar-u-zlwF0v.js";import De from"./InventoryItemCard-Dutzejgu.js";import Le from"./InventoryListItem-CiHgl40U.js";import Fe from"./StockMovementForm-CgnLkYNj.js";import Pe from"./ReportsPanel-lJtWgpYi.js";import _e from"./AddItemForm-gOoZ8xei.js";import{A as Be}from"./AdminLayout-B1EVrWwj.js";import{C as B}from"./CustomModal-B_1zsoCZ.js";import{I as Q}from"./input-fLU5VnAr.js";import{I as X}from"./InputLabel-DLivDGoa.js";import{P as Y}from"./PrimaryButton-B7Xo7hc8.js";import{P as Ue}from"./PrintErrors-XsOiaV-u.js";import{d as ee}from"./dialog-BlSttdnZ.js";import{F as qe}from"./filter-ppKoOxkI.js";import{P as se}from"./plus-C1hjROq8.js";import{m as A}from"./proxy-D62Q3uN7.js";import{P as C}from"./package-CHcp06gv.js";import{A as te}from"./activity-Dgiqecz8.js";import{T as Oe}from"./triangle-alert-BkHbl9Bl.js";import{T as Re}from"./trending-down-Df83Rv-z.js";import{C as ae}from"./clock-Bzel8gwe.js";import{P as Ve}from"./pill-D1Lo51NR.js";import{S as $e}from"./syringe-BUXfkPLU.js";import{S as We}from"./stethoscope-rIlb409y.js";import{c as re}from"./createLucideIcon-DsPw26Nq.js";import{P as He}from"./pen-DDj_tJDP.js";import{T as Ze}from"./trash-2-vvbptI_1.js";import"./index-B9uMoLSe.js";import"./index-5FqUdhJW.js";import"./utils-Dqxj4mrw.js";import"./index-ZSsit5F4.js";import"./index-DMLVHKle.js";import"./index-iJsz53jB.js";import"./index-C6jRhQFj.js";import"./search-CCpMc_T5.js";import"./index-BkKJZgfk.js";import"./hash-C86GkOge.js";import"./tag-BMBBnWNd.js";import"./label-C2QZitaL.js";import"./chevron-up-92Sj5s40.js";import"./chevron-down-C4FOIhdo.js";import"./trending-up-_LM6MF-k.js";import"./square-pen-Dnx_Ff5r.js";import"./format-BtYX0kVO.js";import"./select-p8YEwkY-.js";import"./react-icons.esm-CBUbwQJY.js";import"./Combination-BD7y2hDp.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./textarea-COBWyWer.js";import"./calendar-DQr9f7aC.js";import"./file-text-2oyp6bUV.js";import"./user-D9cpmg_I.js";import"./popover-D55FYzXF.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./chart-column-Bqapy0n2.js";import"./download-QcLop-d6.js";import"./avatar-eTivO2nx.js";import"./separator-Ck3s5O1g.js";import"./moment-C5S46NFB.js";import"./TextInput-VzTatbZ2.js";import"./x-QWiAXd0n.js";import"./settings-RhmjAov2.js";import"./house-3fFlpYPo.js";import"./users-CRZKArp7.js";import"./bell-Oyzr8Ilp.js";import"./autoprefixer-CLq4rudv.js";import"./pusher-Dk5bIoJZ.js";import"./layers-CYkgeNxD.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ge=re("Box",ze);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Ke=re("RefreshCcw",Je),jt=({categories:T=[],inventory:n,movements_:le})=>{const[f,U]=r.useState([]),[j,ie]=r.useState(n),[q,ne]=r.useState([]),[c,l]=r.useState(n);r.useEffect(()=>{n&&(ie(n),l(n),console.log("inventory:",n))},[n]);const{flash:oe}=Ee().props;r.useEffect(()=>{b.reload({only:["inventory"]})},[oe]);const[ce,de]=r.useState(null),[me,O]=r.useState(!1),[xe,R]=r.useState(!1),[N,w]=r.useState(null),[y,V]=r.useState("all"),[D,$]=r.useState("All"),k=n.filter(s=>s.stock[0].stocks<=5),S=j.filter(s=>{var i,t,m,M,z,G;return((m=(t=s==null?void 0:s.stocks_movement)==null?void 0:t[((i=s==null?void 0:s.stocks_movement)==null?void 0:i.length)-1])==null?void 0:m.expiry_date)&&new Date((G=(z=s==null?void 0:s.stocks_movement)==null?void 0:z[((M=s==null?void 0:s.stocks_movement)==null?void 0:M.length)-1])==null?void 0:G.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3}),he=s=>{l(s),w(null),V("all")},pe=s=>{w(s),l(j.filter(i=>i.category.id==s))};r.useEffect(()=>{c&&console.log(c)},[c]);const ue=s=>{V(s),w(null),s==="all"?l(j):s==="low"?l(k):s==="expiring"?l(S):s==="master"&&(l(f),$("All"))},ge=s=>{$(s),l(s==="All"?f:f.filter(i=>i.category===s))},W=s=>{de(s),O(!0)},fe=s=>{ne([...q,s]),U(updatedItems),l(i=>y==="all"&&!N?updatedItems:y==="low"?updatedItems.filter(t=>t.quantity<=t.reorderThreshold):y==="expiring"?updatedItems.filter(t=>t.expirationDate&&new Date(t.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3):y==="master"?D==="All"?updatedItems:updatedItems.filter(t=>t.category===D):N?updatedItems.filter(t=>t.category===N):i.map(t=>updatedItems.find(M=>M.id===t.id)||t))},v=s=>0,[H,L]=r.useState(!1),{data:Z,setData:F,post:je,processing:P,errors:ye,clearErrors:Ne,put:ve,delete:be}=Me({categoryname:""});r.useEffect(()=>{Ne()},[H]);const Ce=s=>{s.preventDefault(),je(route("admin.inventory.category"),{onSuccess:()=>{L(!1)},onFinish:()=>{b.reload({only:["flash","categories"]})}})},[we,I]=r.useState(!1),[ke,E]=r.useState(!1),[a,_]=r.useState(null);r.useEffect(()=>{a&&F("categoryname",a.name)},[a]);const Se=s=>{s.preventDefault(),be(route("admin.inventory.category.delete",{category:a==null?void 0:a.id}),{onFinish:()=>{b.reload({only:["categories"]})},onSuccess:()=>{I(!1),_(null)}})},Ie=s=>{s.preventDefault(),ve(route("admin.inventory.category.update",{category:a==null?void 0:a.id}),{onFinish:()=>{b.reload({only:["flash","categories"]})},onSuccess:()=>{E(!1)}})};return e.jsxs(Be,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Inventory"}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Advanced Filters"]}),e.jsxs(o,{className:"flex items-center gap-2 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",onClick:()=>R(!0),children:[e.jsx(se,{className:"h-4 w-4"}),"Add New Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs(x,{className:"hover:shadow-md transition-all duration-300 border-gray-100 hover:shadow-gray-200/50",children:[e.jsx(h,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium flex items-center gap-2 text-gray-600",children:[e.jsx(C,{className:"h-4 w-4"}),"Total Items"]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.length}),e.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:e.jsx(C,{className:"h-6 w-6 text-blue-600"})})]})})]})}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(x,{className:"hover:shadow-md transition-shadow duration-200 border-gray-100",children:[e.jsx(h,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Categories"]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:T.length}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(te,{className:"h-6 w-6 text-green-600"})})]})})]})}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(x,{className:"hover:shadow-md transition-all duration-300 border-gray-100 hover:shadow-gray-200/50",children:[e.jsx(h,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium flex items-center gap-2 text-gray-600",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Low Stock Items"]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-600",children:k.length}),e.jsx("div",{className:"p-3 rounded-lg bg-amber-50",children:e.jsx(Re,{className:"h-6 w-6 text-amber-600"})})]})})]})}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsxs(x,{className:"hover:shadow-md transition-all duration-300 border-gray-100 hover:shadow-gray-200/50",children:[e.jsx(h,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium flex items-center gap-2 text-gray-600",children:[e.jsx(ae,{className:"h-4 w-4"}),"Expiring Soon"]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:S.length}),e.jsx("div",{className:"p-3 rounded-lg bg-red-50",children:e.jsx(ae,{className:"h-6 w-6 text-red-600"})})]})})]})})]}),e.jsx(Te,{items:j,onSearch:he}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs(J,{value:y,onValueChange:ue,className:"mb-6",children:[e.jsxs(K,{className:"bg-white border-gray-200",children:[e.jsx(d,{value:"all",children:"Master List"}),e.jsxs(d,{value:"low",children:["Low Stock",k.length>0&&e.jsx(g,{variant:"destructive",className:"ml-2",children:k.length})]}),e.jsxs(d,{value:"expiring",children:["Expiring Soon",S.length>0&&e.jsx(g,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800",children:S.length})]})]}),e.jsx(Ae,{value:"master",className:"mt-6",children:e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(p,{className:"text-xl",children:"Master List"})}),e.jsx(u,{children:e.jsxs(J,{value:D,onValueChange:ge,className:"mb-6",children:[e.jsxs(K,{className:"grid md:grid-cols-2 lg:grid-cols-5 lg w-full",children:[e.jsxs(d,{value:"All",className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"All",e.jsx(g,{variant:"secondary",className:"ml-1",children:v()})]}),e.jsxs(d,{value:"Medicine",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Medicines",e.jsx(g,{variant:"secondary",className:"ml-1",children:v()})]}),e.jsxs(d,{value:"Vaccine",className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"Vaccines",e.jsx(g,{variant:"secondary",className:"ml-1",children:v()})]}),e.jsxs(d,{value:"Equipment",className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Equipment",e.jsx(g,{variant:"secondary",className:"ml-1",children:v()})]}),e.jsxs(d,{value:"Supply",className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Supplies",e.jsx(g,{variant:"secondary",className:"ml-1",children:v()})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.map(s=>e.jsx(De,{item:s,onUpdateClick:W},s.id)),c.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]})})]})})]}),e.jsxs(Y,{className:"flex items-center gap-2",onClick:()=>{b.reload({only:["inventory"]})},children:[e.jsx(Ke,{className:"h-4 w-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(p,{className:"text-lg",children:[e.jsxs("div",{className:"flex justify-between space-x-2 mt-4 md:mt-0",children:[e.jsx("div",{children:"Categories"}),e.jsxs(o,{className:"flex items-center gap-2 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",onClick:()=>L(!0),children:[e.jsx(se,{className:"h-4 w-4"}),"Add"]})]}),e.jsx(B,{isOpen:H,onClose:()=>{L(!1)},title:"Add Category",description:"Add Category for Inventory.",maxWidth:"sm",children:e.jsxs("form",{onSubmit:Ce,children:[e.jsx(Ue,{errors:ye}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(X,{value:"Category Name:"}),e.jsx(Q,{value:Z.categoryname,onChange:s=>F("categoryname",s.target.value)})]}),e.jsx(Y,{disabled:P,className:"self-end mt-2 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",type:"submit",children:"Save"})]})]})})]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{variant:N===null?"default":"outline",className:"w-full justify-start",onClick:()=>{w(null),l(j)},children:"All Categories"}),T.map((s,i)=>e.jsx(o,{variant:N===s.id?"default":"outline",className:"w-full justify-start",onClick:()=>pe(s.id),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"flex-1 truncate text-left",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:t=>{t.preventDefault(),_(s),E(!0)},className:"p-1 text-gray-500 hover:text-blue-500 transition-colors",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx("button",{onClick:t=>{t.preventDefault(),_(s),I(!0)},className:"p-1 text-gray-500 hover:text-red-500 transition-colors",children:e.jsx(Ze,{className:"h-4 w-4"})})]})]})},i)),e.jsx(B,{isOpen:we,onClose:s=>{I(!1)},title:`Deleting category ${a==null?void 0:a.name}`,description:`Are you sure you want to delete ${a==null?void 0:a.name} Category?`,maxWidth:"md",children:e.jsxs(ee,{className:"pt-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:s=>{I(!1)},children:"Cancel"}),e.jsx(o,{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white",disabled:P,onClick:Se,children:"Delete Category"})]})}),e.jsxs(B,{isOpen:ke,onClose:s=>{E(!1)},title:`Updating category ${a==null?void 0:a.name}`,description:`Update ${a==null?void 0:a.name} Category here.`,maxWidth:"md",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(X,{value:"Category Name:"}),e.jsx(Q,{value:Z.categoryname,onChange:s=>F("categoryname",s.target.value)})]}),e.jsxs(ee,{className:"pt-4",children:[e.jsx(o,{variant:"outline",onClick:s=>{E(!1)},children:"Cancel"}),e.jsx(o,{className:"text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",disabled:P,onClick:Ie,children:"Update Category"})]})]})]})})]}),e.jsxs(x,{className:"mt-6",children:[e.jsx(h,{children:e.jsx(p,{className:"text-lg",children:"Recent Activity"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:q.slice(0,5).map((s,i)=>{const t=f.find(m=>(m==null?void 0:m.id)===(s==null?void 0:s.itemId));return e.jsxs("div",{className:"border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("p",{className:"font-medium",children:[s.type==="incoming"?"Added":"Removed"," ",s.quantity," ",t==null?void 0:t.unit,"s of"," ",t==null?void 0:t.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.performedBy," on"," ",new Date(s.date).toLocaleDateString()]})]},i)})})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:y!=="master"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Inventory Items"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.length," items"]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:c.length>0?c.map(s=>e.jsx(Le,{item:s,onUpdateClick:W},s.id)):e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(C,{className:"h-12 w-12 text-gray-300"}),e.jsx("div",{className:"font-medium text-gray-500",children:"No items found"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Try adjusting your search or filter criteria"})]})})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Pe,{items:j,movements:le})}),e.jsx(Fe,{open:me,onClose:()=>O(!1),item:ce,onSave:fe}),e.jsx(_e,{open:xe,onClose:()=>R(!1),onSave:s=>{U([...f,s]),l([...f,s])},categories:T})]})};export{jt as default};
