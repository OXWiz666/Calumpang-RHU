import{r as n,j as g,e as V}from"./app-9IFjvyjq.js";import{c as z}from"./index-5FqUdhJW.js";import{u as q}from"./index-ZSsit5F4.js";import{P as M}from"./index-DMLVHKle.js";function w(e,t,{checkForDefaultPrevented:o=!0}={}){return function(c){if(e==null||e(c),o===!1||!c.defaultPrevented)return t==null?void 0:t(c)}}function G(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function J(...e){return t=>{let o=!1;const r=e.map(c=>{const s=G(c,t);return!o&&typeof s=="function"&&(o=!0),s});if(o)return()=>{for(let c=0;c<r.length;c++){const s=r[c];typeof s=="function"?s():G(e[c],null)}}}}function Q(...e){return n.useCallback(J(...e),e)}function W(e,t=[]){let o=[];function r(s,u){const i=n.createContext(u),m=o.length;o=[...o,u];const p=l=>{var b;const{scope:d,children:R,...C}=l,F=((b=d==null?void 0:d[e])==null?void 0:b[m])||i,f=n.useMemo(()=>C,Object.values(C));return g.jsx(F.Provider,{value:f,children:R})};p.displayName=s+"Provider";function a(l,d){var F;const R=((F=d==null?void 0:d[e])==null?void 0:F[m])||i,C=n.useContext(R);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[p,a]}const c=()=>{const s=o.map(u=>n.createContext(u));return function(i){const m=(i==null?void 0:i[e])||s;return n.useMemo(()=>({[`__scope${e}`]:{...i,[e]:m}}),[i,m])}};return c.scopeName=e,[r,X(c,...t)]}function X(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const r=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(s){const u=r.reduce((i,{useScope:m,scopeName:p})=>{const l=m(s)[`__scope${p}`];return{...i,...l}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:u}),[u])}};return o.scopeName=t.scopeName,o}function Z(e){const t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...o)=>{var r;return(r=t.current)==null?void 0:r.call(t,...o)},[])}var H=globalThis!=null&&globalThis.document?n.useLayoutEffect:()=>{},ee=V[" useInsertionEffect ".trim().toString()]||H;function te({prop:e,defaultProp:t,onChange:o=()=>{},caller:r}){const[c,s,u]=oe({defaultProp:t,onChange:o}),i=e!==void 0,m=i?e:c;{const a=n.useRef(e!==void 0);n.useEffect(()=>{const l=a.current;l!==i&&console.warn(`${r} is changing from ${l?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),a.current=i},[i,r])}const p=n.useCallback(a=>{var l;if(i){const d=ne(a)?a(e):a;d!==e&&((l=u.current)==null||l.call(u,d))}else s(a)},[i,e,s,u]);return[m,p]}function oe({defaultProp:e,onChange:t}){const[o,r]=n.useState(e),c=n.useRef(o),s=n.useRef(t);return ee(()=>{s.current=t},[t]),n.useEffect(()=>{var u;c.current!==o&&((u=s.current)==null||u.call(s,o),c.current=o)},[o,c]),[o,r,s]}function ne(e){return typeof e=="function"}var re=n.createContext(void 0);function ce(e){const t=n.useContext(re);return e||t||"ltr"}var _="rovingFocusGroup.onEntryFocus",se={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[P,N,ue]=z(h),[ie,Se]=W(h,[ue]),[ae,fe]=ie(h),O=n.forwardRef((e,t)=>g.jsx(P.Provider,{scope:e.__scopeRovingFocusGroup,children:g.jsx(P.Slot,{scope:e.__scopeRovingFocusGroup,children:g.jsx(le,{...e,ref:t})})}));O.displayName=h;var le=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:r,loop:c=!1,dir:s,currentTabStopId:u,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:m,onEntryFocus:p,preventScrollOnEntryFocus:a=!1,...l}=e,d=n.useRef(null),R=Q(t,d),C=ce(s),[F,f]=te({prop:u,defaultProp:i??null,onChange:m,caller:h}),[b,E]=n.useState(!1),I=Z(p),S=N(o),T=n.useRef(!1),[U,A]=n.useState(0);return n.useEffect(()=>{const v=d.current;if(v)return v.addEventListener(_,I),()=>v.removeEventListener(_,I)},[I]),g.jsx(ae,{scope:o,orientation:r,dir:C,loop:c,currentTabStopId:F,onItemFocus:n.useCallback(v=>f(v),[f]),onItemShiftTab:n.useCallback(()=>E(!0),[]),onFocusableItemAdd:n.useCallback(()=>A(v=>v+1),[]),onFocusableItemRemove:n.useCallback(()=>A(v=>v-1),[]),children:g.jsx(M.div,{tabIndex:b||U===0?-1:0,"data-orientation":r,...l,ref:R,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{T.current=!0}),onFocus:w(e.onFocus,v=>{const k=!T.current;if(v.target===v.currentTarget&&k&&!b){const D=new CustomEvent(_,se);if(v.currentTarget.dispatchEvent(D),!D.defaultPrevented){const y=S().filter(x=>x.focusable),$=y.find(x=>x.active),B=y.find(x=>x.id===F),Y=[$,B,...y].filter(Boolean).map(x=>x.ref.current);L(Y,a)}}T.current=!1}),onBlur:w(e.onBlur,()=>E(!1))})})}),j="RovingFocusGroupItem",K=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:r=!0,active:c=!1,tabStopId:s,children:u,...i}=e,m=q(),p=s||m,a=fe(j,o),l=a.currentTabStopId===p,d=N(o),{onFocusableItemAdd:R,onFocusableItemRemove:C,currentTabStopId:F}=a;return n.useEffect(()=>{if(r)return R(),()=>C()},[r,R,C]),g.jsx(P.ItemSlot,{scope:o,id:p,focusable:r,active:c,children:g.jsx(M.span,{tabIndex:l?0:-1,"data-orientation":a.orientation,...i,ref:t,onMouseDown:w(e.onMouseDown,f=>{r?a.onItemFocus(p):f.preventDefault()}),onFocus:w(e.onFocus,()=>a.onItemFocus(p)),onKeyDown:w(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){a.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const b=pe(f,a.orientation,a.dir);if(b!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let I=d().filter(S=>S.focusable).map(S=>S.ref.current);if(b==="last")I.reverse();else if(b==="prev"||b==="next"){b==="prev"&&I.reverse();const S=I.indexOf(f.currentTarget);I=a.loop?ve(I,S+1):I.slice(S+1)}setTimeout(()=>L(I))}}),children:typeof u=="function"?u({isCurrentTabStop:l,hasTabStop:F!=null}):u})})});K.displayName=j;var de={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function me(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function pe(e,t,o){const r=me(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return de[r]}function L(e,t=!1){const o=document.activeElement;for(const r of e)if(r===o||(r.focus({preventScroll:t}),document.activeElement!==o))return}function ve(e,t){return e.map((o,r)=>e[(t+r)%e.length])}var ge=O,xe=K;export{xe as I,ge as R,Se as c};
