import{r as A,j as e,b as w}from"./app-B9imbgwF.js";import{B as y}from"./button-Cp6C2OJZ.js";import{I as n}from"./input-DrzP4N1f.js";import{L as r}from"./label-1pz5fh5X.js";import{T as b}from"./textarea-D1CoOFw3.js";import{C as o,a as m,b as h,e as C,c as x}from"./card-Xb3yA3ez.js";import{S as j,a as u,b as g,c as p,d as t}from"./select-DLnb01nw.js";import{D as O,a as D,b as T,c as I}from"./dialog-DPtsGNkJ.js";import{X as z}from"./x-DhUE4RBg.js";import{m as P}from"./proxy-YO7Y0R0s.js";import{S as _}from"./save-Ckpke5sM.js";import"./utils-D5ZoOHm5.js";import"./index-CPfQda0F.js";import"./index-CPs_XpmV.js";import"./Combination-BvFtu0HL.js";import"./index-DBYg8BeE.js";import"./index-Dm9R2YI4.js";import"./index-DBY2uWYu.js";import"./index-DXqKCwml.js";import"./createLucideIcon-CiaC_9KA.js";function se({patient:l,onCancel:v,onSubmit:f,isOpen:S=!0}){const N=l?.id?.startsWith("PAT_"),[a,F]=A.useState({firstName:l.firstname||"",middleName:l.middlename||"",lastName:l.lastname||"",dateOfBirth:N?l.date_of_birth:l.birth,gender:l?.gender||l?.sex||"",phoneNumber:l.contactno||l.phone||"",email:l.email||"",status:l.status||"active",civilStatus:l.civil_status||"",nationality:l.nationality||"",religion:l.religion||"",country:l.country||"",region:l.region||"",province:l.province||"",city:l.city||"",barangay:l.barangay||"",street:l.street||"",zipCode:l.zip_code||"",address:l.address||"",bloodType:l.bloodtype||"",allergies:l.allergies?.join(", ")||"",medications:l.medications?.join(", ")||""}),B=s=>{s.preventDefault();const c={firstname:a.firstName,middlename:a.middleName,lastname:a.lastName,email:a.email,status:a.status,...N?{date_of_birth:a.dateOfBirth,gender:a.gender,phone:a.phoneNumber,contactno:a.phoneNumber,civil_status:a.civilStatus,nationality:a.nationality,religion:a.religion,country:a.country,region:a.region,province:a.province,city:a.city,barangay:a.barangay,street:a.street,zip_code:a.zipCode}:{birth:a.dateOfBirth,sex:a.gender,contactno:a.phoneNumber,address:a.address},bloodtype:a.bloodType,allergies:a.allergies?a.allergies.split(",").map(d=>d.trim()):[],medications:a.medications?a.medications.split(",").map(d=>d.trim()):[]};w.put(`/auth/patients/${l.id}`,c,{onSuccess:()=>{f({...l,...c})},onError:d=>{console.error("Update failed:",d)}})},i=(s,c)=>{F(d=>({...d,[s]:c}))};return e.jsx(O,{open:S,onOpenChange:v,children:e.jsxs(D,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(T,{children:e.jsxs(I,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Edit Patient"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update patient information"})]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:v,className:"h-8 w-8 p-0",children:e.jsx(z,{className:"h-4 w-4"})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"px-1",children:e.jsx("div",{className:"space-y-3 pb-0",children:e.jsxs("form",{onSubmit:B,className:"space-y-3 mb-0",children:[e.jsxs(o,{children:[e.jsxs(m,{className:"pb-3",children:[e.jsx(h,{className:"text-lg",children:"Basic Information"}),e.jsx(C,{className:"text-sm",children:"Patient's personal details"})]}),e.jsxs(x,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"firstName",children:"First Name *"}),e.jsx(n,{id:"firstName",value:a.firstName,onChange:s=>i("firstName",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"middleName",children:"Middle Name"}),e.jsx(n,{id:"middleName",value:a.middleName,onChange:s=>i("middleName",s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(n,{id:"lastName",value:a.lastName,onChange:s=>i("lastName",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(n,{id:"dateOfBirth",type:"date",value:a.dateOfBirth,onChange:s=>i("dateOfBirth",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"gender",children:"Gender *"}),e.jsxs(j,{value:a.gender,onValueChange:s=>i("gender",s),children:[e.jsx(u,{children:e.jsx(g,{placeholder:"Select gender"})}),e.jsxs(p,{children:[e.jsx(t,{value:"M",children:"Male"}),e.jsx(t,{value:"F",children:"Female"}),e.jsx(t,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(n,{id:"phoneNumber",value:a.phoneNumber,onChange:s=>i("phoneNumber",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:a.email,onChange:s=>i("email",s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(j,{value:a.status,onValueChange:s=>i("status",s),children:[e.jsx(u,{children:e.jsx(g,{})}),e.jsxs(p,{children:[e.jsx(t,{value:"active",children:"Active"}),e.jsx(t,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-1 md:col-span-2",children:[e.jsx(r,{htmlFor:"address",children:"Address *"}),e.jsx(b,{id:"address",value:a.address,onChange:s=>i("address",s.target.value),required:!N,className:"min-h-[60px] max-h-[80px]",rows:3})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"pb-3",children:[e.jsx(h,{className:"text-lg",children:"Personal Information"}),e.jsx(C,{className:"text-sm",children:"Additional personal details"})]}),e.jsxs(x,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"civilStatus",children:"Civil Status"}),e.jsxs(j,{value:a.civilStatus,onValueChange:s=>i("civilStatus",s),children:[e.jsx(u,{children:e.jsx(g,{placeholder:"Select civil status"})}),e.jsxs(p,{children:[e.jsx(t,{value:"Single",children:"Single"}),e.jsx(t,{value:"Married",children:"Married"}),e.jsx(t,{value:"Widowed",children:"Widowed"}),e.jsx(t,{value:"Divorced",children:"Divorced"}),e.jsx(t,{value:"Separated",children:"Separated"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"nationality",children:"Nationality"}),e.jsx(n,{id:"nationality",value:a.nationality,onChange:s=>i("nationality",s.target.value),placeholder:"e.g., Filipino"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"religion",children:"Religion"}),e.jsx(n,{id:"religion",value:a.religion,onChange:s=>i("religion",s.target.value),placeholder:"e.g., Catholic"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"country",children:"Country"}),e.jsx(n,{id:"country",value:a.country,onChange:s=>i("country",s.target.value),placeholder:"e.g., Philippines"})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"pb-3",children:[e.jsx(h,{className:"text-lg",children:"Address Information"}),e.jsx(C,{className:"text-sm",children:"Complete address details"})]}),e.jsxs(x,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"region",children:"Region"}),e.jsx(n,{id:"region",value:a.region,onChange:s=>i("region",s.target.value),placeholder:"e.g., Region IV-A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"province",children:"Province"}),e.jsx(n,{id:"province",value:a.province,onChange:s=>i("province",s.target.value),placeholder:"e.g., Laguna"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"city",children:"City"}),e.jsx(n,{id:"city",value:a.city,onChange:s=>i("city",s.target.value),placeholder:"e.g., Calamba"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"barangay",children:"Barangay"}),e.jsx(n,{id:"barangay",value:a.barangay,onChange:s=>i("barangay",s.target.value),placeholder:"e.g., Barangay 1"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"street",children:"Street"}),e.jsx(n,{id:"street",value:a.street,onChange:s=>i("street",s.target.value),placeholder:"e.g., 123 Main Street"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"zipCode",children:"Zip Code"}),e.jsx(n,{id:"zipCode",value:a.zipCode,onChange:s=>i("zipCode",s.target.value),placeholder:"e.g., 4027"})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(h,{className:"text-lg",children:"Medical Information"})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"bloodType",children:"Blood Type"}),e.jsxs(j,{value:a.bloodType,onValueChange:s=>i("bloodType",s),children:[e.jsx(u,{children:e.jsx(g,{placeholder:"Select blood type"})}),e.jsxs(p,{children:[e.jsx(t,{value:"none",children:"Not specified"}),e.jsx(t,{value:"A+",children:"A+"}),e.jsx(t,{value:"A-",children:"A-"}),e.jsx(t,{value:"B+",children:"B+"}),e.jsx(t,{value:"B-",children:"B-"}),e.jsx(t,{value:"AB+",children:"AB+"}),e.jsx(t,{value:"AB-",children:"AB-"}),e.jsx(t,{value:"O+",children:"O+"}),e.jsx(t,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"allergies",children:"Known Allergies"}),e.jsx(b,{id:"allergies",value:a.allergies,onChange:s=>i("allergies",s.target.value),placeholder:"Separate multiple allergies with commas",className:"min-h-[50px] max-h-[80px]",rows:2})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"medications",children:"Current Medications"}),e.jsx(b,{id:"medications",value:a.medications,onChange:s=>i("medications",s.target.value),placeholder:"Separate multiple medications with commas",className:"min-h-[50px] max-h-[80px]",rows:2})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-3 pb-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),e.jsxs(y,{type:"submit",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})})]})})}export{se as default};
