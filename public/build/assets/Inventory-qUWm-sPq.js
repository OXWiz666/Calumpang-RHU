import{j as e,r as w}from"./app-4lbu88kA.js";import{r as n}from"./vendor-DkBadjUr.js";import"./pusher-DVtoYAOu.js";import{A as as}from"./AdminLayout-B5jylQ92.js";import rs from"./AddItemForm-BCtigrtB.js";import is from"./AddCategoryForm-CT0vD9VD.js";import{E as G,C as ns}from"./CategoryManagement-D7X0rv8L.js";import os from"./ViewItemModal-C0wZpNKN.js";import ls from"./EditItemModal-CHE9oCF8.js";import cs from"./AddBatchModal-DFRGj74z.js";import ds from"./UpdateStocksModal-j6-IpKLH.js";import ms from"./SuccessModal-Debd4hlS.js";import xs from"./DispenseStockModal-BDPJen5H.js";import hs from"./BatchDisposalModal-DJuADKRn.js";import us from"./BulkDispenseModal-YmXihmh9.js";import ps from"./BulkUpdateModal-ngyn0hvn.js";import{C as g,c as j,a as gs,b as js}from"./card-luqOxrG8.js";import{B as c}from"./button-BXpDG3fF.js";import{B as Ce}from"./badge-yHzilfWW.js";import{I as ys}from"./input-N5zOrGrX.js";import{S as X,a as J,b as K,c as W,d}from"./select-C-0693IG.js";import{D as Y,a as ee,b as se,e as h}from"./dropdown-menu-Bor9tL7P.js";import{m as y}from"./proxy-Dc_Gbux2.js";import{T as De}from"./tag-DwpkVkgc.js";import{P as fs}from"./plus-MavOGQlj.js";import{S as Ns}from"./shopping-cart-CMDRxEaq.js";import{T as _}from"./trending-up-BFbz08q-.js";import{T as vs}from"./trash-2-DJ5zXW8D.js";import{P as te}from"./package-L7rgkkVO.js";import{T as ws}from"./triangle-alert-BslwqqvL.js";import{T as bs}from"./trending-down-DADUT3dQ.js";import{C as Ss}from"./clock-D6yUBuGv.js";import{S as ks}from"./search-Cye_TdpF.js";import{c as Ae}from"./createLucideIcon-BKWaAi2G.js";import{A as Cs}from"./index-CldvPdt6.js";import{E as ae}from"./eye-mxYijkrE.js";import{A as re,a as ie}from"./archive-BwGVl8jP.js";import{S as ne}from"./square-pen-Bb1JtfBr.js";import{S as Ds}from"./star-sc8DcFnL.js";import{H as As}from"./house-CSq-WFst.js";import{U as Ms}from"./users-D4PhO1-D.js";import{A as Is}from"./activity-C-sjEU5t.js";import{Z as _s}from"./zap-BCMzj8QL.js";import{S as Es}from"./shield-B7gr9OVN.js";import{H as Ts}from"./heart-CDAohmX9.js";import{F as Bs}from"./flask-conical-30tS4pFx.js";import{S as Us}from"./stethoscope-QcN9KdKi.js";import{S as Fs}from"./syringe-CKDJ4xso.js";import{P as Ls}from"./pill-DIGxtF-3.js";import"./index-BzPzP57-.js";import"./avatar-BYPIvY84.js";import"./react-icons.esm-CCKgqiWC.js";import"./separator-DqF1LXiM.js";import"./index-MO574hLd.js";import"./index-DO3t3vkD.js";import"./moment-C5S46NFB.js";import"./dialog-vlGViv4z.js";import"./index-KF1t5bS2.js";import"./tslib.es6-M_FJ09fS.js";import"./label-xH30sM7L.js";import"./calendar-CoN2zrIs.js";import"./index-Dyxvh50g.js";import"./index-BHGKAdXF.js";import"./format-Dp3w_Y3x.js";import"./isSameMonth-BOwz-_mK.js";import"./isBefore-Bnl9x5VB.js";import"./TextInput-BSQIaTF_.js";import"./x-b8JahagL.js";import"./settings-D_MeB5oN.js";import"./calendar-D9APQM2e.js";import"./file-text-YZXa1D2L.js";import"./pusher-RZ9y-pSV.js";import"./printer-CfgcPaUh.js";import"./circle-check-big-BQVCuGNJ.js";import"./autoprefixer-Bkxp4-ve.js";import"./unit-CopbpOEH.js";import"./Toaster-D0zRMICv.js";import"./toast-C3xy5K6A.js";import"./index-DyRdtInp.js";import"./index-BWRETVzy.js";import"./use-toast-Dm0PN6fH.js";import"./layers-OK8ayVTK.js";import"./chart-column-yMaSKbSU.js";import"./textarea-CpaS5p9M.js";import"./index-WHihrx3k.js";import"./unitOptions-DzV97WAR.js";import"./building-2-DmPcAwng.js";import"./map-pin-Dkn0BYKY.js";import"./hash-AgYeaIxt.js";import"./index-DqxisvwK.js";import"./circle-x-Cf2XhiVO.js";import"./circle-alert-D8zT41fC.js";import"./toast-DVcbSrQT.js";import"./refresh-cw-D3hZ7e_O.js";import"./save-CAdd64LS.js";import"./download-BH8XyxCx.js";import"./info-BVLwYIm5.js";import"./circle-check-F3PuHnLX.js";import"./user-3RJR1iCA.js";import"./checkbox-CdxJ5t4x.js";import"./check-BD0Yvgxs.js";import"./index-DZInJjs-.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ps=Ae("Grid3x3",zs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],$s=Ae("List",Vs);function Fa({categories:b=[],allCategories:Me=[],inventoryItems:f=[],expiringSoonCount:oe=0}){const[z,le]=n.useState("list"),[p,Ie]=n.useState("name"),[P,_e]=n.useState("asc"),[S,ce]=n.useState(""),[E,de]=n.useState("all"),[k,me]=n.useState("all"),[T,B]=n.useState(1),[U]=n.useState(10),[Ee,xe]=n.useState(!1),[Te,he]=n.useState(!1),[Be,ue]=n.useState(!1),[Ue,pe]=n.useState(!1),[Fe,F]=n.useState(!1),[Le,V]=n.useState(!1),[ze,C]=n.useState(!1),[N,D]=n.useState(null),[Pe,L]=n.useState(""),[Ve,$e]=n.useState(!1),[qe,ge]=n.useState(!1),[He,Oe]=n.useState("single"),[Qe,je]=n.useState(!1),[Ze,ye]=n.useState(!1),[Re,fe]=n.useState(!1),Ge=(s,a,t=null)=>{const r=s.reduce((o,m)=>o+m.quantity,0);if(r===0)return"out_of_stock";if(r<=a)return"low_stock";const i=s.some(o=>A(o.expiryDate));return!i&&t&&A(t)?"expiring_soon":"in_stock"},Xe=s=>{const a=s.totalQuantity??s.stock?.stocks??0,t=s.minimum_stock||10;return a===0?"out_of_stock":a<=t?"low_stock":"in_stock"},Ne=s=>s?new Date(s)<new Date:!1,A=s=>{if(!s||s==="N/A")return!1;try{const a=new Date(s);if(isNaN(a.getTime()))return!1;const r=Math.ceil((a-new Date)/(1e3*60*60*24));return r<=30&&r>0}catch{return console.warn("Invalid expiry date:",s),!1}},Je=s=>{const a=s?.icon||"Package",t=Ke(a);switch(a){case"Pill":return e.jsx(Ls,{className:`h-5 w-5 ${t}`});case"Syringe":return e.jsx(Fs,{className:`h-5 w-5 ${t}`});case"Stethoscope":return e.jsx(Us,{className:`h-5 w-5 ${t}`});case"FlaskConical":return e.jsx(Bs,{className:`h-5 w-5 ${t}`});case"Heart":return e.jsx(Ts,{className:`h-5 w-5 ${t}`});case"Shield":return e.jsx(Es,{className:`h-5 w-5 ${t}`});case"Zap":return e.jsx(_s,{className:`h-5 w-5 ${t}`});case"Activity":return e.jsx(Is,{className:`h-5 w-5 ${t}`});case"Users":return e.jsx(Ms,{className:`h-5 w-5 ${t}`});case"Home":return e.jsx(As,{className:`h-5 w-5 ${t}`});case"Star":return e.jsx(Ds,{className:`h-5 w-5 ${t}`});default:return e.jsx(te,{className:`h-5 w-5 ${t}`})}},Ke=s=>{switch(s){case"Pill":return"text-blue-600";case"Syringe":return"text-green-600";case"Stethoscope":return"text-purple-600";case"FlaskConical":return"text-orange-600";case"Heart":return"text-red-600";case"Shield":return"text-indigo-600";case"Zap":return"text-yellow-600";case"Activity":return"text-cyan-600";case"Users":return"text-pink-600";case"Home":return"text-emerald-600";case"Star":return"text-amber-600";default:return"text-gray-600"}},M=s=>{D(s),pe(!0)},$=s=>{D(s),F(!0)},We=s=>{D(s),V(!0)},Ye=()=>{V(!1),F(!1),w.reload()},q=s=>{const a="Item archived successfully!",t="Failed to archive item!";w.put(route("pharmacist.inventory.item.archive",s.id),{},{onSuccess:()=>{L(a),C(!0),w.visit(window.location.pathname,{method:"get"})},onError:()=>{L(t),C(!0)}})},H=s=>{const a="Item unarchived successfully!",t="Failed to unarchive item!";w.put(route("pharmacist.inventory.item.unarchive",s.id),{},{onSuccess:()=>{L(a),C(!0),w.visit(window.location.pathname,{method:"get"})},onError:()=>{L(t),C(!0)}})},O=(s,a=null)=>{const t=a?{...s,id:a.id,batch_number:a.batchNumber,expiry_date:a.expiryDate,quantity:a.quantity,stock:{stocks:a.quantity}}:s;D(t),je(!0)},es=s=>{if(!s||s.length===0)return[];const a=s.reduce((t,r)=>{const i=r.name;t[i]||(t[i]={id:r.id,name:i,category:r.category||null,categoryIcon:Je(r.category),categoryId:r.category_id,manufacturer:r.manufacturer||"N/A",supplier:r.supplier||"Not Set",description:r.description||"",unit:r.unit_type||"pieces",minimumStock:r.minimum_stock||10,maximumStock:r.maximum_stock||100,isArchived:r.status===0,lastUpdated:r.updated_at||"N/A",expiryDate:r.expiry_date,batches:[]});const o=r.batch_number&&r.batch_number!=="new_batch"&&r.batch_number!=="N/A"?r.batch_number:"N/A";return t[i].batches.push({id:r.id,batchNumber:o,quantity:r.stock?.stocks||0,expiryDate:r.expiry_date||"N/A",storageLocation:r.storage_location||"",status:Xe(r),lastUpdated:r.updated_at||"N/A"}),t},{});return Object.values(a).map(t=>{const r=t.batches.filter(l=>l.batchNumber&&l.batchNumber!=="N/A"&&l.batchNumber!=="new_batch"),i=r.filter(l=>!l.expiryDate||l.expiryDate==="N/A"?!0:!Ne(l.expiryDate)),o=i.reduce((l,ts)=>l+ts.quantity,0),m=i[0]?.expiryDate||r[0]?.expiryDate||t.expiryDate,x=Ge(i,t.minimumStock,m);return{...t,batches:r,totalQuantity:o,status:x,batchCount:i.length,minimum_stock:t.minimumStock,maximum_stock:t.maximumStock}})},u=f&&f.length>0?es(f):[],[ve,ss]=n.useState(u);n.useEffect(()=>{let s=u.filter(a=>{const t=a.name.toLowerCase().includes(S.toLowerCase())||(a.category?.name||"Uncategorized").toLowerCase().includes(S.toLowerCase())||a.batches.some(o=>o.batchNumber.toLowerCase().includes(S.toLowerCase())),r=E==="all"||(a.category?.name||"Uncategorized")===E;let i=!1;return k==="all"?i=!0:k==="archived"?i=a.isArchived:i=a.status===k&&!a.isArchived,t&&r&&i});s.sort((a,t)=>{let r=a[p],i=t[p];if(p==="name"||p==="category")r=r.toLowerCase(),i=i.toLowerCase();else if(p==="quantity")r=a.totalQuantity||0,i=t.totalQuantity||0;else if(p==="expiryDate"){const o=Math.min(...a.batches.map(x=>{if(x.expiryDate==="N/A")return new Date("2099-12-31").getTime();try{const l=new Date(x.expiryDate);return isNaN(l.getTime())?new Date("2099-12-31").getTime():l.getTime()}catch{return new Date("2099-12-31").getTime()}})),m=Math.min(...t.batches.map(x=>{if(x.expiryDate==="N/A")return new Date("2099-12-31").getTime();try{const l=new Date(x.expiryDate);return isNaN(l.getTime())?new Date("2099-12-31").getTime():l.getTime()}catch{return new Date("2099-12-31").getTime()}}));r=o,i=m}else p==="isArchived"&&(r=r?1:0,i=i?1:0);return P==="asc"?r>i?1:-1:r<i?1:-1}),ss(s),B(1)},[S,E,k,p,P]);const I=ve.length,Q=Math.ceil(I/U),Z=(T-1)*U,we=Z+U,be=ve.slice(Z,we),Se=(s,a=!1)=>{if(a)return"bg-gray-100 text-gray-600 border-gray-300";switch(s){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-amber-100 text-amber-800 border-amber-200";case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";case"expiring_soon":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ke=(s,a=!1)=>{if(a)return"Archived";switch(s){case"in_stock":return"In Stock";case"low_stock":return"Low Stock";case"out_of_stock":return"Out of Stock Items";case"expiring_soon":return"Expiring Soon Items";default:return"Unknown"}},R=u.filter(s=>s.status==="expiring_soon"&&!s.isArchived).length,v={total:u.filter(s=>!s.isArchived).length,inStock:u.filter(s=>s.status==="in_stock"&&!s.isArchived).length,lowStock:u.filter(s=>s.status==="low_stock"&&!s.isArchived).length,outOfStock:u.filter(s=>s.status==="out_of_stock"&&!s.isArchived).length,expiringSoon:R>0?R:oe};return console.log("Inventory Stats Debug:",{totalItems:u.length,frontendExpiringSoon:R,backendExpiringSoonCount:oe,finalExpiringSoon:v.expiringSoon,expiringSoonItems:u.filter(s=>s.status==="expiring_soon"&&!s.isArchived),allItemStatuses:u.map(s=>({name:s.name,status:s.status,expiryDate:s.expiryDate,isItemExpiringSoon:A(s.expiryDate),batches:s.batches?.map(a=>({expiryDate:a.expiryDate,isExpiringSoon:A(a.expiryDate)}))}))}),n.useEffect(()=>{if(!window.Echo)return;const s=window.Echo.channel("inventory"),a=()=>{w.reload({only:["inventoryItems","categories","allCategories"]})};return s.listen(".InventoryUpdated",a),()=>{try{s.stopListening(".InventoryUpdated",a)}catch{}}},[]),e.jsx(as,{header:"Inventory Management",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your pharmacy inventory efficiently"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(c,{variant:"outline",className:"flex items-center gap-2",onClick:()=>he(!0),children:[e.jsx(De,{className:"h-4 w-4"}),"Add Category"]}),e.jsxs(c,{variant:"outline",className:"flex items-center gap-2",onClick:()=>ue(!0),children:[e.jsx(De,{className:"h-4 w-4"}),"Manage Categories"]}),e.jsxs(c,{className:"flex items-center gap-2",style:{backgroundColor:"#2C3E50"},onClick:()=>xe(!0),children:[e.jsx(fs,{className:"h-4 w-4"}),"Add Item"]}),e.jsxs(c,{variant:"outline",className:"flex items-center gap-2 text-green-600 hover:text-green-700 border-green-200 hover:border-green-300 bg-green-50 hover:bg-green-100",onClick:()=>ye(!0),children:[e.jsx(Ns,{className:"h-4 w-4"}),"Bulk Dispense"]}),e.jsxs(c,{variant:"outline",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300 bg-blue-50 hover:bg-blue-100",onClick:()=>fe(!0),children:[e.jsx(_,{className:"h-4 w-4"}),"Bulk Update"]}),e.jsxs(c,{variant:"outline",className:"flex items-center gap-2 text-red-600 hover:text-red-700 border-red-200 hover:border-red-300 bg-red-50 hover:bg-red-100",onClick:()=>{Oe("multi"),D({id:"bulk",name:"Multiple Items"}),ge(!0)},children:[e.jsx(vs,{className:"h-4 w-4"}),"Batch Disposal"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(g,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.total})]}),e.jsx(te,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(g,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Stock"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.inStock})]}),e.jsx(_,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(g,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:v.lowStock})]}),e.jsx(ws,{className:"h-8 w-8 text-amber-600"})]})})}),e.jsx(g,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.outOfStock})]}),e.jsx(bs,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(g,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon Items"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:v.expiringSoon})]}),e.jsx(Ss,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsx(g,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ks,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(ys,{placeholder:"Search items, batch numbers, or categories...",value:S,onChange:s=>ce(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(X,{value:E,onValueChange:de,children:[e.jsx(J,{className:"w-40",children:e.jsx(K,{placeholder:"Category"})}),e.jsxs(W,{children:[e.jsx(d,{value:"all",children:"All Categories"}),b&&b.map(s=>e.jsx(d,{value:s.name,children:s.name},s.id))]})]}),e.jsxs(X,{value:k,onValueChange:me,children:[e.jsx(J,{className:"w-40",children:e.jsx(K,{placeholder:"Status"})}),e.jsxs(W,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"in_stock",children:"In Stock"}),e.jsx(d,{value:"low_stock",children:"Low Stock"}),e.jsx(d,{value:"out_of_stock",children:"Out of Stock Items"}),e.jsx(d,{value:"expiring_soon",children:"Expiring Soon Items"}),e.jsx(d,{value:"archived",children:"Archived"})]})]}),e.jsxs(X,{value:`${p}-${P}`,onValueChange:s=>{const[a,t]=s.split("-");Ie(a),_e(t)},children:[e.jsx(J,{className:"w-40",children:e.jsx(K,{placeholder:"Sort by"})}),e.jsxs(W,{children:[e.jsx(d,{value:"name-asc",children:"Name (A-Z)"}),e.jsx(d,{value:"name-desc",children:"Name (Z-A)"}),e.jsx(d,{value:"category-asc",children:"Category (A-Z)"}),e.jsx(d,{value:"category-desc",children:"Category (Z-A)"}),e.jsx(d,{value:"quantity-asc",children:"Quantity (Low-High)"}),e.jsx(d,{value:"quantity-desc",children:"Quantity (High-Low)"}),e.jsx(d,{value:"expiryDate-asc",children:"Expiry (Soon-Later)"}),e.jsx(d,{value:"expiryDate-desc",children:"Expiry (Later-Soon)"}),e.jsx(d,{value:"isArchived-asc",children:"Status (Active-Archived)"}),e.jsx(d,{value:"isArchived-desc",children:"Status (Archived-Active)"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg",children:[e.jsx(c,{variant:z==="list"?"default":"ghost",size:"sm",onClick:()=>le("list"),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(c,{variant:z==="grid"?"default":"ghost",size:"sm",onClick:()=>le("grid"),children:e.jsx(Ps,{className:"h-4 w-4"})})]})]})]})})}),e.jsx(Cs,{mode:"wait",children:z==="grid"?e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:be.map((s,a)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},children:e.jsxs(g,{className:"hover:shadow-lg transition-all duration-300 group",children:[e.jsx(gs,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl cursor-pointer hover:scale-110 transition-transform",onClick:()=>M(s),title:"View Details",children:s.categoryIcon}),e.jsxs("div",{className:"flex-1",children:[e.jsx(js,{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.category?.name||"Uncategorized"})]})]}),e.jsxs(Y,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(se,{align:"end",children:[e.jsxs(h,{onClick:()=>M(s),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.isArchived?e.jsxs(h,{className:"text-green-600",onClick:()=>H(s),children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{onClick:()=>$(s),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(h,{onClick:()=>O(s),children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Update Stocks"]}),e.jsxs(h,{className:"text-orange-600",onClick:()=>q(s),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Quantity"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.totalQuantity," ",s.unit]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Batches"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.batchCount," batch",s.batchCount!==1?"es":""]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Batch Details:"}),e.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:s.batches.map((t,r)=>e.jsxs("div",{className:"text-xs bg-gray-50 p-2 rounded",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-mono",children:t.batchNumber}),e.jsx("span",{className:"font-semibold",children:t.quantity})]}),e.jsxs("div",{className:"text-gray-500",children:["Exp: ",(()=>{try{if(!t.expiryDate||t.expiryDate==="N/A")return"N/A";const i=new Date(t.expiryDate);return isNaN(i.getTime())?"Invalid Date":i.toLocaleDateString()}catch{return"Invalid Date"}})()]})]},t.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Manufacturer"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.manufacturer})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Supplier"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.supplier})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stock Levels"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Min: ",s.minimumStock," • Max: ",s.maximumStock]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ce,{className:Se(s.status,s.isArchived),children:ke(s.status,s.isArchived)})})}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>M(s),title:"View Details",className:"text-gray-600 hover:text-gray-700 border-gray-200 hover:border-gray-300",children:e.jsx(ae,{className:"h-4 w-4"})}),!s.isArchived&&e.jsx(e.Fragment,{children:e.jsx(c,{variant:"outline",size:"sm",onClick:()=>O(s),title:"Update Stocks",className:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300 bg-blue-50 hover:bg-blue-100",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsxs(Y,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx(se,{align:"end",children:s.isArchived?e.jsxs(h,{className:"text-green-600",onClick:()=>H(s),children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{onClick:()=>$(s),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(h,{className:"text-orange-600",onClick:()=>q(s),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Archive"]})]})})]})]})]})]})},s.id))},"grid"):e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(g,{children:e.jsx(j,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Item Details"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Total Quantity"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Batches"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Earliest Expiry"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{children:be.map((s,a)=>e.jsxs(y.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:a*.05},className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xl cursor-pointer hover:scale-110 transition-transform",onClick:()=>M(s),title:"View Details",children:s.categoryIcon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.manufacturer," • ",s.unit]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Supplier: ",s.supplier," • Min: ",s.minimumStock," • Max: ",s.maximumStock]})]})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-600",children:s.category?.name||"Uncategorized"}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.totalQuantity}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:s.unit})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[s.batchCount," batch",s.batchCount!==1?"es":""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.batches.slice(0,2).map(t=>t.batchNumber).join(", "),s.batchCount>2&&` +${s.batchCount-2} more`]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const t=s.batches.reduce((o,m)=>{if(!o||m.expiryDate==="N/A"||o.expiryDate==="N/A")return m;try{const x=new Date(m.expiryDate),l=new Date(o.expiryDate);return isNaN(x.getTime())||isNaN(l.getTime())?o:x<l?m:o}catch{return o}},null);if(!t||t.expiryDate==="N/A")return e.jsx("span",{className:"text-sm text-gray-500",children:"N/A"});const r=Ne(t.expiryDate),i=A(t.expiryDate);return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`text-sm ${r?"text-red-600 font-semibold":i?"text-amber-600 font-semibold":"text-gray-600"}`,children:(()=>{try{const o=new Date(t.expiryDate);return isNaN(o.getTime())?"Invalid Date":o.toLocaleDateString()}catch{return"Invalid Date"}})()}),r&&e.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:"EXPIRED"}),i&&!r&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded-full",children:"EXPIRING SOON"})]})})()})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ce,{className:Se(s.status,s.isArchived),children:ke(s.status,s.isArchived)})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>M(s),title:"View Details",className:"text-gray-600 hover:text-gray-700 border-gray-200 hover:border-gray-300",children:e.jsx(ae,{className:"h-4 w-4"})}),!s.isArchived&&e.jsx(e.Fragment,{children:e.jsx(c,{variant:"outline",size:"sm",onClick:()=>O(s),title:"Update Stocks",className:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300 bg-blue-50 hover:bg-blue-100",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsxs(Y,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx(se,{align:"end",children:s.isArchived?e.jsxs(h,{className:"text-green-600",onClick:()=>H(s),children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{onClick:()=>$(s),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(h,{className:"text-orange-600",onClick:()=>q(s),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Archive"]})]})})]})]})})]},s.id))})]})})})})},"list")}),I>U&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",Z+1," to ",Math.min(we,I)," of ",I," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>B(s=>Math.max(s-1,1)),disabled:T===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Q},(s,a)=>a+1).map(s=>e.jsx(c,{variant:T===s?"default":"outline",size:"sm",onClick:()=>B(s),className:"w-8 h-8 p-0",children:s},s))}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>B(s=>Math.min(s+1,Q)),disabled:T===Q,children:"Next"})]})]}),I===0&&e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(te,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search or filter criteria"}),e.jsx(c,{onClick:()=>{ce(""),de("all"),me("all")},children:"Clear Filters"})]}),e.jsx(rs,{open:Ee,onClose:()=>xe(!1),categories:b||[]}),e.jsx(is,{open:Te,onClose:()=>he(!1)}),e.jsx(ns,{open:Be,onClose:()=>ue(!1),categories:Me}),e.jsx(os,{open:Ue,onClose:()=>pe(!1),item:N}),e.jsx(ls,{open:Fe,onClose:()=>F(!1),item:N,categories:b||[],onAddBatch:We}),e.jsx(cs,{open:Le,onClose:()=>V(!1),item:N,categories:b||[],onBatchAdded:Ye,onCloseEditModal:()=>F(!1)}),e.jsx(ms,{open:ze,onClose:()=>C(!1),message:Pe}),e.jsx(xs,{open:Ve,onClose:()=>$e(!1),item:N}),e.jsx(hs,{open:qe,onClose:()=>ge(!1),item:N,multi:He==="multi",itemsForMulti:f}),e.jsx(ds,{open:Qe,onClose:()=>je(!1),item:N}),e.jsx(us,{open:Ze,onClose:()=>ye(!1),inventoryItems:f}),e.jsx(ps,{open:Re,onClose:()=>fe(!1),inventoryItems:f})]})})}export{Fa as default};
