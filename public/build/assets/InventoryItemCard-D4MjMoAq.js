import{r as d,P as F,j as e,b}from"./app-DQkjcWN6.js";import{C as T,a as $,b as z,c as A,d as O}from"./card-2gxgjA1W.js";import{B as m}from"./badge-BejDsYc6.js";import{B as a}from"./button-CQXvZD0Q.js";import{C as p}from"./CustomModal-BbWYgwNe.js";import{I as P}from"./InputLabel-BnpXxqRO.js";import"./label-C5PzU1kc.js";import{I as V}from"./input-KwS1HKke.js";import{f as C}from"./dialog-DzwMP3xh.js";import{T as W}from"./triangle-alert-IJofnai-.js";import{C as q}from"./clock-LoqOoFCM.js";import{C as H}from"./chevron-up-DKV-WyHA.js";import{C as Q}from"./chevron-down-Eqbl9PcH.js";import{f as k}from"./format-BtYX0kVO.js";import"./select-BXN-5Q5j.js";import"./react-icons.esm-2rzneDM_.js";import"./index-CXPk6WBb.js";import"./index-Clw4Qtu1.js";import"./index-3z2siAXX.js";import"./Combination-Bqq7Dvf7.js";import"./index-ag2-9qnh.js";import"./index-CBq7bXeJ.js";import"./index-DLzZNpml.js";import"./createLucideIcon-ZxaBfR8v.js";const je=({item:s,onUpdateClick:w})=>{var u,h,g,j,f,v,y,N;const[n,D]=d.useState(!1),o=((u=s==null?void 0:s.stock[0])==null?void 0:u.stocks)<=5,l=((h=s==null?void 0:s.stocks_movement[0])==null?void 0:h.expiry_date)&&new Date((g=s==null?void 0:s.stocks_movement[0])==null?void 0:g.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,I=t=>{switch(t){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},{data:i,setData:_,processing:x,put:S,delete:E}=F({itemname:s==null?void 0:s.name,categoryid:s==null?void 0:s.category_id}),[M,c]=d.useState(!1),[U,r]=d.useState(!1),L=t=>{t.preventDefault(),S(route("admin.inventory.item.update",{inventory:s.id}),{onFinish:()=>{b.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})},B=t=>{t.preventDefault(),E(route("admin.inventory.item.delete",{inventory:s.id}),{onFinish:()=>{b.reload({only:["flash","inventory"]})},onSuccess:()=>{r(!1)}})};return e.jsxs(T,{className:`mb-4 ${o?"border-red-300":l?"border-amber-300":"border-gray-200"}`,children:[e.jsx($,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-lg font-medium",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(m,{className:I(s.category.name),children:s.category.name}),o&&e.jsxs(m,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),"Low Stock"]}),l&&s.expirationDate&&e.jsxs(m,{variant:"outline",className:"bg-amber-100 text-amber-800 flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),"Expiring Soon"]})]})]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>D(!n),className:"h-8 w-8 p-0",children:n?e.jsx(H,{className:"h-4 w-4"}):e.jsx(Q,{className:"h-4 w-4"})})]})}),e.jsxs(A,{className:"pb-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:`font-medium ${o?"text-red-600":""}`,children:[(j=s.stock[0])==null?void 0:j.stocks," ",(f=s.stock[0])==null?void 0:f.stockname,"s"]})]})}),e.jsxs("div",{children:[e.jsx(a,{variant:"outline",size:"sm",className:"w-1/2 mt-2 hover:bg-secondary/80 transition-colors font-medium",onClick:()=>{r(!0)},children:"Edit Item"}),e.jsxs(p,{isOpen:U,onClose:t=>{r(!1)},title:"Updating an Item",description:`Update ${s==null?void 0:s.name} item here.`,maxWidth:"md",children:[e.jsxs("div",{children:[e.jsx(P,{value:"Item Name*"}),e.jsx(V,{value:i==null?void 0:i.itemname,onChange:t=>_("itemname",t.target.value)})]}),e.jsxs(C,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:t=>{r(!1)},children:"Cancel"}),e.jsx(a,{className:"bg-primary hover:bg-primary/90",disabled:x,onClick:L,children:"Update Item"})]})]}),e.jsx(a,{variant:"outline",size:"sm",className:"w-1/2",onClick:t=>{c(!0)},children:"Delete Item"}),e.jsx(p,{isOpen:M,onClose:t=>{c(!1)},title:"Deleting an Item.",description:`Are you sure you want to delete this item ${s==null?void 0:s.name}?`,maxWidth:"md",children:e.jsxs(C,{className:"pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:t=>{c(!1)},children:"Cancel"}),e.jsx(a,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:x,onClick:B,children:"Delete Item"})]})})]}),e.jsx(p,{title:"Delete an Item",description:"Are you sure you want to delete "}),n&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[((v=s.stocks_movement[0])==null?void 0:v.expiry_date)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${l?"text-amber-600":""}`,children:k(new Date((y=s.stocks_movement[0])==null?void 0:y.expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:k(new Date((N=s.stocks_movement[0])==null?void 0:N.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),n&&e.jsx(O,{className:"pt-0",children:e.jsx(a,{variant:"outline",size:"sm",className:"w-full hover:bg-secondary/80 transition-colors font-medium",onClick:()=>w(s),children:"Update Stock"})})]})};export{je as default};
