import{r as x,P as I,j as e}from"./app-9IFjvyjq.js";import{D as w,a as F,b as E,c as q,d as B}from"./dialog-BlSttdnZ.js";import{B as p}from"./button-BWLYpXz0.js";import{I as m}from"./input-fLU5VnAr.js";import{L as r}from"./label-C2QZitaL.js";import{T as L}from"./textarea-COBWyWer.js";import{S as h,a as g,b as j,c as y,d as f}from"./select-p8YEwkY-.js";import{B as M}from"./building-2-Bld5c7bM.js";import{M as T}from"./map-pin-Bdehjgen.js";import{H as P}from"./hash-C86GkOge.js";import{C as U}from"./calendar-DQr9f7aC.js";import"./index-ZSsit5F4.js";import"./Combination-BD7y2hDp.js";import"./index-DMLVHKle.js";import"./utils-Dqxj4mrw.js";import"./index-iJsz53jB.js";import"./react-icons.esm-CBUbwQJY.js";import"./index-C6jRhQFj.js";import"./index-5FqUdhJW.js";import"./index-D1R9fGnO.js";import"./index-Bhu2lbiL.js";import"./createLucideIcon-DsPw26Nq.js";const me=({open:N,onClose:c,item:s,categories:b=[]})=>{const[v,_]=x.useState({itemname:"",categoryid:"",manufacturer:"",description:"",quantity:0,unit_type:"",minimum_stock:0,maximum_stock:0,storage_location:"",batch_number:"",expiry_date:""});x.useEffect(()=>{s&&_({itemname:s.name||"Invalid Name",categoryid:s.categoryId||"Invalid Category",manufacturer:s.manufacturer||"Invalid Manufacturer",description:s.description||"Invalid Description",quantity:s.quantity||0,unit_type:s.unit||"Invalid Unit",minimum_stock:s.minimumStock||0,maximum_stock:s.maximumStock||0,storage_location:s.storageLocation||"Invalid Storage Location",batch_number:s.batchNumber||"Invalid Batch Number",expiry_date:s.expiryDate!=="N/A"&&s.expiryDate!=="Invalid Date"?new Date(s.expiryDate).toISOString().split("T")[0]:""})},[s]);const{data:t,setData:o,put:k,processing:d,errors:a}=I(v),l=i=>{const{name:n,value:D}=i.target;o(n,D)},u=(i,n)=>{o(i,n)},C=i=>{i.preventDefault(),t.itemname.trim()&&t.categoryid&&t.unit_type&&(t.quantity<0||t.minimum_stock<0||t.maximum_stock<0||t.minimum_stock>t.maximum_stock||t.expiry_date&&new Date(t.expiry_date)<=new Date||k(route("pharmacist.inventory.item.update",s.id),{onSuccess:()=>{c()},onError:n=>{console.error("Validation errors:",n)}}))},S=[{value:"pieces",label:"Pieces"},{value:"tablets",label:"Tablets"},{value:"capsules",label:"Capsules"},{value:"bottles",label:"Bottles"},{value:"vials",label:"Vials"},{value:"tubes",label:"Tubes"},{value:"boxes",label:"Boxes"},{value:"packs",label:"Packs"}];return s?e.jsx(w,{open:N,onOpenChange:c,children:e.jsxs(F,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(q,{className:"text-xl font-semibold text-gray-900",children:"Edit Item"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update the information for this inventory item"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"itemname",className:"text-sm font-medium",children:"Item Name *"}),e.jsx(m,{id:"itemname",name:"item name",value:t.itemname,onChange:l,placeholder:"Enter item name",className:"w-full"}),a.itemname&&e.jsx("p",{className:"text-sm text-red-600",children:a.itemname})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"categoryid",className:"text-sm font-medium",children:"Category *"}),e.jsxs(h,{value:t.categoryid,onValueChange:i=>u("categoryid",i),children:[e.jsx(g,{children:e.jsx(j,{placeholder:"Select category"})}),e.jsx(y,{children:b.map(i=>e.jsx(f,{value:i.id.toString(),children:i.name},i.id))})]}),a.categoryid&&e.jsx("p",{className:"text-sm text-red-600",children:a.categoryid})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"manufacturer",className:"text-sm font-medium",children:"Manufacturer"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"manufacturer",name:"manufacturer",value:t.manufacturer,onChange:l,placeholder:"Enter manufacturer",className:"w-full pl-10"})]}),a.manufacturer&&e.jsx("p",{className:"text-sm text-red-600",children:a.manufacturer})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"unit_type",className:"text-sm font-medium",children:"Unit of Measure *"}),e.jsxs(h,{value:t.unit_type,onValueChange:i=>u("unit_type",i),children:[e.jsx(g,{children:e.jsx(j,{placeholder:"Select unit"})}),e.jsx(y,{children:S.map(i=>e.jsx(f,{value:i.value,children:i.label},i.value))})]}),a.unit_type&&e.jsx("p",{className:"text-sm text-red-600",children:a.unit_type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),e.jsx(L,{id:"description",name:"description",value:t.description,onChange:l,placeholder:"Enter item description",rows:3,className:"w-full"}),a.description&&e.jsx("p",{className:"text-sm text-red-600",children:a.description})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Stock Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"quantity",className:"text-sm font-medium",children:"Current Quantity *"}),e.jsx(m,{id:"quantity",name:"quantity",type:"number",min:"0",value:t.quantity,onChange:l,placeholder:"0",className:"w-full"}),a.quantity&&e.jsx("p",{className:"text-sm text-red-600",children:a.quantity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"minimum_stock",className:"text-sm font-medium",children:"Minimum Stock Level"}),e.jsx(m,{id:"minimum_stock",name:"minimum_stock",type:"number",min:"0",value:t.minimum_stock,onChange:l,placeholder:"0",className:"w-full"}),a.minimum_stock&&e.jsx("p",{className:"text-sm text-red-600",children:a.minimum_stock})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"maximum_stock",className:"text-sm font-medium",children:"Maximum Stock Level"}),e.jsx(m,{id:"maximum_stock",name:"maximum_stock",type:"number",min:"0",value:t.maximum_stock,onChange:l,placeholder:"0",className:"w-full"}),a.maximum_stock&&e.jsx("p",{className:"text-sm text-red-600",children:a.maximum_stock})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"storage_location",className:"text-sm font-medium",children:"Storage Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"storage_location",name:"storage_location",value:t.storage_location,onChange:l,placeholder:"e.g., A-1-01",className:"w-full pl-10"})]}),a.storage_location&&e.jsx("p",{className:"text-sm text-red-600",children:a.storage_location})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Batch & Expiry Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"batch_number",className:"text-sm font-medium",children:"Batch/Lot Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"batch_number",name:"batch_number",value:t.batch_number,onChange:l,placeholder:"e.g., RX12001121",className:"w-full pl-10"})]}),a.batch_number&&e.jsx("p",{className:"text-sm text-red-600",children:a.batch_number})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"expiry_date",className:"text-sm font-medium",children:"Expiry Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"expiry_date",name:"expiry_date",type:"date",value:t.expiry_date,onChange:l,className:"w-full pl-10"})]}),a.expiry_date&&e.jsx("p",{className:"text-sm text-red-600",children:a.expiry_date})]})]})]}),e.jsxs(B,{className:"flex gap-3 pt-6",children:[e.jsx(p,{type:"button",variant:"outline",onClick:c,className:"flex-1",children:"Cancel"}),e.jsx(p,{type:"submit",disabled:d,className:"flex-1",style:{backgroundColor:"#2C3E50"},children:d?"Updating...":"Update Item"})]})]})]})}):null};export{me as default};
