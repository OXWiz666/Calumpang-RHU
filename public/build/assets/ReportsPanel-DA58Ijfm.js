import{j as e,r as x}from"./app-CVKZc3Lh.js";import{C as S,a as w,b,c as C}from"./card-D0Eo7xJS.js";import{c as h,B as i}from"./button-D0ZPwi4Z.js";import{S as p,a as j,b as f,c as u,d as n}from"./select-G6MbiLIM.js";import{P as L,a as T,b as _,C as D}from"./popover-bycWR1jd.js";import{C as I}from"./calendar-B3Xin36y.js";import{f as c}from"./format-BtYX0kVO.js";import{T as M,a as A,b as g,c as N}from"./tabs-DQFi7qUI.js";import{F as E}from"./file-text-aQy5SdC6.js";import{C as R}from"./chart-column-D7y_oCqz.js";import{D as P}from"./download-DjLWqBVY.js";import"./react-icons.esm-B3MeircJ.js";import"./index-CIbx_s-t.js";import"./index-CBsIHGOy.js";import"./index-iFLzfirO.js";import"./Combination-ZWnQirPp.js";import"./index-CyNvAjsg.js";import"./index-DP9U89Ce.js";import"./index-BhxoNvdH.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./createLucideIcon-BkbKWtyU.js";import"./index-DSc4Bzp7.js";function F({selected:t,onSelect:o,className:r}){return e.jsx("div",{className:h("grid gap-2",r),children:e.jsxs(L,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(i,{id:"date",variant:"outline",className:h("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),t!=null&&t.from?t.to?e.jsxs(e.Fragment,{children:[c(t.from,"LLL dd, y")," -"," ",c(t.to,"LLL dd, y")]}):c(t.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(_,{className:"w-auto p-0",align:"start",children:e.jsx(D,{initialFocus:!0,mode:"range",defaultMonth:t==null?void 0:t.from,selected:t,onSelect:o,numberOfMonths:2})})]})})}const ie=({items:t,movements:o})=>{const[r,V]=x.useState({category:"All",stockStatus:"All"}),[d,y]=x.useState(),v=["All",...Array.from(new Set(t.map(s=>s.category.name)))],m=t.filter(s=>{if(r.category&&r.category!=="All"&&s.category.id!==r.category)return!1;if(r.stockStatus){const a=s.stock.stocks<=5,l=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3;if(r.stockStatus==="Low"&&!a||r.stockStatus==="Expiring"&&!l||r.stockStatus==="Normal"&&(a||l))return!1}return!0}),k=()=>{console.log("Generating report with filters:",r,d),alert("Report generated! In a real application, this would download a PDF or CSV file.")};return e.jsxs(S,{className:"w-full",children:[e.jsx(w,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Inventory Reports"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),e.jsxs(p,{children:[e.jsx(j,{children:e.jsx(f,{placeholder:"Select category"})}),e.jsx(u,{children:v.map(s=>e.jsx(n,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Stock Status"}),e.jsxs(p,{children:[e.jsx(j,{children:e.jsx(f,{placeholder:"Select status"})}),e.jsxs(u,{children:[e.jsx(n,{value:"All",children:"All Items"}),e.jsx(n,{value:"Low",children:"Low Stock"}),e.jsx(n,{value:"Expiring",children:"Expiring Soon"}),e.jsx(n,{value:"Normal",children:"Normal"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date Range"}),e.jsx(F,{selected:d,onSelect:y})]})]}),e.jsxs(M,{defaultValue:"inventory",children:[e.jsxs(A,{className:"grid w-full md:grid-cols-2 grid-cols-1",children:[e.jsx(g,{value:"inventory",children:"Inventory Status"}),e.jsx(g,{value:"movements",children:"Stock Movements"})]}),e.jsx(N,{value:"inventory",className:"pt-4",children:e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"Item Name"}),e.jsx("th",{className:"text-left p-2",children:"Category"}),e.jsx("th",{className:"text-left p-2",children:"Quantity"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Expiration"})]})}),e.jsx("tbody",{children:m.length>0?m.map(s=>{const a=s.stock.stocks<=5,l=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:s.stocks_movement[0].inventory_name}),e.jsx("td",{className:"p-2",children:s.category.name}),e.jsxs("td",{className:"p-2",children:[s.stock.stocks," ",s.stock.stockname,"s"]}),e.jsxs("td",{className:"p-2",children:[a&&e.jsx("span",{className:"text-red-600 font-medium",children:"Low Stock"}),l&&e.jsxs("span",{className:"text-amber-600 font-medium",children:[a?", ":"","Expiring Soon"]}),!a&&!l&&e.jsx("span",{className:"text-green-600 font-medium",children:"Normal"})]}),e.jsx("td",{className:"p-2",children:s.stocks_movement[0].expiry_date?c(new Date(s.stocks_movement[0].expiry_date),"MMM dd, yyyy"):"N/A"})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No items match the selected filters"})})})]})})}),e.jsx(N,{value:"movements",className:"pt-4",children:e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"Date"}),e.jsx("th",{className:"text-left p-2",children:"Item"}),e.jsx("th",{className:"text-left p-2",children:"Type"}),e.jsx("th",{className:"text-left p-2",children:"Quantity"}),e.jsx("th",{className:"text-left p-2",children:"Staff"})]})}),e.jsx("tbody",{children:filteredMovements.length>0?filteredMovements.map(s=>{const a=t.find(l=>l.id===s.itemId);return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:c(new Date(s.date),"MMM dd, yyyy")}),e.jsx("td",{className:"p-2",children:(a==null?void 0:a.name)||"Unknown Item"}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`font-medium ${s.type==="incoming"?"text-green-600":"text-red-600"}`,children:s.type==="incoming"?"Incoming":"Outgoing"})}),e.jsxs("td",{className:"p-2",children:[s.quantity," ",a==null?void 0:a.unit,"s"]}),e.jsx("td",{className:"p-2",children:s.performedBy})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No movements match the selected filters"})})})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxs(i,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"View Analytics"]}),e.jsxs(i,{onClick:k,className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Generate Report"]})]})]})})]})};export{ie as default};
