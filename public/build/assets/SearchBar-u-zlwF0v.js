import{r as d,j as a}from"./app-9IFjvyjq.js";import{I as v}from"./input-fLU5VnAr.js";import{B as j}from"./button-BWLYpXz0.js";import{S as L}from"./search-CCpMc_T5.js";import{A as S}from"./index-BkKJZgfk.js";import{m as w}from"./proxy-D62Q3uN7.js";import{H as k}from"./hash-C86GkOge.js";import{T as _}from"./tag-BMBBnWNd.js";import{P as E}from"./package-CHcp06gv.js";import"./utils-Dqxj4mrw.js";import"./index-C6jRhQFj.js";import"./createLucideIcon-DsPw26Nq.js";const R=({items:c,onSearch:u})=>{const[l,h]=d.useState(""),[x,b]=d.useState([]),[g,m]=d.useState(!1);d.useEffect(()=>{if(l.length>1){const e=c.map(s=>s.name),n=[...new Set(c.map(s=>s.category.name))],t=c.map(s=>{var p,f;return(f=(p=s.stocks_movement)==null?void 0:p[0])==null?void 0:f.batch_number}).filter(Boolean),r=e.filter(s=>s.toLowerCase().includes(l.toLowerCase())),o=n.filter(s=>s.toLowerCase().includes(l.toLowerCase())),i=t.filter(s=>s.toLowerCase().includes(l.toLowerCase()));b([...r,...o,...i]),m(!0)}else b([]),m(!1)},[l,c]);const y=()=>{const e=c.filter(n=>{var t,r,o;return n.name.toLowerCase().includes(l.toLowerCase())||n.category.name.toLowerCase().includes(l.toLowerCase())||((o=(r=(t=n.stocks_movement)==null?void 0:t[0])==null?void 0:r.batch_number)==null?void 0:o.toLowerCase().includes(l.toLowerCase()))});u(e),m(!1)},C=e=>{e.key==="Enter"&&y()},N=e=>{h(e),m(!1);const n=c.filter(t=>{var r,o;return t.name===e||t.category.name===e||((o=(r=t.stocks_movement)==null?void 0:r[0])==null?void 0:o.batch_number)===e});u(n.length>0?n:c.filter(t=>{var r,o;return t.name.toLowerCase().includes(e.toLowerCase())||t.category.name.toLowerCase().includes(e.toLowerCase())||((o=(r=t.stocks_movement)==null?void 0:r[0])==null?void 0:o.batch_number.toLowerCase().includes(e.toLowerCase()))}))};return a.jsxs("div",{className:"relative w-full max-w-3xl mx-auto mb-8",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(L,{className:"h-5 w-5 text-gray-400"})}),a.jsx(v,{type:"text",placeholder:"Search by medicine name, batch number or category...",value:l,onChange:e=>h(e.target.value),onKeyDown:C,className:"pl-10 pr-4 h-12 text-base border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),a.jsx(j,{onClick:y,className:"absolute right-1 top-1 h-10 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:e=>e.target.style.backgroundColor="#34495E",onMouseLeave:e=>e.target.style.backgroundColor="#2C3E50",children:"Search"})]}),a.jsx(S,{children:g&&x.length>0&&a.jsx(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute z-10 w-full rounded-lg shadow-xl mt-2 max-h-60 overflow-y-auto bg-white border-gray-200",children:x.map((e,n)=>{const t=c.some(o=>{var i,s;return((s=(i=o.stocks_movement)==null?void 0:i[0])==null?void 0:s.batch_number)===e}),r=c.some(o=>o.category.name===e);return a.jsx(w.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:n*.05},className:"px-4 py-3 cursor-pointer border-b last:border-b-0 transition-colors hover:bg-blue-50 border-gray-100",onClick:()=>N(e),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1 rounded bg-gray-100",children:t?a.jsx(k,{className:"h-4 w-4 text-gray-600"}):r?a.jsx(_,{className:"h-4 w-4 text-gray-600"}):a.jsx(E,{className:"h-4 w-4 text-gray-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium text-gray-900",children:e}),a.jsx("div",{className:"text-xs text-gray-500",children:t?"Batch Number":r?"Category":"Item Name"})]})]})},n)})})})]})};export{R as default};
