import{r as x,P as Y,b as V,j as e}from"./app-B9imbgwF.js";import{B as o}from"./button-Cp6C2OJZ.js";import{C as l,a as d,b as n,c as i,e as H}from"./card-Xb3yA3ez.js";import{B as h}from"./badge-lpEXGIly.js";import{T as I,a as O,b as N,c as p}from"./tabs-hUEqu5X7.js";import U from"./edit-patient-form-C0rn0MIl.js";import W from"./add-medical-record-form-1FNGDN5x.js";import{A as $}from"./arrow-left-DQzxu5Uk.js";import{P as b}from"./plus-CQA4v2bi.js";import{S as w}from"./square-pen-CBSUkHKQ.js";import{P as v}from"./phone-NFtQJvuB.js";import{M as q}from"./mail-3fBzkHMH.js";import{M as k}from"./map-pin-CzkM18FZ.js";import{H as G}from"./heart-C-0f00IN.js";import{C as g}from"./calendar-BRhaHUHQ.js";import{T as D}from"./triangle-alert-DVKExemm.js";import{T as K}from"./trash-2-Co04Ehrd.js";import{P as _}from"./pill-DiYduGso.js";import"./utils-D5ZoOHm5.js";import"./index-BbMT55hN.js";import"./index-CPs_XpmV.js";import"./Combination-BvFtu0HL.js";import"./index-CPfQda0F.js";import"./index-DXqKCwml.js";import"./input-DrzP4N1f.js";import"./label-1pz5fh5X.js";import"./textarea-D1CoOFw3.js";import"./select-DLnb01nw.js";import"./index-DBYg8BeE.js";import"./index-Dm9R2YI4.js";import"./index-DBY2uWYu.js";import"./dialog-DPtsGNkJ.js";import"./x-DhUE4RBg.js";import"./createLucideIcon-CiaC_9KA.js";import"./proxy-YO7Y0R0s.js";import"./save-Ckpke5sM.js";import"./moment-C5S46NFB.js";import"./PrintErrors-DllpYu9O.js";import"./file-text-DMqEqKtg.js";function ze({patient:s,onBack:C,onUpdate:M,doctors:A}){const[P,j]=x.useState(!1),[S,u]=x.useState(!1),[J,E]=x.useState(null),T=t=>{if(!t)return"Unknown";const a=new Date,r=new Date(t);let c=a.getFullYear()-r.getFullYear();const y=a.getMonth()-r.getMonth();return(y<0||y===0&&a.getDate()<r.getDate())&&c--,c},m=s?.id?.startsWith("PAT_"),F=t=>{E(t),console.log("Edit emergency contact:",t)},L=t=>{confirm("Are you sure you want to delete this emergency contact?")&&console.log("Delete emergency contact:",t)},{data:f,setData:z,post:B,errors:R}=Y({});return x.useEffect(()=>{f&&Object.keys(f).length>0&&B(route("patients.medicalrec.store",{patientid:s?.id}),{onSuccess:()=>{u(!1)},onFinish:()=>{V.reload({only:["patients_","doctors","flash"]})}})},[f]),S?e.jsx(W,{patientName:`${s.firstname} ${s.lastname}`,onSubmit:t=>z(t),onCancel:()=>u(!1),doctors:A,errors:R}):e.jsxs("div",{className:"space-y-4 h-full overflow-hidden",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(o,{variant:"outline",onClick:C,className:"shadow-sm border-gray-300",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to List"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold shadow-lg overflow-hidden",children:s.profile_picture?e.jsx("img",{src:s.profile_picture,alt:`${s.firstname} ${s.lastname}`,className:"w-full h-full object-cover rounded-xl"}):s.firstname?.charAt(0)?.toUpperCase()||"P"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[s.firstname," ",s.middlename," ",s.lastname]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Patient ID:"}),e.jsx("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded text-gray-800",children:s.id})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Age:"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[m?s.date_of_birth?(()=>{const t=new Date(s.date_of_birth),a=new Date;let r=a.getFullYear()-t.getFullYear();const c=a.getMonth()-t.getMonth();return(c<0||c===0&&a.getDate()<t.getDate())&&r--,r})():"Unknown":T(s.birth)," Years Old"]})]}),e.jsx(h,{variant:s.status==="active"?"default":"secondary",className:"px-3 py-1",children:s.status})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(o,{onClick:()=>u(!0),className:"bg-green-600 hover:bg-green-700 shadow-sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Add Medical Record"]}),e.jsxs(o,{variant:"outline",onClick:()=>j(!0),className:"shadow-sm border-gray-300",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Edit Patient"]})]})]})}),e.jsxs(I,{defaultValue:"overview",className:"space-y-4 h-full",children:[e.jsxs(O,{children:[e.jsx(N,{value:"overview",children:"Overview"}),e.jsx(N,{value:"medical-history",children:"Medical History"}),e.jsx(N,{value:"medications",children:"Medications & Allergies"})]}),e.jsxs(p,{value:"overview",className:"space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsxs(l,{className:"shadow-lg border-0 bg-white",children:[e.jsx(d,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-t-lg",children:e.jsxs(n,{className:"flex items-center gap-2 text-white",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Information"]})}),e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Full Name"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:[s.firstname," ",s.middlename," ",s.lastname]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Gender"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:(s.gender||s.sex)=="M"||(s.gender||s.sex)=="Male"?"Male":(s.gender||s.sex)=="F"||(s.gender||s.sex)=="Female"?"Female":s.gender||s.sex||"Not specified"})]})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Date of Birth"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:s.date_of_birth?new Date(s.date_of_birth).toLocaleDateString():"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Age"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 mt-1",children:[s.date_of_birth?(()=>{const t=new Date(s.date_of_birth),a=new Date;let r=a.getFullYear()-t.getFullYear();const c=a.getMonth()-t.getMonth();return(c<0||c===0&&a.getDate()<t.getDate())&&r--,r})():"N/A"," Years Old"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Civil Status"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:s.civil_status||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Nationality"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:s.nationality||"Not provided"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Religion"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:s.religion||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Country"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:s.country||"Not provided"})]})]})]})]})]}),e.jsxs(l,{className:"shadow-lg border-0 bg-white",children:[e.jsx(d,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-t-lg",children:e.jsxs(n,{className:"flex items-center gap-2 text-white",children:[e.jsx(v,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone Number"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1 flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-green-600"}),s.contactno||s.phone||"Not Set"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email Address"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1 flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-blue-600"}),s.email||"Not Set"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Address"}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:m?e.jsxs("div",{className:"space-y-1",children:[s.street&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-3 h-3 text-purple-600"}),s.street]}),s.barangay&&e.jsx("p",{className:"ml-5",children:s.barangay}),s.city&&e.jsx("p",{className:"ml-5",children:s.city}),s.province&&e.jsx("p",{className:"ml-5",children:s.province}),s.region&&e.jsx("p",{className:"ml-5",children:s.region}),s.zip_code&&e.jsx("p",{className:"ml-5",children:s.zip_code}),s.country&&e.jsx("p",{className:"ml-5",children:s.country}),!s.street&&!s.barangay&&!s.city&&!s.province&&!s.region&&!s.zip_code&&!s.country&&e.jsx("p",{className:"text-gray-500 italic",children:"No address provided"})]}):e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-purple-600"}),s.address??"Not Set"]})})]}),s.bloodtype&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Blood Type"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-red-600"}),s.bloodtype]})]})]})]}),e.jsxs(l,{className:"shadow-lg border-0 bg-white",children:[e.jsx(d,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-t-lg",children:e.jsxs(n,{className:"flex items-center gap-2 text-white",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Medical & Status"]})}),e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Patient Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(h,{variant:s.status==="active"?"default":"secondary",className:"text-sm px-3 py-1",children:s.status})})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Registration Date"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-orange-600"}),s.registration_date?new Date(s.registration_date).toLocaleDateString():"Not Set"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Total Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:s.appointment_count||1})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"shadow-lg border-0 bg-white",children:[e.jsx(d,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white rounded-t-lg",children:e.jsxs(n,{className:"flex items-center gap-2 text-white",children:[e.jsx(D,{className:"w-5 h-5"}),"Emergency Contact"]})}),e.jsx(i,{className:"p-4",children:s?.emercont&&s.emercont.length>0?e.jsx("div",{className:"space-y-3",children:s.emercont.map((t,a)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Contact #",a+1]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>F(t),title:"Edit emergency contact",className:"h-6 w-6 p-0",children:e.jsx(w,{className:"h-3 w-3 text-primary"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>L(t.id),title:"Delete emergency contact",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",children:e.jsx(K,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Contact Person"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone Number"}),e.jsx("p",{className:"text-sm text-gray-700",children:t.contactno})]})]})]},t?.id||a))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(b,{className:"w-6 h-6 text-gray-400"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No Emergency Contacts"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Add emergency contact information for this patient."}),e.jsxs(o,{variant:"outline",size:"sm",className:"text-xs",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),"Add Emergency Contact"]})]})})]}),e.jsxs(l,{className:"shadow-lg border-0 bg-white",children:[e.jsx(d,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-t-lg",children:e.jsxs(n,{className:"flex items-center gap-2 text-white",children:[e.jsx(g,{className:"w-5 h-5"}),"Visit Information"]})}),e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Registration Date"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-green-600"}),s.created_at?new Date(s.created_at).toLocaleDateString():s.registration_date?new Date(s.registration_date).toLocaleDateString():"Not available"]})]}),s.lastVisit&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Last Visit"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),new Date(s.lastVisit).toLocaleDateString()]})]}),m&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Total Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:s.appointment_count||1})]}),s.prescriptions&&s.prescriptions.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Total Prescriptions"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600 mt-1 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),s.prescriptions.length]})]}),s.medical_histories&&s.medical_histories.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Medical Records"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:s.medical_histories.length})]})]})]})]})]}),e.jsx(p,{value:"medical-history",className:"space-y-4 overflow-y-auto",children:e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsx(n,{children:"Medical History"}),e.jsx(H,{children:"Complete medical record history for this patient"})]}),e.jsx(i,{children:s.medical_histories&&s.medical_histories.length>0?e.jsx("div",{className:"space-y-4",children:s.medical_histories.map(t=>e.jsx(l,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("p",{children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Doctor"}),e.jsxs("p",{children:[t?.doctor?.user?.firstname," ",t?.doctor?.user?.lastname]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Diagnosis"}),e.jsx("p",{children:t.diagnosis})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Treatment"}),e.jsx("p",{children:t.treatment})]}),t.clinic_notes&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{children:t.clinic_notes})]}),t.followUp&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Follow-up"}),e.jsx("p",{children:t.followup_inst})]})]})})},t.id))}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No medical records found for this patient."})})]})}),e.jsx(p,{value:"medications",className:"space-y-4 overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Current Medications"]})}),e.jsx(i,{children:s.medications&&s.medications.length>0?e.jsx("div",{className:"space-y-2",children:s.medications.map((t,a)=>e.jsx(h,{variant:"outline",className:"mr-2 mb-2",children:t},a))}):e.jsx("p",{className:"text-muted-foreground",children:"No current medications recorded."})})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Known Allergies"]})}),e.jsx(i,{children:s.allergies&&s.allergies.length>0?e.jsx("div",{className:"space-y-2",children:s.allergies.map((t,a)=>e.jsx(h,{variant:"destructive",className:"mr-2 mb-2",children:t},a))}):e.jsx("p",{className:"text-muted-foreground",children:"No known allergies recorded."})})]})]})})]}),e.jsx(U,{patient:s,isOpen:P,onSubmit:t=>{M(t),j(!1)},onCancel:()=>j(!1)})]})}export{ze as default};
