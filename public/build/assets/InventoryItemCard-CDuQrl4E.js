import{r as u,j as e}from"./app-B3D5qbDj.js";import{C as h,a as g,b as j,c as f,d as N}from"./card-aufLXYM3.js";import{B as o}from"./badge-C5jiZv-M.js";import{B as c}from"./button-Bmzve6ZE.js";import{T as v}from"./triangle-alert-DFwyABKq.js";import{C as b}from"./clock-DsJZxlkr.js";import{C as y}from"./chevron-up-CNxPTNiQ.js";import{C as k}from"./chevron-down-B_C0tI7O.js";import{f as i}from"./format-BtYX0kVO.js";import"./createLucideIcon-CnoTT-Vy.js";const I=({item:s,onUpdateClick:l})=>{var d;const[t,m]=u.useState(!1),a=s.stock.stocks<=5,r=s.stocks_movement[0].expiry_date&&new Date(s.stocks_movement[0].expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3,x=n=>{switch(n){case"Medicine":return"bg-blue-100 text-blue-800";case"Vaccine":return"bg-green-100 text-green-800";case"Supply":return"bg-purple-100 text-purple-800";case"Equipment":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},p=n=>{n.preventDefault()};return e.jsxs(h,{className:`mb-4 ${a?"border-red-300":r?"border-amber-300":"border-gray-200"}`,children:[e.jsx(g,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-lg font-medium",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(o,{className:x(s.category.name),children:s.category.name}),a&&e.jsxs(o,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),"Low Stock"]}),r&&s.expirationDate&&e.jsxs(o,{variant:"outline",className:"bg-amber-100 text-amber-800 flex items-center gap-1",children:[e.jsx(b,{className:"h-3 w-3"}),"Expiring Soon"]})]})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>m(!t),className:"h-8 w-8 p-0",children:t?e.jsx(y,{className:"h-4 w-4"}):e.jsx(k,{className:"h-4 w-4"})})]})}),e.jsxs(f,{className:"pb-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:`font-medium ${a?"text-red-600":""}`,children:[s.stock.stocks," ",s.stock.stockname,"s"]})]})}),e.jsx(c,{variant:"outline",size:"sm",className:"w-full mt-2 hover:bg-secondary/80 transition-colors font-medium",onClick:p,children:"Edit Item"}),t&&e.jsx("div",{className:"mt-4 border-t pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.stocks_movement[0].expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:`font-medium ${r?"text-amber-600":""}`,children:i(new Date(s.stocks_movement[0].expiry_date),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:i(new Date((d=s.stocks_movement[0])==null?void 0:d.updated_at),"MMM dd, yyyy")})]}),s.isVaccine&&e.jsxs(e.Fragment,{children:[s.lotNumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lot Number"}),e.jsx("p",{className:"font-medium",children:s.lotNumber})]}),s.location&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Location"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})})]}),t&&e.jsx(N,{className:"pt-0",children:e.jsx(c,{variant:"outline",size:"sm",className:"w-full hover:bg-secondary/80 transition-colors font-medium",onClick:()=>l(s),children:"Update Stock"})})]})};export{I as default};
