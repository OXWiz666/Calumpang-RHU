import{r as n,j as e,a as R}from"./app-CHmAHYu-.js";import{A as Je}from"./AdminLayout-9W-WL7Wy.js";import Ke from"./AddItemForm-D6CYd2dC.js";import We from"./AddCategoryForm-Be3k1sBc.js";import{E as we,C as Ye}from"./CategoryManagement-CbusWXgk.js";import et from"./ViewItemModal-DrmEvUNb.js";import tt from"./EditItemModal-_L_ugHog.js";import st from"./UpdateStocksModal-uQgiBEug.js";import at from"./SuccessModal-D23SRKSr.js";import rt from"./DispenseStockModal-wvI18jDT.js";import it from"./BatchDisposalModal-B4RlAoyl.js";import{C as p,c as y,a as nt,b as ot}from"./card-DBbiPc8t.js";import{B as l}from"./button-ChwiRyPe.js";import{B as Se}from"./badge-Cnce-efU.js";import{I as ct}from"./input-BPj6AWWm.js";import{S as Z,a as G,b as X,c as J,d as c}from"./select-C-klL9fb.js";import{D as be,a as ke,b as Ce,e as d}from"./dropdown-menu-8M9OQ-IT.js";import{m as j}from"./proxy-u0CWR7BN.js";import{T as De}from"./tag-w2mnolr8.js";import{P as lt}from"./plus-BzUTfFDC.js";import{P as K}from"./package-2mJDRxNG.js";import{T as F}from"./trending-up-BO77fQj6.js";import{T as dt}from"./triangle-alert-BqmPOXrb.js";import{T as mt}from"./trending-down-ByhE_326.js";import{C as xt}from"./clock-CvtbPHXn.js";import{S as ht}from"./search-B3LjYI5L.js";import{c as se}from"./createLucideIcon-DiRkYF3I.js";import{A as ut}from"./index-uk-MvJxd.js";import{E as W}from"./eye-BfUsOhV-.js";import{A as Ae,a as Ie}from"./archive-DRWQyqdT.js";import{S as Y}from"./square-pen-CxDkRLRQ.js";import{T as ee}from"./trash-2-D9UIUsgO.js";import{S as pt}from"./star-rGySCMq0.js";import{H as yt}from"./house-1B4ceBAE.js";import{U as gt}from"./users-CIf0kQAe.js";import{A as jt}from"./activity-BVgK8zXY.js";import{Z as ft}from"./zap-B08bLHwL.js";import{S as Nt}from"./shield-BOpraV2u.js";import{H as vt}from"./heart-Br0eR3Sa.js";import{F as wt}from"./flask-conical-BsNHZxLt.js";import{S as St}from"./stethoscope-CvenzO2s.js";import{S as bt}from"./syringe-BupmrxCr.js";import{P as kt}from"./pill-D9dQZu5T.js";import"./Subservices-hmtw6ece.js";import"./utils-DnUyQCA6.js";import"./avatar-BtCwL2KE.js";import"./index-2qu7vwLc.js";import"./separator-D9NJ7C8W.js";import"./index-CmqNn0LS.js";import"./index-Db9BPqZ8.js";import"./moment-C5S46NFB.js";import"./dialog-HjaLH6lU.js";import"./Combination-DUkbLZrH.js";import"./label-B65m6QKw.js";import"./popover-BtpiBUVW.js";import"./format-Dp3w_Y3x.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./index-DuaP1el2.js";import"./index-BTsu8x5p.js";import"./TextInput-CGuPODEu.js";import"./x-hh3rg39X.js";import"./settings-DOVGbSap.js";import"./calendar-DP61lksy.js";import"./pusher-Iryyy0JQ.js";import"./printer-leDlUT32.js";import"./file-text-lhyJHkLH.js";import"./circle-check-big-B1iSVeIy.js";import"./bell-CMnzRPyV.js";import"./autoprefixer-C5OKt-YQ.js";import"./Toaster-Bgx1_qta.js";import"./toast-CAtB-aU6.js";import"./index-CYMpX3E5.js";import"./index-BjJdp2-0.js";import"./layers-HzxRhVBG.js";import"./chart-column-BlAs_qHe.js";import"./textarea-upTaDSg0.js";import"./building-2-Bg6zkZYJ.js";import"./map-pin-CzH8NXXX.js";import"./hash-BE1jCmYO.js";import"./index-Da62_rko.js";import"./circle-x-C6dCsmyT.js";import"./circle-alert-DbXnMp1a.js";import"./index-CplhEpNv.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Dt=se("Grid3x3",Ct);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],It=se("List",At);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],te=se("ShoppingCart",Mt);function oa({categories:A=[],allCategories:Me=[],inventoryItems:I=[]}){const[V,ae]=n.useState("list"),[u,_e]=n.useState("name"),[q,Ee]=n.useState("asc"),[N,re]=n.useState(""),[M,ie]=n.useState("all"),[v,ne]=n.useState("all"),[_,E]=n.useState(1),[T]=n.useState(10),[Te,oe]=n.useState(!1),[Ue,ce]=n.useState(!1),[Pe,le]=n.useState(!1),[Le,de]=n.useState(!1),[Fe,me]=n.useState(!1),[Ve,w]=n.useState(!1),[S,b]=n.useState(null),[qe,U]=n.useState(""),[ze,xe]=n.useState(!1),[Be,he]=n.useState(!1),[$e,Qe]=n.useState("single"),[He,ue]=n.useState(!1),Oe=(t,a)=>{const s=t.reduce((i,o)=>i+o.quantity,0);return s===0?"out_of_stock":s<=a?"low_stock":t.some(i=>{if(!i.expiryDate||i.expiryDate==="N/A")return!1;try{const o=new Date(i.expiryDate);if(isNaN(o.getTime()))return!1;const m=Math.ceil((o-new Date)/(1e3*60*60*24));return m<=30&&m>0}catch{return console.warn("Invalid expiry date:",i.expiryDate),!1}})?"expiring_soon":"in_stock"},Re=t=>{const a=t.stock?.stocks||0,s=t.minimum_stock||10;return a===0?"out_of_stock":a<=s?"low_stock":"in_stock"},P=t=>t?new Date(t)<new Date:!1,L=t=>{if(!t)return!1;const a=new Date(t),r=Math.ceil((a-new Date)/(1e3*60*60*24));return r<=30&&r>0},f=t=>{const a=t?.icon||"Package",s=Ze(a);switch(a){case"Pill":return e.jsx(kt,{className:`h-5 w-5 ${s}`});case"Syringe":return e.jsx(bt,{className:`h-5 w-5 ${s}`});case"Stethoscope":return e.jsx(St,{className:`h-5 w-5 ${s}`});case"FlaskConical":return e.jsx(wt,{className:`h-5 w-5 ${s}`});case"Heart":return e.jsx(vt,{className:`h-5 w-5 ${s}`});case"Shield":return e.jsx(Nt,{className:`h-5 w-5 ${s}`});case"Zap":return e.jsx(ft,{className:`h-5 w-5 ${s}`});case"Activity":return e.jsx(jt,{className:`h-5 w-5 ${s}`});case"Users":return e.jsx(gt,{className:`h-5 w-5 ${s}`});case"Home":return e.jsx(yt,{className:`h-5 w-5 ${s}`});case"Star":return e.jsx(pt,{className:`h-5 w-5 ${s}`});default:return e.jsx(K,{className:`h-5 w-5 ${s}`})}},Ze=t=>{switch(t){case"Pill":return"text-blue-600";case"Syringe":return"text-green-600";case"Stethoscope":return"text-purple-600";case"FlaskConical":return"text-orange-600";case"Heart":return"text-red-600";case"Shield":return"text-indigo-600";case"Zap":return"text-yellow-600";case"Activity":return"text-cyan-600";case"Users":return"text-pink-600";case"Home":return"text-emerald-600";case"Star":return"text-amber-600";default:return"text-gray-600"}},k=t=>{b(t),de(!0)},z=t=>{b(t),me(!0)},pe=t=>{const a="Item archived successfully!",s="Failed to archive item!";R.put(route("pharmacist.inventory.item.archive",t.id),{},{onSuccess:()=>{U(a),w(!0),window.location.reload()},onError:()=>{U(s),w(!0)}})},ye=t=>{const a="Item unarchived successfully!",s="Failed to unarchive item!";R.put(route("pharmacist.inventory.item.unarchive",t.id),{},{onSuccess:()=>{U(a),w(!0),window.location.reload()},onError:()=>{U(s),w(!0)}})},B=t=>{b(t),xe(!0)},$=(t,a="single")=>{b(t),Qe(a),he(!0)},Q=(t,a=null)=>{const s=a?{...t,id:a.id,batch_number:a.batchNumber,expiry_date:a.expiryDate,quantity:a.quantity,stock:{stocks:a.quantity}}:t;b(s),ue(!0)},Ge=t=>{if(!t||t.length===0)return[];const a=t.reduce((s,r)=>{const i=r.name;return s[i]||(s[i]={id:r.id,name:i,category:r.category?.name||"Uncategorized",categoryIcon:f(r.category),categoryId:r.category_id,manufacturer:r.manufacturer||"N/A",description:r.description||"",unit:r.unit_type||"pieces",minimumStock:r.minimum_stock||10,maximumStock:r.maximum_stock||100,isArchived:r.status===0,lastUpdated:r.updated_at||"N/A",batches:[]}),s[i].batches.push({id:r.id,batchNumber:r.batch_number||"N/A",quantity:r.stock?.stocks||0,expiryDate:r.expiry_date||"N/A",storageLocation:r.storage_location||"",status:Re(r),lastUpdated:r.updated_at||"N/A"}),s},{});return Object.values(a).map(s=>{const r=s.batches.reduce((o,x)=>o+x.quantity,0),i=Oe(s.batches,s.minimumStock);return{...s,totalQuantity:r,status:i,batchCount:s.batches.length}})},g=I&&I.length>0?Ge(I):[{id:1,name:"Paracetamol 500mg",category:"Pain Relief",categoryIcon:f({icon:"Pill"}),categoryId:1,manufacturer:"MedPharm Corp",description:"Pain relief medication",unit:"tablets",minimumStock:10,maximumStock:200,isArchived:!1,lastUpdated:"2024-01-15",totalQuantity:250,status:"in_stock",batchCount:2,batches:[{id:1,batchNumber:"PAR-2024-001",quantity:150,expiryDate:"2025-06-15",storageLocation:"A-1-01",status:"in_stock",lastUpdated:"2024-01-15"},{id:6,batchNumber:"PAR-2024-002",quantity:100,expiryDate:"2025-08-20",storageLocation:"A-1-02",status:"in_stock",lastUpdated:"2024-01-20"}]},{id:2,name:"Amoxicillin 250mg",category:"Antibiotics",categoryIcon:f({icon:"Syringe"}),categoryId:2,manufacturer:"Antibio Ltd",description:"Antibiotic medication",unit:"capsules",minimumStock:5,maximumStock:100,isArchived:!1,lastUpdated:"2024-01-14",totalQuantity:5,status:"low_stock",batchCount:1,batches:[{id:2,batchNumber:"AMX-2024-002",quantity:5,expiryDate:"2024-12-20",storageLocation:"B-2-03",status:"low_stock",lastUpdated:"2024-01-14"}]},{id:3,name:"Ibuprofen 400mg",category:"Pain Relief",categoryIcon:f({icon:"Pill"}),categoryId:1,manufacturer:"PainFree Inc",description:"Anti-inflammatory medication",unit:"tablets",minimumStock:10,maximumStock:150,isArchived:!1,lastUpdated:"2024-01-13",totalQuantity:0,status:"out_of_stock",batchCount:1,batches:[{id:3,batchNumber:"IBU-2024-003",quantity:0,expiryDate:"2025-03-10",storageLocation:"A-1-02",status:"out_of_stock",lastUpdated:"2024-01-13"}]},{id:4,name:"Vitamin C 1000mg",category:"Vitamins",categoryIcon:f({icon:"Heart"}),categoryId:3,manufacturer:"VitaCorp",description:"Vitamin supplement",unit:"tablets",minimumStock:20,maximumStock:300,isArchived:!1,lastUpdated:"2024-01-12",totalQuantity:200,status:"expiring_soon",batchCount:1,batches:[{id:4,batchNumber:"VIT-2024-004",quantity:200,expiryDate:"2024-08-30",storageLocation:"C-3-01",status:"expiring_soon",lastUpdated:"2024-01-12"}]},{id:5,name:"Metformin 500mg",category:"Chronic Care",categoryIcon:f({icon:"Pill"}),categoryId:4,manufacturer:"DiabCare",description:"Diabetes medication",unit:"tablets",minimumStock:15,maximumStock:200,isArchived:!1,lastUpdated:"2024-01-11",totalQuantity:80,status:"in_stock",batchCount:1,batches:[{id:5,batchNumber:"MET-2024-005",quantity:80,expiryDate:"2025-09-15",storageLocation:"D-4-02",status:"in_stock",lastUpdated:"2024-01-11"}]}],[ge,Xe]=n.useState(g);n.useEffect(()=>{let t=g.filter(a=>{const s=a.name.toLowerCase().includes(N.toLowerCase())||a.category.toLowerCase().includes(N.toLowerCase())||a.batches.some(o=>o.batchNumber.toLowerCase().includes(N.toLowerCase())),r=M==="all"||a.category===M;let i=!1;return v==="all"?i=!0:v==="archived"?i=a.isArchived:i=a.status===v&&!a.isArchived,s&&r&&i});t.sort((a,s)=>{let r=a[u],i=s[u];if(u==="name"||u==="category")r=r.toLowerCase(),i=i.toLowerCase();else if(u==="quantity")r=a.totalQuantity||0,i=s.totalQuantity||0;else if(u==="expiryDate"){const o=Math.min(...a.batches.map(m=>{if(m.expiryDate==="N/A")return new Date("2099-12-31").getTime();try{const h=new Date(m.expiryDate);return isNaN(h.getTime())?new Date("2099-12-31").getTime():h.getTime()}catch{return new Date("2099-12-31").getTime()}})),x=Math.min(...s.batches.map(m=>{if(m.expiryDate==="N/A")return new Date("2099-12-31").getTime();try{const h=new Date(m.expiryDate);return isNaN(h.getTime())?new Date("2099-12-31").getTime():h.getTime()}catch{return new Date("2099-12-31").getTime()}}));r=o,i=x}else u==="isArchived"&&(r=r?1:0,i=i?1:0);return q==="asc"?r>i?1:-1:r<i?1:-1}),Xe(t),E(1)},[N,M,v,u,q]);const C=ge.length,H=Math.ceil(C/T),O=(_-1)*T,je=O+T,fe=ge.slice(O,je),Ne=(t,a=!1)=>{if(a)return"bg-gray-100 text-gray-600 border-gray-300";switch(t){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-amber-100 text-amber-800 border-amber-200";case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";case"expiring_soon":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ve=(t,a=!1)=>{if(a)return"Archived";switch(t){case"in_stock":return"In Stock";case"low_stock":return"Low Stock";case"out_of_stock":return"Out of Stock";case"expiring_soon":return"Expiring Soon";default:return"Unknown"}},D={total:g.filter(t=>!t.isArchived).length,inStock:g.filter(t=>t.status==="in_stock"&&!t.isArchived).length,lowStock:g.filter(t=>t.status==="low_stock"&&!t.isArchived).length,outOfStock:g.filter(t=>t.status==="out_of_stock"&&!t.isArchived).length,expiringSoon:g.filter(t=>t.status==="expiring_soon"&&!t.isArchived).length};return n.useEffect(()=>{if(!window.Echo)return;const t=window.Echo.channel("inventory"),a=()=>{R.reload({only:["inventoryItems","categories","allCategories"]})};return t.listen(".InventoryUpdated",a),()=>{try{t.stopListening(".InventoryUpdated",a)}catch{}}},[]),e.jsx(Je,{header:"Inventory Management",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your pharmacy inventory efficiently"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(l,{variant:"outline",className:"flex items-center gap-2",onClick:()=>ce(!0),children:[e.jsx(De,{className:"h-4 w-4"}),"Add Category"]}),e.jsxs(l,{variant:"outline",className:"flex items-center gap-2",onClick:()=>le(!0),children:[e.jsx(De,{className:"h-4 w-4"}),"Manage Categories"]}),e.jsxs(l,{className:"flex items-center gap-2",style:{backgroundColor:"#2C3E50"},onClick:()=>oe(!0),children:[e.jsx(lt,{className:"h-4 w-4"}),"Add Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(p,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.total})]}),e.jsx(K,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(p,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Stock"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:D.inStock})]}),e.jsx(F,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(p,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:D.lowStock})]}),e.jsx(dt,{className:"h-8 w-8 text-amber-600"})]})})}),e.jsx(p,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:D.outOfStock})]}),e.jsx(mt,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(p,{className:"hover:shadow-md transition-all duration-300",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:D.expiringSoon})]}),e.jsx(xt,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsx(p,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(ct,{placeholder:"Search items, batch numbers, or categories...",value:N,onChange:t=>re(t.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Z,{value:M,onValueChange:ie,children:[e.jsx(G,{className:"w-40",children:e.jsx(X,{placeholder:"Category"})}),e.jsxs(J,{children:[e.jsx(c,{value:"all",children:"All Categories"}),A&&A.map(t=>e.jsx(c,{value:t.name,children:t.name},t.id))]})]}),e.jsxs(Z,{value:v,onValueChange:ne,children:[e.jsx(G,{className:"w-40",children:e.jsx(X,{placeholder:"Status"})}),e.jsxs(J,{children:[e.jsx(c,{value:"all",children:"All Status"}),e.jsx(c,{value:"in_stock",children:"In Stock"}),e.jsx(c,{value:"low_stock",children:"Low Stock"}),e.jsx(c,{value:"out_of_stock",children:"Out of Stock"}),e.jsx(c,{value:"expiring_soon",children:"Expiring Soon"}),e.jsx(c,{value:"archived",children:"Archived"})]})]}),e.jsxs(Z,{value:`${u}-${q}`,onValueChange:t=>{const[a,s]=t.split("-");_e(a),Ee(s)},children:[e.jsx(G,{className:"w-40",children:e.jsx(X,{placeholder:"Sort by"})}),e.jsxs(J,{children:[e.jsx(c,{value:"name-asc",children:"Name (A-Z)"}),e.jsx(c,{value:"name-desc",children:"Name (Z-A)"}),e.jsx(c,{value:"category-asc",children:"Category (A-Z)"}),e.jsx(c,{value:"category-desc",children:"Category (Z-A)"}),e.jsx(c,{value:"quantity-asc",children:"Quantity (Low-High)"}),e.jsx(c,{value:"quantity-desc",children:"Quantity (High-Low)"}),e.jsx(c,{value:"expiryDate-asc",children:"Expiry (Soon-Later)"}),e.jsx(c,{value:"expiryDate-desc",children:"Expiry (Later-Soon)"}),e.jsx(c,{value:"isArchived-asc",children:"Status (Active-Archived)"}),e.jsx(c,{value:"isArchived-desc",children:"Status (Archived-Active)"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg",children:[e.jsx(l,{variant:V==="list"?"default":"ghost",size:"sm",onClick:()=>ae("list"),children:e.jsx(It,{className:"h-4 w-4"})}),e.jsx(l,{variant:V==="grid"?"default":"ghost",size:"sm",onClick:()=>ae("grid"),children:e.jsx(Dt,{className:"h-4 w-4"})})]})]})]})})}),e.jsx(ut,{mode:"wait",children:V==="grid"?e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:fe.map((t,a)=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},children:e.jsxs(p,{className:"hover:shadow-lg transition-all duration-300 group",children:[e.jsx(nt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl cursor-pointer hover:scale-110 transition-transform",onClick:()=>k(t),title:"View Details",children:t.categoryIcon}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ot,{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.category})]})]}),e.jsxs(be,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(we,{className:"h-4 w-4"})})}),e.jsxs(Ce,{align:"end",children:[e.jsxs(d,{onClick:()=>k(t),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"View Details"]}),t.isArchived?e.jsxs(d,{className:"text-green-600",onClick:()=>ye(t),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{onClick:()=>z(t),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(d,{onClick:()=>B(t),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Dispense Stock"]}),e.jsxs(d,{onClick:()=>Q(t),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Update Stocks"]}),t.batches.some(s=>P(s.expiryDate)||L(s.expiryDate))&&e.jsxs(d,{onClick:()=>$(t),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Dispose Batch"]}),e.jsxs(d,{className:"text-orange-600",onClick:()=>pe(t),children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Quantity"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[t.totalQuantity," ",t.unit]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Batches"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[t.batchCount," batch",t.batchCount!==1?"es":""]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Batch Details:"}),e.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:t.batches.map((s,r)=>e.jsxs("div",{className:"text-xs bg-gray-50 p-2 rounded",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-mono",children:s.batchNumber}),e.jsx("span",{className:"font-semibold",children:s.quantity})]}),e.jsxs("div",{className:"text-gray-500",children:["Exp: ",(()=>{try{if(!s.expiryDate||s.expiryDate==="N/A")return"N/A";const i=new Date(s.expiryDate);return isNaN(i.getTime())?"Invalid Date":i.toLocaleDateString()}catch{return"Invalid Date"}})()]})]},s.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Manufacturer"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.manufacturer})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Se,{className:Ne(t.status,t.isArchived),children:ve(t.status,t.isArchived)})})})]})]})},t.id))},"grid"):e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(p,{children:e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Item Details"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Total Quantity"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Batches"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Earliest Expiry"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{children:fe.map((t,a)=>e.jsxs(j.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:a*.05},className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xl cursor-pointer hover:scale-110 transition-transform",onClick:()=>k(t),title:"View Details",children:t.categoryIcon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.manufacturer," â€¢ ",t.unit]})]})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-600",children:t.category}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.totalQuantity}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:t.unit})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.batchCount," batch",t.batchCount!==1?"es":""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.batches.slice(0,2).map(s=>s.batchNumber).join(", "),t.batchCount>2&&` +${t.batchCount-2} more`]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const s=t.batches.reduce((o,x)=>{if(!o||x.expiryDate==="N/A"||o.expiryDate==="N/A")return x;try{const m=new Date(x.expiryDate),h=new Date(o.expiryDate);return isNaN(m.getTime())||isNaN(h.getTime())?o:m<h?x:o}catch{return o}},null);if(!s||s.expiryDate==="N/A")return e.jsx("span",{className:"text-sm text-gray-500",children:"N/A"});const r=P(s.expiryDate),i=L(s.expiryDate);return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`text-sm ${r?"text-red-600 font-semibold":i?"text-amber-600 font-semibold":"text-gray-600"}`,children:(()=>{try{const o=new Date(s.expiryDate);return isNaN(o.getTime())?"Invalid Date":o.toLocaleDateString()}catch{return"Invalid Date"}})()}),r&&e.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:"EXPIRED"}),i&&!r&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded-full",children:"EXPIRING SOON"})]})})()})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Se,{className:Ne(t.status,t.isArchived),children:ve(t.status,t.isArchived)})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>k(t),title:"View Details",children:e.jsx(W,{className:"h-4 w-4"})}),!t.isArchived&&e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>z(t),title:"Edit Item",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>B(t),title:"Dispense Stock",className:"text-green-600 hover:text-green-700 border-green-200 hover:border-green-300",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>Q(t),title:"Update Stocks",className:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300",children:e.jsx(F,{className:"h-4 w-4"})}),t.batches.some(s=>P(s.expiryDate)||L(s.expiryDate))&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>$(t),title:"Dispose Batch",className:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300",children:e.jsx(ee,{className:"h-4 w-4"})})]}),e.jsxs(be,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",children:e.jsx(we,{className:"h-4 w-4"})})}),e.jsxs(Ce,{align:"end",children:[e.jsxs(d,{onClick:()=>k(t),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"View Details"]}),t.isArchived?e.jsxs(d,{className:"text-green-600",onClick:()=>ye(t),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{onClick:()=>z(t),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),e.jsxs(d,{onClick:()=>B(t),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Dispense Stock"]}),e.jsxs(d,{onClick:()=>Q(t),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Update Stocks"]}),t.batches.some(s=>P(s.expiryDate)||L(s.expiryDate))&&e.jsxs(d,{onClick:()=>$(t),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Dispose Batch"]}),e.jsxs(d,{className:"text-orange-600",onClick:()=>pe(t),children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})]})})]},t.id))})]})})})})},"list")}),C>T&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",O+1," to ",Math.min(je,C)," of ",C," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>E(t=>Math.max(t-1,1)),disabled:_===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:H},(t,a)=>a+1).map(t=>e.jsx(l,{variant:_===t?"default":"outline",size:"sm",onClick:()=>E(t),className:"w-8 h-8 p-0",children:t},t))}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>E(t=>Math.min(t+1,H)),disabled:_===H,children:"Next"})]})]}),C===0&&e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(K,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search or filter criteria"}),e.jsx(l,{onClick:()=>{re(""),ie("all"),ne("all")},children:"Clear Filters"})]}),e.jsx(Ke,{open:Te,onClose:()=>oe(!1),categories:A||[]}),e.jsx(We,{open:Ue,onClose:()=>ce(!1)}),e.jsx(Ye,{open:Pe,onClose:()=>le(!1),categories:Me}),e.jsx(et,{open:Le,onClose:()=>de(!1),item:S}),e.jsx(tt,{open:Fe,onClose:()=>me(!1),item:S,categories:A||[]}),e.jsx(at,{open:Ve,onClose:()=>w(!1),message:qe}),e.jsx(rt,{open:ze,onClose:()=>xe(!1),item:S}),e.jsx(it,{open:Be,onClose:()=>he(!1),item:S,multi:$e==="multi",itemsForMulti:I}),e.jsx(st,{open:He,onClose:()=>ue(!1),item:S})]})})}export{oa as default};
