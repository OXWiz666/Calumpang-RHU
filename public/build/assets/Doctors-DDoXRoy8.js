import{a as M,u as T,j as e,r as O,b as $}from"./app-Bz1k8fwb.js";import{r as a}from"./vendor-DkBadjUr.js";import{s as l}from"./toast-Cn-iRbzP.js";import{B as h}from"./button-BuxGVvE1.js";import{I as ae}from"./input-Cxfo37eO.js";import{A as te,b as re}from"./avatar-B9dC9zW4.js";import{B as n}from"./badge-4-rsJP2l.js";import{d as ie}from"./dialog-Nua2NsPT.js";import"./label-DZLKBD76.js";import{S as L,a as F,b as P,c as k,d as r}from"./select-CzkTuhTK.js";import{T as oe,a as le,b as B,f as d,d as ce,e as m}from"./table2-CcxUYPo2.js";import{C as ne}from"./CustomModal-CryDh0qK.js";import de from"./EditDoctorModal-C_cYVxOO.js";import"./AdminLayout-BoF7Vf7c.js";import{I as me}from"./InputLabel-Dpu2QG6G.js";import{C as x,a as he,b as ue,e as pe,c as y}from"./card-5zXl5jGJ.js";import{D as xe,a as fe,b as je,c as ge,d as U,e as f}from"./dropdown-menu-D2XzAYIg.js";import{A as ve,a as be,b as ye,c as Ne,d as we,e as De,f as Se,g as Ce}from"./alert-dialog-CCPENtyV.js";import Ae from"./Sidebar-C8bNX1Cb.js";import Ee from"./StaffLayout-DHu10Xkp.js";import{m as u}from"./proxy-Ciz88pZ8.js";import{S as Ie}from"./search-Cye_TdpF.js";import{F as Me}from"./filter-BAwJ6QQu.js";import{S as N}from"./square-pen-Bb1JtfBr.js";import{E as Te}from"./ellipsis-gjrDGaHy.js";import{A as Oe,a as $e}from"./archive-BwGVl8jP.js";import{C as Le}from"./chevron-left-B36-TXNE.js";import{C as Fe}from"./chevron-right-B3qqnx4D.js";import"./pusher-DVtoYAOu.js";import"./use-toast-Dm0PN6fH.js";import"./refresh-cw-D3hZ7e_O.js";import"./createLucideIcon-BKWaAi2G.js";import"./save-CAdd64LS.js";import"./download-BH8XyxCx.js";import"./trash-2-DJ5zXW8D.js";import"./info-BVLwYIm5.js";import"./triangle-alert-BslwqqvL.js";import"./circle-x-Cf2XhiVO.js";import"./circle-check-F3PuHnLX.js";import"./index-Sbype2of.js";import"./react-icons.esm-CaEbm_m1.js";import"./index-CVzUxLnK.js";import"./tslib.es6-M_FJ09fS.js";import"./index-COj9XpJO.js";import"./index-C9cWDRNv.js";import"./index-C2K23d2_.js";import"./index-zhi7iPPU.js";import"./index-2C8mQqet.js";import"./index-DqxisvwK.js";import"./index-DFHF6qpL.js";import"./textarea-7f3gFOps.js";import"./stethoscope-QcN9KdKi.js";import"./separator-CSpA6dDL.js";import"./moment-C5S46NFB.js";import"./calendar-COLlMSdc.js";import"./format-Dp3w_Y3x.js";import"./isSameMonth-BOwz-_mK.js";import"./isBefore-Bnl9x5VB.js";import"./TextInput--rawIXeC.js";import"./x-b8JahagL.js";import"./settings-D_MeB5oN.js";import"./house-CSq-WFst.js";import"./calendar-D9APQM2e.js";import"./users-D4PhO1-D.js";import"./file-text-YZXa1D2L.js";import"./pill-DIGxtF-3.js";import"./pusher-QUfwrhWv.js";import"./printer-CfgcPaUh.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./index-9PdYsA3y.js";import"./autoprefixer-C7r7RnUw.js";import"./unit-CopbpOEH.js";import"./Toaster-BW5e81vo.js";import"./toast-C0hnCHvT.js";import"./layers-OK8ayVTK.js";import"./chart-column-yMaSKbSU.js";import"./index-D3Zb4dyG.js";import"./alert-DTbDmftc.js";import"./index-WHihrx3k.js";import"./shield-B7gr9OVN.js";import"./PrimaryButton-D6Hbi7v8.js";import"./circle-plus-hYoTMpMo.js";function Pa({doctorsitems:R,doctors:j,questions:Pe}){const{flash:i}=M().props,[ke,Be]=a.useState(!1),[Ue,p]=a.useState(!1),[Re,_e]=a.useState(!1),[_,w]=a.useState(!1),[D,g]=a.useState(null);a.useEffect(()=>{i&&(i.success?l("Success!",i.success,"success"):i.error?l("Error",i.error,"error"):i.message&&l(i.title||"Notification",i.message,i.icon||"info"))},[i]);const{data:He,setData:Ve,post:ze,processing:qe,errors:Qe,clearErrors:We,reset:Ge}=T({first_name:"",middlename:"",last_name:"",suffix:"",contactNumber:"",email:"",password:"",confirmPassword:"",gender:"",birth:"",isAdmin:"true"}),H=s=>{g(s),w(!0)},V=()=>{w(!1),g(null)},z=s=>{console.log("Edit success callback triggered:",s),l("Success!","Doctor information updated successfully!","success","update"),O.reload({only:["auth"]})},[Je,Ke]=a.useState(!1),[Xe,Ye]=a.useState(!1),[Ze,es]=a.useState(""),[ss,as]=a.useState(""),[ts,q]=a.useState(1),S=s=>{C("status",s.status.toString()),g(s),q(s.status),I(!0)},{data:Q,setData:C,post:W,processing:G,errors:rs,clearErrors:is,reset:os}=T({status:""}),v=s=>{I(!1)},J=s=>{s.preventDefault(),W(route("doctor.update.status",{doctor:D.id}),{onSuccess:t=>{v(),l("Success!","Doctor status updated successfully","success","update")}})},[c,A]=a.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:""}),E=(s,t,o,se)=>{A({isOpen:!0,title:s,message:t,onConfirm:o,type:se})},b=()=>{A({...c,isOpen:!1})},K=s=>{const t=`${s.user?.firstname} ${s.user?.lastname}`;p(!0),$.post(route("admin.staff.archive"),{staff_id:s.user?.id}).then(o=>{l("Account Archived",`${t}'s account has been archived successfully.`,"success","archive"),window.location.reload()}).catch(o=>{l("Archive Failed",`There was a problem archiving ${t}'s account: ${o.response?.data?.message||"Please try again."}`,"error"),console.error("Error archiving staff:",o)}).finally(()=>{p(!1)})},X=s=>{const t=`${s.user?.firstname} ${s.user?.lastname}`;p(!0),$.post(route("admin.staff.unarchive"),{staff_id:s.user?.id}).then(o=>{l("Account Unarchived",`${t}'s account has been unarchived successfully.`,"success","unarchive"),window.location.reload()}).catch(o=>{l("Unarchive Failed",`There was a problem unarchiving ${t}'s account: ${o.response?.data?.message||"Please try again."}`,"error"),console.error("Error unarchiving staff:",o)}).finally(()=>{p(!1)})},Y=s=>{if(!s||!s.status)return null;switch(s.status){case 1:return e.jsx(n,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Available"});case 2:return e.jsx(n,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:"Inactive"});case 3:return e.jsx(n,{className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:"On Leave"});case 4:return e.jsx(n,{className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:"In Consultation"});case 5:return e.jsx(n,{className:"bg-red-100 text-red-800 hover:bg-red-200",children:"Archived"});default:return e.jsx(n,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:"Unknown"})}},[Z,I]=a.useState(!1),{links:ee}=M().props.doctors;return e.jsxs(Ee,{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Doctors"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage medical professionals and their availability"})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-8",children:[e.jsx(Ae,{activeTab:"doctors"}),e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(x,{className:"shadow-lg border-0",children:e.jsx(he,{children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{children:[e.jsx(ue,{className:"text-2xl font-bold text-gray-900",children:"All Doctors"}),e.jsx(pe,{className:"text-gray-600 mt-1",children:"Manage and configure doctor profiles"})]})})})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(x,{className:"shadow-lg border-0",children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(ae,{placeholder:"Search doctors...",className:"pl-10 border-2 focus:border-green-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-4 w-4 text-gray-500"}),e.jsxs(L,{children:[e.jsx(F,{className:"w-[180px] border-2",children:e.jsx(P,{placeholder:"Filter by status"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"1",children:"Available"}),e.jsx(r,{value:"2",children:"Inactive"}),e.jsx(r,{value:"3",children:"On Leave"}),e.jsx(r,{value:"4",children:"In Consultation"}),e.jsx(r,{value:"5",children:"Archived"})]})]})]})]})})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(x,{className:"shadow-lg border-0 overflow-hidden",children:e.jsx(y,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(oe,{children:[e.jsx(le,{className:"bg-gray-50",children:e.jsxs(B,{children:[e.jsx(d,{children:"ID"}),e.jsx(d,{children:"Doctor"}),e.jsx(d,{children:"Medical License Number"}),e.jsx(d,{children:"Contact Information"}),e.jsx(d,{children:"Status"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(ce,{children:R.map(s=>e.jsxs(B,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(m,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:["DOC-",s.id]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-10 w-10",children:e.jsxs(re,{className:"bg-green-100 text-green-700 font-semibold",children:[s.user?.firstname?.charAt(0),s.user?.lastname?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.user?.firstname," ",s.user?.lastname]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Doctor"})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"text-sm text-gray-700",children:s.user?.license_number||"Not Set"})}),e.jsx(m,{children:e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("div",{children:s.user?.contactno||"Not provided"}),e.jsx("div",{className:"text-gray-500",children:s.user?.email})]})}),e.jsx(m,{children:Y(s)}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-green-100 hover:text-green-600",onClick:()=>S(s),title:"Edit status",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsxs(xe,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(Te,{className:"h-4 w-4"})})}),e.jsxs(je,{align:"end",children:[e.jsx(ge,{children:"Actions"}),e.jsx(U,{}),e.jsxs(f,{onClick:()=>H(s),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Edit Doctor"]}),e.jsxs(f,{onClick:()=>S(s),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Edit Status"]}),e.jsx(U,{}),s.status===5?e.jsxs(f,{onClick:()=>E("Unarchive Doctor",`Are you sure you want to unarchive ${s.user.firstname} ${s.user.lastname}'s account?`,()=>X(s),"unarchive"),className:"text-green-600",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Unarchive"]}):e.jsxs(f,{onClick:()=>E("Archive Doctor",`Are you sure you want to archive ${s.user.firstname} ${s.user.lastname}'s account?`,()=>K(s),"archive"),className:"text-red-600",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Archive"]})]})]})]})})]},s.id))})]})})})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(x,{className:"shadow-lg border-0",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",j.from," to ",j.to," of ",j.total," Results"]}),e.jsx("div",{className:"flex items-center gap-2",children:ee.map((s,t)=>e.jsx(h,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url||s.active,onClick:()=>{s.url&&O.get(s.url)},children:s.label.includes("Previous")?e.jsx(Le,{className:"h-4 w-4"}):s.label.includes("Next")?e.jsx(Fe,{className:"h-4 w-4"}):s.label},t))})]})})})})]})]})]}),e.jsx(ne,{isOpen:Z,maxWidth:"sm",onClose:v,children:e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(me,{htmlFor:"status",className:"text-right",children:"Status"}),e.jsxs(L,{value:Q.status,onValueChange:s=>{C("status",s)},children:[e.jsx(F,{className:"col-span-3",children:e.jsx(P,{placeholder:"Select status"})}),e.jsxs(k,{children:[e.jsx(r,{value:"1",children:"Available"}),e.jsx(r,{value:"2",children:"Inactive"}),e.jsx(r,{value:"4",children:"In Consultation"}),e.jsx(r,{value:"3",children:"On Leave"}),e.jsx(r,{value:"5",children:"Archived"})]})]})]})}),e.jsxs(ie,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),e.jsx(h,{type:"button",disabled:G,onClick:J,children:"Save"})]})]})}),e.jsx(ve,{open:c.isOpen,onOpenChange:s=>{s||b()},children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(Ne,{children:c.title}),e.jsx(we,{children:c.message})]}),e.jsxs(De,{children:[e.jsx(Se,{onClick:b,children:"Cancel"}),e.jsx(Ce,{onClick:s=>{s.preventDefault(),b(),c.onConfirm&&setTimeout(()=>{c.onConfirm()},100)},className:c.type==="archive"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",children:c.type==="archive"?"Archive":"Unarchive"})]})]})}),e.jsx(de,{doctor:D,isOpen:_,onClose:V,onSuccess:z})]})}export{Pa as default};
