import{j as e}from"./app-Bz1k8fwb.js";import{r as i}from"./vendor-DkBadjUr.js";import{B as b}from"./button-BuxGVvE1.js";import{I as y}from"./input-Cxfo37eO.js";import{C as x,a as L,b as _,c as h}from"./card-5zXl5jGJ.js";import{B as o}from"./badge-4-rsJP2l.js";import{S as u,a as f,b as j,c as g,d as l}from"./select-CzkTuhTK.js";import{h as F}from"./moment-C5S46NFB.js";import{S as P}from"./search-Cye_TdpF.js";import{P as k}from"./phone-BScbSfjU.js";import{M as A}from"./map-pin-Dkn0BYKY.js";import{C as M}from"./calendar-D9APQM2e.js";import{E as V}from"./eye-mxYijkrE.js";import"./pusher-DVtoYAOu.js";import"./index-Sbype2of.js";import"./react-icons.esm-CaEbm_m1.js";import"./index-C9cWDRNv.js";import"./index-C2K23d2_.js";import"./index-CVzUxLnK.js";import"./tslib.es6-M_FJ09fS.js";import"./index-zhi7iPPU.js";import"./index-2C8mQqet.js";import"./index-DqxisvwK.js";import"./index-DFHF6qpL.js";import"./createLucideIcon-BKWaAi2G.js";function te({patients:m,onSelectPatient:p,isGuestPatients:t=!1}){const[r,v]=i.useState(""),[c,N]=i.useState("all"),[a,w]=i.useState("all");console.log("PatientList received patients:",m),console.log("isGuestPatients:",t),i.useEffect(()=>{console.log("gender:",a)},[a]);const n=m.filter(s=>{const d=(s?.firstname||s?.firstName)?.toLowerCase().includes(r.toLowerCase())||(s?.lastname||s?.lastName)?.toLowerCase().includes(r.toLowerCase())||(s?.middlename||s?.middleName)?.toLowerCase().includes(r.toLowerCase())||s?.email?.toLowerCase().includes(r.toLowerCase())||s?.contactno?.toString().toLowerCase().includes(r)||s?.phone?.toString().toLowerCase().includes(r)||s?.id?.toString().includes(r),C=c==="all"||s?.status==c,S=a==="all"||s?.gender?.toLowerCase()==a||s?.sex?.toLowerCase()==a;return d&&C&&S});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(L,{children:e.jsx(_,{children:"Search & Filter Patients"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search by id, name, or phone number:",value:r,onChange:s=>v(s.target.value),className:"pl-10"})]}),e.jsxs(u,{value:c,onValueChange:N,children:[e.jsx(f,{className:"w-full sm:w-[180px]",children:e.jsx(j,{placeholder:"Filter by status"})}),e.jsxs(g,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(u,{value:a,onValueChange:w,children:[e.jsx(f,{className:"w-full sm:w-[180px]",children:e.jsx(j,{placeholder:"Filter by gender"})}),e.jsxs(g,{children:[e.jsx(l,{value:"all",children:"All Genders"}),e.jsx(l,{value:"m",children:"Male"}),e.jsx(l,{value:"f",children:"Female"})]})]})]})})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-[minmax(0,1fr)_160px_220px_140px_100px_90px] items-center px-4 py-2 text-xs font-medium uppercase tracking-wide border rounded-md bg-accent/20 text-muted-foreground",children:[e.jsx("div",{children:"Patient"}),e.jsx("div",{children:"Phone"}),e.jsx("div",{children:"Address"}),e.jsx("div",{children:"Last Visit"}),e.jsx("div",{className:"text-center",children:"Status"}),e.jsx("div",{className:"text-right pr-2",children:"Action"})]}),e.jsx("div",{className:"space-y-2",children:n.map(s=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_160px_220px_140px_100px_90px] items-center gap-3 rounded-lg border px-4 py-3 hover:shadow-sm transition bg-white hover:bg-accent/30",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-semibold shrink-0 ${t?"bg-blue-100 text-blue-600":"bg-primary/10 text-primary"}`,children:`${s?.firstname?.[0]??s?.firstName?.[0]??""}${s?.lastname?.[0]??s?.lastName?.[0]??""}`}),e.jsx("div",{className:"min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate text-gray-900",children:[s?.firstname||s?.firstName," ",s?.middlename||s?.middleName," ",s?.lastname||s?.lastName]}),e.jsxs("div",{className:"flex gap-1",children:[(s?.gender||s?.sex)&&e.jsx(o,{variant:"outline",className:"text-[10px] px-1.5 py-0.5",children:(s.gender||s.sex)?.toLowerCase()==="m"?"Male":(s.gender||s.sex)?.toLowerCase()==="f"?"Female":s.gender||s.sex}),t&&e.jsx(o,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 bg-blue-100 text-blue-600 border-blue-200",children:"Patient"})]})]})})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[160px]",children:s?.contactno||s?.phone||"Not Set"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[220px]",children:s?.address||s?.email||"Not Set"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs min-w-0 text-muted-foreground",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate w-[140px]",children:t?`Appointments: ${s?.appointment_count||1}`:(()=>{const d=s?.lastVisit??s?.last_visit??s?.lastvisit;return d?F(d).format("MM-DD-YYYY"):"Not Set"})()})]}),e.jsx("div",{className:"hidden md:flex shrink-0 justify-center",children:e.jsx(o,{variant:s?.status==="active"?"default":"secondary",className:"text-[10px] px-2 py-0.5 rounded-full",children:s?.status})}),e.jsx("div",{className:"flex md:justify-end shrink-0",children:e.jsxs(b,{onClick:()=>p(s),variant:"outline",className:"h-8 px-3 text-xs",children:[e.jsx(V,{className:"h-3.5 w-3.5 mr-2"})," View"]})})]},s?.id))}),n.length===0&&e.jsx(x,{children:e.jsx(h,{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No patients found matching your search criteria."})})})]})}export{te as default};
