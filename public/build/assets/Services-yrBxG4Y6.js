import{u as re,j as e,b as k}from"./app-Dq_Q3Qwg.js";import{r as i,R as rs}from"./vendor-DkBadjUr.js";import{s as c}from"./toast-CjWtluwb.js";import{u as ts}from"./confirmation-_Gy4XTD0.js";import{C as ye}from"./react-icons.esm-B4fS-S41.js";import{B as l}from"./button-C5uFo_s4.js";import{I as U}from"./input-onBXUy1Y.js";import"./avatar-BtPHERgy.js";import{B as n}from"./badge-KwLpf8X3.js";import{C as j,c as f,a as is,b as ls}from"./card-kiyN5UMh.js";import{D as cs,a as ns,b as ds,c as os,d as Se,e as _}from"./dropdown-menu-8vv5yiZQ.js";import{S as ms,T as we,a as Ce,b as M,c as v,d as Ae,e as h}from"./table2-CYZJg5oQ.js";import{S as xs,a as hs,b as us,c as vs,d as te}from"./select-DVTvZC0C.js";import{D as R,a as $,b as q,c as K,e as V,d as W}from"./dialog-BOQ1IyqS.js";import{L as O}from"./label-D-GXHI76.js";import"./textarea-C9hsFzqx.js";import gs from"./ServicesLayout-CFh-b3fR.js";import{h as ie}from"./moment-C5S46NFB.js";import{m as T}from"./proxy-CrAtMFvn.js";import{T as le}from"./trending-up-BFbz08q-.js";import{U as De}from"./users-D4PhO1-D.js";import{c as ps}from"./createLucideIcon-BKWaAi2G.js";import{A as bs}from"./activity-C-sjEU5t.js";import{T as js}from"./trending-down-DADUT3dQ.js";import{T as fs}from"./triangle-alert-BslwqqvL.js";import{S as Ns}from"./search-Cye_TdpF.js";import{F as ys}from"./filter-BAwJ6QQu.js";import{C as Ss}from"./chevron-up-BdDu7vFg.js";import{C as ce}from"./chevron-down-CEiCHn75.js";import{E as ws}from"./ellipsis-gjrDGaHy.js";import{P as ne}from"./plus-MavOGQlj.js";import{C as Cs}from"./calendar-D9APQM2e.js";import{A as ke,a as Te}from"./archive-BwGVl8jP.js";import{S as As}from"./settings-D_MeB5oN.js";import{C as Ds}from"./clock-D6yUBuGv.js";import{S as ks}from"./square-pen-Bb1JtfBr.js";import"./pusher-DVtoYAOu.js";import"./Toaster-BesWtvcS.js";import"./toast-CKDMsaUm.js";import"./index-Cwj52g8w.js";import"./index-DWmZ7jWL.js";import"./index-CTYbBDNA.js";import"./index-Bjz1F0Gi.js";import"./refresh-cw-D3hZ7e_O.js";import"./save-CAdd64LS.js";import"./download-BH8XyxCx.js";import"./trash-2-DJ5zXW8D.js";import"./info-BVLwYIm5.js";import"./circle-x-Cf2XhiVO.js";import"./circle-check-F3PuHnLX.js";import"./alert-dialog-DOpN8wUq.js";import"./index-DZ3-Nn1l.js";import"./index-BLzoH2V5.js";import"./tslib.es6-M_FJ09fS.js";import"./index-Z1kVBYZG.js";import"./index-BZWX2-NB.js";import"./index-DKHauwzN.js";import"./index-DqxisvwK.js";import"./CustomModal-BkGYwg1h.js";import"./AdminLayout-ZetOe_y-.js";import"./separator-DEX7VqKX.js";import"./calendar-CUPskwmx.js";import"./format-Dp3w_Y3x.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./TextInput-BpXAXdR6.js";import"./x-b8JahagL.js";import"./house-CSq-WFst.js";import"./pusher-D48kA6HE.js";import"./printer-CfgcPaUh.js";import"./file-text-YZXa1D2L.js";import"./package-L7rgkkVO.js";import"./circle-check-big-BQVCuGNJ.js";import"./pill-DIGxtF-3.js";import"./bell-HhCf5F9O.js";import"./index-lHzy3PXw.js";import"./autoprefixer-D_HbpVNe.js";import"./unit-CopbpOEH.js";import"./layers-OK8ayVTK.js";import"./chart-column-yMaSKbSU.js";import"./InputLabel-BnsMSG8t.js";import"./alert-YFQE-uH8.js";import"./circle-plus-hYoTMpMo.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Es=ps("BookOpen",Ts),Nr=({services_:P})=>{const[o,N]=i.useState(P),[G,Ee]=i.useState(""),[F,Me]=i.useState("all"),[y,d]=i.useState(!1),{confirmArchive:Oe,confirmUnarchive:Pe,ConfirmationDialog:Fe}=ts(),[C,Ms]=i.useState({key:"servicename",direction:"ascending"}),[u,z]=i.useState(1),[J]=i.useState(10),[m,A]=i.useState([]),[Os,Ps]=i.useState(!1),[B,ze]=i.useState(null),[Fs,zs]=i.useState(!1),[de,D]=i.useState(!1),[p,Be]=i.useState(null),[Q,oe]=i.useState(!1),[X,Y]=i.useState(!1);i.useEffect(()=>{N(P),console.log("services: ",P)},[P]),i.useEffect(()=>{p&&X&&(console.log("Setting form data for service:",p),w("days",p?.servicedays?.map(s=>s.day)||[]),w("serviceid",p?.id))},[p,X]);const[I,me]=i.useState({servicename:"",status:"Active"}),[Bs,Is]=i.useState({name:"",description:"",duration:30,price:0,recurrenceDates:[]}),H=[...o.filter(s=>{const a=s.servicename.toLowerCase().includes(G.toLowerCase()),t=F==="all"||s.status===F;return a&&t})].sort((s,a)=>s[C.key]<a[C.key]?C.direction==="ascending"?-1:1:s[C.key]>a[C.key]?C.direction==="ascending"?1:-1:0),S=Math.ceil(H.length/J),Z=(u-1)*J,xe=Z+J,E=H.slice(Z,xe);i.useEffect(()=>{z(1)},[G,F]);const Ie=()=>{m.length===E.length?A([]):A(E.map(s=>s.id))},He=s=>{A(a=>a.includes(s)?a.filter(t=>t!==s):[...a,s])},he=async s=>{try{d(!0);const a=m.map(t=>k.put(`/admin/services/${t}/status`,{status:s}));await Promise.all(a),N(t=>t.map(r=>m.includes(r.id)?{...r,status:s}:r)),A([]),c("Success","Bulk status update completed!","success","update")}catch(a){console.error("Error updating services:",a),c("Error","Failed to update services")}finally{d(!1)}},Le=async()=>{if(window.confirm(`Are you sure you want to delete ${m.length} services?`))try{d(!0);const s=m.map(a=>k.delete(`/admin/services/${a}`));await Promise.all(s),N(a=>a.filter(t=>!m.includes(t.id))),A([]),c("Success","Services deleted successfully!","success","delete")}catch(s){console.error("Error deleting services:",s),c("Error","Failed to delete services")}finally{d(!1)}},Ue=async s=>{const a=o.flatMap(r=>r.subservices).find(r=>r.id===s),t=a?a.subservicename:"Sub-service";Oe(t,async()=>{try{d(!0),await k.post("/admin/services/sub-services/archive",{subservice_id:s}),N(r=>r.map(g=>({...g,subservices:g.subservices.map(x=>x.id===s?{...x,status:0}:x)}))),c("Success","Sub-service archived successfully!","success","archive")}catch(r){console.error("Error archiving sub-service:",r),c("Error","Failed to archive sub-service")}finally{d(!1)}})},_e=async s=>{const a=o.flatMap(r=>r.subservices).find(r=>r.id===s),t=a?a.subservicename:"Sub-service";Pe(t,async()=>{try{d(!0),await k.post("/admin/services/sub-services/unarchive",{subservice_id:s}),N(r=>r.map(g=>({...g,subservices:g.subservices.map(x=>x.id===s?{...x,status:1}:x)}))),c("Success","Sub-service unarchived successfully!","success","unarchive")}catch(r){console.error("Error unarchiving sub-service:",r),c("Error","Failed to unarchive sub-service")}finally{d(!1)}})},[Ls,ue]=i.useState(null),Re=s=>{Q===s?(oe(null),ue(null)):(oe(s),ue(s))},$e=s=>{w(a=>({...a,days:a.days.includes(s)?a.days.filter(t=>t!==s):[...a.days,s]}))},qe=()=>{Ve(route("admin.services.subservice.create"),{preserveScroll:!0,preserveState:!0,only:["services_"],onSuccess:()=>{D(!1),c("Success","Sub-Service added successfully!")}})},ve=async(s,a)=>{d(!0);try{const t=a?"/admin/services/unarchive":"/admin/services/archive",r=await k.post(t,{service_id:s});r.data.services&&(N(r.data.services),c("Success",r.data.message))}catch(t){console.error("Error archiving/unarchiving service:",t),c("Error",t.response?.data?.message||"An error occurred while updating the service")}finally{d(!1)}},Ke=s=>{switch(s){case 1:return e.jsx(n,{className:"bg-green-500",children:"Active"});case 0:return e.jsx(n,{className:"bg-gray-500",children:"Inactive"});default:return e.jsx(n,{children:s})}},{data:ge,setData:ee,processing:pe,post:Ve,recentlySuccessful:Us,clearErrors:_s,errors:Rs}=re({serviceid:"",subservicename:""}),{data:se,setData:w,post:We,processing:be,errors:je}=re({days:[],serviceid:""}),Ge=()=>{if(console.log("Saving days with data:",se),!se.serviceid){c("Error","Service ID is required","error");return}We(route("admin.services.days.update"),{preserveScroll:!0,preserveState:!0,replace:!0,only:["services_"],onSuccess:()=>{Y(!1),c("Success!","Successfully Updated!","success")},onError:s=>{console.log("Save days errors:",s)}})},Je=["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM"],[Qe,$s]=i.useState([]),[Xe,ae]=i.useState(!1),{data:L,setData:b,processing:fe,post:Ye,recentlySuccessful:qs,clearErrors:Ks,errors:Ne}=re({times:Qe,subservice_id:B,subservicename:""}),Ze=s=>{b(a=>({...a,times:a.times.includes(s)?a.times.filter(t=>t!==s):[...a.times,s]}))},es=s=>{Ye(route("admin.services.time.update"),{preserveScroll:!0,onSuccess:()=>{ae(!1),c("Success!","Successfully Updated!","success")}})},ss=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return i.useEffect(()=>{console.log("datatime; ",L)},[L]),e.jsxs(gs,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Services Management"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Monitor and manage all healthcare services and their performance metrics"})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsxs(j,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(f,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Main service categories"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-blue-100 shadow-lg",children:e.jsx("div",{className:"text-blue-600",children:e.jsx(De,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"default",className:"text-xs",children:"+12%"})]})})]})]}),e.jsxs(j,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(f,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Sub-Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.reduce((s,a)=>s+(a.subservices?.length||0),0)}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Specific service types"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.reduce((s,a)=>s+(a.subservices?.length||0),0)," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-green-100 shadow-lg",children:e.jsx("div",{className:"text-green-600",children:e.jsx(Es,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"default",className:"text-xs",children:"+8%"})]})})]})]}),e.jsxs(j,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(f,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.filter(s=>s.status===1).length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Currently available"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.filter(s=>s.status===1).length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-emerald-100 shadow-lg",children:e.jsx("div",{className:"text-emerald-600",children:e.jsx(bs,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"default",className:"text-xs",children:"+15%"})]})})]})]}),e.jsxs(j,{className:"shadow-lg hover:shadow-xl transition-all duration-300 border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),e.jsxs(f,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Inactive Services"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.filter(s=>s.status===0).length}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Requires attention"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(js,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600",children:[o.filter(s=>s.status===0).length," total"]})]})]}),e.jsx("div",{className:"p-4 rounded-2xl bg-red-100 shadow-lg",children:e.jsx("div",{className:"text-red-600",children:e.jsx(fs,{className:"h-6 w-6"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"This month"}),e.jsx(n,{variant:"destructive",className:"text-xs",children:"+5%"})]})})]})]})]})}),e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(j,{className:"shadow-lg border-0",children:e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(U,{placeholder:"Search services...",value:G,onChange:s=>Ee(s.target.value),className:"pl-10 border-2 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-500"}),e.jsxs(xs,{value:F,onValueChange:Me,children:[e.jsx(hs,{className:"w-[180px] border-2",children:e.jsx(us,{placeholder:"Filter by status"})}),e.jsxs(vs,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),e.jsx(te,{value:"Active",children:"Active"}),e.jsx(te,{value:"Inactive",children:"Inactive"})]})]})]})]})})})}),m.length>0&&e.jsx(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(j,{className:"shadow-lg border-0 bg-blue-50 border-blue-200",children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[m.length," service",m.length>1?"s":""," selected"]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>A([]),className:"text-blue-600 hover:text-blue-700",children:"Clear selection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>he(1),disabled:y,className:"border-green-200 text-green-700 hover:bg-green-50",children:"Activate"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>he(0),disabled:y,className:"border-yellow-200 text-yellow-700 hover:bg-yellow-50",children:"Deactivate"}),e.jsx(l,{variant:"outline",size:"sm",onClick:Le,disabled:y,className:"border-red-200 text-red-700 hover:bg-red-50",children:"Delete"})]})]})})})}),e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(j,{className:"shadow-lg border-0 overflow-hidden",children:[e.jsx(is,{className:"bg-gray-50 border-b",children:e.jsx(ls,{className:"text-lg font-semibold text-gray-900",children:"Services List"})}),e.jsx(f,{className:"p-0",children:e.jsx(ms,{data:E,defaultSort:{key:"servicename",direction:"asc"},children:({sortedData:s})=>e.jsxs(we,{children:[e.jsx(Ce,{children:e.jsxs(M,{className:"bg-gray-50 hover:bg-gray-50",children:[e.jsx(v,{className:"w-12 text-center",children:e.jsx("input",{type:"checkbox",checked:m.length===E.length&&E.length>0,onChange:Ie,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(v,{sortKey:"servicename",sortable:!0,className:"font-semibold text-gray-900 w-12 text-center",children:e.jsx("span",{className:"sr-only",children:"Expand"})}),e.jsx(v,{sortKey:"servicename",sortable:!0,className:"font-semibold text-gray-900",children:"Service Name"}),e.jsx(v,{sortKey:"status",sortable:!0,className:"font-semibold text-gray-900",children:"Status"}),e.jsx(v,{className:"font-semibold text-gray-900",children:"Available Days"}),e.jsx(v,{className:"font-semibold text-gray-900",children:"Sub Services"}),e.jsx(v,{className:"font-semibold text-gray-900",children:"Actions"})]})}),e.jsx(Ae,{children:s.map((a,t)=>e.jsxs(rs.Fragment,{children:[e.jsxs(M,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(h,{className:"text-center",children:e.jsx("input",{type:"checkbox",checked:m.includes(a.id),onChange:()=>He(a.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx(h,{className:"text-center",children:e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Re(a.id),className:"hover:bg-blue-100 hover:text-blue-600",children:Q===a.id?e.jsx(Ss,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(De,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:a.servicename}),e.jsx("p",{className:"text-sm text-gray-500",children:"Service Category"})]})]})}),e.jsx(h,{children:Ke(a.status)}),e.jsx(h,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a?.servicedays?.map((r,g)=>e.jsx(n,{variant:"secondary",className:"bg-blue-100 text-blue-700 border-blue-200",children:r.day},g))})}),e.jsx(h,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(n,{variant:"outline",className:"border-gray-300",children:[a?.subservices.length||0," Sub-service",a?.subservices.length!==1?"s":""]})})}),e.jsx(h,{children:e.jsx("div",{className:"flex gap-2",children:e.jsxs(cs,{children:[e.jsx(ns,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ws,{className:"h-4 w-4"})})}),e.jsxs(ds,{align:"end",children:[e.jsx(os,{children:"Actions"}),e.jsx(Se,{}),e.jsxs(_,{onClick:()=>{ee("serviceid",a.id),D(!0)},className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Add Sub-service"]}),e.jsxs(_,{onClick:()=>{Be(a),Y(!0)},className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Edit Days"]}),e.jsx(Se,{}),a.status===0?e.jsxs(_,{onClick:()=>ve(a.id,!0),className:"flex items-center gap-2 text-green-600",children:[e.jsx(ke,{className:"h-4 w-4"}),"Unarchive"]}):e.jsxs(_,{onClick:()=>ve(a.id,!1),className:"flex items-center gap-2 text-red-600",children:[e.jsx(Te,{className:"h-4 w-4"}),"Archive"]})]})]})})})]}),Q===a.id&&e.jsx(M,{children:e.jsx(h,{colSpan:6,className:"p-0",children:e.jsxs("div",{className:"bg-gray-50 p-6 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(As,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:["Sub-services for ",a.servicename]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage sub-services and their schedules"})]})]}),a.subservices.length>0?e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsxs(we,{children:[e.jsx(Ce,{children:e.jsxs(M,{className:"bg-gray-50",children:[e.jsx(v,{className:"font-medium w-1/3",children:"Sub Service"}),e.jsx(v,{className:"font-medium w-1/3",children:"Available Time"}),e.jsx(v,{className:"font-medium w-1/3 text-right",children:"Actions"})]})}),e.jsx(Ae,{children:a?.subservices.map((r,g)=>e.jsxs(M,{className:"hover:bg-gray-50",children:[e.jsx(h,{className:"py-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-3 h-full",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-md flex-shrink-0",children:e.jsx(Ds,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:r.subservicename}),e.jsx(n,{variant:r.status===1?"default":"secondary",className:`text-xs ${r.status===1?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"}`,children:r.status===1?"Active":"Archived"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sub-service"})]})]})}),e.jsx(h,{className:"py-4 align-middle",children:e.jsx("div",{className:"flex flex-wrap gap-1 items-center h-full",children:r?.times&&r.times.length>0?r.times.map((x,as)=>e.jsx(n,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200 text-xs",children:ie(x.time,"HH:mm:ss").format("hh:mm A")},as)):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"Not assigned"})})}),e.jsx(h,{className:"py-4 align-middle text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-0.5 h-full",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{b("subservice_id",r.id),ze(r),b("subservicename",r.subservicename),b("times",r?.times?.map(x=>ie(x.time,"HH:mm:ss").format("hh:mm A"))||[]),ae(!0)},className:"hover:bg-blue-100 hover:text-blue-600 h-8 w-8 p-0",title:"Edit sub-service",children:e.jsx(ks,{className:"h-4 w-4"})}),r.status===1?e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>Ue(r.id),className:"hover:bg-yellow-100 hover:text-yellow-600 h-8 w-8 p-0",title:"Archive sub-service",disabled:y,children:e.jsx(Te,{className:"h-4 w-4"})}):e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>_e(r.id),className:"hover:bg-green-100 hover:text-green-600 h-8 w-8 p-0",title:"Unarchive sub-service",disabled:y,children:e.jsx(ke,{className:"h-4 w-4"})})]})})]},g))})]})}):e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg border border-dashed border-gray-300",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-full w-fit mx-auto mb-3",children:e.jsx(ne,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No sub-services found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add sub-services to organize this service better"}),e.jsxs(l,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>{ee("serviceid",a.id),D(!0)},children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Add First Sub-service"]})]})]})})})]},t))})]})})})]})}),S>1&&e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(j,{className:"shadow-lg border-0",children:e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Z+1," to ",Math.min(xe,H.length)," of ",H.length," services"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>z(Math.max(1,u-1)),disabled:u===1,className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-4 w-4 rotate-90"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(10,S)},(s,a)=>{let t;return S<=10||u<=5?t=a+1:u>=S-4?t=S-9+a:t=u-4+a,e.jsx(l,{variant:u===t?"default":"outline",size:"sm",onClick:()=>z(t),className:`w-8 h-8 p-0 ${u===t?"bg-blue-600 hover:bg-blue-700 text-white":"hover:bg-gray-50"}`,children:t},t)})}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>z(Math.min(S,u+1)),disabled:u===S,className:"flex items-center gap-1",children:["Next",e.jsx(ce,{className:"h-4 w-4 -rotate-90"})]})]})]})})})})]}),e.jsx(R,{open:de,onOpenChange:s=>{D(s),s||me({servicename:"",status:"Active"})},children:e.jsxs($,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsx(K,{className:"text-xl font-semibold",children:"Add New Service"}),e.jsx(V,{children:"Create a new service category for appointments"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"servicename",children:"Service Name"}),e.jsx(U,{id:"servicename",name:"servicename",value:I.servicename,onChange:s=>me({...I,servicename:s.target.value}),placeholder:"Enter service name",className:"border-2 focus:border-blue-500"})]})}),e.jsx(W,{children:e.jsx(l,{type:"submit",onClick:async()=>{try{d(!0);const s=await k.post("/admin/services/create",I);s.data.services&&(N(s.data.services),D(!1),c("Success","Service added successfully!"))}catch(s){console.error("Error creating service:",s),c("Error",s.response?.data?.message||"An error occurred while creating the service")}finally{d(!1)}},disabled:!I.servicename||y,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:y?"Adding...":"Add Service"})})]})}),e.jsx(R,{open:de,onOpenChange:s=>{D(s)},children:e.jsxs($,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsx(K,{className:"text-xl font-semibold",children:"Add Sub-service"}),e.jsx(V,{children:"Create a new sub-service for this service category"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"subName",children:"Sub Service Name"}),e.jsx(U,{id:"subName",name:"name",value:ge.subservicename,onChange:s=>{ee("subservicename",s.target.value)},placeholder:"Enter sub-service name",className:"border-2 focus:border-blue-500"})]})}),e.jsx(W,{children:e.jsx(l,{type:"submit",onClick:qe,disabled:!ge.subservicename||pe,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:pe?"Adding...":"Add Sub-service"})})]})}),e.jsx(R,{open:X,onOpenChange:s=>{Y(s),s&&p?(w("days",p?.servicedays?.map(a=>a.day)||[]),w("serviceid",p?.id)):s||(w("days",[]),w("serviceid",""))},children:e.jsxs($,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsx(K,{className:"text-xl font-semibold text-center",children:"Edit Available Days"}),e.jsx(V,{className:"text-center",children:"Select the days when this service is available"})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(O,{className:"text-base font-medium",children:"Available Days"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ss.map(s=>e.jsx(n,{className:`cursor-pointer transition-colors text-center py-2 px-4 ${se.days.includes(s)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>$e(s),children:s},s))})]}),Object.keys(je).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ye,{className:"h-5 w-5 text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(je).map(([s,a])=>e.jsx("li",{children:a},s))})]})})]}),e.jsx(W,{className:"flex justify-center",children:e.jsx(l,{onClick:Ge,disabled:be,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-8",children:be?"Saving...":"Save Days"})})]})}),e.jsx(R,{open:Xe,onOpenChange:s=>{ae(s),s&&(b("subservice_id",B?.id),b("subservicename",B?.subservicename),b("times",B?.times?.map(a=>ie(a.time,"HH:mm:ss").format("hh:mm A"))||[]))},children:e.jsxs($,{className:"max-w-lg",children:[e.jsxs(q,{children:[e.jsx(K,{className:"text-xl font-semibold",children:"Edit Sub-service Times"}),e.jsx(V,{children:"Select the available times for this sub-service"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Sub-Service Name"}),e.jsx(U,{value:L.subservicename,onChange:s=>{b("subservicename",s.target.value)},className:"border-2 focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(O,{children:"Available Times"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:Je.map((s,a)=>e.jsx(n,{className:`cursor-pointer transition-colors ${L.times.includes(s)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>Ze(s),children:s},a))})]}),Object.keys(Ne).length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ye,{className:"h-5 w-5 text-red-400 mr-3"}),e.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(Ne).map(([s,a])=>e.jsx("li",{children:a},s))})]})})]}),e.jsx(W,{children:e.jsx(l,{onClick:es,disabled:fe,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:fe?"Saving...":"Save Times"})})]})}),e.jsx(Fe,{})]})};export{Nr as default};
