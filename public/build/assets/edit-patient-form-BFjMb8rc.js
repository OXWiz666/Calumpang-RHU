import{r as A,j as e,a as w}from"./app-BYek28t3.js";import{B as y}from"./button-CFU6UcKA.js";import{I as n}from"./input-B0M3oF_m.js";import{L as r}from"./label-CDKTbEDO.js";import{T as C}from"./textarea-BYzEf3mT.js";import{C as o,a as m,b as h,e as b,c as x}from"./card-DC3m0m2Q.js";import{S as j,a as u,b as p,c as g,d as t}from"./select-C5_NUKah.js";import{D as O,a as D,b as T,c as I}from"./dialog-B8nFG98e.js";import{X as z}from"./x-DPKTEG6E.js";import{m as P}from"./proxy-ZNVcD8-b.js";import{S as _}from"./save-Dt_DrhAI.js";import"./Subservices-hmtw6ece.js";import"./utils-RNxviqOY.js";import"./index-Cq2dcEjx.js";import"./index-OLHtNq9T.js";import"./index-B8mBpvNl.js";import"./Combination-2tzW629K.js";import"./index-Bgv3a4mK.js";import"./index-DsxiASPK.js";import"./index-oebGMNB2.js";import"./index-DZIW3V9d.js";import"./index-C_AcOWpb.js";import"./createLucideIcon-Iodx7ABU.js";function re({patient:i,onCancel:v,onSubmit:f,isOpen:S=!0}){const N=i?.id?.startsWith("PAT_"),[a,F]=A.useState({firstName:i.firstname||"",middleName:i.middlename||"",lastName:i.lastname||"",dateOfBirth:N?i.date_of_birth:i.birth,gender:i?.gender||i?.sex||"",phoneNumber:i.contactno||i.phone||"",email:i.email||"",status:i.status||"active",civilStatus:i.civil_status||"",nationality:i.nationality||"",religion:i.religion||"",country:i.country||"",region:i.region||"",province:i.province||"",city:i.city||"",barangay:i.barangay||"",street:i.street||"",zipCode:i.zip_code||"",address:i.address||"",bloodType:i.bloodtype||"",allergies:i.allergies?.join(", ")||"",medications:i.medications?.join(", ")||""}),B=s=>{s.preventDefault();const c={firstname:a.firstName,middlename:a.middleName,lastname:a.lastName,email:a.email,status:a.status,...N?{date_of_birth:a.dateOfBirth,gender:a.gender,phone:a.phoneNumber,contactno:a.phoneNumber,civil_status:a.civilStatus,nationality:a.nationality,religion:a.religion,country:a.country,region:a.region,province:a.province,city:a.city,barangay:a.barangay,street:a.street,zip_code:a.zipCode}:{birth:a.dateOfBirth,sex:a.gender,contactno:a.phoneNumber,address:a.address},bloodtype:a.bloodType,allergies:a.allergies?a.allergies.split(",").map(d=>d.trim()):[],medications:a.medications?a.medications.split(",").map(d=>d.trim()):[]};w.put(`/auth/patients/${i.id}`,c,{onSuccess:()=>{f({...i,...c})},onError:d=>{console.error("Update failed:",d)}})},l=(s,c)=>{F(d=>({...d,[s]:c}))};return e.jsx(O,{open:S,onOpenChange:v,children:e.jsxs(D,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(T,{children:e.jsxs(I,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Edit Patient"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update patient information"})]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:v,className:"h-8 w-8 p-0",children:e.jsx(z,{className:"h-4 w-4"})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"px-1",children:e.jsx("div",{className:"space-y-3 pb-0",children:e.jsxs("form",{onSubmit:B,className:"space-y-3 mb-0",children:[e.jsxs(o,{children:[e.jsxs(m,{className:"pb-3",children:[e.jsx(h,{className:"text-lg",children:"Basic Information"}),e.jsx(b,{className:"text-sm",children:"Patient's personal details"})]}),e.jsxs(x,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"firstName",children:"First Name *"}),e.jsx(n,{id:"firstName",value:a.firstName,onChange:s=>l("firstName",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"middleName",children:"Middle Name"}),e.jsx(n,{id:"middleName",value:a.middleName,onChange:s=>l("middleName",s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(n,{id:"lastName",value:a.lastName,onChange:s=>l("lastName",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(n,{id:"dateOfBirth",type:"date",value:a.dateOfBirth,onChange:s=>l("dateOfBirth",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"gender",children:"Gender *"}),e.jsxs(j,{value:a.gender,onValueChange:s=>l("gender",s),children:[e.jsx(u,{children:e.jsx(p,{placeholder:"Select gender"})}),e.jsxs(g,{children:[e.jsx(t,{value:"M",children:"Male"}),e.jsx(t,{value:"F",children:"Female"}),e.jsx(t,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(n,{id:"phoneNumber",value:a.phoneNumber,onChange:s=>l("phoneNumber",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:a.email,onChange:s=>l("email",s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(j,{value:a.status,onValueChange:s=>l("status",s),children:[e.jsx(u,{children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"active",children:"Active"}),e.jsx(t,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-1 md:col-span-2",children:[e.jsx(r,{htmlFor:"address",children:"Address *"}),e.jsx(C,{id:"address",value:a.address,onChange:s=>l("address",s.target.value),required:!N,className:"min-h-[60px] max-h-[80px]",rows:3})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"pb-3",children:[e.jsx(h,{className:"text-lg",children:"Personal Information"}),e.jsx(b,{className:"text-sm",children:"Additional personal details"})]}),e.jsxs(x,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"civilStatus",children:"Civil Status"}),e.jsxs(j,{value:a.civilStatus,onValueChange:s=>l("civilStatus",s),children:[e.jsx(u,{children:e.jsx(p,{placeholder:"Select civil status"})}),e.jsxs(g,{children:[e.jsx(t,{value:"Single",children:"Single"}),e.jsx(t,{value:"Married",children:"Married"}),e.jsx(t,{value:"Widowed",children:"Widowed"}),e.jsx(t,{value:"Divorced",children:"Divorced"}),e.jsx(t,{value:"Separated",children:"Separated"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"nationality",children:"Nationality"}),e.jsx(n,{id:"nationality",value:a.nationality,onChange:s=>l("nationality",s.target.value),placeholder:"e.g., Filipino"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"religion",children:"Religion"}),e.jsx(n,{id:"religion",value:a.religion,onChange:s=>l("religion",s.target.value),placeholder:"e.g., Catholic"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"country",children:"Country"}),e.jsx(n,{id:"country",value:a.country,onChange:s=>l("country",s.target.value),placeholder:"e.g., Philippines"})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"pb-3",children:[e.jsx(h,{className:"text-lg",children:"Address Information"}),e.jsx(b,{className:"text-sm",children:"Complete address details"})]}),e.jsxs(x,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"region",children:"Region"}),e.jsx(n,{id:"region",value:a.region,onChange:s=>l("region",s.target.value),placeholder:"e.g., Region IV-A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"province",children:"Province"}),e.jsx(n,{id:"province",value:a.province,onChange:s=>l("province",s.target.value),placeholder:"e.g., Laguna"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"city",children:"City"}),e.jsx(n,{id:"city",value:a.city,onChange:s=>l("city",s.target.value),placeholder:"e.g., Calamba"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"barangay",children:"Barangay"}),e.jsx(n,{id:"barangay",value:a.barangay,onChange:s=>l("barangay",s.target.value),placeholder:"e.g., Barangay 1"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"street",children:"Street"}),e.jsx(n,{id:"street",value:a.street,onChange:s=>l("street",s.target.value),placeholder:"e.g., 123 Main Street"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"zipCode",children:"Zip Code"}),e.jsx(n,{id:"zipCode",value:a.zipCode,onChange:s=>l("zipCode",s.target.value),placeholder:"e.g., 4027"})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(h,{className:"text-lg",children:"Medical Information"})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"bloodType",children:"Blood Type"}),e.jsxs(j,{value:a.bloodType,onValueChange:s=>l("bloodType",s),children:[e.jsx(u,{children:e.jsx(p,{placeholder:"Select blood type"})}),e.jsxs(g,{children:[e.jsx(t,{value:"none",children:"Not specified"}),e.jsx(t,{value:"A+",children:"A+"}),e.jsx(t,{value:"A-",children:"A-"}),e.jsx(t,{value:"B+",children:"B+"}),e.jsx(t,{value:"B-",children:"B-"}),e.jsx(t,{value:"AB+",children:"AB+"}),e.jsx(t,{value:"AB-",children:"AB-"}),e.jsx(t,{value:"O+",children:"O+"}),e.jsx(t,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"allergies",children:"Known Allergies"}),e.jsx(C,{id:"allergies",value:a.allergies,onChange:s=>l("allergies",s.target.value),placeholder:"Separate multiple allergies with commas",className:"min-h-[50px] max-h-[80px]",rows:2})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"medications",children:"Current Medications"}),e.jsx(C,{id:"medications",value:a.medications,onChange:s=>l("medications",s.target.value),placeholder:"Separate multiple medications with commas",className:"min-h-[50px] max-h-[80px]",rows:2})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-3 pb-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),e.jsxs(y,{type:"submit",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})})]})})}export{re as default};
