import{q as H,r as h,j as e}from"./app-BRwPFZ4j.js";import{B as R}from"./index-BaQQm3cB.js";import{L as m,I as p}from"./index-D0wwC0lf.js";import{I as a}from"./InputError-BWgVVnnq.js";import"./textarea-Dq0_ru3C.js";import"./popover-DqU4GLlk.js";import{S as g,a as S,b,c as N,d as f}from"./select-jqKMPdSI.js";import $ from"./CustomCalendar-C_bcHf7c.js";import{h as C}from"./moment-C5S46NFB.js";import{C as z}from"./clock-Ba7-MZVY.js";import"./index-DqAYDEqo.js";import"./react-icons.esm-DdKcRbtm.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./index-yBsxG4IF.js";import"./Combination-mJcoJmSv.js";import"./chevron-right-C3NuSFts.js";import"./createLucideIcon-43UtyN31.js";import"./subMonths-CHGVdwv-.js";const oe=({onSubmit:L=()=>{},formData:l,setFormData:u,errors:d,processing:T,services:x=[]})=>{var A,w,q,E;const t=H().props.auth.user;h.useEffect(()=>{t&&!l.firstname&&u({...l,firstname:t.firstname,middlename:t.middlename??"",lastname:t.lastname,email:t.email,phone:t.contactno??"",servicename:"",service:"",gender:t.gender,birth:t.birth,priorityNumber:Math.floor(1e3+Math.random()*9e3)})},[t]);const j=x.reduce((s,i)=>(s[i.id]=i,s),{}),[G,J]=h.useState(new Date),V=s=>{u(i=>({...i,date:s}))},k=s=>{const{name:i,value:r}=s.target;if(i==="phone"){const o=r.replace(/[^0-9+]/g,"");u(v=>({...v,[i]:o}))}else u(o=>({...o,[i]:r}))},n=(s,i)=>{u(r=>({...r,[s]:i??null}))},F=s=>{s.preventDefault(),L(l)},[c,I]=h.useState([]),[M,P]=h.useState([]),y=c==null?void 0:c.reduce((s,i)=>(s[i.id]=i,s),{}),[Y,B]=h.useState([]);return h.useEffect(()=>{var i;const s=j[l.service];B((i=s==null?void 0:s.servicedays)==null?void 0:i.map(r=>r.day))},[l,j]),e.jsxs("form",{onSubmit:F,className:"space-y-6 bg-white p-6 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"First Name"}),e.jsx(p,{id:"firstname",name:"firstname",value:l.firstname,placeholder:"Your First Name",disabled:!0,required:!0}),e.jsx(a,{message:d.firstname})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"middlename",children:"Middle Name"}),e.jsx(p,{id:"middlename",name:"middlename",value:l.middlename,placeholder:"Your Middle Name",disabled:!0,required:!0}),e.jsx(a,{message:d.middlename})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"lastname",children:"Last Name"}),e.jsx(p,{id:"lastname",name:"lastname",value:l.lastname,placeholder:"Your Last Name",disabled:!0,required:!0}),e.jsx(a,{message:d.lastname})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email",children:"Email Address"}),e.jsx(p,{id:"email",name:"email",type:"email",value:l.email,placeholder:"juan@example.com",disabled:!0,required:!0}),e.jsx(a,{message:d.email})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"phone",children:"Phone Number"}),e.jsx(p,{id:"phone",name:"phone",type:"tel",value:l.phone,onChange:k,placeholder:"+63 912 345 6789",required:!0}),e.jsx(a,{message:d.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Service Type"}),e.jsxs(g,{value:(A=l.service)==null?void 0:A.toString(),onValueChange:s=>{const i=j[s];i&&(n("service",i.id),n("servicename",i.servicename),n("date",null),n("subservice",""),n("subservicename",""),n("timeid",""),n("time","")),fetch(`/services/get-sub-services/${s}`).then(r=>r.json()).then(r=>{I(r)})},children:[e.jsx(S,{className:"w-full",children:e.jsx(b,{placeholder:"Select service",children:l.service?(w=x.find(s=>s.id.toString()===l.service.toString()))==null?void 0:w.servicename:"Select service"})}),e.jsx(N,{children:x.map(s=>e.jsx(f,{value:s.id,children:s.servicename},s.id))})]}),e.jsx(a,{message:d.service})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Service Sub Type"}),e.jsxs(g,{value:(q=l.subservice)==null?void 0:q.toString(),onValueChange:s=>{const i=y[s];P(i==null?void 0:i.times),n("subservice",i.id??null),n("subservicename",i.subservicename??null),n("timeid",""),n("time","")},children:[e.jsx(S,{className:"w-full",children:e.jsx(b,{placeholder:"Select Sub Service",children:l.subservice?(E=c.find(s=>s.id.toString()===l.subservice.toString()))==null?void 0:E.subservicename:"Select Sub-Service"})}),e.jsx(N,{children:c==null?void 0:c.map((s,i)=>e.jsx(f,{value:s.id,children:s.subservicename},i))})]}),e.jsx(a,{message:d.subservice})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Appointment Date"}),e.jsx($,{selectedDate:l.date,onDateSelect:V,hasPrograms:Y}),e.jsx(a,{message:d.date})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Appointment Time"}),e.jsxs(g,{value:l.timeid,onValueChange:s=>{var r,o;const i=y[l.subservice];n("timeid",s??null),n("time",C((o=(r=i==null?void 0:i.times)==null?void 0:r.find(v=>v.id==s))==null?void 0:o.time,"HH:mm:ss").format("hh:mm A")??null)},children:[e.jsx(S,{className:"w-full",children:e.jsx(b,{placeholder:"Select time",children:l.timeid?e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),C(l.time,"HH:mm:ss").format("h:mm A")]}):"Select time"})}),e.jsx(N,{children:M.map((s,i)=>e.jsx(f,{value:s.id,children:C(s.time,"HH:mm:ss").format("h:mm A")},s.id))})]}),e.jsx(a,{message:d.time})]})]})]}),H().props.auth.user?e.jsx(R,{disabled:T,type:"submit",className:"w-full",children:"Schedule Appointment"}):e.jsx("div",{children:"Please login first to submit."})]})};export{oe as default};
