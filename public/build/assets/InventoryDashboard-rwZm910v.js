import{r as a,q as Se,b as v,P as Ie,j as e}from"./app-CNLcV3Uy.js";import{T as Z,a as z,b as d,c as Ee}from"./tabs-BTpxO3a9.js";import{C as m,a as x,b as h,c as p}from"./card-LxsYRV3_.js";import{B as g}from"./badge-DisUY_-J.js";import{B as n}from"./button-sKrKyyfs.js";import Me from"./SearchBar-BARfwMyP.js";import Ae from"./InventoryItemCard-CospL-oE.js";import Te from"./InventoryListItem-BbqBF0Xk.js";import De from"./StockMovementForm-AiPUGl3m.js";import Le from"./ReportsPanel-BLBkzOpY.js";import Fe from"./AddItemForm-5VDhCnf0.js";import{A as Pe}from"./AdminLayout-D2d01i5S.js";import{C as P}from"./CustomModal-Cqa6pcGo.js";import{I as G}from"./input-DwwFRcXc.js";import{I as J}from"./InputLabel-OKJFRByA.js";import{P as K}from"./PrimaryButton-yBheF04N.js";import{P as _e}from"./PrintErrors-DU3QSlGz.js";import{d as Q}from"./dialog-DVfT_V8C.js";import{F as Be}from"./filter-ChSSN2Tv.js";import{P as X}from"./plus-CXz6kyG3.js";import{m as E}from"./proxy-BaA_RYOF.js";import{P as b}from"./package-DILRBpjw.js";import{A as Y}from"./activity-CwSkkw3N.js";import{T as Ue}from"./triangle-alert-Dcp2x8pu.js";import{T as qe}from"./trending-down-B_2E8wdf.js";import{C as ee}from"./clock-CeKRI3yw.js";import{P as Oe}from"./pill-Bt98wvnI.js";import{S as Re}from"./syringe-ClrG3McH.js";import{S as Ve}from"./stethoscope-A-K_LPxy.js";import{c as se}from"./createLucideIcon-N6tzm2Un.js";import{P as $e}from"./pen-DGGj4rG_.js";import{T as We}from"./trash-2-Z4I6Po1P.js";import"./index-BL_eMPu4.js";import"./index-5XPp9efM.js";import"./utils-Cdwu_oFC.js";import"./Combination-ISuQ_xQH.js";import"./index-CRjh3eQV.js";import"./index-CY8IRa4h.js";import"./search-ChUklpMm.js";import"./index-Cr3H45Mb.js";import"./hash-ClIj3HX8.js";import"./tag-D8RE2Neb.js";import"./label-NZo9JiVO.js";import"./chevron-up-BUeMeEpP.js";import"./chevron-down-Bg1NyQiV.js";import"./trending-up-BSb2s_vS.js";import"./square-pen-C36HxSSM.js";import"./format-Dp3w_Y3x.js";import"./select-Bp0DYyHk.js";import"./index-BmPn7Lwa.js";import"./index--okc8Vo6.js";import"./index-DCywbQWC.js";import"./textarea-jcbswd-T.js";import"./calendar-Cuf42Q_b.js";import"./file-text-DBglxC-6.js";import"./user-Bb2n0Bds.js";import"./popover-BIfx8ZGr.js";import"./isBefore-COsor6RJ.js";import"./isSameMonth-BOwz-_mK.js";import"./chart-column-CiikRwbO.js";import"./download-ZdelglHL.js";import"./avatar-DR8jdQ6Z.js";import"./separator-EejHWyjq.js";import"./moment-C5S46NFB.js";import"./TextInput-C9ts9yz-.js";import"./x-WD8D1oTF.js";import"./settings-BUMfHos0.js";import"./house-CN2yX4Rb.js";import"./users-iGWvnA2p.js";import"./pusher-DEnIMZ5J.js";import"./printer-BDlHu9zT.js";import"./circle-check-big-Zb2g8Xok.js";import"./bell-DlOxtFpN.js";import"./autoprefixer-BIT3PBFo.js";import"./Toaster-pNr1bo4r.js";import"./toast-EtdnZLk1.js";import"./layers-Bzb0wQ0B.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ze=se("Box",He);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Ge=se("RefreshCcw",ze),jt=({categories:M=[],inventory:l,movements_:te})=>{const[u,_]=a.useState([]),[f,ae]=a.useState(l),[B,re]=a.useState([]),[c,r]=a.useState(l);a.useEffect(()=>{l&&(ae(l),r(l),console.log("inventory:",l))},[l]);const{flash:le}=Se().props;a.useEffect(()=>{v.reload({only:["inventory"]})},[le]);const[ie,oe]=a.useState(null),[ne,U]=a.useState(!1),[ce,q]=a.useState(!1),[y,C]=a.useState(null),[j,O]=a.useState("all"),[A,R]=a.useState("All"),w=l.filter(s=>s.stock[0].stocks<=5),k=f.filter(s=>s?.stocks_movement?.[s?.stocks_movement?.length-1]?.expiry_date&&new Date(s?.stocks_movement?.[s?.stocks_movement?.length-1]?.expiry_date).getTime()-new Date().getTime()<30*24*60*60*1e3),de=s=>{r(s),C(null),O("all")},me=s=>{C(s),r(f.filter(o=>o.category.id==s))};a.useEffect(()=>{c&&console.log(c)},[c]);const xe=s=>{O(s),C(null),s==="all"?r(f):s==="low"?r(w):s==="expiring"?r(k):s==="master"&&(r(u),R("All"))},he=s=>{R(s),r(s==="All"?u:u.filter(o=>o.category===s))},V=s=>{oe(s),U(!0)},pe=s=>{re([...B,s]),_(updatedItems),r(o=>j==="all"&&!y?updatedItems:j==="low"?updatedItems.filter(t=>t.quantity<=t.reorderThreshold):j==="expiring"?updatedItems.filter(t=>t.expirationDate&&new Date(t.expirationDate).getTime()-new Date().getTime()<30*24*60*60*1e3):j==="master"?A==="All"?updatedItems:updatedItems.filter(t=>t.category===A):y?updatedItems.filter(t=>t.category===y):o.map(t=>updatedItems.find(ke=>ke.id===t.id)||t))},N=s=>0,[$,T]=a.useState(!1),{data:W,setData:D,post:ge,processing:L,errors:ue,clearErrors:fe,put:je,delete:ye}=Ie({categoryname:""});a.useEffect(()=>{fe()},[$]);const Ne=s=>{s.preventDefault(),ge(route("admin.inventory.category"),{onSuccess:()=>{T(!1)},onFinish:()=>{v.reload({only:["flash","categories"]})}})},[ve,S]=a.useState(!1),[be,I]=a.useState(!1),[i,F]=a.useState(null);a.useEffect(()=>{i&&D("categoryname",i.name)},[i]);const Ce=s=>{s.preventDefault(),ye(route("admin.inventory.category.delete",{category:i?.id}),{onFinish:()=>{v.reload({only:["categories"]})},onSuccess:()=>{S(!1),F(null)}})},we=s=>{s.preventDefault(),je(route("admin.inventory.category.update",{category:i?.id}),{onFinish:()=>{v.reload({only:["flash","categories"]})},onSuccess:()=>{I(!1)}})};return e.jsxs(Pe,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs("div",{className:" mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Inventory"}),e.jsx("p",{className:"text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[e.jsxs(n,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Advanced Filters"]}),e.jsxs(n,{className:"flex items-center gap-2 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",onClick:()=>q(!0),children:[e.jsx(X,{className:"h-4 w-4"}),"Add New Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs(m,{className:"hover:shadow-md transition-all duration-300 border-gray-100 hover:shadow-gray-200/50",children:[e.jsx(x,{className:"pb-3",children:e.jsxs(h,{className:"text-sm font-medium flex items-center gap-2 text-gray-600",children:[e.jsx(b,{className:"h-4 w-4"}),"Total Items"]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l.length}),e.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:e.jsx(b,{className:"h-6 w-6 text-blue-600"})})]})})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(m,{className:"hover:shadow-md transition-shadow duration-200 border-gray-100",children:[e.jsx(x,{className:"pb-3",children:e.jsxs(h,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Categories"]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:M.length}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(Y,{className:"h-6 w-6 text-green-600"})})]})})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(m,{className:"hover:shadow-md transition-all duration-300 border-gray-100 hover:shadow-gray-200/50",children:[e.jsx(x,{className:"pb-3",children:e.jsxs(h,{className:"text-sm font-medium flex items-center gap-2 text-gray-600",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Low Stock Items"]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-600",children:w.length}),e.jsx("div",{className:"p-3 rounded-lg bg-amber-50",children:e.jsx(qe,{className:"h-6 w-6 text-amber-600"})})]})})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsxs(m,{className:"hover:shadow-md transition-all duration-300 border-gray-100 hover:shadow-gray-200/50",children:[e.jsx(x,{className:"pb-3",children:e.jsxs(h,{className:"text-sm font-medium flex items-center gap-2 text-gray-600",children:[e.jsx(ee,{className:"h-4 w-4"}),"Expiring Soon"]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:k.length}),e.jsx("div",{className:"p-3 rounded-lg bg-red-50",children:e.jsx(ee,{className:"h-6 w-6 text-red-600"})})]})})]})})]}),e.jsx(Me,{items:f,onSearch:de}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs(Z,{value:j,onValueChange:xe,className:"mb-6",children:[e.jsxs(z,{className:"bg-white border-gray-200",children:[e.jsx(d,{value:"all",children:"Master List"}),e.jsxs(d,{value:"low",children:["Low Stock",w.length>0&&e.jsx(g,{variant:"destructive",className:"ml-2",children:w.length})]}),e.jsxs(d,{value:"expiring",children:["Expiring Soon",k.length>0&&e.jsx(g,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-800",children:k.length})]})]}),e.jsx(Ee,{value:"master",className:"mt-6",children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{className:"text-xl",children:"Master List"})}),e.jsx(p,{children:e.jsxs(Z,{value:A,onValueChange:he,className:"mb-6",children:[e.jsxs(z,{className:"grid md:grid-cols-2 lg:grid-cols-5 lg w-full",children:[e.jsxs(d,{value:"All",className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"All",e.jsx(g,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(d,{value:"Medicine",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Medicines",e.jsx(g,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(d,{value:"Vaccine",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"Vaccines",e.jsx(g,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(d,{value:"Equipment",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Equipment",e.jsx(g,{variant:"secondary",className:"ml-1",children:N()})]}),e.jsxs(d,{value:"Supply",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Supplies",e.jsx(g,{variant:"secondary",className:"ml-1",children:N()})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.map(s=>e.jsx(Ae,{item:s,onUpdateClick:V},s.id)),c.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 border rounded-lg bg-muted/20",children:e.jsx("p",{className:"text-muted-foreground",children:"No items match your search criteria"})})]})})]})})]})})]}),e.jsxs(K,{className:"flex items-center gap-2",onClick:()=>{v.reload({only:["inventory"]})},children:[e.jsx(Ge,{className:"h-4 w-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(h,{className:"text-lg",children:[e.jsxs("div",{className:"flex justify-between space-x-2 mt-4 md:mt-0",children:[e.jsx("div",{children:"Categories"}),e.jsxs(n,{className:"flex items-center gap-2 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",onClick:()=>T(!0),children:[e.jsx(X,{className:"h-4 w-4"}),"Add"]})]}),e.jsx(P,{isOpen:$,onClose:()=>{T(!1)},title:"Add Category",description:"Add Category for Inventory.",maxWidth:"sm",children:e.jsxs("form",{onSubmit:Ne,children:[e.jsx(_e,{errors:ue}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(J,{value:"Category Name:"}),e.jsx(G,{value:W.categoryname,onChange:s=>D("categoryname",s.target.value)})]}),e.jsx(K,{disabled:L,className:"self-end mt-2 text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",type:"submit",children:"Save"})]})]})})]})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{variant:y===null?"default":"outline",className:"w-full justify-start",onClick:()=>{C(null),r(f)},children:"All Categories"}),M.map((s,o)=>e.jsx(n,{variant:y===s.id?"default":"outline",className:"w-full justify-start",onClick:()=>me(s.id),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"flex-1 truncate text-left",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:t=>{t.preventDefault(),F(s),I(!0)},className:"p-1 text-gray-500 hover:text-blue-500 transition-colors",children:e.jsx($e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:t=>{t.preventDefault(),F(s),S(!0)},className:"p-1 text-gray-500 hover:text-red-500 transition-colors",children:e.jsx(We,{className:"h-4 w-4"})})]})]})},o)),e.jsx(P,{isOpen:ve,onClose:s=>{S(!1)},title:`Deleting category ${i?.name}`,description:`Are you sure you want to delete ${i?.name} Category?`,maxWidth:"md",children:e.jsxs(Q,{className:"pt-4",children:[e.jsx(n,{type:"button",variant:"outline",onClick:s=>{S(!1)},children:"Cancel"}),e.jsx(n,{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white",disabled:L,onClick:Ce,children:"Delete Category"})]})}),e.jsxs(P,{isOpen:be,onClose:s=>{I(!1)},title:`Updating category ${i?.name}`,description:`Update ${i?.name} Category here.`,maxWidth:"md",children:[e.jsxs("div",{className:" w-full",children:[e.jsx(J,{value:"Category Name:"}),e.jsx(G,{value:W.categoryname,onChange:s=>D("categoryname",s.target.value)})]}),e.jsxs(Q,{className:"pt-4",children:[e.jsx(n,{variant:"outline",onClick:s=>{I(!1)},children:"Cancel"}),e.jsx(n,{className:"text-white",style:{backgroundColor:"#2C3E50"},onMouseEnter:s=>s.target.style.backgroundColor="#34495E",onMouseLeave:s=>s.target.style.backgroundColor="#2C3E50",disabled:L,onClick:we,children:"Update Category"})]})]})]})})]}),e.jsxs(m,{className:"mt-6",children:[e.jsx(x,{children:e.jsx(h,{className:"text-lg",children:"Recent Activity"})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:B.slice(0,5).map((s,o)=>{const t=u.find(H=>H?.id===s?.itemId);return e.jsxs("div",{className:"border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("p",{className:"font-medium",children:[s.type==="incoming"?"Added":"Removed"," ",s.quantity," ",t?.unit,"s of"," ",t?.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.performedBy," on"," ",new Date(s.date).toLocaleDateString()]})]},o)})})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:j!=="master"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Inventory Items"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.length," items"]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:c.length>0?c.map(s=>e.jsx(Te,{item:s,onUpdateClick:V},s.id)):e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(b,{className:"h-12 w-12 text-gray-300"}),e.jsx("div",{className:"font-medium text-gray-500",children:"No items found"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Try adjusting your search or filter criteria"})]})})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Le,{items:f,movements:te})}),e.jsx(De,{open:ne,onClose:()=>U(!1),item:ie,onSave:pe}),e.jsx(Fe,{open:ce,onClose:()=>q(!1),onSave:s=>{_([...u,s]),r([...u,s])},categories:M})]})};export{jt as default};
