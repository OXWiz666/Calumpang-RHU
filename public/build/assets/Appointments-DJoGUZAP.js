import{r as n,P as U,q as D,j as e,b as L}from"./app-DuLxrX2Z.js";import{A as X}from"./AdminLayout-Dd3cqqQK.js";import{B as Y}from"./button-PbZdagMz.js";import{C as P,a as Z,b as ee,c as se,d as te,e as re}from"./card-BZ5fTebW.js";import"./input-B1EwyuQs.js";import{A as ae,a as ie,b as le}from"./avatar-Dq7lpNs7.js";import{B as c}from"./badge-Bh8zTANJ.js";import{S as B,a as F,b as E,c as R,d as o}from"./select-Bd5zNBQr.js";import{C as ne}from"./CustomModal-Bb9EsuaG.js";import{S as ce,T as oe,a as de,b as I,c as m,d as me,e as x}from"./table2-CLA2bE1H.js";import{P as M}from"./PrimaryButton-B5kz31Po.js";import{I as xe}from"./InputError-Dj5Hz2Tx.js";import{m as ue}from"./pusher-pGMCbsxR.js";import{F as he}from"./filter-rLstACyb.js";import{E as pe}from"./eye-CcEviPr5.js";import{C as je}from"./chevron-left-BgmpXRBA.js";import{C as fe}from"./chevron-right-chOZ9abH.js";import"./utils-Dj6f_zdA.js";import"./separator-0hKhmWkA.js";import"./index-DRcehWuf.js";import"./index-Cf0J13Fd.js";import"./index-Cl4K-4si.js";import"./index-DyGeZTdz.js";import"./index-CfnhcZ4y.js";import"./moment-C5S46NFB.js";import"./dialog-CJiLjFaG.js";import"./Combination-8mhf9Lqp.js";import"./react-icons.esm-BGFUALzJ.js";import"./label-vEQQ_cy_.js";import"./popover-B9_ayl12.js";import"./format-BtYX0kVO.js";import"./isBefore-CNJkrGzj.js";import"./isSameMonth-CLqEvLGB.js";import"./index-B9iz2qru.js";import"./TextInput-DHdVZ6P8.js";import"./createLucideIcon-DUtIsnS9.js";import"./x-MAKR3aNX.js";import"./settings-BSv1z8WR.js";import"./calendar-CC476wFt.js";import"./users-zjYtFU4T.js";import"./bell-BZXgxru2.js";import"./autoprefixer-CYemfg6g.js";import"./search-CN_BrFci.js";import"./layers-CdhSlbba.js";import"./chart-column-Cp8pXRhU.js";import"./index-dJ3Dmghy.js";import"./arrow-up-CE9XsDiQ.js";function ps({appointments_:d}){var S,b,C,y;const[j,K]=n.useState(d.data),[f,ge]=n.useState(""),[h,O]=n.useState("all"),[l,ve]=n.useState({key:"date",direction:"ascending"});[...j.filter(s=>{var a;const t=((a=s.user)==null?void 0:a.firstname.toLowerCase().includes(f.toLowerCase()))||s.user_id.toLowerCase().includes(f.toLowerCase()),r=h==="all"||s.status===h;return t&&r})].sort((s,t)=>{const r=s[l.key],a=t[l.key];if(r==null)return l.direction==="ascending"?-1:1;if(a==null)return l.direction==="ascending"?1:-1;if(typeof r=="string"&&typeof a=="string"){const u=r.toLowerCase().localeCompare(a.toLowerCase());return l.direction==="ascending"?u:-u}return r<a?l.direction==="ascending"?-1:1:r>a?l.direction==="ascending"?1:-1:0});const k=s=>{switch(s){case 2:return e.jsx(c,{className:"bg-green-600",children:"Completed"});case 1:return e.jsx(c,{className:"bg-blue-500",children:"Scheduled"});case 3:return e.jsx(c,{className:"bg-red-500",children:"Cancelled"});case 4:return e.jsx(c,{className:"bg-red-600",children:"Declined"});case 5:return e.jsx(c,{className:"bg-green-500",children:"Confirmed"});case 6:return e.jsx(c,{className:"bg-blue-600",children:"Pending"});default:return e.jsx(c,{children:s})}},H=()=>e.jsx(e.Fragment,{}),[V,g]=n.useState(!1),[i,z]=n.useState({}),{data:_,setData:v,processing:q,errors:W,post:$}=U({status:null}),G=(s,t)=>{fetch(`/auth/appointment/get/${t}`).then(r=>r.json()).then(r=>{z(r),v("status",r.status)}),g(!0)},N=s=>{g(!1)},{inertia:Se}=D();n.useEffect(()=>{K(d.data)},[d]);const J=s=>{s.preventDefault(),$(route("admin.appointment.status.update",{appointment:i.id}),{onSuccess:()=>{N(),alert_toast("Success!","Status updated successfully!","success"),L.reload({only:["appointments_"]})}})},{links:Q}=D().props.appointments_;return e.jsxs(X,{header:"Appointments",tools:H(),children:[e.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"All Appointments"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Filter by:"})]}),e.jsxs(B,{value:h,onValueChange:O,children:[e.jsx(F,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Status"})}),e.jsxs(R,{children:[e.jsx(o,{value:"all",children:"All Statuses"}),e.jsx(o,{value:1,children:"Scheduled"}),e.jsx(o,{value:2,children:"Completed"}),e.jsx(o,{value:3,children:"Cancelled"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx(ce,{data:j,defaultSort:{key:"user.firstname",direction:"asc"},children:({sortedData:s})=>e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(I,{children:[e.jsx(m,{sortKey:"user.firstname",sortable:!0,children:"Patient"}),e.jsx(m,{sortKey:"date",children:"Date & Time"}),e.jsx(m,{children:"Doctor"}),e.jsx(m,{sortKey:"service.servicename",children:"Purpose"}),e.jsx(m,{sortKey:"status",children:"Status"}),e.jsx(m,{children:"Actions"})]})}),e.jsxs(me,{children:[s.length<=0&&e.jsx("div",{className:" m-5",children:"No Records Available."}),s.map((t,r)=>{var a,u,w,A,T;return e.jsxs(I,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ae,{children:[e.jsx(ie,{alt:(a=t.user)==null?void 0:a.firstname}),e.jsx(le,{children:(u=t.user)==null?void 0:u.firstname.split(" ").map(p=>p[0]).join("")})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[(w=t.user)==null?void 0:w.firstname," ",(A=t.user)==null?void 0:A.lastname]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.user_id})]})]})}),e.jsxs(x,{children:[e.jsx("div",{className:"font-medium",children:new Date(t.date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.time})]}),e.jsx(x,{children:"Not Set"}),e.jsx(x,{children:(T=t.service)==null?void 0:T.servicename}),e.jsx(x,{children:k(t.status)}),e.jsx(x,{className:"",children:e.jsx(M,{onClick:p=>{G(p,t.id)},className:" m-1",children:e.jsx(pe,{})})})]},r)})]})]})})})]}),e.jsxs(P,{className:"  mt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",d.from," to ",d.to," of"," ",d.total," Results"]}),e.jsx("div",{className:"flex ml-2 space-x-2",children:Q.map((s,t)=>e.jsx(Y,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url||s.active,onClick:()=>{s.url&&L.get(s.url)},children:s.label.includes("Previous")?e.jsx(je,{className:"h-4 w-4"}):s.label.includes("Next")?e.jsx(fe,{className:"h-4 w-4"}):s.label},t))})]})]}),e.jsxs(ne,{isOpen:V,hasCancel:!0,onClose:N,maxWidth:"2xl",canceltext:"Okay",savetext:"",children:[e.jsx(Z,{children:"Appointment Details"}),e.jsx(ee,{}),e.jsxs(se,{children:[e.jsx(te,{}),e.jsx(re,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsxs("p",{className:"text-gray-900",children:[(S=i.user)==null?void 0:S.firstname," ",(b=i.user)==null?void 0:b.lastname]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Service"}),e.jsx("p",{className:"text-gray-900",children:(C=i.service)==null?void 0:C.servicename})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:i.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Time"}),e.jsx("p",{className:"text-gray-900",children:i.time})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:(y=i.user)==null?void 0:y.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:i.phone})]})]})})]}),e.jsxs(P,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:"Status:"})}),e.jsxs(B,{value:_.status,onValueChange:s=>{v("status",s)},id:"axz",children:[e.jsx(F,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Status"})}),e.jsxs(R,{children:[e.jsx(o,{value:1,children:"Scheduled"}),e.jsx(o,{value:5,children:"Confirm"}),e.jsx(o,{value:4,children:"Decline"})]})]}),e.jsx(M,{disabled:q,onClick:J,children:"Save"})]})}),e.jsx(xe,{message:W.status})]})]})]})}export{ps as default};
